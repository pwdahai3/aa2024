{"version":3,"sources":["webpack:///src/components/cmonitor/edit.vue","webpack:///./src/components/cmonitor/edit.vue?6d08","webpack:///src/components/cmonitor/cmonitor.vue","webpack:///./src/components/cmonitor/edit.vue","webpack:///./src/components/cmonitor/cmonitor.vue?3eb1","webpack:///./src/components/cmonitor/cmonitor.vue"],"names":["edit","loading","Boolean","Object","this","mailSubject","v","arr","componentName","nodeName","subComponentName","enableDaemon","enableNotification","_this2","recAdress","cmonitor_edit","render","_vm","_h","$createElement","_c","_self","attrs","title","visible","isShow2","width","before-close","closePop","on","update:visible","$event","ref","model","recipientsForm","label-width","rules","recipientsFormRules","_l","item","index","key","label","$t","prop","required","message","trigger","pattern","staticStyle","placeholder","value","callback","$$v","$set","trim","expression","_v","click","addRecipients","staticClass","delRecipients","type","addFn","_s","directives","name","rawName","staticRenderFns","cmonitor","getCStatusList","data","shadow","cdata","editrec","__webpack_require__","normalizeComponent","cmonitor_cmonitor","items","index0","keys","csData","_m","item2","index2","subComponentNameTxt","status","active-color","inactive-color","change","daemonChange","font-size","href","viewrec","isshow2","pdata2","setClose","updateRec","min-width","cmonitor_Component","cmonitor_normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/37.13fa4c4bbb0a9e9dd250.js","sourcesContent":["<template>\r\n    <div>\r\n    <el-dialog title=\"编辑收件人\" :visible.sync=\"isShow2\" width=\"55%\" :before-close=\"closePop\">\r\n      <el-form :model=\"recipientsForm\" ref=\"recipientsForm\" label-width=\"90px\" :rules=\"recipientsFormRules\">\r\n        <div v-for=\"(item,index) in recipientsForm.recipients\" :key=\"index\">\r\n          <el-form-item :label=\"index==0?$t('lg.recipient'):''\" :prop=\"'recipients.' + index + '.recAdress'\" :rules=\"[{required: true, message: $t('lg.required'), trigger: 'blur'},{pattern:/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/,message: $t('lg.invalidemail'), trigger: 'blur'}]\">\r\n            <el-input v-model.trim=\"item.recAdress\" :placeholder=\"$t('lg.recipientadd')\" style=\"width:50%\"></el-input>\r\n            <span @click=\"addRecipients()\" :title=\"$t('lg.addrecipient')\"><i class=\"el-icon-circle-plus-outline cursor-pointer\"></i></span>\r\n            <span @click=\"delRecipients(index)\" :title=\"$t('lg.deleterecipient')\"><i class=\"el-icon-close cursor-pointer\"></i></span>\r\n          </el-form-item>\r\n        </div>\r\n        <el-form-item :label=\"$t('lg.emailtitle')\" prop=\"mailSubject\">\r\n          <el-input v-model=\"recipientsForm.mailSubject\" :placeholder=\"$t('lg.emailtitle')\" style=\"width:100%\"></el-input>\r\n        </el-form-item>\r\n         <el-form-item>\r\n          <el-button type=\"primary\" @click=\"addFn()\">{{$t('lg.save')}}</el-button>\r\n          <el-button @click=\"closePop()\">{{$t('lg.cancel')}}</el-button>\r\n        </el-form-item>     \r\n      </el-form>  \r\n      <loading v-show=\"editloading\" title=\"数据处理中...\"></loading>\r\n    </el-dialog>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\nimport { SERVER_API_URL } from \"@/conf/constvar\";\r\nimport loading from '@/components/loading/loading';\r\nexport default {\r\n  components:{\r\n    loading\r\n  },\r\n    props:{\r\n        isShow2:{\r\n            type:Boolean\r\n        },\r\n        data:{\r\n            type:Object\r\n        }\r\n    },\r\n    data(){\r\n        return{\r\n            recipientsForm:{ \r\n                recipients:[{\r\n                recAdress:''\r\n                }],\r\n                mailSubject:'',\r\n                componentName: \"\",\r\n                nodeName: \"\",\r\n                subComponentName: \"\",\r\n                enableDaemon: false,\r\n                enableNotification: false\r\n            },\r\n            recipientsFormRules:{},\r\n            editloading:false\r\n        }     \r\n    },\r\n    watch: {\r\n        \"data\":function(){\r\n            var _this=this;\r\n            if(_this.data.params){\r\n                let arr=[];\r\n                _this.recipientsForm.mailSubject=_this.data.params.mailSubject;\r\n                _this.data.params.mailRecipient.forEach((v,i)=>{\r\n                    arr.push({\r\n                        recAdress:v\r\n                    })\r\n                });\r\n                _this.recipientsForm.recipients=arr;\r\n            }\r\n            _this.recipientsForm.componentName=_this.data.componentName;\r\n            _this.recipientsForm.nodeName=_this.data.nodeName;\r\n            _this.recipientsForm.subComponentName=_this.data.subComponentName;\r\n            _this.recipientsForm.enableDaemon=_this.data.enableDaemon;\r\n            _this.recipientsForm.enableNotification=_this.data.enableNotification;\r\n        }\r\n    },\r\n    methods: {\r\n        closePop(){\r\n            this.recipientsForm={ \r\n                recipients:[{\r\n                recAdress:''\r\n                }],\r\n                mailSubject:''\r\n            };\r\n            this.$emit('setClose',false)\r\n        },\r\n        addRecipients(){\r\n            this.recipientsForm.recipients.push({\r\n                recAdress:''\r\n            })\r\n        },\r\n        delRecipients(index){\r\n            if(this.recipientsForm.recipients.length>1){\r\n                this.recipientsForm.recipients.splice(index,1);\r\n            }\r\n        },\r\n        addFn(){\r\n            let _this=this;\r\n            this.editloading=true;\r\n            let url=SERVER_API_URL+\"/monitoring/component\";\r\n            let arr=[];\r\n            for(let i=0;i<_this.recipientsForm.recipients.length;i++){\r\n                arr.push(_this.recipientsForm.recipients[i].recAdress)\r\n            }\r\n            let data=[{\r\n                \"componentName\": _this.recipientsForm.componentName,\r\n                \"nodeName\": _this.recipientsForm.nodeName,\r\n                \"subComponentName\": _this.recipientsForm.subComponentName,\r\n                \"enableDaemon\": _this.recipientsForm.enableDaemon,\r\n                \"params\" : {\r\n                    \"mailRecipient\" :arr,\r\n                    \"notificationType\" : \"email\",\r\n                    \"mailSubject\" : _this.recipientsForm.mailSubject\r\n                }\r\n            }];\r\n            axios.post(url,data).then((res)=>{\r\n                if(res.data.responseCode==0){\r\n                    _this.$emit(\"updateRec\")\r\n                     _this.$message({\r\n                        type: 'success',\r\n                        message: _this.$t('lg.success')\r\n                    });\r\n                    _this.recipientsForm={ \r\n                            recipients:[{\r\n                            recAdress:''\r\n                            }],\r\n                            mailSubject:''\r\n                        };\r\n                    _this.$emit('setClose',false)\r\n                }else{\r\n                    _this.$message.error(_this.$t('lg.failed'));\r\n                }\r\n                this.editloading=false;\r\n            })\r\n        }\r\n    }\r\n}\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/cmonitor/edit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-dialog',{attrs:{\"title\":\"编辑收件人\",\"visible\":_vm.isShow2,\"width\":\"55%\",\"before-close\":_vm.closePop},on:{\"update:visible\":function($event){_vm.isShow2=$event}}},[_c('el-form',{ref:\"recipientsForm\",attrs:{\"model\":_vm.recipientsForm,\"label-width\":\"90px\",\"rules\":_vm.recipientsFormRules}},[_vm._l((_vm.recipientsForm.recipients),function(item,index){return _c('div',{key:index},[_c('el-form-item',{attrs:{\"label\":index==0?_vm.$t('lg.recipient'):'',\"prop\":'recipients.' + index + '.recAdress',\"rules\":[{required: true, message: _vm.$t('lg.required'), trigger: 'blur'},{pattern:/^([a-z0-9_\\.-]+)@([\\da-z\\.-]+)\\.([a-z\\.]{2,6})$/,message: _vm.$t('lg.invalidemail'), trigger: 'blur'}]}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},attrs:{\"placeholder\":_vm.$t('lg.recipientadd')},model:{value:(item.recAdress),callback:function ($$v) {_vm.$set(item, \"recAdress\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.recAdress\"}}),_vm._v(\" \"),_c('span',{attrs:{\"title\":_vm.$t('lg.addrecipient')},on:{\"click\":function($event){_vm.addRecipients()}}},[_c('i',{staticClass:\"el-icon-circle-plus-outline cursor-pointer\"})]),_vm._v(\" \"),_c('span',{attrs:{\"title\":_vm.$t('lg.deleterecipient')},on:{\"click\":function($event){_vm.delRecipients(index)}}},[_c('i',{staticClass:\"el-icon-close cursor-pointer\"})])],1)],1)}),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.emailtitle'),\"prop\":\"mailSubject\"}},[_c('el-input',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('lg.emailtitle')},model:{value:(_vm.recipientsForm.mailSubject),callback:function ($$v) {_vm.$set(_vm.recipientsForm, \"mailSubject\", $$v)},expression:\"recipientsForm.mailSubject\"}})],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.addFn()}}},[_vm._v(_vm._s(_vm.$t('lg.save')))]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.closePop()}}},[_vm._v(_vm._s(_vm.$t('lg.cancel')))])],1)],2),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.editloading),expression:\"editloading\"}],attrs:{\"title\":\"数据处理中...\"}})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-0acab65c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/cmonitor/edit.vue\n// module id = null\n// module chunks = ","<!-- 组件监控 -->\r\n<template>\r\n    <div class=\"cmonitor-wrapper\">\r\n        <div class=\"cmonitor-cm-wrapper\" v-for=\"(items,index0) in csData\" :key=\"index0\" >\r\n            <h2 class=\"cm-title\">{{index0}} {{(Object.keys(csData))[index0]}}</h2>\r\n            <!-- <div v-if=\"Object.keys(cmdata).length==0\" class=\"nodata-box\">\r\n                暂无数据\r\n            </div> -->\r\n            <div v-for=\"(item,index) in items\" :key=\"index\" class=\"cm-box\">\r\n                <h3 class=\"cm-node-name\">{{index}} {{(Object.keys(items))[index]}}</h3>\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <!-- <th>ID</th> -->\r\n                            <th  style=\"min-width:200px\">子组件名称</th>\r\n                            <th>状态</th>\r\n                            <th style=\"width:100px\">监控守护进程</th>\r\n                            <th style=\"width:100px\">开启邮件通知</th>                           \r\n                            <th style=\"width:100px\">收件人</th>\r\n                        </tr>                    \r\n                    </thead>\r\n                    <tbody>\r\n                        <tr v-for=\"(item2,index2) in item\">\r\n                            <!-- <td>{{item2.id}}</td> -->\r\n                            <td>{{item2.subComponentNameTxt || item2.subComponentName}}</td>\r\n                            <td v-if=\"item2.status=='running'\"><div class=\"lds-grid\"><div class=\"green\"></div></div></td>\r\n                            <td v-else>\r\n                                <div class=\"lds-grid\"><div class=\"red\"></div></div>\r\n                                <div class=\"error-status\">{{item2.status}}</div>\r\n                            </td>\r\n                            <td v-if=\"item2.subComponentName=='shadow' || item2.subComponentName=='keepalived'\"></td>\r\n                            <td v-else>\r\n                                <el-switch\r\n                                    @change=\"daemonChange(item2)\"\r\n                                    v-model=\"item2.enableDaemon\"\r\n                                    active-color=\"#34a01f\"\r\n                                    inactive-color=\"#dcdfe6\">\r\n                                </el-switch>\r\n                            </td>\r\n                            <td>\r\n                                <el-switch\r\n                                    @change=\"daemonChange(item2)\"\r\n                                    v-model=\"item2.enableNotification\"\r\n                                    active-color=\"#34a01f\"\r\n                                    inactive-color=\"#dcdfe6\">\r\n                                </el-switch>\r\n                            </td>\r\n                            \r\n                            <td style=\"font-size:12px;\"><a href=\"javascript:;\"  @click=\"viewrec(item2)\">编辑查看</a></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>            \r\n        </div>\r\n        <editrec :isShow2=\"isshow2\" :data=\"pdata2\" @setClose=\"isshow2=false;pdata2={}\" @updateRec=\"getCStatusList\"></editrec>\r\n    </div>\r\n</template>\r\n<script>\r\nimport axios from \"axios\";\r\nimport { SERVER_API_URL } from \"@/conf/constvar\";\r\nimport editrec from '@/components/cmonitor/edit';\r\nexport default {\r\n    created(){\r\n        this.$store.state.contentLoading=true;\r\n        this.getCStatusList()\r\n    },\r\n    data(){\r\n        return{\r\n            csData:{},\r\n            // cmdata:'',\r\n            // shadowdata:'',\r\n            isshow:false,\r\n            isshow2:false,\r\n            pdata:{},\r\n            pdata2:{}\r\n        }\r\n    },\r\n    methods: {\r\n        getCStatusList(){\r\n            let _this=this;\r\n            \r\n            let url=SERVER_API_URL+\"/monitoring/component\";\r\n            axios.get(url).then((res)=>{\r\n              // console.log(res)\r\n              if(res.data.responseCode==0){\r\n                  let cdata=res.data.data;\r\n                  const shadowObj = cdata.shadow;\r\n                \r\n                  for(var i in shadowObj){\r\n                    shadowObj[i].forEach(ele => {//shadow 里面 filebeat、keepalived、metricbeat 显示给用户分别为：shadow log、cluster、shadow metric\r\n                      if(ele.subComponentName==\"filebeat\"){\r\n                        ele.subComponentNameTxt = \"shadow log\";\r\n                      }else if(ele.subComponentName==\"keepalived\"){\r\n                        ele.subComponentNameTxt = \"cluster\";\r\n                      }else if(ele.subComponentName==\"metricbeat\"){\r\n                        ele.subComponentNameTxt = \"shadow metric\";\r\n                      }\r\n                    });\r\n                  }\r\n                  \r\n                  _this.csData=cdata;\r\n                  // console.log(cdata);\r\n                  // _this.cmdata=cdata.cm;\r\n                  // _this.shadowdata=cdata.shadow;\r\n                }\r\n                _this.$store.state.contentLoading=false;\r\n            })\r\n        },\r\n        daemonChange(item){\r\n            let _this=this;\r\n            let url=SERVER_API_URL+\"/monitoring/component\";\r\n            let data=[{\r\n                \"componentName\": item.componentName,\r\n                \"nodeName\": item.nodeName,\r\n                \"subComponentName\": item.subComponentName,\r\n                \"enableDaemon\": item.enableDaemon,\r\n                \"enableNotification\": item.enableNotification\r\n            }];\r\n            axios.post(url,data).then((res)=>{\r\n                if(res.data.responseCode==0){\r\n                     _this.$message({\r\n                        type: 'success',\r\n                        message: _this.$t('lg.success')\r\n                    });\r\n                }else{\r\n                    _this.$message.error(_this.$t('lg.failed'));\r\n                }\r\n            })\r\n        },\r\n        viewrec(item){\r\n            this.pdata2=item;\r\n            this.isshow2=true;\r\n        }\r\n    },\r\n    components:{\r\n        editrec\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.cmonitor-wrapper{\r\n  padding: 15px;\r\n}\r\n.cmonitor-cm-wrapper{\r\n  padding:12px 20px 20px 20px;\r\n  border:1px solid #ccc;\r\n  background: #f9f9f9;margin-bottom: 20px;\r\n}\r\n.cm-title{\r\n  font-size: 18px;margin-bottom: 12px; font-weight: 500; margin-bottom: 30px;\r\n}\r\n.cm-box{\r\n  padding:30px 20px; border: 1px dashed #ccc; position: relative;background: #fff;margin-bottom: 16px;\r\n}\r\n.cm-node-name{ font-size: 18px; font-weight: 500;position: absolute; left: 12px; top: -18px; background: #fff; padding:6px 10px;border: 1px dashed #ccc;}\r\n.error-status{ color: #ae412c}\r\ntable tbody tr td{padding: 12px}\r\n.lds-grid {\r\n  display: inline-block;\r\n  position: relative;\r\n  width: 20px;\r\n  height: 20px;\r\n}\r\n.lds-grid div {\r\n  width: 16px;\r\n  height: 16px;\r\n  border-radius: 50%;\r\n  animation: lds-grid 1.2s linear infinite;\r\n  }\r\n.lds-grid div.green{\r\nbackground: #155708;\r\n}\r\n.lds-grid div.red{\r\nbackground: #85220e;\r\n}\r\n\r\n@keyframes lds-grid {\r\n  0%, 100% {\r\n    opacity: 1;\r\n  }\r\n  50% {\r\n    opacity: 0.6;\r\n  }\r\n}\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/components/cmonitor/cmonitor.vue","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./edit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-0acab65c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./edit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cmonitor/edit.vue\n// module id = null\n// module chunks = ","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"cmonitor-wrapper\"},[_vm._l((_vm.csData),function(items,index0){return _c('div',{key:index0,staticClass:\"cmonitor-cm-wrapper\"},[_c('h2',{staticClass:\"cm-title\"},[_vm._v(_vm._s(index0)+\" \"+_vm._s((Object.keys(_vm.csData))[index0]))]),_vm._v(\" \"),_vm._l((items),function(item,index){return _c('div',{key:index,staticClass:\"cm-box\"},[_c('h3',{staticClass:\"cm-node-name\"},[_vm._v(_vm._s(index)+\" \"+_vm._s((Object.keys(items))[index]))]),_vm._v(\" \"),_c('table',[_vm._m(0,true),_vm._v(\" \"),_c('tbody',_vm._l((item),function(item2,index2){return _c('tr',[_c('td',[_vm._v(_vm._s(item2.subComponentNameTxt || item2.subComponentName))]),_vm._v(\" \"),(item2.status=='running')?_c('td',[_vm._m(1,true)]):_c('td',[_vm._m(2,true),_vm._v(\" \"),_c('div',{staticClass:\"error-status\"},[_vm._v(_vm._s(item2.status))])]),_vm._v(\" \"),(item2.subComponentName=='shadow' || item2.subComponentName=='keepalived')?_c('td'):_c('td',[_c('el-switch',{attrs:{\"active-color\":\"#34a01f\",\"inactive-color\":\"#dcdfe6\"},on:{\"change\":function($event){_vm.daemonChange(item2)}},model:{value:(item2.enableDaemon),callback:function ($$v) {_vm.$set(item2, \"enableDaemon\", $$v)},expression:\"item2.enableDaemon\"}})],1),_vm._v(\" \"),_c('td',[_c('el-switch',{attrs:{\"active-color\":\"#34a01f\",\"inactive-color\":\"#dcdfe6\"},on:{\"change\":function($event){_vm.daemonChange(item2)}},model:{value:(item2.enableNotification),callback:function ($$v) {_vm.$set(item2, \"enableNotification\", $$v)},expression:\"item2.enableNotification\"}})],1),_vm._v(\" \"),_c('td',{staticStyle:{\"font-size\":\"12px\"}},[_c('a',{attrs:{\"href\":\"javascript:;\"},on:{\"click\":function($event){_vm.viewrec(item2)}}},[_vm._v(\"编辑查看\")])])])}))])])})],2)}),_vm._v(\" \"),_c('editrec',{attrs:{\"isShow2\":_vm.isshow2,\"data\":_vm.pdata2},on:{\"setClose\":function($event){_vm.isshow2=false;_vm.pdata2={}},\"updateRec\":_vm.getCStatusList}})],2)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('thead',[_c('tr',[_c('th',{staticStyle:{\"min-width\":\"200px\"}},[_vm._v(\"子组件名称\")]),_vm._v(\" \"),_c('th',[_vm._v(\"状态\")]),_vm._v(\" \"),_c('th',{staticStyle:{\"width\":\"100px\"}},[_vm._v(\"监控守护进程\")]),_vm._v(\" \"),_c('th',{staticStyle:{\"width\":\"100px\"}},[_vm._v(\"开启邮件通知\")]),_vm._v(\" \"),_c('th',{staticStyle:{\"width\":\"100px\"}},[_vm._v(\"收件人\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lds-grid\"},[_c('div',{staticClass:\"green\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"lds-grid\"},[_c('div',{staticClass:\"red\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4cbc29d6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/cmonitor/cmonitor.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4cbc29d6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./cmonitor.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cmonitor.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./cmonitor.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4cbc29d6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./cmonitor.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4cbc29d6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/cmonitor/cmonitor.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}