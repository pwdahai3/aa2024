{"version":3,"sources":["webpack:///src/components/quickConfig/quickConfig.vue","webpack:///./src/components/quickConfig/quickConfig.vue?482c","webpack:///./src/components/quickConfig/quickConfig.vue"],"names":["Base64","__webpack_require__","quickConfig","loading","pattern","message","this","$t","trigger","required","getShadowNodes","data","err","shadownodes","getPems","then","submitQuickConfig","ip_v46","checkedTactics","ipWeight","ipPort","push","defineProperty_default","myTactics","checkList","snodeId","domainName","domainPort","remark","uphttp","serverData","keys","diplomas","addLocation","locationName","lcBotconf","_ref3","_this7","shadownodesform","domainform","domain","_ref4","_this8","locationform","locationType","directivesArr","res","botConf","quickConfig_quickConfig","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","active","currentStep","finish-status","title","description","directives","name","rawName","value","expression","ref","model","label-width","rules","shadownodesformRules","label","prop","staticStyle","width","placeholder","callback","$$v","$set","_l","n","isShadowGroup","hostName","domainformRules","_s","trim","http","on","visible-change","getCrts","item","_e","getKeys","min","ipLabelWidth","position","index","key","click","$event","delDomainBox","addDomainBox","locationformRules","disabled","lcbotconfform","lcbotconfformRules","lastStep","type","nextStep","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/26.eb3fab07636b16770f62.js","sourcesContent":["<template>\r\n  <div class=\"quickconfig-wrapper\">\r\n    <h2 class=\"breadcrumb\">快速配置向导</h2>\r\n    <div class=\"form-bg\">\r\n      <el-steps :active=\"currentStep\" finish-status=\"success\">\r\n        <el-step title=\"步骤 1\"  description=\"选择节点\"></el-step>\r\n        <el-step title=\"步骤 2\" description=\"添加业务\"></el-step>\r\n        <el-step title=\"步骤 3\" description=\"创建被保护对象\"></el-step>\r\n        <el-step title=\"步骤 4\" description=\"配置扫描工具防御功能\"></el-step>\r\n      </el-steps>\r\n    </div>\r\n\r\n    <ul class=\"stepContent\">\r\n      <li v-show=\"currentStep==1\" ><!-- 步骤一 选择节点 -->\r\n        <h2 class=\"stepTitle\">选择要新增配置的节点</h2>\r\n        <el-form ref=\"shadownodesform\" :model=\"shadownodesform\" label-width=\"110px\" :rules=\"shadownodesformRules\" class=\"orderBoxJamb\">\r\n          <el-form-item :label=\"$t('lg.shadownode')\" prop=\"shadownodes\">\r\n            <el-select v-model=\"shadownodesform.shadownodes\" :placeholder=\"$t('lg.select')\" style=\"width:50%\">\r\n              <template v-for=\"n in nodesdata\">\r\n                <el-option :label=\"n.isShadowGroup?n.hostName+'(集群)':n.hostName+'('+n.snodeId+')'\" :value=\"n.snodeId\"></el-option>\r\n              </template>\r\n            </el-select>\r\n          </el-form-item>\r\n        </el-form>\r\n      </li>\r\n      <li v-show=\"currentStep==2\"> <!-- 步骤二 添加domain -->\r\n        <h2 class=\"stepTitle\">为选择的节点添加业务</h2>\r\n        <el-form ref=\"domainform\" :model=\"domainform\" label-width=\"90px\" :rules=\"domainformRules\" class=\"domainformBox\">\r\n          <div class=\"outBorder box1\">\r\n            <span class=\"titleSpan qkConfigtitleSpan\">{{$t('lg.externalserviceconf')}}</span>\r\n            <el-form-item :label=\"$t('lg.httpout')\">\r\n              <el-select v-model=\"domainform.http\" style=\"width:100%\">\r\n                <template>\r\n                  <el-option label=\"http\" value=\"http\"></el-option>\r\n                  <el-option label=\"https\" value=\"https\"></el-option>\r\n                </template>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item :label=\"$t('lg.bsdomain')\" prop=\"domain\">\r\n              <el-input v-model.trim=\"domainform.domain\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item :label=\"$t('lg.bsport')\" prop=\"domainPort\">\r\n              <el-input v-model.trim=\"domainform.domainPort\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"备注\" prop=\"remark\">\r\n              <el-input v-model.trim=\"domainform.remark\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item :label=\"$t('lg.selectcer')\" prop=\"diplomas\" v-if=\"domainform.http=='https'\">\r\n              <el-select v-model=\"domainform.diplomas\" :placeholder=\"$t('lg.selectcer')\" @visible-change='getCrts'>\r\n                <template v-for=\"item in diplomas\">\r\n                  <el-option :label=\"item.name\" :value=\"item.name\"></el-option>\r\n                </template>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item :label=\"$t('lg.selectsec')\" prop=\"keys\" v-if=\"domainform.http=='https'\">\r\n              <el-select v-model=\"domainform.keys\" :placeholder=\"$t('lg.selectsec')\" @visible-change='getKeys'>\r\n                <template v-for=\"item in keys\">\r\n                  <el-option :label=\"item.name\" :value=\"item.name\"></el-option>\r\n                </template>\r\n              </el-select>\r\n            </el-form-item>\r\n            <el-form-item>\r\n                  <el-checkbox-group v-model=\"domainform.checkList\" :min=\"1\">\r\n                    <el-checkbox label=\"ipv4\">IPV4</el-checkbox>\r\n                    <el-checkbox label=\"ipv6\">IPV6</el-checkbox>\r\n                  </el-checkbox-group>\r\n            </el-form-item>\r\n\r\n          </div>\r\n\r\n          <div class=\"outBorder box2\">\r\n            <span class=\"titleSpan qkConfigtitleSpan\">{{$t('lg.internalserviceconf')}}</span>\r\n            <el-form-item :label=\"$t('lg.httpin')\" :label-width=\"ipLabelWidth\">\r\n              <el-select v-model=\"domainform.innerHttp\" style=\"width:100%\">\r\n                <template>\r\n                  <el-option label=\"http\" value=\"http\"></el-option>\r\n                  <el-option label=\"https\" value=\"https\"></el-option>\r\n                </template>\r\n              </el-select>\r\n            </el-form-item>\r\n\r\n            <div style=\"position: relative;\">\r\n              <div class=\"inBorder\" v-for='(item,index) in domainform.configArray' :key=\"index\">    \r\n                <span class=\"delIp\" @click=\"delDomainBox(index)\"><i class=\"el-icon-close\"></i></span>  \r\n                <el-form-item label=\"IP\" :label-width=\"ipLabelWidth\" :prop=\"'configArray.' + index + '.ip'\" :rules=\"[{required: true, message: $t('lg.required'), trigger: 'blur'}, {pattern:/^([\\w\\-. *!$@?^()<>{}[\\]=%&:\\;/~+#`,])+$/, message: $t('lg.invalidformat'), trigger: 'blur'}]\"><!--既能输域名又能输IP //不能输入中文、单双引号及少部分特殊字符 有空格-->\r\n                  <el-input v-model.trim=\"item.ip\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('lg.port')\" :label-width=\"ipLabelWidth\" :prop=\"'configArray.' + index + '.ipPort'\" :rules=\"[{required: true, message: $t('lg.required'), trigger: 'blur'},{pattern:/^([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/,message: $t('lg.invalidport'), trigger: 'change'}]\">\r\n                  <el-input v-model.trim=\"item.ipPort\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item :label=\"$t('lg.weights')\" :label-width=\"ipLabelWidth\" v-if=\"checkedTactics=='ip_weight'\" :prop=\"'configArray.' + index + '.ipWeight'\" :rules=\"[{required: true, message:$t('lg.required'), trigger: 'blur'},{pattern:/^[0-9]+$/,message: $t('lg.requirepositive'), trigger: 'change'}]\">\r\n                  <el-input v-model.trim=\"item.ipWeight\"></el-input>\r\n                </el-form-item>\r\n              </div>\r\n              <span class=\"addIp\" @click=\"addDomainBox\" :title=\"$t('lg.addmoreinternalbs')\"><i class=\"el-icon-circle-plus-outline\"></i></span>\r\n            </div>\r\n\r\n            <!-- 负载均衡策略 -->\r\n            <el-form-item :label=\"$t('lg.balancestrategy')\" label-width=\"120px\">\r\n              <el-radio-group v-model=\"checkedTactics\">\r\n                <el-radio v-for=\"item in ipTactics\" :label=\"item.value\" :key=\"item.value\">{{item.name}}</el-radio>\r\n              </el-radio-group>\r\n            </el-form-item>\r\n          </div>   \r\n        </el-form>\r\n      </li>\r\n      <li v-show=\"currentStep==3\"><!-- 步骤三 创建location -->\r\n        <h2 class=\"stepTitle\">给新增的业务创建通用保护对象</h2>\r\n        <el-form ref=\"locationform\" :model=\"locationform\" :rules=\"locationformRules\" label-width=\"145px\" class=\"orderBoxJamb\">\r\n          <el-form-item :label=\"$t('lg.matchtype')\" prop=\"locationType\">\r\n            <el-select v-model=\"locationform.locationType\" :placeholder=\"$t('lg.matchtype')\">\r\n              <!-- <el-option :label=\"$t('lg.exactmatch')\" value=\"accurateMatch\"></el-option>\r\n              <el-option :label=\"$t('lg.suffixmatch')\" value=\"suffixMatch\"></el-option>\r\n              <el-option :label=\"$t('lg.patchmatch')\" value=\"pathMatch\"></el-option>\r\n              <el-option :label=\"$t('lg.dynamicurl')\" value=\"dynamicMatch\"></el-option> -->\r\n              <el-option label=\"通用匹配\" value=\"/\"></el-option>\r\n            </el-select>\r\n            <!-- <el-checkbox v-model=\"actChecked\" v-if=\"isShowchecked\">动态URL</el-checkbox> -->\r\n          </el-form-item>\r\n          <el-form-item :label=\"$t('lg.protectedpos')\" prop=\"locationName\">\r\n            <el-input v-model.trim=\"locationform.locationName\" :disabled=\"locationform.locationType=='/'\" style=\"width:50%\"></el-input>\r\n          </el-form-item>\r\n        </el-form>\r\n      </li>\r\n      <li v-show=\"currentStep==4\"><!-- 步骤四 设置location高级配置 扫描工具防御 -->\r\n        <h2 class=\"stepTitle\">配置通用保护对象的扫描工具防御功能</h2>\r\n        <el-form ref=\"lcbotconfform\" :model=\"lcbotconfform\" :rules=\"lcbotconfformRules\"  label-width=\"170px\" class=\"orderBoxJamb\">\r\n          <el-form-item label=\"开启扫描工具防御功能\" prop=\"botconfVal\">\r\n            <el-switch v-model=\"lcbotconfform.botconfVal\"></el-switch>\r\n          </el-form-item>\r\n        </el-form>\r\n      </li>\r\n    </ul>\r\n\r\n    <div class=\"stepBtn\">\r\n      <el-button @click=\"lastStep\" :disabled=\"currentStep==1\">上一步</el-button>\r\n      <el-button type=\"primary\" @click=\"nextStep\">{{currentStep==4?'完成':'下一步'}}</el-button>\r\n    </div>\r\n\r\n    <loading v-show=\"quickConfigLoading\"></loading>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport {SERVER_API_URL} from '@/conf/constvar';\r\nimport loading from '@/components/loading/loading';\r\nlet Base64 = require('js-base64').Base64;\r\nexport default {\r\n  components:{\r\n    loading\r\n  },\r\n  data(){\r\n    return{\r\n      quickConfigLoading:false,\r\n\r\n      currentStep:1,//当前所在步骤\r\n      stepFormList:['shadownodesform','domainform','locationform','lcbotconfform'],//所有表单\r\n      currentForm:'shadownodesform',//当前表单\r\n\r\n      //步骤一\r\n      shadownodesform:{ \r\n        shadownodes:''\r\n      },\r\n      nodesdata:[],\r\n      shadownodesformRules:{\r\n        shadownodes:[{ required: true, message: this.$t('lg.required'), trigger: 'change' }]\r\n      },\r\n\r\n      //步骤二\r\n      domainform:{\r\n        http:'http',\r\n        domain: '',\r\n        domainPort: 80,\r\n        remark:'',\r\n        diplomas:'',\r\n        keys:'',\r\n        innerHttp:'http',\r\n        configArray:[{\r\n          ip:'',\r\n          ipPort:'',\r\n          ipWeight:''\r\n        }],\r\n        checkList: ['ipv4']\r\n      },\r\n      domainformRules:{\r\n        domain:[//既能输域名又能输IP\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n          {pattern:/^([\\w\\-.\" \\\\*!$@?^()<>{}[\\]=%&:;/~+#`,])+$/, message: this.$t('lg.invalidformat'), trigger: 'blur'} //不能输入中文、单引号及少部分特殊字符 有空格\r\n        ],\r\n        domainPort:[\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n          {pattern:/^([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/,message: this.$t('lg.invalidport'), trigger: 'change'}//端口正则\r\n        ],\r\n        diplomas:[\r\n          {required:true, message:this.$t('lg.select'), trigger:'blur'},\r\n        ],\r\n        keys:[\r\n          {required:true, message:this.$t('lg.select'), trigger:'blur'},\r\n        ]\r\n      },\r\n      crts:[],\r\n      diplomas:[],//证书 pems 和 crts 证书的合并\r\n      keys:[],//秘钥 查询key文件\r\n      // 负载均衡\r\n      checkedTactics:'polling',\r\n      ipTactics:[{\r\n        value:'polling',\r\n        name:this.$t('lg.polling')\r\n      },{\r\n        value:'least_conn',\r\n        name:this.$t('lg.leastcon')\r\n      },{\r\n        value:'ip_weight',\r\n        name:this.$t('lg.weights')\r\n      },{\r\n        value:'ip_hash',\r\n        name:'ip_hash'\r\n      },{\r\n        value:'xxf_hash',\r\n        name:'xff_hash'\r\n      }],\r\n      ipLabelWidth:'100px',\r\n\r\n      // 步骤三\r\n      locationform:{\r\n        locationType:'/',\r\n        locationName:'/',\r\n      },\r\n      locationformRules:{\r\n        locationType:[ \r\n          { required: true, message: this.$t('lg.required'), trigger: 'change' }\r\n        ],\r\n        locationName:[\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n        ]\r\n      },\r\n\r\n      // 步骤四\r\n      lcbotconfform:{\r\n        botconfVal:false\r\n      },\r\n      lcbotconfformRules:{\r\n        botconfVal:[\r\n          // {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n        ]\r\n      },\r\n    }\r\n  },\r\n  created(){\r\n    this.getShadowNodes();\r\n  },\r\n  watch:{\r\n    'domainform.http':function(){\r\n      this.domainform.domainPort = this.domainform.http=='https'?443:80;\r\n    }\r\n  },\r\n  methods:{\r\n    //步骤一\r\n    getShadowNodes(){//获取节点\r\n      var _this=this;\r\n      var nodesurl=SERVER_API_URL+\"pe/shadow/snode\";// 查询当前所有业务节点\r\n      axios.get(nodesurl).then((res)=>{\r\n        if(res.data.responseCode == 0){\r\n          _this.nodesdata=res.data.data;\r\n        }else{\r\n          _this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      });\r\n    },\r\n\r\n    //步骤二\r\n    getCrts(callback){//证书管理 查询crt文件\r\n      if(!callback) return false\r\n      const snodeId=this.shadownodesform.shadownodes;\r\n      if(snodeId){\r\n        var url=SERVER_API_URL+\"pe/file/client/\"+snodeId+\"/crt\";\r\n        axios.get(url).then((res)=>{\r\n          if(res.data.responseCode==0){\r\n            this.crts=res.data.data;\r\n            this.getPems();\r\n          }else{\r\n            this.$message.error(this.$t('lg.failed')+': '+ res.data.data.message);\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err)\r\n        });\r\n      }\r\n    },\r\n    getPems(callback){//证书管理 查询pem文件\r\n      const snodeId=this.shadownodesform.shadownodes;\r\n      if(snodeId){\r\n        const url=SERVER_API_URL+\"pe/file/client/\"+snodeId+\"/pem\";\r\n        axios.get(url).then((res)=>{\r\n          if(res.data.responseCode==0){\r\n            const pems=res.data.data;\r\n            this.diplomas = this.crts.concat(pems);//合并crt、pem证书传入shadowpop.vue\r\n          }else{\r\n            this.$message.error(this.$t('lg.failed')+': '+ res.data.data.message);\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err)\r\n        });\r\n      }\r\n    },\r\n    getKeys(callback){//证书管理 查询key文件\r\n      if(!callback) return false\r\n      const snodeId=this.shadownodesform.shadownodes;\r\n      if(snodeId){\r\n        const url=SERVER_API_URL+\"pe/file/client/\"+snodeId+\"/key\";\r\n        axios.get(url).then((res)=>{\r\n          if(res.data.responseCode==0){\r\n            this.keys=res.data.data;\r\n          }else{\r\n            this.$message.error(this.$t('lg.failed')+': '+ res.data.data.message);\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err)\r\n        });\r\n      }\r\n    },\r\n    addDomainBox(){//增加更多内部业务\r\n      this.domainform.configArray.push({\r\n        ip:'',\r\n        ipPort:'',\r\n        ipWeight:''\r\n      })\r\n    },\r\n    delDomainBox(index){//删除多个业务添加框，至少保留一个\r\n      if(this.domainform.configArray.length==1){\r\n        return;\r\n      }\r\n      this.domainform.configArray.splice(index,1);\r\n    },\r\n\r\n    //步骤三\r\n\r\n    //步骤四\r\n  \r\n    // ----------------------------------------------------------------\r\n    lastStep(){//上一步\r\n      // console.log(this.currentStep)\r\n      // console.log(this.currentForm)\r\n      this.currentStep>=2?this.currentStep-=1:'';\r\n      this.currentForm=this.stepFormList[this.currentStep-1];\r\n    },\r\n    nextStep(){//下一步\r\n      this.$refs[this.currentForm].validate((valid) => {\r\n        if(valid){\r\n          // console.log(this.currentStep)\r\n          // console.log(this.currentForm)\r\n          if(this.currentStep==4){\r\n            this.$confirm('点击确认即完成了快速配置，是否继续?', '提示', {\r\n              confirmButtonText: '确定',\r\n              cancelButtonText: '取消',\r\n              type: 'success'\r\n            }).then(() => {\r\n              this.submitQuickConfig();\r\n            }).catch(() => {\r\n              this.$message({\r\n                type: 'info',\r\n                message: '已取消操作'\r\n              });          \r\n            });\r\n          }else{\r\n            this.currentStep+=1;\r\n            this.currentForm=this.stepFormList[this.currentStep-1];\r\n          }\r\n        }\r\n      })\r\n    },\r\n    submitQuickConfig(){//完成快速配置，一次需调用多个接口，（必须先调用创建domain的接口生成了domain，才能调用创建location的接口生成location，最后对location插入指令，节点的高级配置接口调用顺序可随意）\r\n      const _this=this;\r\n      _this.quickConfigLoading=true;\r\n      let [snodeId,myhttp,domainName,domainPort,remark,uphttp,domainCmdData,myTactics]=[_this.shadownodesform.shadownodes, _this.domainform.http, _this.domainform.domain, _this.domainform.domainPort,_this.domainform.remark, _this.domainform.innerHttp, [..._this.domainform.configArray], _this.checkedTactics]\r\n\r\n      // 融入负载均衡\r\n      let serverData=[];\r\n      let LoadBalance = '';\r\n      serverData = domainCmdData.map(element=>{\r\n        if(/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(element.ip) && !/^\\[|\\]$/.test(element.ip)){\r\n              element.ip='['+element.ip+']';\r\n            }\r\n        if(myTactics=='ip_weight'){\r\n          LoadBalance = element.ip+':'+element.ipPort+' '+'weight='+element.ipWeight;\r\n          return {\"server\":LoadBalance}\r\n        }else{\r\n          LoadBalance = element.ip+':'+element.ipPort;\r\n          return {\"server\":LoadBalance}\r\n        }\r\n      })\r\n      if(myTactics!=='polling' && myTactics!=='ip_weight'){\r\n        serverData.push({\r\n          [myTactics]:''\r\n        })\r\n      }\r\n      // console.log(serverData)\r\n      var ip_v46;\r\n      var ipv46=_this.domainform.checkList;\r\n      if(ipv46.length==1){\r\n        ip_v46=ipv46[0]\r\n      }else if(ipv46.length==2){\r\n        ip_v46=ipv46[0]+\"|\"+ipv46[1];\r\n      }\r\n\r\n      const domainUrl = SERVER_API_URL+\"pe/shadow/domain\";\r\n      let dataJson = {\r\n        snodeId:snodeId,\r\n        domainName:domainName,\r\n        domainPort:domainPort,\r\n        remark:remark,\r\n        serverScheme:uphttp,\r\n        servers:serverData,\r\n        ssl:'off',\r\n        ipListenConfs:ip_v46\r\n      }\r\n      if(myhttp=='https'){\r\n        dataJson.ssl=\"on\";\r\n        dataJson.key=_this.domainform.keys;\r\n        dataJson.crt=_this.domainform.diplomas;\r\n      }\r\n\r\n      axios.post(domainUrl,dataJson).then((res)=>{\r\n        if(res.data.responseCode==0){\r\n          _this.addLocation();\r\n        }else{\r\n          _this.$message.error(_this.$t('lg.failed')+': ('+_this.$t('lg.rightip')+')'+ res.data.data.message);\r\n        }\r\n      }).catch((err)=>{\r\n        console.log(err)\r\n        _this.$message.error(_this.$t('lg.failed')+': '+ err.response.data.data.message);\r\n      })\r\n    },\r\n    \r\n    addLocation(){//增加被保护的页面\r\n      const _this=this;\r\n      const locationUrl = SERVER_API_URL+\"pe/shadow/domain/location\";\r\n\r\n      let [snodeId,domainName,domainPort,locationType,locationName]=[_this.shadownodesform.shadownodes, _this.domainform.domain, _this.domainform.domainPort, _this.locationform.locationType, _this.locationform.locationName];\r\n\r\n      // if(locationType==\"suffixMatch\"){//如果是后缀匹配 则传入参数时要加入正则\r\n      //   if(locationName==\"/\"){\r\n      //     locationName=\"(.*\\\\/)+$\"              \r\n      //   }else{\r\n      //     locationName=\"\\\\.(\"+locationName+\")$\"\r\n      //   }\r\n      // }\r\n\r\n      let dataJson = {\r\n        snodeId:snodeId,\r\n        domainName:domainName,\r\n        domainPort:domainPort,\r\n        locationType:locationType,\r\n        locationName:locationName,\r\n        waf:'off',//接口要求必须有此值\r\n        wafRuleset:[]//接口要求必须有此值\r\n      }\r\n\r\n      axios.post(locationUrl,dataJson).then((res)=>{\r\n        if(res.data.responseCode==0){\r\n          _this.sdShadowlib().then((resolvedata)=>{\r\n            _this.lcInsertJs().then((resolvedata)=>{\r\n              _this.lcBotconf();\r\n            })\r\n          })\r\n        }else{\r\n          this.$message.error(_this.$t('lg.failed')+':'+ res.data.data.message);\r\n        }\r\n      }).catch((err)=>{\r\n        console.log(err);\r\n      });\r\n    },\r\n\r\n    // 三个高级配置接口不能用promise.all 同时调用（同时更改配置文件会出错）\r\n    sdShadowlib(){//节点的Js配置选项\r\n      return new Promise((resolve,reject)=>{\r\n        let [snodeId,domainName] = [this.shadownodesform.shadownodes, this.domainform.domain];\r\n        const sdLibUrl = SERVER_API_URL+\"pe/shadow/config/shadowlib/\"+snodeId;\r\n        let shadowlibObj = {};\r\n      //  const targetKey= (domainName.split('.').join('_')).split(':').join('_');// ‘_’取代用户输入域名里的‘.’\r\n      let targetKey=Base64.encode(domainName);\r\n        shadowlibObj[targetKey]={\r\n          \"aclick\": false,\r\n          \"crossdomain\": \"\",\r\n          \"bodye\": false,\r\n          \"isws\": false,\r\n          \"acookieorencpyt\": false\r\n        };\r\n        axios.patch(sdLibUrl,shadowlibObj).then((res)=>{\r\n          if(res.data.responseCode==0){\r\n            resolve(true);\r\n          }else{\r\n            this.$message.error(this.$t('lg.failed')+':'+ res.data.data.message);\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err);\r\n        })\r\n      })\r\n    },\r\n    lcInsertJs(){//location的js增强功能 (默认配置成：增强插入)\r\n      return new Promise((resolve,reject)=>{\r\n        let [snodeId,domainName,domainPort,locationType,locationName] = [this.shadownodesform.shadownodes, this.domainform.domain, this.domainform.domainPort, this.locationform.locationType, this.locationform.locationName];\r\n\r\n        // if(locationType==\"suffixMatch\"){//如果是后缀匹配 则传入参数时要加入正则\r\n        //   if(locationName==\"/\"){\r\n        //     locationName=\"(.*\\\\/)+$\"              \r\n        //   }else{\r\n        //     locationName=\"\\\\.(\"+locationName+\")$\"\r\n        //   }\r\n        // }\r\n\r\n        const insertJsUrl = SERVER_API_URL+\"pe/shadow/domain/location/directive\";\r\n        const str = Base64.encode(\"pe 10s 1 '<head>' '<head><script src=\\\"/formvalidator/' 'config.js' '\\\"><\\/script>'\")\r\n        const str2 = Base64.encode(\"pe 10s 1 '</title>' '</title><script src=\\\"/formvalidator/' 'shadowlib.js' '\\\"><\\/script>'\")\r\n        let directivesArr=[{\r\n              shadow_insert_js_ex:str\r\n            },{\r\n              shadow_insert_js_ex:str2\r\n            }]\r\n        axios.post(insertJsUrl,{\r\n          snodeId:snodeId,\r\n          domainName:domainName,\r\n          domainPort:domainPort,\r\n          locationType:locationType,\r\n          locationName:locationName,\r\n          directives:directivesArr\r\n        }).then((res)=>{\r\n          if(res.data.responseCode==0){\r\n            resolve(true);\r\n          }else{\r\n            this.$message.error(this.$t('lg.failed')+'。输入的指令不匹配，请核对输入内容！'+ res.data.data.message);\r\n          }\r\n        }).catch((err)=>{\r\n          console.log(err);\r\n        })\r\n      })\r\n    },\r\n    lcBotconf(){//locationType 为通用匹配时，要默认开启botconf （扫描工具防御功能）\r\n      let [snodeId,domainName,domainPort,locationType,locationName,botConf] = [this.shadownodesform.shadownodes, this.domainform.domain, this.domainform.domainPort, this.locationform.locationType, this.locationform.locationName, this.lcbotconfform.botconfVal?'on':'off'];\r\n      \r\n      // locationName=locationType=='suffixMatch'?encodeURI(locationName):locationName;\r\n\r\n      const botconfUrl = SERVER_API_URL+\"pe/shadow/domain/location/botconf?snodeId=\"+snodeId+\"&domainName=\"+domainName+\"&domainPort=\"+domainPort+\"&locationName=\"+locationName+\"&locationType=\"+locationType;\r\n      axios.patch(botconfUrl,{\r\n        botConf:botConf,\r\n      }).then((res)=>{\r\n        if(res.data.responseCode==0){\r\n          this.$message({\r\n            type: 'success',\r\n            message: '新的配置已生成！'\r\n          });\r\n        }else{\r\n          this.$message.error(this.$t('lg.failed')+': '+res.data.data.message);\r\n        }\r\n        this.quickConfigLoading=false;\r\n      }).catch((err)=>{\r\n        console.log(err);\r\n      });\r\n    },\r\n    \r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n  .quickconfig-wrapper\r\n    width 100%\r\n    height 100%\r\n    position relative\r\n    padding 15px\r\n    box-sizing border-box\r\n    display flex\r\n    flex-direction: column;\r\n    .stepContent\r\n      flex 1\r\n      overflow-y auto\r\n      overflow-x hidden\r\n      padding 15px\r\n      box-sizing border-box \r\n      background #f7f7f7\r\n      .stepTitle\r\n        font-size 16px\r\n        margin-bottom 15px\r\n        padding-left 8px\r\n      .domainformBox\r\n        display flex\r\n        justify-content space-between\r\n        margin-top 30px\r\n        .outBorder\r\n          padding 35px 20px 1px 0px\r\n          border 1px solid #ccc\r\n          border-radius 5px\r\n          position relative\r\n          .qkConfigtitleSpan\r\n            background #f7f7f7 \r\n        .box1\r\n          width 35%\r\n          margin-right 15px\r\n        .box2\r\n          flex 1\r\n          .el-radio-group\r\n            margin-left 10px\r\n            vertical-align text-top\r\n            .el-radio\r\n              margin: 5px 25px 5px 0px;\r\n          .inBorder\r\n            border 1px dashed #dcdfe6\r\n            padding 20px 20px 1px 0px\r\n            margin-bottom 20px\r\n            margin-left 20px\r\n            position relative\r\n            border-radius 5px\r\n            .delIp\r\n              position absolute\r\n              right 3px\r\n              top 2px\r\n              cursor pointer\r\n          .inBorder:nth-last-of-type(1)\r\n            margin-bottom: 30px;\r\n          .addIp\r\n            display block\r\n            position absolute\r\n            right 3px\r\n            bottom -25px\r\n            cursor pointer\r\n            z-index 1\r\n    .stepBtn\r\n      padding 15px\r\n      box-sizing border-box \r\n      text-align right \r\n      background #f7f7f7 \r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/quickConfig/quickConfig.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"quickconfig-wrapper\"},[_c('h2',{staticClass:\"breadcrumb\"},[_vm._v(\"快速配置向导\")]),_vm._v(\" \"),_c('div',{staticClass:\"form-bg\"},[_c('el-steps',{attrs:{\"active\":_vm.currentStep,\"finish-status\":\"success\"}},[_c('el-step',{attrs:{\"title\":\"步骤 1\",\"description\":\"选择节点\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"步骤 2\",\"description\":\"添加业务\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"步骤 3\",\"description\":\"创建被保护对象\"}}),_vm._v(\" \"),_c('el-step',{attrs:{\"title\":\"步骤 4\",\"description\":\"配置扫描工具防御功能\"}})],1)],1),_vm._v(\" \"),_c('ul',{staticClass:\"stepContent\"},[_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentStep==1),expression:\"currentStep==1\"}]},[_c('h2',{staticClass:\"stepTitle\"},[_vm._v(\"选择要新增配置的节点\")]),_vm._v(\" \"),_c('el-form',{ref:\"shadownodesform\",staticClass:\"orderBoxJamb\",attrs:{\"model\":_vm.shadownodesform,\"label-width\":\"110px\",\"rules\":_vm.shadownodesformRules}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.shadownode'),\"prop\":\"shadownodes\"}},[_c('el-select',{staticStyle:{\"width\":\"50%\"},attrs:{\"placeholder\":_vm.$t('lg.select')},model:{value:(_vm.shadownodesform.shadownodes),callback:function ($$v) {_vm.$set(_vm.shadownodesform, \"shadownodes\", $$v)},expression:\"shadownodesform.shadownodes\"}},[_vm._l((_vm.nodesdata),function(n){return [_c('el-option',{attrs:{\"label\":n.isShadowGroup?n.hostName+'(集群)':n.hostName+'('+n.snodeId+')',\"value\":n.snodeId}})]})],2)],1)],1)],1),_vm._v(\" \"),_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentStep==2),expression:\"currentStep==2\"}]},[_c('h2',{staticClass:\"stepTitle\"},[_vm._v(\"为选择的节点添加业务\")]),_vm._v(\" \"),_c('el-form',{ref:\"domainform\",staticClass:\"domainformBox\",attrs:{\"model\":_vm.domainform,\"label-width\":\"90px\",\"rules\":_vm.domainformRules}},[_c('div',{staticClass:\"outBorder box1\"},[_c('span',{staticClass:\"titleSpan qkConfigtitleSpan\"},[_vm._v(_vm._s(_vm.$t('lg.externalserviceconf')))]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.httpout')}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.domainform.http),callback:function ($$v) {_vm.$set(_vm.domainform, \"http\", $$v)},expression:\"domainform.http\"}},[[_c('el-option',{attrs:{\"label\":\"http\",\"value\":\"http\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"https\",\"value\":\"https\"}})]],2)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.bsdomain'),\"prop\":\"domain\"}},[_c('el-input',{model:{value:(_vm.domainform.domain),callback:function ($$v) {_vm.$set(_vm.domainform, \"domain\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"domainform.domain\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.bsport'),\"prop\":\"domainPort\"}},[_c('el-input',{model:{value:(_vm.domainform.domainPort),callback:function ($$v) {_vm.$set(_vm.domainform, \"domainPort\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"domainform.domainPort\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"备注\",\"prop\":\"remark\"}},[_c('el-input',{model:{value:(_vm.domainform.remark),callback:function ($$v) {_vm.$set(_vm.domainform, \"remark\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"domainform.remark\"}})],1),_vm._v(\" \"),(_vm.domainform.http=='https')?_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.selectcer'),\"prop\":\"diplomas\"}},[_c('el-select',{attrs:{\"placeholder\":_vm.$t('lg.selectcer')},on:{\"visible-change\":_vm.getCrts},model:{value:(_vm.domainform.diplomas),callback:function ($$v) {_vm.$set(_vm.domainform, \"diplomas\", $$v)},expression:\"domainform.diplomas\"}},[_vm._l((_vm.diplomas),function(item){return [_c('el-option',{attrs:{\"label\":item.name,\"value\":item.name}})]})],2)],1):_vm._e(),_vm._v(\" \"),(_vm.domainform.http=='https')?_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.selectsec'),\"prop\":\"keys\"}},[_c('el-select',{attrs:{\"placeholder\":_vm.$t('lg.selectsec')},on:{\"visible-change\":_vm.getKeys},model:{value:(_vm.domainform.keys),callback:function ($$v) {_vm.$set(_vm.domainform, \"keys\", $$v)},expression:\"domainform.keys\"}},[_vm._l((_vm.keys),function(item){return [_c('el-option',{attrs:{\"label\":item.name,\"value\":item.name}})]})],2)],1):_vm._e(),_vm._v(\" \"),_c('el-form-item',[_c('el-checkbox-group',{attrs:{\"min\":1},model:{value:(_vm.domainform.checkList),callback:function ($$v) {_vm.$set(_vm.domainform, \"checkList\", $$v)},expression:\"domainform.checkList\"}},[_c('el-checkbox',{attrs:{\"label\":\"ipv4\"}},[_vm._v(\"IPV4\")]),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"ipv6\"}},[_vm._v(\"IPV6\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticClass:\"outBorder box2\"},[_c('span',{staticClass:\"titleSpan qkConfigtitleSpan\"},[_vm._v(_vm._s(_vm.$t('lg.internalserviceconf')))]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.httpin'),\"label-width\":_vm.ipLabelWidth}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},model:{value:(_vm.domainform.innerHttp),callback:function ($$v) {_vm.$set(_vm.domainform, \"innerHttp\", $$v)},expression:\"domainform.innerHttp\"}},[[_c('el-option',{attrs:{\"label\":\"http\",\"value\":\"http\"}}),_vm._v(\" \"),_c('el-option',{attrs:{\"label\":\"https\",\"value\":\"https\"}})]],2)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"relative\"}},[_vm._l((_vm.domainform.configArray),function(item,index){return _c('div',{key:index,staticClass:\"inBorder\"},[_c('span',{staticClass:\"delIp\",on:{\"click\":function($event){_vm.delDomainBox(index)}}},[_c('i',{staticClass:\"el-icon-close\"})]),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"IP\",\"label-width\":_vm.ipLabelWidth,\"prop\":'configArray.' + index + '.ip',\"rules\":[{required: true, message: _vm.$t('lg.required'), trigger: 'blur'}, {pattern:/^([\\w\\-. *!$@?^()<>{}[\\]=%&:\\;/~+#`,])+$/, message: _vm.$t('lg.invalidformat'), trigger: 'blur'}]}},[_c('el-input',{model:{value:(item.ip),callback:function ($$v) {_vm.$set(item, \"ip\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.ip\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.port'),\"label-width\":_vm.ipLabelWidth,\"prop\":'configArray.' + index + '.ipPort',\"rules\":[{required: true, message: _vm.$t('lg.required'), trigger: 'blur'},{pattern:/^([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/,message: _vm.$t('lg.invalidport'), trigger: 'change'}]}},[_c('el-input',{model:{value:(item.ipPort),callback:function ($$v) {_vm.$set(item, \"ipPort\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.ipPort\"}})],1),_vm._v(\" \"),(_vm.checkedTactics=='ip_weight')?_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.weights'),\"label-width\":_vm.ipLabelWidth,\"prop\":'configArray.' + index + '.ipWeight',\"rules\":[{required: true, message:_vm.$t('lg.required'), trigger: 'blur'},{pattern:/^[0-9]+$/,message: _vm.$t('lg.requirepositive'), trigger: 'change'}]}},[_c('el-input',{model:{value:(item.ipWeight),callback:function ($$v) {_vm.$set(item, \"ipWeight\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"item.ipWeight\"}})],1):_vm._e()],1)}),_vm._v(\" \"),_c('span',{staticClass:\"addIp\",attrs:{\"title\":_vm.$t('lg.addmoreinternalbs')},on:{\"click\":_vm.addDomainBox}},[_c('i',{staticClass:\"el-icon-circle-plus-outline\"})])],2),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.balancestrategy'),\"label-width\":\"120px\"}},[_c('el-radio-group',{model:{value:(_vm.checkedTactics),callback:function ($$v) {_vm.checkedTactics=$$v},expression:\"checkedTactics\"}},_vm._l((_vm.ipTactics),function(item){return _c('el-radio',{key:item.value,attrs:{\"label\":item.value}},[_vm._v(_vm._s(item.name))])}))],1)],1)])],1),_vm._v(\" \"),_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentStep==3),expression:\"currentStep==3\"}]},[_c('h2',{staticClass:\"stepTitle\"},[_vm._v(\"给新增的业务创建通用保护对象\")]),_vm._v(\" \"),_c('el-form',{ref:\"locationform\",staticClass:\"orderBoxJamb\",attrs:{\"model\":_vm.locationform,\"rules\":_vm.locationformRules,\"label-width\":\"145px\"}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.matchtype'),\"prop\":\"locationType\"}},[_c('el-select',{attrs:{\"placeholder\":_vm.$t('lg.matchtype')},model:{value:(_vm.locationform.locationType),callback:function ($$v) {_vm.$set(_vm.locationform, \"locationType\", $$v)},expression:\"locationform.locationType\"}},[_c('el-option',{attrs:{\"label\":\"通用匹配\",\"value\":\"/\"}})],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.protectedpos'),\"prop\":\"locationName\"}},[_c('el-input',{staticStyle:{\"width\":\"50%\"},attrs:{\"disabled\":_vm.locationform.locationType=='/'},model:{value:(_vm.locationform.locationName),callback:function ($$v) {_vm.$set(_vm.locationform, \"locationName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"locationform.locationName\"}})],1)],1)],1),_vm._v(\" \"),_c('li',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentStep==4),expression:\"currentStep==4\"}]},[_c('h2',{staticClass:\"stepTitle\"},[_vm._v(\"配置通用保护对象的扫描工具防御功能\")]),_vm._v(\" \"),_c('el-form',{ref:\"lcbotconfform\",staticClass:\"orderBoxJamb\",attrs:{\"model\":_vm.lcbotconfform,\"rules\":_vm.lcbotconfformRules,\"label-width\":\"170px\"}},[_c('el-form-item',{attrs:{\"label\":\"开启扫描工具防御功能\",\"prop\":\"botconfVal\"}},[_c('el-switch',{model:{value:(_vm.lcbotconfform.botconfVal),callback:function ($$v) {_vm.$set(_vm.lcbotconfform, \"botconfVal\", $$v)},expression:\"lcbotconfform.botconfVal\"}})],1)],1)],1)]),_vm._v(\" \"),_c('div',{staticClass:\"stepBtn\"},[_c('el-button',{attrs:{\"disabled\":_vm.currentStep==1},on:{\"click\":_vm.lastStep}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.nextStep}},[_vm._v(_vm._s(_vm.currentStep==4?'完成':'下一步'))])],1),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.quickConfigLoading),expression:\"quickConfigLoading\"}]})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-dad4afe4\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/quickConfig/quickConfig.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-dad4afe4\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./quickConfig.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./quickConfig.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./quickConfig.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-dad4afe4\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./quickConfig.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-dad4afe4\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/quickConfig/quickConfig.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}