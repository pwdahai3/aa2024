{"version":3,"sources":["webpack:///src/components/apiConfig/objUpdate.vue","webpack:///./src/components/apiConfig/objUpdate.vue?e754","webpack:///./src/components/apiConfig/objUpdate.vue","webpack:///src/components/apiConfig/urlReferConfig.vue","webpack:///./src/components/apiConfig/urlReferConfig.vue?63bc","webpack:///./src/components/apiConfig/urlReferConfig.vue"],"names":["objUpdate","__webpack_require__","Base64","urlReferConfig","timingTaskPop","loading","required","message","this","$t","trigger","query","urlType","domain","getTime","strIntervalUnit","endIntervalUnit","timeStrVal","timeEndVal","getObjData","_this2","_this","start","end","paramDomain","paramType","apiType","data","key","new","refMap","item","isChildNew","itemObj","resultArr","err","label","Date","apiIndicator","domainName","locationName","paramStrTime","lteTimestamp","error","h","event","token","_this5","str","apiConfig_objUpdate","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","ref","staticStyle","padding-bottom","attrs","model","searchObjform","rules","searchObjformRules","label-width","gutter","span","prop","width","placeholder","value","callback","$$v","$set","expression","_l","$store","state","getEsDomainArrLoading","on","visible-change","$event","getDomains","type","icon","click","objTreeNodeData","length","_e","props","objTreeProps","render-content","objRenderContent","forPush","urlDownload","isShowTimingTask","isShow","isShowUrlReferConfigDialog","urlReferConfigTitle","urlReferConfigDialogClose","myTaskType","myTaskTypeTxt","setTimingTaskClose","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","Boolean","String","strTimestamp","esQqueryObj","then","res","resData","buckets","hitsTotal","openFlag","doc_count","urlTagArr","p5","_this3","snode","domains","thisDomain","domainArr","_this4","snodeId","domainPort","lcFlag","port","_this6","requestTimeUnit","verifyBrowser","_str","verifyAgent","_str2","directives","selectSnodeClose","_this7","pushDirective","resetFields","apiConfig_urlReferConfig","title","visible","close-on-click-modal","before-close","urlRfCfDialogClose","update:visible","tag","urlReferConfigfrom","reqeustTime","verifyTokenRate","urlSugConfigfrom","urlSugConfigfromRules","trim","margin-left","selectSnode","selectSnodeShow","shadowNodesform","shadowNodesformRules","change","checkDomainPort","n","isShadowGroup","hostName","name","rawName","noDomainShow","disabled","ensurePushConfig"],"mappings":"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","file":"static/js/10.96c112c8c8005f461592.js","sourcesContent":["<template>\r\n  <div class=\"objUpdate-wrapper\">\r\n    <h2 class=\"breadcrumb\">{{$t('lg.objfx')}}</h2>\r\n    <el-form ref=\"searchObjform\" class=\"form-bg\" style=\"padding-bottom:0\" :model=\"searchObjform\" :rules=\"searchObjformRules\" label-width=\"0\">\r\n      <p class=\"tips tipsBox\">注：此界面提供两个时间段的查询结果的对比。其具体为:‘时间点一’至‘时间点二’的时间段与‘时间点二’至‘当前时间点’的时间段的查询结果对比。</p>\r\n      <el-row :gutter=\"10\">\r\n\r\n        <el-col :span=\"8\">\r\n          <el-form-item prop=\"paramType\">\r\n            <el-select v-model=\"searchObjform.paramType\" :placeholder=\"$t('lg.select')\" style=\"width:100%\">\r\n              <template v-for=\"item in urlTypeArr\">\r\n                <el-option :key=\"item.value\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n              </template>\r\n            </el-select>\r\n            <!-- <el-input v-model.trim=\"searchObjform.paramDomain\" :placeholder=\"$t('lg.inputdomain')\"></el-input> -->\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <el-col :span=\"8\">\r\n          <el-form-item prop=\"paramDomain\">\r\n            <el-select v-model=\"searchObjform.paramDomain\" :placeholder=\"$t('lg.selectdomain')\" @visible-change=\"getDomains($event)\" style=\"width:100%\" :loading=\"$store.state.getEsDomainArrLoading\">\r\n              <template v-for=\"item in $store.state.esDomainArr\">\r\n                <el-option :key=\"item.key\" :label=\"item.key\" :value=\"item.key\"></el-option>\r\n              </template>\r\n            </el-select>\r\n            <!-- <el-input v-model.trim=\"searchObjform.paramDomain\" :placeholder=\"$t('lg.inputdomain')\"></el-input> -->\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <!-- <el-col :span=\"5\">\r\n          <el-form-item prop=\"paramStrTime\">\r\n            <el-date-picker\r\n              v-model=\"searchObjform.paramStrTime\"\r\n              type=\"datetime\"\r\n              placeholder=\"时间点一\"\r\n              style=\"width:100%\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n        </el-col>\r\n\r\n        <el-col :span=\"5\">\r\n          <el-form-item prop=\"paramDeadline\">\r\n            <el-date-picker\r\n              v-model=\"searchObjform.paramDeadline\"\r\n              type=\"datetime\"\r\n              placeholder=\"时间点二\"\r\n              style=\"width:100%\">\r\n            </el-date-picker>\r\n          </el-form-item>\r\n        </el-col> -->\r\n\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" style=\"width:100%\" @click=\"getObjData()\" icon=\"el-icon-search\">{{$t('lg.query')}}</el-button>\r\n        </el-col>\r\n      </el-row>\r\n    </el-form>\r\n\r\n    <!-- 查询结果数据展示 -->\r\n    <div class=\"objtree-tips\" v-if=\"objTreeNodeData.length>0\">\r\n      <p>说明：1、输入域名和时间段，查询出所有新发现的接口。点开接口前面的小三角形，里面是HTTP Referer。表示发现的新接口是从这个页面链接过来的。</p>\r\n      <p>2、蓝色感叹号：表示这个接口的HTTP Referer有一部分是新增的，有一部分是旧的。</p>\r\n      <p>3、蓝色感叹号和红色NEW：表示所有的HTTP Referer都是新增的。</p>\r\n    </div>\r\n    <div class=\"objTreeBox\">\r\n      <el-tree\r\n        :data=\"objTreeNodeData\"\r\n        :props=\"objTreeProps\"\r\n        ref=\"tree\"\r\n        :render-content=\"objRenderContent\"><!--show-checkbox-->\r\n      </el-tree>\r\n    </div>\r\n\r\n    <div class=\"text-right\">\r\n      <el-button type=\"primary\" icon=\"el-icon-setting\" @click=\"forPush()\" v-if=\"objTreeNodeData.length>0\">推送</el-button>\r\n      <el-button type=\"primary\" icon=\"el-icon-download\" @click=\"urlDownload()\" v-if=\"objTreeNodeData.length>0\">下载数据</el-button>\r\n      <!-- <a ref=\"url_download\" href=\"javascript:;\" @click=\"downloadConf()\" class=\"edit-del-a\"><i class=\"el-icon-download\"></i>下载发现的数据</a> -->\r\n      <el-button type=\"success\" icon=\"el-icon-time\" @click=\"isShowTimingTask=true\">{{$t('lg.arrangealerting')}}</el-button>\r\n      <!-- <el-button type=\"primary\" @click=\"showSelectSnode()\">{{$t('lg.checkaddprotectconfig')}}</el-button> -->\r\n    </div>\r\n\r\n    <!-- 查询url的参考配置信息 -->\r\n    <url-refer-config ref=\"urlReferConfig\" :isShow=\"isShowUrlReferConfigDialog\" :urlReferConfigTitle=\"urlReferConfigTitle\" @urlReferConfigDialogClose=\"isShowUrlReferConfigDialog=false\"></url-refer-config>\r\n    \r\n    <!-- 安排报警任务 -->\r\n    <timing-task-pop :isShow=\"isShowTimingTask\" :myTaskType=\"'urlCompare'\" :myTaskTypeTxt=\"$t('lg.objbased')\" @setTimingTaskClose=\"isShowTimingTask=false\"></timing-task-pop>\r\n\r\n    <!-- 选中增加保护配置 -->\r\n    <!-- <el-dialog width=\"45%\" :title=\"$t('lg.addconfiginstruction')\" :visible.sync=\"isShowSnodeDialog\" :close-on-click-modal=\"false\" :before-close=\"snodeDialogClose\">\r\n      <el-form ref=\"snodefrom\" :model=\"snodefrom\" :rules=\"snodefromRules\"  label-width=\"105px\">\r\n        <el-form-item :label=\"$t('lg.domain')\" prop=\"paramDomain\">\r\n          <el-input v-model.trim=\"snodefrom.paramDomain\" :placeholder=\"$t('lg.inputdomain')\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('lg.port')\" prop=\"paramPort\">\r\n          <el-input v-model.trim=\"snodefrom.paramPort\" :placeholder=\"$t('lg.inputdomain')\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item :label=\"$t('lg.shadownode')\" prop=\"shadownodes\">\r\n          <el-select v-model=\"snodefrom.shadownodes\" :placeholder=\"$t('lg.select')\">\r\n            <template v-for=\"item in snodes\">\r\n              <el-option :label=\"item.isShadowGroup?item.hostName+'(集群)':item.hostName+'('+item.snodeId+')'\" :value=\"item.snodeId\"></el-option>\r\n            </template>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"getCheckedNodes\">{{$t('lg.yes')}}</el-button>\r\n          <el-button @click=\"snodeDialogClose\">{{$t('lg.cancel')}}</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div v-show=\"addSubfilterLoading\">\r\n        <loading :title=\"$t('lg.handling')\"></loading>\r\n      </div>\r\n    </el-dialog> -->\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport * as types from '@/store/types';\r\nimport client from \"@/components/es/connection\";\r\nimport {SERVER_API_URL} from '@/conf/constvar';\r\nimport toISO8601 from '@/assets/js/iso8601';\r\nimport loading from '@/components/loading/loading';\r\n\r\nimport urlReferConfig from '@/components/apiConfig/urlReferConfig';\r\nimport timingTaskPop from '@/components/alarmTask/timingTaskPop';\r\n\r\nlet Base64 = require('js-base64').Base64;\r\nexport default {\r\n  components:{\r\n    urlReferConfig,\r\n    timingTaskPop,\r\n    loading\r\n  },\r\n  data(){\r\n    return{\r\n      searchObjform:{\r\n        paramType:1,\r\n        paramDomain:'',\r\n        paramStrTime:'',\r\n        paramDeadline:''\r\n      },\r\n      searchObjformRules:{\r\n        paramType:[\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n        ],\r\n        paramDomain:[\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n        ],\r\n        paramStrTime:[\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n        ],\r\n        paramDeadline:[\r\n          {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n        ]\r\n      },\r\n      urlTypeArr:[\r\n        // {\r\n        //   value:0,\r\n        //   label:'URI白名单'\r\n        // },\r\n        {\r\n          value:1,\r\n          label:'WEB API接口'\r\n        },\r\n        {\r\n          value:0,\r\n          label:'APP API接口'\r\n        }\r\n      ],\r\n\r\n      //查询获取对比结果\r\n      strTimestamp:null,//记录当前查询的参数\r\n      lteTimestamp:null,\r\n      domainName:'',\r\n      apiIndicator:1,\r\n      apiType:1,\r\n\r\n      objTreeNodeData:[],//存储查询回来的结果\r\n      objTreeProps:{\r\n        children: 'children',\r\n        label: 'label'\r\n      },\r\n\r\n      //url的参考配置建议\r\n      isShowUrlReferConfigDialog:false,\r\n      urlReferConfigTitle:'',\r\n\r\n      //安排报警任务\r\n      isShowTimingTask:false,\r\n\r\n      //选中增加保护配置\r\n      // isShowSnodeDialog:false,\r\n      // snodes:'',\r\n      // snodefrom:{\r\n      //   paramDomain:'',\r\n      //   paramPort:'',\r\n      //   shadownodes:''\r\n      // },\r\n      // snodefromRules:{\r\n      //   paramDomain:[\r\n      //     {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n      //   ],\r\n      //   paramPort:[\r\n      //     {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n      //     {pattern:/^([0-9]|[1-9]\\d{1,3}|[1-5]\\d{4}|6[0-5]{2}[0-3][0-5])$/,message: this.$t('lg.invalidport'), trigger: 'change'}//端口正则\r\n      //   ],\r\n      //   shadownodes:[\r\n      //     {required:true, message:this.$t('lg.required'), trigger:'blur'},\r\n      //   ]\r\n      // },\r\n      // addSubfilterLoading:false,\r\n\r\n    }\r\n  },\r\n  mounted(){//这里是：当从报警任务点击查看按钮跳转到这个页面时，把报警任务里面的参数通过router传值传过来，使得它们再作为查询的参数，并把查询的结果展示给用户\r\n    // console.log(this.$route.query);\r\n    if(this.$route.query.domain){\r\n      var paramUrl = this.$route.query;\r\n      this.searchObjform.paramType=paramUrl.urlType;\r\n      this.searchObjform.paramDomain=paramUrl.domain;\r\n      \r\n      var dataNow = new Date().getTime();\r\n      var strIntervalNum = paramUrl.timeStrInterval.match(/(\\d*)(\\w*)/)[1];\r\n      var strIntervalUnit = paramUrl.timeStrInterval.match(/(\\d*)(\\w*)/)[2];\r\n\r\n      var endIntervalNum = paramUrl.timeLteInterval.match(/(\\d*)(\\w*)/)[1];\r\n      var endIntervalUnit = paramUrl.timeLteInterval.match(/(\\d*)(\\w*)/)[2];\r\n\r\n      var timeStrVal = 0, timeEndVal=0;\r\n      switch(strIntervalUnit)\r\n      {\r\n        case \"m\":\r\n        timeStrVal = dataNow - strIntervalNum*60*1000;\r\n        break;\r\n        case \"h\":\r\n        timeStrVal = dataNow - strIntervalNum*60*60*1000;\r\n        break;\r\n        default:\r\n        timeStrVal = dataNow - strIntervalNum*24*60*60*1000;\r\n      };\r\n      switch(endIntervalUnit)\r\n      { \r\n        case \"m\":\r\n        timeEndVal = dataNow - endIntervalNum*60*1000;\r\n        break;\r\n        case \"h\":\r\n        timeEndVal = dataNow - endIntervalNum*60*60*1000;\r\n        break;\r\n        default:\r\n        timeEndVal = dataNow - endIntervalNum*24*60*60*1000;\r\n      };\r\n      this.searchObjform.paramStrTime=new Date(timeStrVal);\r\n      this.searchObjform.paramDeadline=new Date(timeEndVal);\r\n      this.getObjData();\r\n    }\r\n  },\r\n  methods:{\r\n    getDomains(callback){\r\n      if(callback){\r\n        this.searchObjform.paramDomain=\"\";\r\n        this.$store.commit(types.GETESDOMAINS);\r\n      }\r\n    },\r\n    getObjData(){\r\n      this.$refs['searchObjform'].validate((valid)=>{\r\n        if(valid){\r\n          var _this=this;\r\n          _this.$store.state.contentLoading = true;\r\n          let end = new Date().getTime()-3600 * 1000 * 24;\r\n          let start = new Date().getTime() - 3600 * 1000 * 24 * 7;\r\n          _this.strTimestamp=toISO8601(new Date(start));\r\n          _this.lteTimestamp = toISO8601(new Date(end));\r\n          _this.domainName=_this.searchObjform.paramDomain;\r\n        //  _this.apiIndicator=1;\r\n          _this.apiType=_this.searchObjform.paramType;\r\n\r\n          var url = SERVER_API_URL+\"mc/esquery/urlcompare?strTimestamp=\"+_this.strTimestamp+\"&lteTimestamp=\"+_this.lteTimestamp+\"&domainName=\"+_this.domainName+\"&apiIndicator=\"+_this.apiIndicator+\"&apiType=\"+_this.apiType;\r\n          axios.get(url).then((res)=>{\r\n            // console.log(res);\r\n\r\n            if(res.data.responseCode==0){\r\n              var resData = res.data.data;\r\n              var resultArr =[];\r\n              for(var key in resData){\r\n                var itemObj={\r\n                      label:key,\r\n                      new:resData[key].new,\r\n                      children:[]\r\n                    };\r\n                var isChildNew = false; \r\n                var childrenObj = resData[key].refMap;\r\n                for(var item in childrenObj){\r\n                  if(childrenObj[item]){\r\n                    isChildNew=true;\r\n                  }\r\n                  itemObj.children.push({\r\n                    label:item,\r\n                    new:childrenObj[item]\r\n                  })\r\n                }\r\n                itemObj.childNew=isChildNew;\r\n                resultArr.push(itemObj);\r\n              }\r\n              // console.log(resultArr)\r\n              _this.objTreeNodeData=resultArr;\r\n            }else{\r\n              this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n            }\r\n            _this.$store.state.contentLoading = false;\r\n          }).catch((err)=>{\r\n            console.log(err);\r\n          })\r\n        }\r\n      })\r\n    },\r\n\r\n    getUrlReferConfig(data,event){//请求接口 异步 这是调用子组件里的方法\r\n      if(event) event.stopPropagation();//避免点击查看时触发列表展开收缩事件\r\n      const locationName = data.label;\r\n      const lteTimestamp = toISO8601(new Date());\r\n      const referConfigParam={\r\n        apiIndicator:this.apiIndicator,\r\n        domainName:this.domainName,\r\n        locationName:locationName,\r\n       // strTimestamp:this.lteTimestamp,\r\n        strTimestamp:this.searchObjform.paramStrTime,\r\n        lteTimestamp:lteTimestamp\r\n      }\r\n\r\n      this.urlReferConfigTitle=locationName;\r\n\r\n      this.$refs.urlReferConfig.getUrlReferConfigData(referConfigParam).then((resolvedata)=>{//请求接口 异步 这是调用子组件里的方法\r\n        this.isShowUrlReferConfigDialog=true; //打开弹框\r\n      }).catch((error) => {\r\n        this.$message.error(this.$t('lg.failed'));\r\n        console.log(error)\r\n      });\r\n    },\r\n\r\n    objRenderContent(h, { node, data, store }){//重新渲染 自定义节点内容\r\n      // console.log(data)\r\n      if(data.new && data.childNew){\r\n        if(data.children){\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span class=\"nodeTxt\">{node.label}\r\n                <span class=\"el-icon-warning font-blue newPoint\"></span>\r\n                <img class=\"newImg\" src=\"./static/icon/newIcon.png\"/>\r\n              </span>\r\n              <span>\r\n                <el-button size=\"small\" type=\"text\" icon=\"el-icon-search\" on-click={ (event) => this.getUrlReferConfig(data, event) }>配置属性</el-button>\r\n              </span>\r\n            </span>\r\n          );\r\n        }else{\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span class=\"nodeTxt\"> <i class=\"refererTxt\">[ HTTP Referer ]</i> {node.label}\r\n                <span class=\"el-icon-warning font-blue newPoint\"></span>\r\n                <img class=\"newImg\" src=\"./static/icon/newIcon.png\"/>\r\n              </span>\r\n            </span>\r\n          );\r\n        }\r\n      }else if(data.new && !data.childNew){\r\n        if(data.children){\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span class=\"nodeTxt\">{node.label}\r\n                <img class=\"newImg\" src=\"./static/icon/newIcon.png\"/>\r\n              </span>\r\n              <span>\r\n                <el-button size=\"small\" type=\"text\" icon=\"el-icon-search\" on-click={ (event) => this.getUrlReferConfig(data, event) }>配置属性</el-button>\r\n              </span>\r\n            </span>\r\n          );\r\n        }else{\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span class=\"nodeTxt\"> <i class=\"refererTxt\">[ HTTP Referer ]</i> {node.label}\r\n                <img class=\"newImg\" src=\"./static/icon/newIcon.png\"/>\r\n              </span>\r\n            </span>\r\n          );\r\n        }\r\n      }else if(!data.new && data.childNew){\r\n        if(data.children){\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span>{node.label}\r\n                <span class=\"el-icon-warning font-blue newPoint\"></span>\r\n              </span>\r\n              <span>\r\n                <el-button size=\"small\" type=\"text\" icon=\"el-icon-search\" on-click={ (event) => this.getUrlReferConfig(data, event) }>配置属性</el-button>\r\n              </span>\r\n            </span>\r\n          );\r\n        }else{\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span> <i class=\"refererTxt\">[ HTTP Referer ]</i> {node.label}\r\n                <span class=\"el-icon-warning font-blue newPoint\"></span>\r\n              </span>\r\n            </span>\r\n          );\r\n        }\r\n      }else{\r\n        if(data.children){\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span>{node.label}</span>\r\n              <span>\r\n                <el-button size=\"small\" type=\"text\" icon=\"el-icon-search\" on-click={ (event) => this.getUrlReferConfig(data, event) }>配置属性</el-button>\r\n              </span>\r\n            </span>\r\n          );\r\n        }else{\r\n          return (\r\n            <span class=\"obj-tree-node\">\r\n              <span> <i class=\"refererTxt\">[ HTTP Referer ]</i> {node.label}</span>\r\n            </span>\r\n          );\r\n        }\r\n      }\r\n    },\r\n\r\n    //下载发现的数据 方法1\r\n    urlDownload(){\r\n      var _this=this;\r\n      var lteTimestamp = toISO8601(new Date());\r\n      var token = sessionStorage.getItem('mytoken');//下载数据要在下载url里带上授权token\r\n      var url=SERVER_API_URL+\"mc/esquery/urldownload?fromTimestamp=\"+_this.strTimestamp+'&toTimestamp='+lteTimestamp+'&domainName='+_this.domainName+'&apiIndicator='+_this.apiIndicator+\"&access_token=\"+token;\r\n      window.open(url,'_self');\r\n    },\r\n\r\n    forPush(){\r\n      let _this=this;\r\n      let str=\"\";\r\n    //  let str=[];\r\n      for(let i=0;i<_this.objTreeNodeData.length;i++){\r\n        str+=_this.objTreeNodeData[i].label+\",\";\r\n       // str.push(_this.objTreeNodeData[i].label)\r\n      }\r\n      str=str.slice(0,-1);\r\n     let url=SERVER_API_URL+\"pe/shadow/domain/location/urlcompare?domainName=\"+_this.domainName+\"&urlList=\"+str;\r\n     axios.get(url).then((res)=>{\r\n       if(res.data.responseCode == 0){\r\n         this.$message({\r\n                type: \"success\",\r\n                message: _this.$t('lg.success')\r\n              });\r\n       }else{\r\n         this.$message.error(_this.$t('lg.failed'));\r\n       }\r\n     })\r\n\r\n    },\r\n\r\n    //下载发现的数据 方法2\r\n    // downloadConf(){\r\n    //   var _this=this;\r\n    //   var token = sessionStorage.getItem('mytoken');\r\n    //   var lteTimestamp = toISO8601(new Date());\r\n    //   var url=SERVER_API_URL+\"mc/esquery/urldownload?fromTimestamp=\"+_this.strTimestamp+'&toTimestamp='+lteTimestamp+'&domainName='+_this.domainName+'&apiIndicator='+_this.apiIndicator+\"&access_token=\"+token;\r\n    //   var tgElement=_this.$refs.url_download;\r\n    //   tgElement.setAttribute(\"href\",url);\r\n    // },\r\n\r\n\r\n    //推送配置\r\n\r\n    //选中增加保护配置\r\n   // showSelectSnode(){\r\n    //   var _this=this;\r\n    //   var checkArr=this.$refs.tree.getCheckedNodes(false,true);\r\n    //   if(checkArr.length==0){\r\n    //     this.$message.error(_this.$t('lg.leastconfiginstruction'));\r\n    //     return;\r\n    //   }\r\n    //   var url=SERVER_API_URL+\"pe/shadow/snode\";//查询当前所有业务节点\r\n    //   axios.get(url).then((res)=>{\r\n    //     if(res.data.responseCode == 0){\r\n    //       this.snodes=res.data.data;\r\n    //       this.isShowSnodeDialog=true;\r\n    //       this.snodefrom.paramDomain=this.searchObjform.paramDomain;\r\n    //     }else{\r\n    //       this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n    //     }\r\n    //   }).catch((err) => {\r\n    //     console.log(err)\r\n    //   });\r\n    // },\r\n    // snodeDialogClose(){\r\n    //   this.$refs['snodefrom'].resetFields();\r\n    //   this.isShowSnodeDialog=false\r\n    // },\r\n    // getCheckedNodes(){\r\n    //   var _this=this;\r\n    //   this.$refs['snodefrom'].validate((valid)=>{\r\n    //     if(valid){\r\n    //       this.addSubfilterLoading=true;\r\n    //       // console.log(this.$refs.tree.getCheckedNodes(false,true));\r\n    //       var checkArr=this.$refs.tree.getCheckedNodes(false,true);\r\n\r\n    //       var uriMap={},valLabel=\"\";\r\n    //       checkArr.forEach(element => {\r\n    //         if(element.hasOwnProperty(\"childNew\")){\r\n    //           valLabel=element.label;\r\n    //           uriMap[valLabel]=[];\r\n    //         }else{\r\n    //           uriMap[valLabel].push(element.label)\r\n    //         }\r\n    //       });\r\n    //       // console.log(uriMap)\r\n\r\n    //       var url = SERVER_API_URL+\"/pe/shadow/subfilter/location/batch\";\r\n    //       var domainName=this.snodefrom.paramDomain;\r\n    //       var domainPort=this.snodefrom.paramPort;\r\n    //       var snodeId=this.snodefrom.shadownodes;\r\n    //       axios.post(url,{\r\n    //         domainName:domainName,\r\n    //         domainPort:domainPort,\r\n    //         snodeId:snodeId,\r\n    //         uriMap:uriMap\r\n    //       }).then((res)=>{\r\n    //         // console.log(res);\r\n    //         if(res.data.responseCode==0){\r\n    //           this.snodeDialogClose();\r\n    //         }else{\r\n    //           this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n    //         }\r\n    //         this.addSubfilterLoading=false;\r\n    //       }).catch((err)=>{\r\n    //         console.log(err)\r\n    //       })\r\n\r\n    //     }\r\n    //   })\r\n   // }\r\n  }\r\n  \r\n}\r\n</script>\r\n\r\n<style>\r\n.objUpdate-wrapper{\r\n  width: 100%;\r\n  height: 100%;\r\n  position: relative;\r\n  padding: 15px;\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n}\r\n.objtree-tips{\r\n  line-height: 1.6;\r\n  font-size: 12px;\r\n  margin-bottom: 10px\r\n}\r\n.objTreeBox{\r\n  flex: 1;\r\n  overflow-y: auto;\r\n  margin-bottom: 10px\r\n}\r\n.obj-tree-node{\r\n  white-space: normal;\r\n  word-break: break-all;\r\n  margin: 8px;\r\n  line-height: 20px;\r\n  flex: 1;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: space-between;\r\n}\r\n.nodeTxt{\r\n  position: relative;\r\n  margin-right: 30px;\r\n}\r\n.refererTxt{\r\n  font-weight: 600;\r\n}\r\n.newPoint{\r\n  margin-left: 8px;\r\n}\r\n.newImg{\r\n  position: absolute;\r\n  bottom: 0px;\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/apiConfig/objUpdate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"objUpdate-wrapper\"},[_c('h2',{staticClass:\"breadcrumb\"},[_vm._v(_vm._s(_vm.$t('lg.objfx')))]),_vm._v(\" \"),_c('el-form',{ref:\"searchObjform\",staticClass:\"form-bg\",staticStyle:{\"padding-bottom\":\"0\"},attrs:{\"model\":_vm.searchObjform,\"rules\":_vm.searchObjformRules,\"label-width\":\"0\"}},[_c('p',{staticClass:\"tips tipsBox\"},[_vm._v(\"注：此界面提供两个时间段的查询结果的对比。其具体为:‘时间点一’至‘时间点二’的时间段与‘时间点二’至‘当前时间点’的时间段的查询结果对比。\")]),_vm._v(\" \"),_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"prop\":\"paramType\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('lg.select')},model:{value:(_vm.searchObjform.paramType),callback:function ($$v) {_vm.$set(_vm.searchObjform, \"paramType\", $$v)},expression:\"searchObjform.paramType\"}},[_vm._l((_vm.urlTypeArr),function(item){return [_c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})]})],2)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":8}},[_c('el-form-item',{attrs:{\"prop\":\"paramDomain\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('lg.selectdomain'),\"loading\":_vm.$store.state.getEsDomainArrLoading},on:{\"visible-change\":function($event){_vm.getDomains($event)}},model:{value:(_vm.searchObjform.paramDomain),callback:function ($$v) {_vm.$set(_vm.searchObjform, \"paramDomain\", $$v)},expression:\"searchObjform.paramDomain\"}},[_vm._l((_vm.$store.state.esDomainArr),function(item){return [_c('el-option',{key:item.key,attrs:{\"label\":item.key,\"value\":item.key}})]})],2)],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":function($event){_vm.getObjData()}}},[_vm._v(_vm._s(_vm.$t('lg.query')))])],1)],1)],1),_vm._v(\" \"),(_vm.objTreeNodeData.length>0)?_c('div',{staticClass:\"objtree-tips\"},[_c('p',[_vm._v(\"说明：1、输入域名和时间段，查询出所有新发现的接口。点开接口前面的小三角形，里面是HTTP Referer。表示发现的新接口是从这个页面链接过来的。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"2、蓝色感叹号：表示这个接口的HTTP Referer有一部分是新增的，有一部分是旧的。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"3、蓝色感叹号和红色NEW：表示所有的HTTP Referer都是新增的。\")])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"objTreeBox\"},[_c('el-tree',{ref:\"tree\",attrs:{\"data\":_vm.objTreeNodeData,\"props\":_vm.objTreeProps,\"render-content\":_vm.objRenderContent}})],1),_vm._v(\" \"),_c('div',{staticClass:\"text-right\"},[(_vm.objTreeNodeData.length>0)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-setting\"},on:{\"click\":function($event){_vm.forPush()}}},[_vm._v(\"推送\")]):_vm._e(),_vm._v(\" \"),(_vm.objTreeNodeData.length>0)?_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-download\"},on:{\"click\":function($event){_vm.urlDownload()}}},[_vm._v(\"下载数据\")]):_vm._e(),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"success\",\"icon\":\"el-icon-time\"},on:{\"click\":function($event){_vm.isShowTimingTask=true}}},[_vm._v(_vm._s(_vm.$t('lg.arrangealerting')))])],1),_vm._v(\" \"),_c('url-refer-config',{ref:\"urlReferConfig\",attrs:{\"isShow\":_vm.isShowUrlReferConfigDialog,\"urlReferConfigTitle\":_vm.urlReferConfigTitle},on:{\"urlReferConfigDialogClose\":function($event){_vm.isShowUrlReferConfigDialog=false}}}),_vm._v(\" \"),_c('timing-task-pop',{attrs:{\"isShow\":_vm.isShowTimingTask,\"myTaskType\":'urlCompare',\"myTaskTypeTxt\":_vm.$t('lg.objbased')},on:{\"setTimingTaskClose\":function($event){_vm.isShowTimingTask=false}}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-41361cc3\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/apiConfig/objUpdate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-41361cc3\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./objUpdate.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./objUpdate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./objUpdate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-41361cc3\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./objUpdate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/apiConfig/objUpdate.vue\n// module id = null\n// module chunks = ","<!-- url的参考配置 -->\r\n<template>\r\n  <div class=\"urlReferConfig-wrapper\">\r\n    <el-dialog width=\"55%\" :title=\"urlReferConfigTitle\" :visible.sync=\"isShow\" :close-on-click-modal=\"false\" :before-close=\"urlRfCfDialogClose\">\r\n      <div class=\"urlTagBox\">\r\n        <span class=\"titleSpan\">对应标签</span>\r\n        <el-tag\r\n          v-for=\"tag in urlTagData\"\r\n          :key=\"tag.key\">\r\n          {{tag.key}}\r\n        </el-tag>\r\n      </div>\r\n      <div class=\"urlReferConfigBox\">\r\n        <!-- 查询返回的参考配置 -->\r\n        <div class=\"referenceBox\">\r\n          <p class=\"urlRfConfigTitle\">参考配置</p>\r\n          <ul class=\"referParamList\">\r\n            <li>手动代理防御设置：{{urlReferConfigfrom.reqeustTime!=null ? urlReferConfigfrom.reqeustTime+'毫秒' : '暂无匹配值'}}</li>\r\n            <li>浏览器参数指标：{{urlReferConfigfrom.verifyBrowser!=null? urlReferConfigfrom.verifyBrowser : '暂无匹配值' }}</li>\r\n            <li>用户行为指标：{{urlReferConfigfrom.verifyAgent!=null? urlReferConfigfrom.verifyAgent : '暂无匹配值'}}</li>\r\n            <li>动态指纹功能：{{urlReferConfigfrom.verifyTokenRate ? '动态指纹占'+urlReferConfigfrom.verifyTokenRate+'%' : '动态指纹占0%'}}  </li>\r\n            <li></li>\r\n          </ul>\r\n        </div>\r\n        <!-- 建议配置 -->\r\n        <div class=\"suggestBox\">\r\n          <p class=\"urlRfConfigTitle\">建议配置</p>\r\n          <el-form ref=\"urlSugConfigfrom\" :model=\"urlSugConfigfrom\" :rules=\"urlSugConfigfromRules\" label-width=\"125px\">\r\n\r\n            <el-row :gutter=\"10\">\r\n              <el-col :span=\"18\" >\r\n                <el-form-item label=\"手动代理防御设置\" prop=\"reqeustTime\">\r\n                  <el-input v-model.trim=\"urlSugConfigfrom.reqeustTime\" placeholder=\"请输入\"></el-input>\r\n                </el-form-item>\r\n              </el-col> \r\n              <el-col :span=\"6\">\r\n                <el-form-item label-width=\"0px\">\r\n                  <el-select v-model=\"requestTimeUnit\" :placeholder=\"$t('lg.select')\" style=\"width:100%\">\r\n                    <el-option\r\n                      v-for=\"item in rqTimeUnitOpt\"\r\n                      :key=\"item.value\"\r\n                      :label=\"item.label\"\r\n                      :value=\"item.value\">\r\n                    </el-option>\r\n                  </el-select>\r\n                </el-form-item>\r\n              </el-col> \r\n            </el-row> \r\n\r\n            <el-form-item label=\"浏览器参数指标\" prop=\"verifyBrowser\">\r\n              <el-input v-model.trim=\"urlSugConfigfrom.verifyBrowser\" placeholder=\"请输入\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"用户行为指标\" prop=\"verifyAgent\">\r\n              <el-input v-model.trim=\"urlSugConfigfrom.verifyAgent\" placeholder=\"请输入\"></el-input>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"开启动态指纹功能\">\r\n              <el-switch v-model=\"urlSugConfigfrom.verifyToken\"></el-switch><span style=\"margin-left:20px\">(注：动态指纹占比大于10%时建议开启)</span>\r\n            </el-form-item>\r\n\r\n            <el-form-item>\r\n              <el-button type=\"primary\" @click=\"selectSnode()\">推送到节点</el-button>\r\n              <el-button @click=\"urlRfCfDialogClose\">{{$t('lg.cancel')}}</el-button>\r\n            </el-form-item>\r\n          </el-form>\r\n        </div>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 选择推送的节点 -->\r\n    <el-dialog width=\"45%\" :title=\"$t('lg.pushconfig')\" :visible.sync=\"selectSnodeShow\" :close-on-click-modal=\"false\" :before-close=\"selectSnodeClose\">\r\n      <el-form ref=\"shadowNodesform\" :model=\"shadowNodesform\" label-width=\"125px\" :rules=\"shadowNodesformRules\">\r\n        <el-form-item :label=\"$t('lg.shadownode')\" prop=\"snodeId\">\r\n          <el-select v-model=\"shadowNodesform.snodeId\" :placeholder=\"$t('lg.select')\" style=\"width:100%\" @change=\"checkDomainPort(shadowNodesform.snodeId)\">\r\n            <template v-for=\"n in snodeData\">\r\n              <el-option :label=\"n.isShadowGroup?n.hostName+'(集群)':n.hostName+'('+n.snodeId+')'\" :value=\"n.snodeId\"></el-option>\r\n            </template>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <!-- 当前节点下有当前域名才显示 -->\r\n        <el-row :gutter=\"10\" v-show=\"shadowNodesform.snodeId && !noDomainShow\">\r\n          <el-col :span=\"18\" >\r\n            <el-form-item label=\"业务域名\">\r\n              <el-input v-model.trim=\"shadowNodesform.domainName\" disabled></el-input>\r\n            </el-form-item>\r\n          </el-col> \r\n          <el-col :span=\"6\">\r\n            <el-form-item label-width=\"0px\">\r\n              <el-select v-model=\"shadowNodesform.domainPort\" :placeholder=\"$t('lg.select')\" style=\"width:100%\">\r\n                <el-option\r\n                  v-for=\"item in domainData\"\r\n                  :key=\"item.domainPort\"\r\n                  :label=\"item.domainPort\"\r\n                  :value=\"item.domainPort\">\r\n                </el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col> \r\n        </el-row> \r\n\r\n        <el-form-item label=\"被保护对象的位置\" v-show=\"shadowNodesform.snodeId && !noDomainShow\">\r\n          <el-input v-model.trim=\"shadowNodesform.locationName\" disabled></el-input>\r\n        </el-form-item>\r\n\r\n        <p class=\"noDomainTips\" v-show=\"shadowNodesform.snodeId && noDomainShow\">所选节点暂不包含当前业务域名：{{shadowNodesform.domainName}}，请先前往‘配置’页面创建该业务！</p>\r\n\r\n        <el-form-item>\r\n          <el-button type=\"primary\" @click=\"ensurePushConfig('shadowNodesform')\" :disabled=\"shadowNodesform.snodeId!='' && noDomainShow\">推送</el-button>\r\n          <el-button @click=\"selectSnodeClose\">{{$t('lg.cancel')}}</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <loading v-show=\"pushConfigLoading\"></loading>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport {SERVER_API_URL} from '@/conf/constvar';\r\nimport client from \"@/components/es/connection\";\r\nimport loading from '@/components/loading/loading';\r\nexport default {\r\n  components:{\r\n    loading\r\n  },\r\n  props:{\r\n    isShow:{\r\n      type:Boolean\r\n    },\r\n    urlReferConfigTitle:{\r\n      type:String\r\n    }\r\n  },\r\n  data(){\r\n    return{\r\n      urlTagData:[],\r\n\r\n      // 参考配置\r\n      urlReferConfigfrom:{\r\n        reqeustTime:null,\r\n        verifyBrowser:null,\r\n        verifyAgent:null,\r\n        verifyTokenRate:null,//占比\r\n      },\r\n      \r\n      //建议配置\r\n      urlSugConfigfrom:{\r\n        reqeustTime:null,\r\n        verifyBrowser:null,\r\n        verifyAgent:null,\r\n        verifyToken:false,\r\n      },\r\n      urlSugConfigfromRules:{\r\n        reqeustTime:[\r\n          {pattern:/^[0-9]+$/,message: this.$t('lg.requirepositive'), trigger: 'change'}//必须为正整数\r\n        ],\r\n        verifyBrowser:[\r\n          {pattern:/^[0-9]+$/,message: this.$t('lg.requirepositive'), trigger: 'change'}//必须为正整数\r\n        ],\r\n        verifyAgent:[\r\n          {pattern:/^[\\-?0-9]+$/,message: '必须为数字', trigger: 'change'}//必须为正整数\r\n        ]\r\n      },\r\n\r\n      requestTimeUnit:'ms',\r\n      rqTimeUnitOpt:[{\r\n        label:'毫秒',\r\n        value:'ms'\r\n      },{\r\n        label:'秒',\r\n        value:'s'\r\n      }],\r\n\r\n      // 推送到节点\r\n      selectSnodeShow:false,\r\n      shadowNodesform:{\r\n        snodeId:'',\r\n        domainName:'',\r\n        domainPort:'',//选中的端口\r\n        locationName:''\r\n      },\r\n      shadowNodesformRules:{\r\n        snodeId:[\r\n          { required: true, message: this.$t('lg.required'), trigger: 'change' }\r\n        ]\r\n      },\r\n      snodeData:[],\r\n      noDomainShow:false,//如果当前节点下没有当前域名，则提示需先去配置里创建域名\r\n      domainData:[],//当前节点下的domain\r\n      \r\n      pushConfigLoading:false,\r\n\r\n    }\r\n  },\r\n  methods:{\r\n    getUrlReferConfigData(referConfigParam){//多个请求获取不同数据\r\n      // console.log(referConfigParam)\r\n\r\n      this.shadowNodesform.domainName=referConfigParam.domainName;//把当前domainName保存下来，用来查找对应端口\r\n      this.shadowNodesform.locationName=referConfigParam.locationName;//把当前locationName保存下来，用来查询locationName是否存在于当前节点下的domain上\r\n      // 多个请求\r\n      const esQqueryObj={//公用\r\n        \"bool\": {\r\n          \"filter\":[{\r\n              \"range\": {\r\n                \"@timestamp\": {\r\n                  \"gte\": referConfigParam.strTimestamp,\r\n                  \"lte\": referConfigParam.lteTimestamp\r\n                }\r\n              }\r\n            }],\r\n          \"must_not\": [\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.org_url:\\\\/40*\\\\.html\"\r\n              }\r\n            },\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.org_url:\\\\/\"\r\n              }\r\n            },\r\n            {\r\n\t\t\t\t\"query_string\": {\r\n\t\t\t\t\t\"query\": \"shadow.access.cl_score:100000\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n          ],\r\n          \"must\": [\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.error_code:0\"\r\n              }\r\n            },\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.response_code:200\"\r\n              }\r\n            },\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.decrypted:1\"\r\n              }\r\n            },\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.api_indicator:\"+referConfigParam.apiIndicator\r\n              }\r\n            },\r\n            {\r\n              \"query_string\": {\r\n                \"query\": \"shadow.access.domain:\"+referConfigParam.domainName\r\n              }\r\n            },\r\n            {\r\n              \"term\": {\r\n                \"shadow.access.url_indicator\": referConfigParam.locationName\r\n              }\r\n            }\r\n          ]\r\n        }\r\n      }\r\n\r\n      let p1 = new Promise((resolve,reject)=>{//reqeust time\r\n        client.search({\r\n          index: \"shadow-filebeat-*\",\r\n          body:{\r\n            \"size\": 0, \r\n            \"query\":esQqueryObj,\r\n            \"aggs\": {\r\n              \"GroupByDomain\": {\r\n                \"terms\": {\r\n                  \"field\": \"shadow.access.http_host\",\r\n                  \"size\": 500\r\n                },\r\n                \"aggs\": {\r\n                  \"avg_starttime\": {\r\n                    \"avg\": {\r\n                      \"field\": \"shadow.access.send_time\"\r\n                    }\r\n                  },\r\n                  \"avg_endtime\": {\r\n                    \"avg\": {\r\n                      \"field\": \"shadow.access.rec_time\"\r\n                    }\r\n                  },\r\n                  \"avg_time\": {\r\n                    \"bucket_script\": {\r\n                      \"buckets_path\": {\r\n                        \"avg_starttime\": \"avg_starttime\",\r\n                        \"avg_endtime\": \"avg_endtime\"\r\n                      },\r\n                      \"script\": \"params.avg_endtime-params.avg_starttime\"\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }).then((res)=>{\r\n          const resData = res.aggregations.GroupByDomain.buckets[0]?res.aggregations.GroupByDomain.buckets[0].avg_time.value : null;\r\n          this.urlReferConfigfrom.reqeustTime=resData;\r\n          this.urlSugConfigfrom.reqeustTime=(resData!=null && resData>0)?Math.ceil(resData):null;\r\n          resolve(resData);\r\n        })\r\n      }) \r\n      \r\n      let p2 = new Promise((resolve,reject)=>{//浏览器环境指标\r\n        client.search({\r\n          index: \"shadow-filebeat-*\",\r\n          body:{\r\n            \"size\":0,\r\n            \"query\":esQqueryObj,\r\n            \"aggs\":{\r\n              \"GroupByBrowserScore\":{\r\n                \"avg\":{\r\n                  \"field\":\"shadow.access.cl_browser_score\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }).then((res)=>{\r\n          const resData = res.aggregations.GroupByBrowserScore.value;\r\n          this.urlReferConfigfrom.verifyBrowser=resData;\r\n          this.urlSugConfigfrom.verifyBrowser=resData!=null?Math.floor(resData):null;\r\n          resolve({resData});\r\n        })\r\n      }) \r\n\r\n      let p3 = new Promise((resolve,reject)=>{//用户行为指标\r\n        client.search({\r\n          index: \"shadow-filebeat-*\",\r\n          body:{\r\n            \"size\":0,\r\n            \"query\":esQqueryObj,\r\n            \"aggs\":{\r\n              \"GroupByScore\":{\r\n                \"avg\":{\r\n                  \"field\":\"shadow.access.cl_score\"\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }).then((res)=>{\r\n          const resData = res.aggregations.GroupByScore.value;\r\n          this.urlReferConfigfrom.verifyAgent=resData;\r\n          this.urlSugConfigfrom.verifyAgent=resData!=null?Math.floor(resData):null;\r\n          resolve(resData);\r\n        })\r\n      }) \r\n\r\n      let p4 = new Promise((resolve,reject)=>{//动态指纹\r\n        client.search({\r\n          index: \"shadow-filebeat-*\",\r\n          body:{\r\n            \"size\":0,\r\n            \"query\":esQqueryObj,\r\n            \"aggs\":{\r\n              \"GroupByTokenIndicator\":{\r\n                \"terms\":{\r\n                  \"field\":\"shadow.access.token_indicator\",\r\n                  \"size\": 10\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }).then((res)=>{\r\n          const hitsTotal = res.hits.total.value;\r\n          const resData = res.aggregations.GroupByTokenIndicator.buckets;\r\n\r\n          let vTokenRate=0;\r\n          resData.forEach((ele)=>{\r\n            if(ele.key){\r\n              vTokenRate=ele.doc_count/hitsTotal;\r\n            }\r\n          })\r\n\r\n          if(resData.length>0){//参考配置那里显示占比\r\n            this.urlReferConfigfrom.verifyTokenRate=(vTokenRate*100).toFixed(2);\r\n          }else{\r\n            this.urlReferConfigfrom.verifyTokenRate=null;\r\n          }\r\n          \r\n          const openFlag=vTokenRate>0.1?true:false;\r\n          this.urlSugConfigfrom.verifyToken=openFlag;\r\n          resolve({openFlag});\r\n        })\r\n      }) \r\n\r\n      let p5 = new Promise((resolve,reject)=>{//页面标签\r\n        client.search({\r\n          index: \"shadow-filebeat-*\",\r\n          body:{\r\n            \"size\": 0, \r\n            \"query\": {\r\n              \"bool\": {\r\n                \"must\": [\r\n                  {\r\n                    \"term\": {\r\n                      \"shadow.access.domain\": referConfigParam.domainName\r\n                    }\r\n                  },\r\n                  {\r\n                    \"term\": {\r\n                      \"shadow.access.url_indicator\": referConfigParam.locationName\r\n                    }\r\n                  }\r\n                ]\r\n              }\r\n            },\r\n            \"aggs\": {\r\n              \"GroupByTag\": {\r\n                \"terms\": {\r\n                  \"field\": \"shadow.access.tag_name\",\r\n                  \"size\": 10\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }).then((res)=>{\r\n          const resData=res.aggregations?res.aggregations.GroupByTag.buckets:[];\r\n          let urlTagArr=[];\r\n          \r\n          resData.forEach(ele=>{\r\n            if(ele.key && ele.key!=='-'){\r\n              urlTagArr.push({\r\n                key:Base64.decode(ele.key),\r\n                docCount:ele.doc_count\r\n              })\r\n            }\r\n          })\r\n\r\n          if(urlTagArr.length==0){\r\n            urlTagArr=[{\r\n              docCount: 0,\r\n              key: \"暂无匹配标签\"\r\n            }]\r\n          }\r\n\r\n          // console.log(urlTagArr)\r\n          this.urlTagData=urlTagArr;\r\n          resolve(urlTagArr);\r\n        })\r\n      }) \r\n\r\n      return Promise.all([p1,p2,p3,p4,p5])\r\n    },\r\n    urlRfCfDialogClose(){\r\n      this.$emit(\"urlReferConfigDialogClose\",false);\r\n    },\r\n\r\n    //推送到节点 \r\n    selectSnode(){//选择节点 \r\n      var _this=this;\r\n      var nodesurl=SERVER_API_URL+\"pe/shadow/snode\";// 查询当前所有业务节点\r\n      axios.get(nodesurl).then((res)=>{\r\n        if(res.data.responseCode == 0){\r\n          const resData=res.data.data;\r\n          // const resData = [\r\n          //   {\r\n          //     \"snodeId\":\"192.168.2.220:61002\",\r\n          //     \"hostName\":\"shadow-v2.0.1\",\r\n          //     \"isShadowGroup\":false\r\n          //   },\r\n          //   {\r\n          //     \"snodeId\": \"aaa\",\r\n          //     \"hostName\": \"aaa\",\r\n          //     \"isShadowGroup\": true,\r\n          //     \"masterNode\": \"192.168.2.1:61004\",\r\n          //     \"backupNodes\": [\r\n          //       \"192.168.2.2:61005\" \r\n          //     ],\r\n          //     \"virtualIPs\": [\r\n          //       \"1.1.1.1\" \r\n          //     ]\r\n          //   }\r\n          // ]\r\n\r\n          _this.snodeData=resData;\r\n          _this.selectSnodeShow=true;\r\n        }else{\r\n          _this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      });\r\n    },\r\n    //查询当前节点下的域名，找出当前域名对应的端口。再用端口来查询location是否存在\r\n    checkDomainPort(snode){\r\n      var url=SERVER_API_URL+\"pe/shadow/domain?snodeId=\"+snode;\r\n      const thisDomain = this.shadowNodesform.domainName;\r\n      axios.get(url).then((res)=>{\r\n        if(res.data.responseCode == 0){\r\n          // console.log(res);\r\n          const resData = res.data.data.domains;\r\n          const domainArr = resData.filter((item)=>{\r\n            return item.domainName.includes(thisDomain)\r\n          })\r\n\r\n          if(domainArr.length>0){//当前节点下有当前域名\r\n            this.noDomainShow=false;\r\n            this.shadowNodesform.domainPort=domainArr[0].domainPort;//设置一个默认选中值\r\n            this.domainData=domainArr;\r\n          }else{\r\n            this.noDomainShow=true;\r\n          }\r\n         \r\n        }else{\r\n          _this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      });\r\n\r\n    },\r\n\r\n    // 查询拓扑图里该节点该域名下是否包含该location，如果包含则直接推送，否则需先在拓扑图里生成该location（还需调用一次生成location的接口）\r\n    checkLocation(){\r\n      return new Promise((resolve,reject)=>{\r\n        const snode = this.shadowNodesform.snodeId;\r\n        const thisDomain = this.shadowNodesform.domainName;\r\n        const prot = this.shadowNodesform.domainPort;\r\n        const url = SERVER_API_URL+\"pe/shadow/domain/location?snodeId=\"+snode+\"&domainName=\"+thisDomain+\"&domainPort=\"+prot;// 查询当前所有业务节点\r\n        axios.get(url).then((res)=>{\r\n          if(res.data.responseCode == 0){\r\n            // console.log(res);\r\n            const resData = res.data.data;\r\n\r\n            let lcFlag=false;\r\n            const thisLocation = this.shadowNodesform.locationName;\r\n            resData.forEach(ele=>{\r\n              if(ele.locationName==thisLocation) lcFlag=true;\r\n            })\r\n\r\n            resolve(lcFlag);\r\n          \r\n          }else{\r\n            _this.$message.error(_this.$t('lg.failed')+': '+ res.data.data.message);\r\n          }\r\n        }).catch((err) => {\r\n          console.log(err)\r\n        });\r\n      })\r\n    },\r\n    \r\n    //如果location不存在于当前节点当前域名当前端口下的拓扑图里，则要先推送当前location\r\n    pushLocation(){\r\n      return new Promise ((resolve,reject)=>{\r\n        const url = SERVER_API_URL+\"pe/shadow/domain/location\";\r\n\r\n        const snodeId=this.shadowNodesform.snodeId;\r\n        const domainName=this.shadowNodesform.domainName;\r\n        const port=this.shadowNodesform.domainPort;\r\n        const locationName=this.shadowNodesform.locationName;\r\n\r\n        axios.post(url,{\r\n          snodeId:snodeId,\r\n          domainName:domainName,\r\n          domainPort:port,\r\n          locationType:'accurateMatch',\r\n          locationName:locationName,\r\n          waf:'off',\r\n          // wafRuleset:[],\r\n          // webSocket:'off',\r\n          // root:'',\r\n        }).then((res)=>{\r\n          if(res.data.responseCode == 0){\r\n            resolve(true);\r\n          }\r\n        }).catch((err) => {\r\n          console.log(err)\r\n        });\r\n      })\r\n    },\r\n\r\n    // 生成location配置 为location加入建议指令\r\n    pushDirective(){\r\n      this.pushConfigLoading=true;\r\n      const url = SERVER_API_URL+\"pe/shadow/domain/location/directive\";\r\n\r\n      const snodeId=this.shadowNodesform.snodeId;\r\n      const domainName=this.shadowNodesform.domainName;\r\n      const port=this.shadowNodesform.domainPort;\r\n      const locationName=this.shadowNodesform.locationName;\r\n\r\n      //指令参数\r\n      let directives=[];\r\n      if(this.urlSugConfigfrom.reqeustTime && this.urlSugConfigfrom.reqeustTime!=''){\r\n        const str = Base64.encode(this.urlSugConfigfrom.reqeustTime+this.requestTimeUnit);\r\n        directives.push({\r\n          'shadow_request_time':str\r\n        })\r\n      }\r\n      if(this.urlSugConfigfrom.verifyBrowser && this.urlSugConfigfrom.verifyBrowser!=''){\r\n        const str = Base64.encode(this.urlSugConfigfrom.verifyBrowser);\r\n        directives.push({\r\n          'shadow_verify_browser':str\r\n        })\r\n      }\r\n      if(this.urlSugConfigfrom.verifyAgent && this.urlSugConfigfrom.verifyAgent!=''){\r\n        const str = Base64.encode(this.urlSugConfigfrom.verifyAgent);\r\n        directives.push({\r\n          'shadow_verify_agent':str\r\n        })\r\n      }\r\n      if(this.urlSugConfigfrom.verifyToken){\r\n        directives.push({\r\n          'shadow_verify_token':\"MQ==\"\r\n        })\r\n      }\r\n\r\n      axios.post(url,{\r\n        snodeId:snodeId,\r\n        domainName:domainName,\r\n        domainPort:port,\r\n        locationType:'accurateMatch',\r\n        locationName:locationName,\r\n        directives:directives\r\n      }).then((res)=>{\r\n        if(res.data.responseCode == 0){\r\n          this.$message({\r\n            message: this.$t('lg.success'),\r\n            type: 'success'\r\n          });\r\n          this.pushConfigLoading=false;\r\n          this.selectSnodeClose();\r\n        }\r\n      }).catch((err) => {\r\n        console.log(err)\r\n      });\r\n\r\n    },\r\n\r\n    //确认推送\r\n    ensurePushConfig(formname){\r\n      this.$refs[formname].validate((valid) => {\r\n        if(valid){\r\n          this.checkLocation().then((resolvedata)=>{\r\n            if(resolvedata){//发一次请求\r\n              this.pushDirective();\r\n\r\n            }else{//发两次请求\r\n              this.pushLocation().then((resolvedata)=>{\r\n                this.pushDirective();\r\n              })\r\n            }\r\n          })\r\n        }\r\n      });\r\n    },\r\n\r\n    //关闭推送弹框\r\n    selectSnodeClose(){\r\n      this.$refs['shadowNodesform'].resetFields();\r\n      this.selectSnodeShow=false;\r\n      this.noDomainShow=false;\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.urlReferConfig-wrapper{\r\n  overflow: hidden;\r\n}\r\n.urlTagBox{\r\n  position: relative;\r\n  border: 1px solid #dcdfe6;\r\n  padding: 30px 20px 10px 20px;\r\n  border-radius: 5px;\r\n}\r\n.urlReferConfigBox{\r\n  display: flex;\r\n  margin: 20px 0 30px;\r\n}\r\n.urlRfConfigTitle{\r\n  font-size: 15px;\r\n  font-weight: 700;\r\n  margin-bottom: 15px;\r\n}\r\n.referenceBox{\r\n  width: 32%;\r\n  background:#eee;\r\n  margin-right: 10px;\r\n  border: 1px solid #dcdfe6;\r\n  padding: 15px;\r\n  border-radius: 5px;\r\n}\r\n.referParamList{\r\n  margin-top: 30px;\r\n}\r\n.referParamList li{\r\n  margin-bottom: 40px;\r\n  line-height: 20px;\r\n}\r\n\r\n.suggestBox{\r\n  flex: 1;\r\n  border: 1px solid #dcdfe6;\r\n  padding: 15px;\r\n  border-radius: 15px;\r\n}\r\n.el-tag {\r\n  margin-right: 10px;\r\n  margin-bottom: 15px;\r\n}\r\n.noDomainTips{\r\n  color: #606266;\r\n  margin:0 0 30px 30px;\r\n  line-height: 16px;\r\n  color: #F56C6C;\r\n  line-height: 22px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/components/apiConfig/urlReferConfig.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"urlReferConfig-wrapper\"},[_c('el-dialog',{attrs:{\"width\":\"55%\",\"title\":_vm.urlReferConfigTitle,\"visible\":_vm.isShow,\"close-on-click-modal\":false,\"before-close\":_vm.urlRfCfDialogClose},on:{\"update:visible\":function($event){_vm.isShow=$event}}},[_c('div',{staticClass:\"urlTagBox\"},[_c('span',{staticClass:\"titleSpan\"},[_vm._v(\"对应标签\")]),_vm._v(\" \"),_vm._l((_vm.urlTagData),function(tag){return _c('el-tag',{key:tag.key},[_vm._v(\"\\n        \"+_vm._s(tag.key)+\"\\n      \")])})],2),_vm._v(\" \"),_c('div',{staticClass:\"urlReferConfigBox\"},[_c('div',{staticClass:\"referenceBox\"},[_c('p',{staticClass:\"urlRfConfigTitle\"},[_vm._v(\"参考配置\")]),_vm._v(\" \"),_c('ul',{staticClass:\"referParamList\"},[_c('li',[_vm._v(\"手动代理防御设置：\"+_vm._s(_vm.urlReferConfigfrom.reqeustTime!=null ? _vm.urlReferConfigfrom.reqeustTime+'毫秒' : '暂无匹配值'))]),_vm._v(\" \"),_c('li',[_vm._v(\"浏览器参数指标：\"+_vm._s(_vm.urlReferConfigfrom.verifyBrowser!=null? _vm.urlReferConfigfrom.verifyBrowser : '暂无匹配值'))]),_vm._v(\" \"),_c('li',[_vm._v(\"用户行为指标：\"+_vm._s(_vm.urlReferConfigfrom.verifyAgent!=null? _vm.urlReferConfigfrom.verifyAgent : '暂无匹配值'))]),_vm._v(\" \"),_c('li',[_vm._v(\"动态指纹功能：\"+_vm._s(_vm.urlReferConfigfrom.verifyTokenRate ? '动态指纹占'+_vm.urlReferConfigfrom.verifyTokenRate+'%' : '动态指纹占0%')+\"  \")]),_vm._v(\" \"),_c('li')])]),_vm._v(\" \"),_c('div',{staticClass:\"suggestBox\"},[_c('p',{staticClass:\"urlRfConfigTitle\"},[_vm._v(\"建议配置\")]),_vm._v(\" \"),_c('el-form',{ref:\"urlSugConfigfrom\",attrs:{\"model\":_vm.urlSugConfigfrom,\"rules\":_vm.urlSugConfigfromRules,\"label-width\":\"125px\"}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":18}},[_c('el-form-item',{attrs:{\"label\":\"手动代理防御设置\",\"prop\":\"reqeustTime\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.urlSugConfigfrom.reqeustTime),callback:function ($$v) {_vm.$set(_vm.urlSugConfigfrom, \"reqeustTime\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"urlSugConfigfrom.reqeustTime\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label-width\":\"0px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('lg.select')},model:{value:(_vm.requestTimeUnit),callback:function ($$v) {_vm.requestTimeUnit=$$v},expression:\"requestTimeUnit\"}},_vm._l((_vm.rqTimeUnitOpt),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}))],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"浏览器参数指标\",\"prop\":\"verifyBrowser\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.urlSugConfigfrom.verifyBrowser),callback:function ($$v) {_vm.$set(_vm.urlSugConfigfrom, \"verifyBrowser\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"urlSugConfigfrom.verifyBrowser\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"用户行为指标\",\"prop\":\"verifyAgent\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入\"},model:{value:(_vm.urlSugConfigfrom.verifyAgent),callback:function ($$v) {_vm.$set(_vm.urlSugConfigfrom, \"verifyAgent\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"urlSugConfigfrom.verifyAgent\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"开启动态指纹功能\"}},[_c('el-switch',{model:{value:(_vm.urlSugConfigfrom.verifyToken),callback:function ($$v) {_vm.$set(_vm.urlSugConfigfrom, \"verifyToken\", $$v)},expression:\"urlSugConfigfrom.verifyToken\"}}),_c('span',{staticStyle:{\"margin-left\":\"20px\"}},[_vm._v(\"(注：动态指纹占比大于10%时建议开启)\")])],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.selectSnode()}}},[_vm._v(\"推送到节点\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.urlRfCfDialogClose}},[_vm._v(_vm._s(_vm.$t('lg.cancel')))])],1)],1)],1)])]),_vm._v(\" \"),_c('el-dialog',{attrs:{\"width\":\"45%\",\"title\":_vm.$t('lg.pushconfig'),\"visible\":_vm.selectSnodeShow,\"close-on-click-modal\":false,\"before-close\":_vm.selectSnodeClose},on:{\"update:visible\":function($event){_vm.selectSnodeShow=$event}}},[_c('el-form',{ref:\"shadowNodesform\",attrs:{\"model\":_vm.shadowNodesform,\"label-width\":\"125px\",\"rules\":_vm.shadowNodesformRules}},[_c('el-form-item',{attrs:{\"label\":_vm.$t('lg.shadownode'),\"prop\":\"snodeId\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('lg.select')},on:{\"change\":function($event){_vm.checkDomainPort(_vm.shadowNodesform.snodeId)}},model:{value:(_vm.shadowNodesform.snodeId),callback:function ($$v) {_vm.$set(_vm.shadowNodesform, \"snodeId\", $$v)},expression:\"shadowNodesform.snodeId\"}},[_vm._l((_vm.snodeData),function(n){return [_c('el-option',{attrs:{\"label\":n.isShadowGroup?n.hostName+'(集群)':n.hostName+'('+n.snodeId+')',\"value\":n.snodeId}})]})],2)],1),_vm._v(\" \"),_c('el-row',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shadowNodesform.snodeId && !_vm.noDomainShow),expression:\"shadowNodesform.snodeId && !noDomainShow\"}],attrs:{\"gutter\":10}},[_c('el-col',{attrs:{\"span\":18}},[_c('el-form-item',{attrs:{\"label\":\"业务域名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.shadowNodesform.domainName),callback:function ($$v) {_vm.$set(_vm.shadowNodesform, \"domainName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"shadowNodesform.domainName\"}})],1)],1),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":6}},[_c('el-form-item',{attrs:{\"label-width\":\"0px\"}},[_c('el-select',{staticStyle:{\"width\":\"100%\"},attrs:{\"placeholder\":_vm.$t('lg.select')},model:{value:(_vm.shadowNodesform.domainPort),callback:function ($$v) {_vm.$set(_vm.shadowNodesform, \"domainPort\", $$v)},expression:\"shadowNodesform.domainPort\"}},_vm._l((_vm.domainData),function(item){return _c('el-option',{key:item.domainPort,attrs:{\"label\":item.domainPort,\"value\":item.domainPort}})}))],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shadowNodesform.snodeId && !_vm.noDomainShow),expression:\"shadowNodesform.snodeId && !noDomainShow\"}],attrs:{\"label\":\"被保护对象的位置\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.shadowNodesform.locationName),callback:function ($$v) {_vm.$set(_vm.shadowNodesform, \"locationName\", (typeof $$v === 'string'? $$v.trim(): $$v))},expression:\"shadowNodesform.locationName\"}})],1),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shadowNodesform.snodeId && _vm.noDomainShow),expression:\"shadowNodesform.snodeId && noDomainShow\"}],staticClass:\"noDomainTips\"},[_vm._v(\"所选节点暂不包含当前业务域名：\"+_vm._s(_vm.shadowNodesform.domainName)+\"，请先前往‘配置’页面创建该业务！\")]),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"disabled\":_vm.shadowNodesform.snodeId!='' && _vm.noDomainShow},on:{\"click\":function($event){_vm.ensurePushConfig('shadowNodesform')}}},[_vm._v(\"推送\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":_vm.selectSnodeClose}},[_vm._v(_vm._s(_vm.$t('lg.cancel')))])],1)],1),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.pushConfigLoading),expression:\"pushConfigLoading\"}]})],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4f7f337f\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/apiConfig/urlReferConfig.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4f7f337f\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./urlReferConfig.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./urlReferConfig.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./urlReferConfig.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4f7f337f\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./urlReferConfig.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4f7f337f\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/apiConfig/urlReferConfig.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}