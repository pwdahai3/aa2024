webpackJsonp([35],{eizL:function(t,e){},q1Sj:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("//Fk"),o=a.n(s),n=a("mtWM"),r=a.n(n),d=a("qqiS"),i=a("yJCr"),l={props:{editShow:{type:Boolean},ntpData:{type:Object},shadownode:{type:String}},watch:{editShow:function(){this.ntpData&&(this.srcLastName=String(this.ntpData.lastName),this.addform.lastName=this.ntpData.lastName,this.addform.authType=this.ntpData.authType,this.addform.authPass=this.ntpData.authPass,this.addform.encryptType=this.ntpData.encryptType,this.addform.encryptPass=this.ntpData.encryptPass)}},data:function(){return{srcLastName:"",userloading:!1,addform:{lastName:"",authType:"",authPass:"",encryptType:"",encryptPass:""},addformRules:{lastName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]}}},methods:{saveNtp:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.userloading=!0;var a={srcLastName:e.srcLastName,lastName:e.addform.lastName,authType:e.addform.authType,authPass:e.addform.authPass,encryptType:e.addform.encryptType,encryptPass:e.addform.encryptPass,nodeId:e.shadownode},s=i.b+"pe/shadow/snmpConf/update";r.a.post(s,a).then(function(t){0==t.data.responseCode?(e.$emit("haseditshadow"),e.$message({type:"success",message:e.$t("lg.success")}),e.resetForm()):e.$message.error(e.$t("lg.failed")),e.userloading=!1}).catch(function(t){e.$message.error(t.data),e.userloading=!1})}})},resetForm:function(){this.$emit("eidtclose")}},components:{loading:d.a}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{width:"40%",title:"修改",visible:t.editShow,"close-on-click-modal":!1,"before-close":t.resetForm},on:{"update:visible":function(e){t.editShow=e}}},[a("el-form",{ref:"addform",attrs:{model:t.addform,rules:t.addformRules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"lastName"}},[a("el-input",{model:{value:t.addform.lastName,callback:function(e){t.$set(t.addform,"lastName","string"==typeof e?e.trim():e)},expression:"addform.lastName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"鉴权类型",prop:"authType"}},[a("el-input",{model:{value:t.addform.authType,callback:function(e){t.$set(t.addform,"authType","string"==typeof e?e.trim():e)},expression:"addform.authType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"鉴权密码",prop:"authPass"}},[a("el-input",{model:{value:t.addform.authPass,callback:function(e){t.$set(t.addform,"authPass","string"==typeof e?e.trim():e)},expression:"addform.authPass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"加密类型",prop:"encryptType"}},[a("el-input",{model:{value:t.addform.encryptType,callback:function(e){t.$set(t.addform,"encryptType","string"==typeof e?e.trim():e)},expression:"addform.encryptType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"加密密码",prop:"encryptPass"}},[a("el-input",{model:{value:t.addform.encryptPass,callback:function(e){t.$set(t.addform,"encryptPass","string"==typeof e?e.trim():e)},expression:"addform.encryptPass"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveNtp("addform")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm()}}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.userloading,expression:"userloading"}],attrs:{title:t.$t("lg.loading")}})],1)],1)},staticRenderFns:[]},p=a("VU/8")(l,c,!1,null,null,null).exports,u={props:{isShow:{type:Boolean},shadownodes:{type:Array}},data:function(){var t=function(t,e,a){/^[0-9a-zA-Z!@#$%^&*\.]{8,}$/.test(e)?a():a(new Error("鉴权密码必须大于或等于8个字符！"))};return{srcLastName:"",userloading:!1,addform:{nodeId:"",lastName:"",authType:"",authPass:"",encryptType:"",encryptPass:""},addformRules:{lastName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],authType:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],authPass:[{required:!0,validator:t,trigger:"blur"},{required:!0,message:this.$t("lg.required"),trigger:"blur"}],encryptType:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],encryptPass:[{required:!0,validator:t,trigger:"blur"},{required:!0,message:this.$t("lg.required"),trigger:"blur"}],nodeId:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]}}},methods:{getShadownodeData:function(){},saveNtp:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.userloading=!0;var a={lastName:e.addform.lastName,authType:e.addform.authType,authPass:e.addform.authPass,encryptType:e.addform.encryptType,encryptPass:e.addform.encryptPass,nodeId:e.addform.nodeId},s=i.b+"pe/shadow/snmpConf/add";r.a.put(s,a).then(function(t){0==t.data.responseCode?(e.$emit("addDone"),e.$message({type:"success",message:e.$t("lg.success")}),e.resetForm()):e.$message.error(e.$t("lg.failed")),e.userloading=!1}).catch(function(t){e.$message.error(t.data),e.userloading=!1})}})},resetForm:function(){this.$refs.addform.resetFields(),this.$emit("addDone")}},components:{loading:d.a}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-dialog",{attrs:{width:"40%",title:"增加",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.resetForm},on:{"update:visible":function(e){t.isShow=e}}},[a("el-form",{ref:"addform",attrs:{model:t.addform,rules:t.addformRules,"label-width":"140px"}},[a("el-form-item",{attrs:{label:"节点",prop:"nodeId"}},[a("el-select",{attrs:{placeholder:"请选择shadow节点"},on:{change:t.getShadownodeData},model:{value:t.addform.nodeId,callback:function(e){t.$set(t.addform,"nodeId",e)},expression:"addform.nodeId"}},t._l(t.shadownodes,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"用户名",prop:"lastName"}},[a("el-input",{model:{value:t.addform.lastName,callback:function(e){t.$set(t.addform,"lastName","string"==typeof e?e.trim():e)},expression:"addform.lastName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"鉴权类型",prop:"authType"}},[a("el-input",{model:{value:t.addform.authType,callback:function(e){t.$set(t.addform,"authType","string"==typeof e?e.trim():e)},expression:"addform.authType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"鉴权密码",prop:"authPass"}},[a("el-input",{model:{value:t.addform.authPass,callback:function(e){t.$set(t.addform,"authPass","string"==typeof e?e.trim():e)},expression:"addform.authPass"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"加密类型",prop:"encryptType"}},[a("el-input",{model:{value:t.addform.encryptType,callback:function(e){t.$set(t.addform,"encryptType","string"==typeof e?e.trim():e)},expression:"addform.encryptType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"加密密码",prop:"encryptPass"}},[a("el-input",{model:{value:t.addform.encryptPass,callback:function(e){t.$set(t.addform,"encryptPass","string"==typeof e?e.trim():e)},expression:"addform.encryptPass"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveNtp("addform")}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.resetForm()}}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:t.userloading,expression:"userloading"}],attrs:{title:t.$t("lg.loading")}})],1)],1)},staticRenderFns:[]},h={components:{snmpedit:p,snmpadd:a("VU/8")(u,m,!1,null,null,null).exports,loading:d.a},created:function(){this.$store.state.contentLoading=!0,this.getSnmp()},data:function(){return{addSnmpShow:!1,snmpOnOff:!1,shadownodeVal:"",shadownodeOpts:[],shadownodeData:{},users:{},addShow:!1,shadowaddShow:!1,editShow:!1,ntpData:{},editIndex:0,shadoweditShow:!1,shadowntpData:{},shadoweditIndex:0,userSetingloading:!1}},methods:{addSnmp:function(){var t=this;this.getShadownode().then(function(e,a){t.addSnmpShow=!0})},delsnmp:function(t){var e=this;this.$confirm("确定删除此数据",this.$t("lg.tip"),{confirmButtonText:this.$t("lg.yes"),cancelButtonText:this.$t("lg.cancel"),type:"warning"}).then(function(){e.$store.state.contentLoading=!0;var a=i.b+"pe/shadow/snmpConf/delete";r.a.delete(a,{data:{srcLastName:t.lastName,nodeId:t.nodeId}}).then(function(t){0==t.data.responseCode?(e.getShadownodeData(),e.$message({type:"success",message:e.$t("lg.success")})):e.$message.error(e.$t("lg.failed")+": "+t.data.data.message),e.$store.state.contentLoading=!1}).catch(function(t){console.log(t)})}).catch(function(){e.$message({type:"info",message:e.$t("lg.canceled")})})},turnOnOff:function(){var t=this,e=this.snmpOnOff?"stop":"start",a=i.b+"pe/shadow/process/operate/"+this.shadownodeVal+"/snmpd/"+e;r.a.post(a).then(function(e){0==e.data.responseCode?(t.snmpOnOff=!t.snmpOnOff,t.$message({type:"success",message:t.$t("lg.success")})):t.$message.error(t.$t("lg.failed")),t.$store.state.contentLoading=!1}).catch(function(e){t.$message.error(e.data),t.$store.state.contentLoading=!1})},restart:function(){var t=this,e=i.b+"pe/shadow/process/operate/"+this.shadownodeVal+"/snmpd/restart";r.a.post(e).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")),t.$store.state.contentLoading=!1}).catch(function(e){t.$message.error(e.data),t.$store.state.contentLoading=!1})},getShadownodeData:function(t){var e=this,a=t||this.shadownodeVal,s=i.b+"pe/shadow/snmpConf/list/"+a;this.getSnmpStatus(),r.a.get(s).then(function(t){if(200==t.status){var a=t.data.data;e.users=a,e.$store.state.contentLoading=!1}}).catch(function(t){console.log(t)})},getShadownode:function(){var t=this;return new o.a(function(e,a){var s=i.b+"pe/shadow/nodeId/all";r.a.get(s).then(function(a){if(200==a.status){var s=a.data.data;t.shadownodeOpts=s,t.shadownodeOpts.length>0&&(t.shadownodeVal=t.shadownodeOpts[0]),e(s)}}).catch(function(t){a(t)})})},getSnmp:function(){var t=this;this.getShadownode().then(function(e,a){t.getSnmpStatus();var s=i.b+"pe/shadow/snmpConf/list/"+e[0];r.a.get(s).then(function(e){if(200==e.status){var a=e.data.data;t.users=a,t.$store.state.contentLoading=!1}}).catch(function(t){console.log(t)})})},getSnmpStatus:function(){var t=this,e=i.b+"/pe/shadow/process/status/"+this.shadownodeVal+"/snmpd";r.a.get(e).then(function(e){if(200==e.status){var a=e.data.data;t.snmpOnOff=a,t.$store.state.contentLoading=!1}}).catch(function(t){console.log(t)})},addCM:function(){this.addShow=!0},editNtp:function(t){this.ntpData=t,this.editShow=!0},shadoweditNtp:function(t){this.shadowntpData=t,this.shadoweditShow=!0},usDialogClose:function(){this.isShowUsDialog=!1}}},f={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"users-wrapper"},[a("div",{staticClass:"btn-bg"},[a("el-button",{attrs:{type:"primary"},on:{click:t.addSnmp}},[t._v("增加")])],1),t._v(" "),a("div",{staticStyle:{"margin-bottom":"12px"}},[a("el-select",{attrs:{placeholder:"请选择shadow节点"},on:{change:t.getShadownodeData},model:{value:t.shadownodeVal,callback:function(e){t.shadownodeVal=e},expression:"shadownodeVal"}},t._l(t.shadownodeOpts,function(t){return a("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),a("div",{staticStyle:{"margin-top":"12px","line-height":"22px"}},[a("p",[t._v("状态："+t._s(t.snmpOnOff?"开启":"关闭"))]),t._v(" "),a("div",{staticStyle:{margin:"12px 0"}},[t.snmpOnOff?a("el-button",{attrs:{size:"mini"},on:{click:t.turnOnOff}},[t._v("关闭")]):a("el-button",{attrs:{size:"mini"},on:{click:t.turnOnOff}},[t._v("开启")]),t.snmpOnOff?a("el-button",{attrs:{size:"mini"},on:{click:t.restart}},[t._v("重启")]):t._e()],1)])],1),t._v(" "),t.users.length>0?a("div",{staticClass:"usersContent"},[a("table",[t._m(0),t._v(" "),a("tbody",t._l(t.users,function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.nodeId))]),t._v(" "),a("td",[t._v(" "+t._s(e.lastName))]),t._v(" "),a("td",[t._v(" "+t._s(e.authType))]),t._v(" "),a("td",[t._v(" "+t._s(e.authPass))]),t._v(" "),a("td",[t._v(" "+t._s(e.encryptType))]),t._v(" "),a("td",[t._v(" "+t._s(e.encryptPass))]),t._v(" "),a("td",{staticClass:"text-center"},[a("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(a){t.shadoweditNtp(e)}}},[a("i",{staticClass:"el-icon-edit"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),a("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(a){t.delsnmp(e)}}},[a("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])]):a("div",[a("p",{staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))])]),t._v(" "),a("snmpedit",{attrs:{shadownode:t.shadownodeVal,editShow:t.shadoweditShow,ntpData:t.shadowntpData},on:{eidtclose:function(e){t.shadoweditShow=!1},haseditshadow:t.getShadownodeData}}),t._v(" "),a("snmpadd",{attrs:{isShow:t.addSnmpShow,shadownodes:t.shadownodeOpts},on:{addDone:function(e){t.addSnmpShow=!1}}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("nodeId")]),this._v(" "),e("th",[this._v("用户名")]),this._v(" "),e("th",[this._v("鉴权类型")]),this._v(" "),e("th",[this._v("鉴权密码")]),this._v(" "),e("th",[this._v("加密类型")]),this._v(" "),e("th",[this._v("加密密码")]),this._v(" "),e("th")])])}]};var g=a("VU/8")(h,f,!1,function(t){a("eizL")},"data-v-622c8766",null);e.default=g.exports}});
//# sourceMappingURL=35.be805c4d707931f227ba.js.map