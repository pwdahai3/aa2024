webpackJsonp([8],{BhzG:function(e,o,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var t=a("mtWM"),r=a.n(t),s=(a("5reh"),a("gQxQ")),n=a("yJCr"),i=a("rBmc"),l=a("qqiS"),c=a("FZZ+"),d=(a("xrTZ").Base64,{components:{urlReferConfig:c.a,loading:l.a},data:function(){return{fileList:[],uploadActionUri:n.b+"pe/shadow/domain/location/import",uploadheader:{Authorization:"Bearer "+sessionStorage.getItem("mytoken")},domainLoading:!0,searchObjform:{paramType:1,paramDomain:"",paramStrTime:"",paramDeadline:"",esDomainArr:[]},searchObjformRules:{paramType:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],paramDomain:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],paramStrTime:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],paramDeadline:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},strTimestamp:null,lteTimestamp:null,domainName:"",apiIndicator:0,objTreeNodeData:[],objTreeProps:{children:"children",label:"label"},isShowUrlReferConfigDialog:!1,urlReferConfigTitle:"",isShowTimingTask:!1}},mounted:function(){if(this.$route.query.domain){var e=this.$route.query;this.searchObjform.paramType=e.urlType,this.searchObjform.paramDomain=e.domain;var o=(new Date).getTime(),a=e.timeStrInterval.match(/(\d*)(\w*)/)[1],t=e.timeStrInterval.match(/(\d*)(\w*)/)[2],r=e.timeLteInterval.match(/(\d*)(\w*)/)[1],s=e.timeLteInterval.match(/(\d*)(\w*)/)[2],n=0,i=0;switch(t){case"m":n=o-60*a*1e3;break;case"h":n=o-60*a*60*1e3;break;default:n=o-24*a*60*60*1e3}switch(s){case"m":i=o-60*r*1e3;break;case"h":i=o-60*r*60*1e3;break;default:i=o-24*r*60*60*1e3}this.searchObjform.paramStrTime=new Date(n),this.searchObjform.paramDeadline=new Date(i),this.getObjData()}},methods:{downloadURI:function(){var e=n.b+"pe/shadow/domain/location/importtemplate";r()({url:e,method:"get",responseType:"blob"}).then(function(e){var o=new Blob([e.data]),a=window.URL.createObjectURL(o);if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(o,"URI白名单导入模板.xlsx");else{var t=document.createElement("a");t.href=a,t.setAttribute("download","URI白名单导入模板.xlsx"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}})},beforeupload:function(e){var o=e.name.split("."),a=o[1];o[0];return"xlsx"==a||"xlx"==a||(this.$message.error("格式错误"),!1)},onsuccess:function(e,o,a){o.name.split(".")[1];0==e.responseCode?this.$message({type:"success",message:this.$t("lg.success")}):this.$message.error(this.$t("lg.failed")+": "+e.data.message),this.fileList=[]},getDomains:function(e){var o=this,a=o.$store.state.mydatedata.starttime,t=o.$store.state.mydatedata.endtime,r=Object(i.a)(a),n=Object(i.a)(t);o.domainLoading=!0,s.a.search({index:"shadow-filebeat*",body:{size:0,query:{bool:{filter:[{range:{"@timestamp":{gte:r,lte:n}}}],must:[{query_string:{query:"shadow.access.error_code:0"}},{query_string:{query:"shadow.access.response_code:200"}}],must_not:[{match:{"shadow.access.token":"00000000000000000000000000000000"}},{match:{"shadow.access.token":"aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa"}}]}},aggs:{GroupByDomain:{terms:{field:"shadow.access.http_host",size:100}}}}}).then(function(e){o.domainLoading=!1;var a=e.aggregations?e.aggregations.GroupByDomain.buckets:[];o.searchObjform.esDomainArr=a})},getObjData:function(){var e=this;this.$refs.searchObjform.validate(function(o){if(o){var a=e;a.$store.state.contentLoading=!0,a.strTimestamp=Object(i.a)(a.$store.state.mydatedata.starttime),a.lteTimestamp=Object(i.a)(a.$store.state.mydatedata.endtime),a.domainName=a.searchObjform.paramDomain,a.apiIndicator=a.searchObjform.paramType;var t=n.b+"mc/esquery/uriwhite?strTimestamp="+a.strTimestamp+"&lteTimestamp="+a.lteTimestamp+"&domainName="+a.domainName;r.a.get(t).then(function(o){if(0==o.data.responseCode){var t=o.data.data,r=[];for(var s in t){var n={label:s,new:t[s].new,children:[]},i=!1,l=t[s].refMap;for(var c in l)l[c]&&(i=!0),n.children.push({label:c,new:l[c]});n.childNew=i,r.push(n)}console.log(r),a.objTreeNodeData=r}else e.$message.error(a.$t("lg.failed")+": "+o.data.data.message);a.$store.state.contentLoading=!1}).catch(function(e){console.log(e)})}})},getUrlReferConfig2:function(e,o){var a=this;o&&o.stopPropagation();var t=e.label,r=Object(i.a)(new Date),s={apiIndicator:this.apiIndicator,domainName:this.domainName,locationName:t,strTimestamp:this.searchObjform.paramStrTime,lteTimestamp:r};this.urlReferConfigTitle=t,this.$refs.urlReferConfig.getUrlReferConfigData(s).then(function(e){a.isShowUrlReferConfigDialog=!0}).catch(function(e){a.$message.error(a.$t("lg.failed")),console.log(e)})},getUrlReferConfig:function(e,o){var a=this,t=this;o&&o.stopPropagation();var s=e.label,i=n.b+"pe/shadow/domain/location/urlcompare?domainName="+t.domainName+"&urlList="+s;r.a.get(i).then(function(e){0==e.data.responseCode?a.$message({type:"success",message:t.$t("lg.success")}):a.$message.error(t.$t("lg.failed"))})},objRenderContent:function(e,o){var a=this,t=o.node,r=o.data;o.store;return r.new&&r.childNew?r.children?e("span",{class:"obj-tree-node"},[e("span",{class:"nodeTxt"},[t.label,e("span",{class:"el-icon-warning font-blue newPoint"},[]),e("img",{class:"newImg",attrs:{src:"./static/icon/newIcon.png"}},[])]),e("span",null,[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){return a.getUrlReferConfig(r,e)}}},["推送配置"])])]):e("span",{class:"obj-tree-node"},[e("span",{class:"nodeTxt"},[" ",e("i",{class:"refererTxt"},["[ HTTP Referer ]"])," ",t.label,e("span",{class:"el-icon-warning font-blue newPoint"},[]),e("img",{class:"newImg",attrs:{src:"./static/icon/newIcon.png"}},[])])]):r.new&&!r.childNew?r.children?e("span",{class:"obj-tree-node"},[e("span",{class:"nodeTxt"},[t.label,e("img",{class:"newImg",attrs:{src:"./static/icon/newIcon.png"}},[])]),e("span",null,[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){return a.getUrlReferConfig(r,e)}}},["推送配置"])])]):e("span",{class:"obj-tree-node"},[e("span",{class:"nodeTxt"},[" ",e("i",{class:"refererTxt"},["[ HTTP Referer ]"])," ",t.label,e("img",{class:"newImg",attrs:{src:"./static/icon/newIcon.png"}},[])])]):!r.new&&r.childNew?r.children?e("span",{class:"obj-tree-node"},[e("span",null,[t.label,e("span",{class:"el-icon-warning font-blue newPoint"},[])]),e("span",null,[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){return a.getUrlReferConfig(r,e)}}},["推送配置"])])]):e("span",{class:"obj-tree-node"},[e("span",null,[" ",e("i",{class:"refererTxt"},["[ HTTP Referer ]"])," ",t.label,e("span",{class:"el-icon-warning font-blue newPoint"},[])])]):r.children?e("span",{class:"obj-tree-node"},[e("span",null,[t.label]),e("span",null,[e("el-button",{attrs:{size:"small",type:"text",icon:"el-icon-setting"},on:{click:function(e){return a.getUrlReferConfig(r,e)}}},["推送配置"])])]):e("span",{class:"obj-tree-node"},[e("span",null,[" ",e("i",{class:"refererTxt"},["[ HTTP Referer ]"])," ",t.label])])},urlDownload:function(){var e=Object(i.a)(new Date),o=sessionStorage.getItem("mytoken"),a=n.b+"mc/esquery/urldownload?fromTimestamp="+this.strTimestamp+"&toTimestamp="+e+"&domainName="+this.domainName+"&apiIndicator="+this.apiIndicator+"&access_token="+o;window.open(a,"_self")},forPush:function(){for(var e=this,o=this,a="",t=0;t<o.objTreeNodeData.length;t++)a+=o.objTreeNodeData[t].label+",";a=a.slice(0,-1);var s=n.b+"pe/shadow/domain/location/urlcompare?domainName="+o.domainName+"&urlList="+a;r.a.get(s).then(function(a){0==a.data.responseCode?e.$message({type:"success",message:o.$t("lg.success")}):e.$message.error(o.$t("lg.failed"))})}}}),m={render:function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"objUpdate-wrapper"},[a("h2",{staticClass:"breadcrumb"},[e._v("URI白名单")]),e._v(" "),a("el-form",{ref:"searchObjform",staticClass:"form-bg",staticStyle:{"padding-bottom":"0"},attrs:{model:e.searchObjform,rules:e.searchObjformRules,"label-width":"0"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:10}},[a("el-form-item",{attrs:{prop:"paramDomain"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("lg.selectdomain"),loading:e.domainLoading},on:{"visible-change":function(o){e.getDomains(o)}},model:{value:e.searchObjform.paramDomain,callback:function(o){e.$set(e.searchObjform,"paramDomain",o)},expression:"searchObjform.paramDomain"}},[e._l(e.searchObjform.esDomainArr,function(e){return[a("el-option",{key:e.key,attrs:{label:e.key,value:e.key}})]})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(o){e.getObjData()}}},[e._v(e._s(e.$t("lg.query")))])],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.uploadActionUri,headers:e.uploadheader,"before-upload":e.beforeupload,"on-success":e.onsuccess,"auto-upload":!0,"file-list":e.fileList}},[a("el-button",{attrs:{type:"primary"}},[e._v("导入URI白名单配置")])],1)],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-button",{attrs:{type:"primary"},on:{click:e.downloadURI}},[e._v("下载URI白名单模板")])],1)],1)],1),e._v(" "),a("div",{staticClass:"objTreeBox"},[a("el-tree",{ref:"tree",attrs:{data:e.objTreeNodeData,props:e.objTreeProps,"render-content":e.objRenderContent}})],1),e._v(" "),a("div",{staticClass:"text-right"},[e.objTreeNodeData.length>0?a("el-button",{attrs:{type:"primary",icon:"el-icon-setting"},on:{click:function(o){e.forPush()}}},[e._v("推送")]):e._e(),e._v(" "),e.objTreeNodeData.length>0?a("el-button",{attrs:{type:"primary",icon:"el-icon-download"},on:{click:function(o){e.urlDownload()}}},[e._v("下载数据")]):e._e()],1),e._v(" "),a("url-refer-config",{ref:"urlReferConfig",attrs:{isShow:e.isShowUrlReferConfigDialog,urlReferConfigTitle:e.urlReferConfigTitle},on:{urlReferConfigDialogClose:function(o){e.isShowUrlReferConfigDialog=!1}}})],1)},staticRenderFns:[]};var f=a("VU/8")(d,m,!1,function(e){a("LGGf")},null,null);o.default=f.exports},"FZZ+":function(e,o,a){"use strict";var t=a("//Fk"),r=a.n(t),s=a("mtWM"),n=a.n(s),i=a("yJCr"),l=a("gQxQ"),c={components:{loading:a("qqiS").a},props:{isShow:{type:Boolean},urlReferConfigTitle:{type:String}},data:function(){return{urlTagData:[],urlReferConfigfrom:{reqeustTime:null,verifyBrowser:null,verifyAgent:null,verifyTokenRate:null},urlSugConfigfrom:{reqeustTime:null,verifyBrowser:null,verifyAgent:null,verifyToken:!1},urlSugConfigfromRules:{reqeustTime:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],verifyBrowser:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],verifyAgent:[{pattern:/^[\-?0-9]+$/,message:"必须为数字",trigger:"change"}]},requestTimeUnit:"ms",rqTimeUnitOpt:[{label:"毫秒",value:"ms"},{label:"秒",value:"s"}],selectSnodeShow:!1,shadowNodesform:{snodeId:"",domainName:"",domainPort:"",locationName:""},shadowNodesformRules:{snodeId:[{required:!0,message:this.$t("lg.required"),trigger:"change"}]},snodeData:[],noDomainShow:!1,domainData:[],pushConfigLoading:!1}},methods:{getUrlReferConfigData:function(e){var o=this;this.shadowNodesform.domainName=e.domainName,this.shadowNodesform.locationName=e.locationName;var a={bool:{filter:[{range:{"@timestamp":{gte:e.strTimestamp,lte:e.lteTimestamp}}}],must_not:[{query_string:{query:"shadow.access.org_url:\\/40*\\.html"}},{query_string:{query:"shadow.access.org_url:\\/"}},{query_string:{query:"shadow.access.cl_score:100000"}}],must:[{query_string:{query:"shadow.access.error_code:0"}},{query_string:{query:"shadow.access.response_code:200"}},{query_string:{query:"shadow.access.decrypted:1"}},{query_string:{query:"shadow.access.api_indicator:"+e.apiIndicator}},{query_string:{query:"shadow.access.domain:"+e.domainName}},{term:{"shadow.access.url_indicator":e.locationName}}]}},t=new r.a(function(e,t){l.a.search({index:"shadow-filebeat-*",body:{size:0,query:a,aggs:{GroupByDomain:{terms:{field:"shadow.access.http_host",size:500},aggs:{avg_starttime:{avg:{field:"shadow.access.send_time"}},avg_endtime:{avg:{field:"shadow.access.rec_time"}},avg_time:{bucket_script:{buckets_path:{avg_starttime:"avg_starttime",avg_endtime:"avg_endtime"},script:"params.avg_endtime-params.avg_starttime"}}}}}}}).then(function(a){var t=a.aggregations.GroupByDomain.buckets[0]?a.aggregations.GroupByDomain.buckets[0].avg_time.value:null;o.urlReferConfigfrom.reqeustTime=t,o.urlSugConfigfrom.reqeustTime=null!=t&&t>0?Math.ceil(t):null,e(t)})}),s=new r.a(function(e,t){l.a.search({index:"shadow-filebeat-*",body:{size:0,query:a,aggs:{GroupByBrowserScore:{avg:{field:"shadow.access.cl_browser_score"}}}}}).then(function(a){var t=a.aggregations.GroupByBrowserScore.value;o.urlReferConfigfrom.verifyBrowser=t,o.urlSugConfigfrom.verifyBrowser=null!=t?Math.floor(t):null,e({resData:t})})}),n=new r.a(function(e,t){l.a.search({index:"shadow-filebeat-*",body:{size:0,query:a,aggs:{GroupByScore:{avg:{field:"shadow.access.cl_score"}}}}}).then(function(a){var t=a.aggregations.GroupByScore.value;o.urlReferConfigfrom.verifyAgent=t,o.urlSugConfigfrom.verifyAgent=null!=t?Math.floor(t):null,e(t)})}),i=new r.a(function(e,t){l.a.search({index:"shadow-filebeat-*",body:{size:0,query:a,aggs:{GroupByTokenIndicator:{terms:{field:"shadow.access.token_indicator",size:10}}}}}).then(function(a){var t=a.hits.total.value,r=a.aggregations.GroupByTokenIndicator.buckets,s=0;r.forEach(function(e){e.key&&(s=e.doc_count/t)}),r.length>0?o.urlReferConfigfrom.verifyTokenRate=(100*s).toFixed(2):o.urlReferConfigfrom.verifyTokenRate=null;var n=s>.1;o.urlSugConfigfrom.verifyToken=n,e({openFlag:n})})}),c=new r.a(function(a,t){l.a.search({index:"shadow-filebeat-*",body:{size:0,query:{bool:{must:[{term:{"shadow.access.domain":e.domainName}},{term:{"shadow.access.url_indicator":e.locationName}}]}},aggs:{GroupByTag:{terms:{field:"shadow.access.tag_name",size:10}}}}}).then(function(e){var t=[];(e.aggregations?e.aggregations.GroupByTag.buckets:[]).forEach(function(e){e.key&&"-"!==e.key&&t.push({key:Base64.decode(e.key),docCount:e.doc_count})}),0==t.length&&(t=[{docCount:0,key:"暂无匹配标签"}]),o.urlTagData=t,a(t)})});return r.a.all([t,s,n,i,c])},urlRfCfDialogClose:function(){this.$emit("urlReferConfigDialogClose",!1)},selectSnode:function(){var e=this,o=i.b+"pe/shadow/snode";n.a.get(o).then(function(o){if(0==o.data.responseCode){var a=o.data.data;e.snodeData=a,e.selectSnodeShow=!0}else e.$message.error(e.$t("lg.failed")+": "+o.data.data.message)}).catch(function(e){console.log(e)})},checkDomainPort:function(e){var o=this,a=i.b+"pe/shadow/domain?snodeId="+e,t=this.shadowNodesform.domainName;n.a.get(a).then(function(e){if(0==e.data.responseCode){var a=e.data.data.domains.filter(function(e){return e.domainName.includes(t)});a.length>0?(o.noDomainShow=!1,o.shadowNodesform.domainPort=a[0].domainPort,o.domainData=a):o.noDomainShow=!0}else _this.$message.error(_this.$t("lg.failed")+": "+e.data.data.message)}).catch(function(e){console.log(e)})},checkLocation:function(){var e=this;return new r.a(function(o,a){var t=e.shadowNodesform.snodeId,r=e.shadowNodesform.domainName,s=e.shadowNodesform.domainPort,l=i.b+"pe/shadow/domain/location?snodeId="+t+"&domainName="+r+"&domainPort="+s;n.a.get(l).then(function(a){if(0==a.data.responseCode){var t=a.data.data,r=!1,s=e.shadowNodesform.locationName;t.forEach(function(e){e.locationName==s&&(r=!0)}),o(r)}else _this.$message.error(_this.$t("lg.failed")+": "+a.data.data.message)}).catch(function(e){console.log(e)})})},pushLocation:function(){var e=this;return new r.a(function(o,a){var t=i.b+"pe/shadow/domain/location",r=e.shadowNodesform.snodeId,s=e.shadowNodesform.domainName,l=e.shadowNodesform.domainPort,c=e.shadowNodesform.locationName;n.a.post(t,{snodeId:r,domainName:s,domainPort:l,locationType:"accurateMatch",locationName:c,waf:"off"}).then(function(e){0==e.data.responseCode&&o(!0)}).catch(function(e){console.log(e)})})},pushDirective:function(){var e=this;this.pushConfigLoading=!0;var o=i.b+"pe/shadow/domain/location/directive",a=this.shadowNodesform.snodeId,t=this.shadowNodesform.domainName,r=this.shadowNodesform.domainPort,s=this.shadowNodesform.locationName,l=[];if(this.urlSugConfigfrom.reqeustTime&&""!=this.urlSugConfigfrom.reqeustTime){var c=Base64.encode(this.urlSugConfigfrom.reqeustTime+this.requestTimeUnit);l.push({shadow_request_time:c})}if(this.urlSugConfigfrom.verifyBrowser&&""!=this.urlSugConfigfrom.verifyBrowser){var d=Base64.encode(this.urlSugConfigfrom.verifyBrowser);l.push({shadow_verify_browser:d})}if(this.urlSugConfigfrom.verifyAgent&&""!=this.urlSugConfigfrom.verifyAgent){var m=Base64.encode(this.urlSugConfigfrom.verifyAgent);l.push({shadow_verify_agent:m})}this.urlSugConfigfrom.verifyToken&&l.push({shadow_verify_token:"MQ=="}),n.a.post(o,{snodeId:a,domainName:t,domainPort:r,locationType:"accurateMatch",locationName:s,directives:l}).then(function(o){0==o.data.responseCode&&(e.$message({message:e.$t("lg.success"),type:"success"}),e.pushConfigLoading=!1,e.selectSnodeClose())}).catch(function(e){console.log(e)})},ensurePushConfig:function(e){var o=this;this.$refs[e].validate(function(e){e&&o.checkLocation().then(function(e){e?o.pushDirective():o.pushLocation().then(function(e){o.pushDirective()})})})},selectSnodeClose:function(){this.$refs.shadowNodesform.resetFields(),this.selectSnodeShow=!1,this.noDomainShow=!1}}},d={render:function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"urlReferConfig-wrapper"},[a("el-dialog",{attrs:{width:"55%",title:e.urlReferConfigTitle,visible:e.isShow,"close-on-click-modal":!1,"before-close":e.urlRfCfDialogClose},on:{"update:visible":function(o){e.isShow=o}}},[a("div",{staticClass:"urlTagBox"},[a("span",{staticClass:"titleSpan"},[e._v("对应标签")]),e._v(" "),e._l(e.urlTagData,function(o){return a("el-tag",{key:o.key},[e._v("\n        "+e._s(o.key)+"\n      ")])})],2),e._v(" "),a("div",{staticClass:"urlReferConfigBox"},[a("div",{staticClass:"referenceBox"},[a("p",{staticClass:"urlRfConfigTitle"},[e._v("参考配置")]),e._v(" "),a("ul",{staticClass:"referParamList"},[a("li",[e._v("手动代理防御设置："+e._s(null!=e.urlReferConfigfrom.reqeustTime?e.urlReferConfigfrom.reqeustTime+"毫秒":"暂无匹配值"))]),e._v(" "),a("li",[e._v("浏览器参数指标："+e._s(null!=e.urlReferConfigfrom.verifyBrowser?e.urlReferConfigfrom.verifyBrowser:"暂无匹配值"))]),e._v(" "),a("li",[e._v("用户行为指标："+e._s(null!=e.urlReferConfigfrom.verifyAgent?e.urlReferConfigfrom.verifyAgent:"暂无匹配值"))]),e._v(" "),a("li",[e._v("动态指纹功能："+e._s(e.urlReferConfigfrom.verifyTokenRate?"动态指纹占"+e.urlReferConfigfrom.verifyTokenRate+"%":"动态指纹占0%")+"  ")]),e._v(" "),a("li")])]),e._v(" "),a("div",{staticClass:"suggestBox"},[a("p",{staticClass:"urlRfConfigTitle"},[e._v("建议配置")]),e._v(" "),a("el-form",{ref:"urlSugConfigfrom",attrs:{model:e.urlSugConfigfrom,rules:e.urlSugConfigfromRules,"label-width":"125px"}},[a("el-row",{attrs:{gutter:10}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"手动代理防御设置",prop:"reqeustTime"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.urlSugConfigfrom.reqeustTime,callback:function(o){e.$set(e.urlSugConfigfrom,"reqeustTime","string"==typeof o?o.trim():o)},expression:"urlSugConfigfrom.reqeustTime"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("lg.select")},model:{value:e.requestTimeUnit,callback:function(o){e.requestTimeUnit=o},expression:"requestTimeUnit"}},e._l(e.rqTimeUnitOpt,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"浏览器参数指标",prop:"verifyBrowser"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.urlSugConfigfrom.verifyBrowser,callback:function(o){e.$set(e.urlSugConfigfrom,"verifyBrowser","string"==typeof o?o.trim():o)},expression:"urlSugConfigfrom.verifyBrowser"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"用户行为指标",prop:"verifyAgent"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:e.urlSugConfigfrom.verifyAgent,callback:function(o){e.$set(e.urlSugConfigfrom,"verifyAgent","string"==typeof o?o.trim():o)},expression:"urlSugConfigfrom.verifyAgent"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"开启动态指纹功能"}},[a("el-switch",{model:{value:e.urlSugConfigfrom.verifyToken,callback:function(o){e.$set(e.urlSugConfigfrom,"verifyToken",o)},expression:"urlSugConfigfrom.verifyToken"}}),a("span",{staticStyle:{"margin-left":"20px"}},[e._v("(注：动态指纹占比大于10%时建议开启)")])],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(o){e.selectSnode()}}},[e._v("推送到节点")]),e._v(" "),a("el-button",{on:{click:e.urlRfCfDialogClose}},[e._v(e._s(e.$t("lg.cancel")))])],1)],1)],1)])]),e._v(" "),a("el-dialog",{attrs:{width:"45%",title:e.$t("lg.pushconfig"),visible:e.selectSnodeShow,"close-on-click-modal":!1,"before-close":e.selectSnodeClose},on:{"update:visible":function(o){e.selectSnodeShow=o}}},[a("el-form",{ref:"shadowNodesform",attrs:{model:e.shadowNodesform,"label-width":"125px",rules:e.shadowNodesformRules}},[a("el-form-item",{attrs:{label:e.$t("lg.shadownode"),prop:"snodeId"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("lg.select")},on:{change:function(o){e.checkDomainPort(e.shadowNodesform.snodeId)}},model:{value:e.shadowNodesform.snodeId,callback:function(o){e.$set(e.shadowNodesform,"snodeId",o)},expression:"shadowNodesform.snodeId"}},[e._l(e.snodeData,function(e){return[a("el-option",{attrs:{label:e.isShadowGroup?e.hostName+"(集群)":e.hostName+"("+e.snodeId+")",value:e.snodeId}})]})],2)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:e.shadowNodesform.snodeId&&!e.noDomainShow,expression:"shadowNodesform.snodeId && !noDomainShow"}],attrs:{gutter:10}},[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"业务域名"}},[a("el-input",{attrs:{disabled:""},model:{value:e.shadowNodesform.domainName,callback:function(o){e.$set(e.shadowNodesform,"domainName","string"==typeof o?o.trim():o)},expression:"shadowNodesform.domainName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:e.$t("lg.select")},model:{value:e.shadowNodesform.domainPort,callback:function(o){e.$set(e.shadowNodesform,"domainPort",o)},expression:"shadowNodesform.domainPort"}},e._l(e.domainData,function(e){return a("el-option",{key:e.domainPort,attrs:{label:e.domainPort,value:e.domainPort}})}))],1)],1)],1),e._v(" "),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.shadowNodesform.snodeId&&!e.noDomainShow,expression:"shadowNodesform.snodeId && !noDomainShow"}],attrs:{label:"被保护对象的位置"}},[a("el-input",{attrs:{disabled:""},model:{value:e.shadowNodesform.locationName,callback:function(o){e.$set(e.shadowNodesform,"locationName","string"==typeof o?o.trim():o)},expression:"shadowNodesform.locationName"}})],1),e._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:e.shadowNodesform.snodeId&&e.noDomainShow,expression:"shadowNodesform.snodeId && noDomainShow"}],staticClass:"noDomainTips"},[e._v("所选节点暂不包含当前业务域名："+e._s(e.shadowNodesform.domainName)+"，请先前往‘配置’页面创建该业务！")]),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:""!=e.shadowNodesform.snodeId&&e.noDomainShow},on:{click:function(o){e.ensurePushConfig("shadowNodesform")}}},[e._v("推送")]),e._v(" "),a("el-button",{on:{click:e.selectSnodeClose}},[e._v(e._s(e.$t("lg.cancel")))])],1)],1),e._v(" "),a("loading",{directives:[{name:"show",rawName:"v-show",value:e.pushConfigLoading,expression:"pushConfigLoading"}]})],1)],1)},staticRenderFns:[]};var m=a("VU/8")(c,d,!1,function(e){a("hrPQ")},"data-v-4f7f337f",null);o.a=m.exports},LGGf:function(e,o){},hrPQ:function(e,o){}});
//# sourceMappingURL=8.a18079fdd8d6d11d8538.js.map