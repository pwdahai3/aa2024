webpackJsonp([44],{"/3Uj":function(e,a){},mQPY:function(e,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t=s("mvHQ"),o=s.n(t),n=s("mtWM"),r=s.n(n),d=s("qqiS"),i=s("yJCr"),c={components:{loading:d.a},created:function(){this.getShadownode()},data:function(){return{shadownodeOpts:[],shadownodeVal:"",shadownodeData:[],orginaccessVal:"",orginErrorVal:"",isLoading:!1}},methods:{updateAcc:function(){if(this.shadownodeData[0].accessReserveTime.match(/^\d+$/g)){var e={newAccessReserveTime:this.shadownodeData[0].accessReserveTime,oldAccessReserveTime:this.orginaccessVal,type:1};this.update(e)}else this.$message.error("请输入数字")},updateErr:function(){if(this.shadownodeData[1].errorReserveTime.match(/^\d+$/g)){var e={newErrorReserveTime:this.shadownodeData[1].errorReserveTime,oldErrorReserveTime:this.orginErrorVal,type:2};this.update(e)}else this.$message.error("请输入数字")},update:function(e){var a=this,s=i.b+"pe/shadow/changeSavelogConf/post/"+this.shadownodeVal;this.isLoading=!0,r.a.post(s,e).then(function(e){0==e.data.responseCode?(a.$message({type:"success",message:a.$t("lg.success")}),a.orginaccessVal=JSON.parse(o()(a.shadownodeData[0].accessReserveTime)),a.orginErrorVal=JSON.parse(o()(a.shadownodeData[1].errorReserveTime))):a.$message.error(a.$t("lg.failed")),a.isLoading=!1}).catch(function(e){})},getShadownode:function(){var e=this,a=i.b+"pe/shadow/nodeId/all";this.isLoading=!0,r.a.get(a).then(function(a){if(0==a.data.responseCode){var s=a.data.data;e.shadownodeOpts=s,e.shadownodeOpts.length>0&&(e.shadownodeVal=e.shadownodeOpts[0]),e.getShadownodeData()}}).catch(function(e){console.log(e)})},getShadownodeData:function(e){var a=this;e=e||this.shadownodeVal;var s=i.b+"pe/shadow/changeSavelogConf/get/"+e;r.a.get(s).then(function(e){if(0==e.data.responseCode){var s=e.data.data;a.shadownodeData=s,a.orginaccessVal=JSON.parse(o()(a.shadownodeData[0].accessReserveTime)),a.orginErrorVal=JSON.parse(o()(a.shadownodeData[1].errorReserveTime)),a.isLoading=!1}}).catch(function(e){console.log(e)})}}},h={render:function(){var e=this,a=e.$createElement,s=e._self._c||a;return s("div",{staticClass:"users-wrapper"},[s("h2",{staticClass:"breadcrumb"},[e._v("日志备份设置")]),e._v(" "),s("div",{staticStyle:{"margin-bottom":"12px"}},[s("el-select",{attrs:{placeholder:"请选择shadow节点"},on:{change:e.getShadownodeData},model:{value:e.shadownodeVal,callback:function(a){e.shadownodeVal=a},expression:"shadownodeVal"}},e._l(e.shadownodeOpts,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),s("div",{staticClass:"usersContent"},[0==e.shadownodeData.length?s("p",{staticClass:"nodata-box"},[e._v(e._s(e.$t("lg.nodata")))]):e._e(),e._v(" "),e.shadownodeData.length>0?s("table",[e._m(0),e._v(" "),s("tbody",[s("tr",[s("td",[e._v("访问日志")]),e._v(" "),s("td",[s("el-input",{model:{value:e.shadownodeData[0].accessReserveTime,callback:function(a){e.$set(e.shadownodeData[0],"accessReserveTime",a)},expression:"shadownodeData[0].accessReserveTime"}})],1),e._v(" "),s("td",{staticClass:"text-center"},[s("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:e.updateAcc}},[s("i",{staticClass:"el-icon-edit"}),e._v("更新")])])]),e._v(" "),s("tr",[s("td",[e._v("错误日志")]),e._v(" "),s("td",[s("el-input",{model:{value:e.shadownodeData[1].errorReserveTime,callback:function(a){e.$set(e.shadownodeData[1],"errorReserveTime",a)},expression:"shadownodeData[1].errorReserveTime"}})],1),e._v(" "),s("td",{staticClass:"text-center"},[s("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:e.updateErr}},[s("i",{staticClass:"el-icon-edit"}),e._v("更新")])])])])]):e._e()]),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.isLoading,expression:"isLoading"}],attrs:{title:"数据处理中..."}})],1)},staticRenderFns:[function(){var e=this.$createElement,a=this._self._c||e;return a("thead",[a("tr",[a("th",[this._v("备份日志")]),this._v(" "),a("th",[this._v("存储周期")]),this._v(" "),a("th",{attrs:{width:"280"}})])])}]};var l=s("VU/8")(c,h,!1,function(e){s("/3Uj")},"data-v-1bc4cc73",null);a.default=l.exports}});
//# sourceMappingURL=44.8c5576b864001894347b.js.map