webpackJsonp([1],{"/gLJ":function(t,e){},"03f0":function(t,e){},"09Ua":function(t,e,i){"use strict";var a=i("mvHQ"),n=i.n(a),r=i("//Fk"),o=i.n(r),s=i("mtWM"),l=i.n(s),c=(i("5reh"),i("qqiS")),d=i("yJCr"),u=(i("kDN8"),{components:{loading:c.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){return{url:"",getDirectiveLoading:!1,directiveData:[],sdLocationFlag:!1,addDctDialogVisible:!1,directiveform:{uri1:"",uri2:"",uri3:""},directiveformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],uri2:[],uri3:[]},directiveList:[],addDctLoading:!1,editDctDialogVisible:!1,editDirectiveform:{uri1:"",uri2:"",uri3:""},editDirectiveformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],uri2:[],uri3:[]},editDirectiveOrgin:{uri1:"",uri2:"",uri3:""},orginEditdirective:{},editDctLoading:!1}},mounted:function(){this.isAuto?this.url=d.b+"pe/shadow/domain/location/jumpconf?autoconfig=true":this.isEditConfig?this.url=d.b+"pe/shadow/domain/location/jumpconf?savedConfig=true":this.url=d.b+"pe/shadow/domain/location/jumpconf"},methods:{getLcSkipInstructData:function(){var t=this;return new o.a(function(e,i){var a=t;l.a.get(a.url,{params:{snodeId:a.shadowObj.snodeId,domainName:a.domainObj.domainName,domainPort:a.domainObj.port,locationName:a.locationObj.name,locationType:a.locationObj.type}}).then(function(i){var a=i.data.data||[];t.directiveData=a,e(a)})})},directiveDialogClose:function(){this.$emit("setbylcSkipInstructmodal",!1)},addDctDialogShow:function(){this.addDctDialogVisible=!0},addDirectiveList:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(t){var a=e.directiveform.uri1,n=e.directiveform.uri2,r=e.directiveform.uri3,o={domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,snodeId:i.shadowObj.snodeId,uri:a,prefixSubstring:n,replaceSubstring:r};l.a.post(i.url,o).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcSkipInstructData(),i.$emit("updateRenderTree"),i.addDctDialogClose()):i.$message.error(i.$t("lg.failed")),i.addDctLoading=!1}).catch(function(t){console.log(t)})}})},addDirectiveList2:function(t){var e=this;this.$refs[t].validate(function(t){if(t)if(e.sdLocationFlag)e.$message.error("跳转配置指令只能设置一条，如需修改请先删除右侧的‘跳转配置’");else{var i={subfilterType:"shadow_location",uri1:e.directiveform.uri1,uri2:e.directiveform.uri2,uri3:e.directiveform.uri3};e.directiveList.push(i),e.sdLocationFlag=!0}})},delDirectiveList:function(t){this.sdLocationFlag=!1,this.directiveList.splice(this.directiveList.indexOf(t),1)},submitDirective:function(){var t=this;t.addDctLoading=!0;var e=[];this.directiveList.forEach(function(t){var i=t.uri1+" "+t.uri2+" "+t.uri3;i=Base64.encode(i),e.push({shadow_location:i})}),l.a.post(t.url,{snodeId:t.shadowObj.snodeId,domainName:t.domainObj.domainName,domainPort:t.domainObj.port,locationName:t.locationObj.name,locationType:t.locationObj.type,directives:e}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getLcSkipInstructData(),t.addDctDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.addDctLoading=!1}).catch(function(t){console.log(t)})},addDctDialogClose:function(){this.directiveList=[],this.$refs.directiveform.resetFields(),this.sdLocationFlag=!1,this.addDctDialogVisible=!1},editDctDialogShow:function(t){this.editDctDialogVisible=!0,this.orginEditdirective=JSON.parse(n()(t)),this.editDirectiveform.uri1=t.uri,this.editDirectiveform.uri2=t.prefixSubstring,this.editDirectiveform.uri3=t.replaceSubstring},editDctEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;i.editDctLoading=!0,l.a.patch(i.url,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,uri:e.editDirectiveform.uri1,prefixSubstring:e.editDirectiveform.uri2,replaceSubstring:e.editDirectiveform.uri3,oldUri:e.orginEditdirective.uri,oldPrefixSubstring:e.orginEditdirective.prefixSubstring,oldReplaceSubstring:e.orginEditdirective.replaceSubstring}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcSkipInstructData(),i.editDctDialogClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctDialogClose:function(){this.$refs.editDirectiveform.resetFields(),this.editDctDialogVisible=!1},deletDirective:function(t){console.log(t);var e=this;e.getDirectiveLoading=!0,l.a.delete(e.url,{data:{domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type,snodeId:e.shadowObj.snodeId,oldUri:t.uri,oldPrefixSubstring:t.prefixSubstring,oldReplaceSubstring:t.replaceSubstring}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getLcSkipInstructData(),e.$emit("updateRenderTree")):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},deletDirective2:function(t){var e=this;e.getDirectiveLoading=!0;var i=Base64.encode(t.join(" ").replace(/^\s+|\s+$/gm,"")),a={},n=[];a.shadow_location=i,n.push(a),l.a.delete(e.url,{data:{snodeId:e.shadowObj.snodeId,domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type,directives:n}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getLcSkipInstructData()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}}}),f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.directiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"directiveBox"},[i("el-button",{staticClass:"addDirectiveBtn",attrs:{type:"primary",size:"mini",disabled:t.directiveData.length>0},on:{click:function(e){t.addDctDialogShow()}}},[t._v("新增跳转配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v(t._s(t.$t("lg.jumpconfig")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("URI")]),t._v(" "),i("th",[t._v("前缀子串")]),t._v(" "),i("th",[t._v("替换子串")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[i("td",[t._v(t._s(e.uri))]),t._v(" "),i("td",[t._v(t._s(e.prefixSubstring))]),t._v(" "),i("td",[t._v(t._s(e.replaceSubstring))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editDctDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.getDirectiveLoading,expression:"getDirectiveLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.addDctDialogVisible,"close-on-click-modal":!1,"before-close":t.addDctDialogClose},on:{"update:visible":function(e){t.addDctDialogVisible=e}}},[i("el-form",{ref:"directiveform",staticStyle:{"margin-right":"30px"},attrs:{model:t.directiveform,rules:t.directiveformRules,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"URI",prop:"uri1"}},[i("el-input",{model:{value:t.directiveform.uri1,callback:function(e){t.$set(t.directiveform,"uri1","string"==typeof e?e.trim():e)},expression:"directiveform.uri1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"前缀子串",prop:"uri2"}},[i("el-input",{model:{value:t.directiveform.uri2,callback:function(e){t.$set(t.directiveform,"uri2","string"==typeof e?e.trim():e)},expression:"directiveform.uri2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"替换子串",prop:"uri3"}},[i("el-input",{model:{value:t.directiveform.uri3,callback:function(e){t.$set(t.directiveform,"uri3","string"==typeof e?e.trim():e)},expression:"directiveform.uri3"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDirectiveList("directiveform")}}},[t._v("增加")]),t._v(" "),i("el-button",{on:{click:t.addDctDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addDctLoading,expression:"addDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.editDctDialogVisible,"close-on-click-modal":!1,"before-close":t.editDctDialogClose},on:{"update:visible":function(e){t.editDctDialogVisible=e}}},[i("el-form",{ref:"editDirectiveform",attrs:{model:t.editDirectiveform,rules:t.editDirectiveformRules,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"URI",prop:"uri1"}},[i("el-input",{model:{value:t.editDirectiveform.uri1,callback:function(e){t.$set(t.editDirectiveform,"uri1","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"前缀子串",prop:"uri2"}},[i("el-input",{model:{value:t.editDirectiveform.uri2,callback:function(e){t.$set(t.editDirectiveform,"uri2","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"替换子串",prop:"uri3"}},[i("el-input",{model:{value:t.editDirectiveform.uri3,callback:function(e){t.$set(t.editDirectiveform,"uri3","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri3"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("editDirectiveform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.editDctDialogClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editDctLoading,expression:"editDctLoading"}]})],1)],1)},staticRenderFns:[]};var h=i("VU/8")(u,f,!1,function(t){i("ysl6")},"data-v-04ef47db",null);e.a=h.exports},"1Niu":function(t,e,i){"use strict";var a=i("mvHQ"),n=i.n(a),r=i("mtWM"),o=i.n(r),s=i("qqiS"),l=i("yJCr"),c={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},data:{type:Object},dmEditmodalShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},diplomas:{type:Array},keys:{type:Array}},data:function(){return{editmodalLoading:!1,editDomainObj:{},checkList:[],editmodalformRules:{domainName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-."\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],domainPort:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],sslCrt:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],sslKey:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],serverPort:[{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}]},isShowHgSettingBox:!1}},watch:{data:function(){this.editDomainObj=JSON.parse(n()(this.data)),this.checkList=this.editDomainObj.ipListenConfs.split("|")}},methods:{editmodalClose:function(){this.$refs.editDomainObj.resetFields(),this.$emit("setbydmEditmodal",!1),this.isShowHgSettingBox=!1},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},updateDomainName:function(t){var e=this;e.$refs[t].validate(function(t){if(t){if(e.isAuto)var i=l.b+"pe/shadow/domain?autoconfig=true";else if(e.isEditConfig)i=l.b+"pe/shadow/domain?savedConfig=true";else i=l.b+"pe/shadow/domain";var a,n=e.shadowObj.snodeId,r=e.domainObj.domainName,s=e.domainObj.port;e.editmodalLoading=!0;var c=e.checkList;1==c.length?a=c[0]:2==c.length&&(a=c[0]+"|"+c[1]);var d={snodeId:n,domainName:e.editDomainObj.domainName,domainPort:e.editDomainObj.domainPort,srcDomainName:r,srcDomainPort:s,remark:e.editDomainObj.remark,ssl:"off",enableXFF:e.editDomainObj.enableXFF,serverScheme:e.editDomainObj.serverScheme,serverPort:e.editDomainObj.serverPort,ipListenConfs:a};"https"==e.editDomainObj.outHttp&&(d.ssl="on",d.crt=e.editDomainObj.sslCrt,d.key=e.editDomainObj.sslKey),o.a.patch(i,d).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.$emit("updateRenderTree"),e.editmodalClose()):8==t.data.responseCode?e.$message.error(e.$t("lg.failed")+": "+t.data.data):e.$message.error(e.$t("lg.failed")+": "+t.data.data.message),e.editmodalLoading=!1}).catch(function(t){console.log(t)})}})}},components:{loading:s.a}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.dmEditmodalShow,"close-on-click-modal":!1,"before-close":t.editmodalClose},on:{"update:visible":function(e){t.dmEditmodalShow=e}}},[i("div",{staticClass:"domainBox"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.editbs")))]),t._v(" "),i("el-form",{ref:"editDomainObj",attrs:{model:t.editDomainObj,"label-width":"80px",rules:t.editmodalformRules}},[i("el-form-item",{attrs:{label:t.$t("lg.httpout")}},[i("el-select",{staticStyle:{width:"100%"},model:{value:t.editDomainObj.outHttp,callback:function(e){t.$set(t.editDomainObj,"outHttp",e)},expression:"editDomainObj.outHttp"}},[[i("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),i("el-option",{attrs:{label:"https",value:"https"}})]],2)],1),t._v(" "),"https"==t.editDomainObj.outHttp?i("el-form-item",{attrs:{label:t.$t("lg.selectcer"),prop:"sslCrt"}},[i("el-select",{attrs:{placeholder:t.$t("lg.selectcer")},model:{value:t.editDomainObj.sslCrt,callback:function(e){t.$set(t.editDomainObj,"sslCrt",e)},expression:"editDomainObj.sslCrt"}},[t._l(t.diplomas,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1):t._e(),t._v(" "),"https"==t.editDomainObj.outHttp?i("el-form-item",{attrs:{label:t.$t("lg.selectsec"),prop:"sslKey"}},[i("el-select",{attrs:{placeholder:t.$t("lg.selectsec")},model:{value:t.editDomainObj.sslKey,callback:function(e){t.$set(t.editDomainObj,"sslKey",e)},expression:"editDomainObj.sslKey"}},[t._l(t.keys,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.httpin")}},[i("el-select",{staticStyle:{width:"100%"},model:{value:t.editDomainObj.serverScheme,callback:function(e){t.$set(t.editDomainObj,"serverScheme",e)},expression:"editDomainObj.serverScheme"}},[[i("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),i("el-option",{attrs:{label:"https",value:"https"}})]],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsdomain"),prop:"domainName"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editDomainObj.domainName,callback:function(e){t.$set(t.editDomainObj,"domainName","string"==typeof e?e.trim():e)},expression:"editDomainObj.domainName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsport"),prop:"domainPort"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editDomainObj.domainPort,callback:function(e){t.$set(t.editDomainObj,"domainPort","string"==typeof e?e.trim():e)},expression:"editDomainObj.domainPort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editDomainObj.remark,callback:function(e){t.$set(t.editDomainObj,"remark","string"==typeof e?e.trim():e)},expression:"editDomainObj.remark"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"IP版本"}},[i("el-checkbox-group",{attrs:{min:1},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[i("el-checkbox",{attrs:{label:"ipv4"}},[t._v("IPV4")]),t._v(" "),i("el-checkbox",{attrs:{label:"ipv6"}},[t._v("IPV6")])],1)],1),t._v(" "),i("div",{staticClass:"gradeSettingBox"},[i("p",{staticClass:"gradeSettingTxt text-right"},[i("span",{staticClass:"gradeSetting font-blue",on:{click:function(e){t.gradeSetting()}}},[i("i",{class:t.isShowHgSettingBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v("高级配置")])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowHgSettingBox,expression:"isShowHgSettingBox"}],staticClass:"gradeSettinginner"},[i("el-form-item",{attrs:{label:"开启x-forwarded-for功能","label-width":"190px",prop:"enableXFF"}},[i("el-switch",{model:{value:t.editDomainObj.enableXFF,callback:function(e){t.$set(t.editDomainObj,"enableXFF",e)},expression:"editDomainObj.enableXFF"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.customport"),prop:"serverPort","label-width":"190px"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:t.editDomainObj.serverPort?"请输入代理后的主机端口":"暂未设代理后的主机端口"},model:{value:t.editDomainObj.serverPort,callback:function(e){t.$set(t.editDomainObj,"serverPort","string"==typeof e?e.trim():e)},expression:"editDomainObj.serverPort"}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateDomainName("editDomainObj")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editmodalLoading,expression:"editmodalLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(t){i("6t4H")},"data-v-60a11e66",null);e.a=u.exports},"1YKf":function(t,e){},"203j":function(t,e,i){"use strict";var a=i("mtWM"),n=i.n(a),r=i("qqiS"),o=i("yJCr"),s={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},saveconfmodalShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{saveconfform:{name:""},saveconfformRules:{name:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/(\.conf)$/,message:this.$t("lg.confsuffix"),trigger:"blur"}]},saveconfLoading:!1}},methods:{saveconfResetForm:function(){this.$refs.saveconfform.resetFields(),this.$emit("setbysaveconfmodal",!1)},saveConf:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(!t)return console.log("error"),!1;var a=e.saveconfform.name;if(e.saveconfLoading=!0,e.isAuto)var r=o.b+"pe/file/autoconfig/save?targetFileName="+a+"&snodeId="+e.$store.state.autoconfigsnodeid;else r=o.b+"pe/file/"+e.shadowObj.snodeId+"/"+a;n.a.post(r).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:i.$t("lg.success")}),e.saveconfLoading=!1,e.saveconfResetForm()):e.$message.error(i.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})}},components:{loading:r.a}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.savefile"),visible:t.saveconfmodalShow,"close-on-click-modal":!1,"before-close":t.saveconfResetForm},on:{"update:visible":function(e){t.saveconfmodalShow=e}}},[i("el-form",{ref:"saveconfform",attrs:{model:t.saveconfform,rules:t.saveconfformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:t.$t("lg.filename"),prop:"name"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:t.$t("lg.suffixconf")},model:{value:t.saveconfform.name,callback:function(e){t.$set(t.saveconfform,"name","string"==typeof e?e.trim():e)},expression:"saveconfform.name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveConf("saveconfform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:function(e){t.saveconfResetForm()}}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.saveconfLoading,expression:"saveconfLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1)],1)},staticRenderFns:[]},c=i("VU/8")(s,l,!1,null,null,null);e.a=c.exports},"2hv+":function(t,e,i){"use strict";var a=i("mvHQ"),n=i.n(a),r=i("woOf"),o=i.n(r),s=i("bOdI"),l=i.n(s),c=i("fZjL"),d=i.n(c),u=i("//Fk"),f=i.n(u),h=i("mtWM"),m=i.n(h),p=i("qqiS"),g=i("yJCr"),v={components:{loading:p.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},isShow:{type:Boolean}},data:function(){return{upstreamlist:[],upstreamServerCheck:{},loadBalancingType:"",upstreamObj:{ntlmVal:""},upstreamlistmodalLoading:!1,isShowChangeBalanceBox:!1,isShowEditCmd:!1,isIpWeight:!1,checkedTactics:"",ipTactics:[{value:"polling",name:this.$t("lg.polling")},{value:"least_conn",name:this.$t("lg.leastcon")},{value:"ip_weight",name:this.$t("lg.weights")},{value:"ip_hash",name:"ip_hash"},{value:"xxf_hash",name:"xff_hash"}],addStreamlistLoading:!1,addStreamlistmodalShow:!1,upstreamform:{ip:"",ipPort:80,ipWeight:""},editStreamlistLoading:!1,editCmdOldform:{},editCmdform:{},weightCmdform:{weightCmdArray:[]},sureWeightArray:[],upstreamformRules:{ip:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],ipPort:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],ipWeight:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editCmdformRules:{ip:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],port:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],ipWeight:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},upstreamCmdData:[],isShowServerCheckBox:!1,enableScCk:!1,editSvCkfrom:{scInterval:null,scFall:null,scRise:null,scTimeout:null,scType:"tcp",checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[]},scTimeIntervalUnit:[{value:"s",label:"秒"}],scIntervalUnitVal:"s",scTimeoutUnitVal:"s",scTypeUnit:[{value:"tcp",label:"tcp"},{value:"http",label:"http"},{value:"ssl_hello",label:"ssl_hello"}],ckHtpSendUnit:[{value:"GET",label:"GET"},{value:"HEAD",label:"HEAD"}],ckHtpExpAliveUnit:[{value:"http_2xx",label:"http_2xx"},{value:"http_3xx",label:"http_3xx"},{value:"http_4xx",label:"http_4xx"},{value:"http_5xx",label:"http_5xx"}],editSvCkfromRules:{scInterval:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],scFall:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],scRise:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],scTimeout:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],checkHttpSendTxt:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^([\w\-.\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:"非规范格式",trigger:"blur"}],checkHttpExpectAlive:[{required:!0,message:"不能为空",trigger:"blur"}]},isShowHgSettingBox:!1,editGradeSetform:{ntlmValule:""},editGradeSetformRules:{ntlmValule:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]}}},watch:{isShowChangeBalanceBox:function(){this.isShowChangeBalanceBox&&(this.checkedTactics=this.loadBalancingType)},isShow:function(){if(this.isShow){if(this.enableScCk=this.upstreamServerCheck.enabled||!1,this.upstreamServerCheck.param){var t=this.upstreamServerCheck.param;if(this.editSvCkfrom.scInterval=t.interval/1e3,this.editSvCkfrom.scFall=t.fall,this.editSvCkfrom.scRise=t.rise,this.editSvCkfrom.scTimeout=t.timeout/1e3,this.editSvCkfrom.scType=t.type,"http"==t.type){var e=t.check_http_send,i=/^"(\S+)\s(\S+)/g.exec(e);this.editSvCkfrom.checkHttpSendType=i[1],this.editSvCkfrom.checkHttpSendTxt=i[2],this.editSvCkfrom.checkHttpExpectAlive=t.check_http_expect_alive.split(" ")}}}else this.editSvCkfrom.scInterval=null,this.editSvCkfrom.scFall=null,this.editSvCkfrom.scRise=null,this.editSvCkfrom.scTimeout=null,this.editSvCkfrom.scType="tcp",this.editSvCkfrom.checkHttpSendType="GET",this.editSvCkfrom.checkHttpSendTxt="/",this.editSvCkfrom.checkHttpExpectAlive=[]},isShowHgSettingBox:function(){this.isShowHgSettingBox&&(this.editGradeSetform.ntlmValule=this.upstreamObj.ntlmVal)}},computed:{loadBalancingTypeTxt:function(){switch(this.loadBalancingType){case"polling":return this.$t("lg.polling");case"least_conn":return this.$t("lg.leastcon");case"ip_weight":return this.$t("lg.weights");case"ip_hash":return"ip_hash";default:return"xff_hash"}}},methods:{getDmUpstreamlistData:function(){var t=this;return new f.a(function(e,i){var a=t;if(a.isAuto)var n=g.b+"pe/shadow/domain/server?autoconfig=true";else if(a.isEditConfig)n=g.b+"pe/shadow/domain/server?savedConfig=true";else n=g.b+"pe/shadow/domain/server";m.a.get(n,{params:{snodeId:a.shadowObj.snodeId,domainName:a.domainObj.domainName,domainPort:a.domainObj.port}}).then(function(t){if(0==t.data.responseCode){var i=t.data.data,n=[],r="",o={};if(i.forEach(function(t,e){t.hasOwnProperty("ntlm")&&(r=t.ntlm,i.splice(e,1))}),i.forEach(function(t,e){t.hasOwnProperty("serverCheck")&&(o=t.serverCheck,i.splice(e,1))}),a.upstreamObj.ntlmVal=r,a.upstreamServerCheck=o,"server"==d()(i[i.length-1])[0])if(/\weight/.test(i[0].server)){a.loadBalancingType="ip_weight";var s=/(.*):(\d+)\s(?:weight=(.*))/;i.forEach(function(t,e){var i=s.exec(t.server);n.push({ip:i[1],port:i[2],ipWeight:i[3]})})}else a.loadBalancingType="polling",i.forEach(function(t,e){var i,a,r;t.server.indexOf("]:")>-1?(i=(r=t.server.split("]:"))[0]+"]",a=r[1]):(i=(r=t.server.split(":"))[0],a=r[1]),n.push({ip:i,port:a})});else"least_conn"!=d()(i[i.length-1])[0]&&"ip_hash"!=d()(i[i.length-1])[0]&&"xxf_hash"!=d()(i[i.length-1])[0]||(a.loadBalancingType=d()(i[i.length-1])[0],i.splice(i.length-1,1),i.forEach(function(t,e){var i,a,r;t.server.indexOf("]:")>-1?(i=(r=t.server.split("]:"))[0]+"]",a=r[1]):(i=(r=t.server.split(":"))[0],a=r[1]),n.push({ip:i,port:a})}));a.upstreamlist=n,e(!0)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},upstreamlistmodalClose:function(){this.$emit("setbyupstreamlistmodal",!1),this.isShowChangeBalanceBox=!1,this.isShowServerCheckBox=!1,this.isShowHgSettingBox=!1},dmUpstreamModal:function(){this.addStreamlistmodalShow=!0},addStreamlistmodalClose:function(){this.upstreamCmdData=[],this.$refs.upstreamform.resetFields(),this.addStreamlistmodalShow=!1},addUpstreamCmd:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.upstreamCmdData.push(e.upstreamform),e.upstreamform={ip:"",ipPort:"",ipWeight:""})})},deleAddCmd:function(t){this.upstreamCmdData.splice(this.upstreamCmdData.indexOf(t),1)},submitupstreamCmd:function(){var t=this;t.addStreamlistLoading=!0;var e=t.shadowObj.snodeId,i=t.domainObj.domainName,a=t.domainObj.port,n=[];if(n=t.upstreamCmdData.map(function(e){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(e.ip)&&!/^\[|\]$/.test(e.ip)&&(e.ip="["+e.ip+"]"),"ip_weight"==t.loadBalancingType?{server:e.ip+":"+e.ipPort+" weight="+e.ipWeight}:{server:e.ip+":"+e.ipPort}}),"polling"!==t.loadBalancingType&&"ip_weight"!==t.loadBalancingType&&n.push(l()({},t.loadBalancingType,"")),t.isAuto)var r=g.b+"pe/shadow/domain/server?autoconfig=true";else if(t.isEditConfig)r=g.b+"pe/shadow/domain/server?savedConfig=true";else r=g.b+"pe/shadow/domain/server";var o={snodeId:e,domainName:i,domainPort:a,servers:n};m.a.post(r,o).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getDmUpstreamlistData(),t.addStreamlistmodalClose()):t.$message.error(t.$t("lg.failed")+":( "+t.$t("lg.rightip")+")"+e.data.data.message),t.addStreamlistLoading=!1}).catch(function(t){console.log(t)})},editCmd:function(t){this.isShowEditCmd=!0,this.editCmdOldform=t,this.editCmdform=o()({},t)},isEditCmdClose:function(){this.isShowEditCmd=!1},editCmdEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.editStreamlistLoading=!0;var i=e.shadowObj.snodeId,a=e.domainObj.domainName,n=e.domainObj.port,r=e.editCmdOldform,o=e.editCmdform;if(e.isAuto)var s=g.b+"pe/shadow/domain/server?autoconfig=true";else if(e.isEditConfig)s=g.b+"pe/shadow/domain/server?savedConfig=true";else s=g.b+"pe/shadow/domain/server";var l=[],c="";if("ip_weight"==e.loadBalancingType){var d=o.ip+":"+o.port+" weight="+o.ipWeight;l.push({server:d}),c=r.ip+":"+r.port+" weight="+r.ipWeight}else{d=o.ip+":"+o.port;l.push({server:d}),c=r.ip+":"+r.port}var u={snodeId:i,domainName:a,domainPort:n,srcKey:"server",servers:l,srcParam:c};m.a.patch(s,u).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getDmUpstreamlistData(),e.isEditCmdClose()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.editStreamlistLoading=!1}).catch(function(t){console.log(t)})}})},delCmd:function(t){var e=this;if(1!=e.upstreamlist.length){e.upstreamlistmodalLoading=!0;var i=e.shadowObj.snodeId,a=e.domainObj.domainName,n=e.domainObj.port;if(t.ipWeight)var r=t.ip+":"+t.port+" weight="+t.ipWeight;else r=t.ip+":"+t.port;var o={},s=[];if(o.server=r,s.push(o),e.isAuto)var l=g.b+"pe/shadow/domain/server?autoconfig=true";else if(e.isEditConfig)l=g.b+"pe/shadow/domain/server?savedConfig=true";else l=g.b+"pe/shadow/domain/server";var c={data:{snodeId:i,domainName:a,domainPort:n,servers:s}};m.a.delete(l,c).then(function(i){0==i.data.responseCode?(e.upstreamlist.splice(e.upstreamlist.indexOf(t),1),e.$message({type:"success",message:e.$t("lg.success")})):e.$message.error(e.$t("lg.failed")+":"+i.data.data.message),e.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}else e.$message.error(e.$t("lg.leastinbs"))},changeBalance:function(){this.isShowChangeBalanceBox=!this.isShowChangeBalanceBox},isweightCmdformClose:function(){this.isIpWeight=!1,this.sureWeightArray=[],this.checkedTactics=this.loadBalancingType},changeEnsure:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.sureWeightArray=e.weightCmdform.weightCmdArray.map(function(t){return{server:t.ip+":"+t.port+" weight="+t.ipWeight}}),e.changeBalanceEnsure(),e.isIpWeight=!1)})},changeBalanceEnsure:function(){var t=this,e=t.checkedTactics;if("xff_hash"==e&&(e="xxf_hash"),e!=t.loadBalancingType){t.upstreamlistmodalLoading=!0;var i=t.shadowObj.snodeId,a=t.domainObj.domainName,r=t.domainObj.port,o=[];if(t.upstreamlist.forEach(function(t){var e=t.ip+":"+t.port;o.push({server:e})}),"ip_weight"==e){if(0==t.sureWeightArray.length)return t.upstreamlistmodalLoading=!1,t.weightCmdform.weightCmdArray=JSON.parse(n()(t.upstreamlist)),void(t.isIpWeight=!0);o=t.sureWeightArray}else"polling"!==e&&o.push(l()({},e,""));if(this.isAuto)var s=g.b+"pe/shadow/domain/server?autoconfig=true";else if(this.isEditConfig)s=g.b+"pe/shadow/domain/server?savedConfig=true";else s=g.b+"pe/shadow/domain/server";var c={snodeId:i,domainName:a,domainPort:r,servers:o,srcKey:"",srcParam:""};m.a.patch(s,c).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.sureWeightArray=[],t.getDmUpstreamlistData()):t.$message.error(t.$t("lg.failed")+":"+e.data.data.message),t.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}else t.$message.error(t.$t("lg.selectdstategy"))},changeSverCheck:function(){this.isShowServerCheckBox=!this.isShowServerCheckBox},editSvCkEnsure:function(t){var e=this;this.$refs.editSvCkfrom.validate(function(i){if(i){var a=e,n=a.shadowObj.snodeId,r=a.domainObj.domainName,o=a.domainObj.port;if(a.upstreamlistmodalLoading=!0,a.isAuto)var s=g.b+"pe/shadow/domain/server?autoconfig=true";else if(a.isEditConfig)s=g.b+"pe/shadow/domain/server?savedConfig=true";else s=g.b+"pe/shadow/domain/server";var l={};l={enabled:t,param:{interval:1e3*a.editSvCkfrom.scInterval,fall:a.editSvCkfrom.scFall,rise:a.editSvCkfrom.scRise,timeout:1e3*a.editSvCkfrom.scTimeout,type:a.editSvCkfrom.scType}},"http"==a.editSvCkfrom.scType&&(l.param.check_http_send='"'+a.editSvCkfrom.checkHttpSendType+" "+(a.editSvCkfrom.checkHttpSendTxt||"/")+' HTTP/1.0\\r\\n\\r\\n"',l.param.check_http_expect_alive=a.editSvCkfrom.checkHttpExpectAlive.join(" "));var c={snodeId:n,domainName:r,domainPort:o,serverCheck:l};m.a.patch(s,c).then(function(e){0==e.data.responseCode?(a.$message({type:"success",message:"操作成功"}),a.enableScCk=t,a.getDmUpstreamlistData(),a.isShowServerCheckBox=!1):a.$message.error("操作失败: "+e.data.data.message),a.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}})},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},editGSEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;i.upstreamlistmodalLoading=!0;var a=i.shadowObj.snodeId,n=i.domainObj.domainName,r=i.domainObj.port;if(e.isAuto)var o=g.b+"pe/shadow/domain/server?autoconfig=true";else if(e.isEditConfig)o=g.b+"pe/shadow/domain/server?savedConfig=true";else o=g.b+"pe/shadow/domain/server";var s,l=[],c=!!(s=i.editGradeSetform.ntlmValule);s&&l.push({ntlm:s});var d={snodeId:a,domainName:n,domainPort:r,servers:l,enableNTLM:c};m.a.patch(o,d).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:"操作成功"}),i.getDmUpstreamlistData()):i.$message.error("操作失败: "+t.data.data.message),i.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}})}}},b={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.upstreamlistmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-button",{staticClass:"addIpBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dmUpstreamModal()}}},[t._v(t._s(t.$t("lg.addserver")))]),t._v(" "),i("div",[i("table",{staticClass:"ipTable"},[i("thead",[i("tr",[i("th",[t._v("IP")]),t._v(" "),i("th",[t._v("PORT")]),t._v(" "),"ip_weight"==t.loadBalancingType?i("th",[t._v(t._s(t.$t("lg.weights")))]):t._e(),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.upstreamlist,function(e){return i("tr",[i("td",[t._v(t._s(e.ip))]),t._v(" "),i("td",[t._v(t._s(e.port))]),t._v(" "),"ip_weight"==t.loadBalancingType?i("td",[t._v(t._s(e.ipWeight))]):t._e(),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editCmd(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delCmd(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))]),t._v(" "),i("p",{staticClass:"myBalance"},[i("span",[t._v(t._s(t.$t("lg.curloadbalance"))+"："),i("i",{staticClass:"el-icon-success font-green"}),t._v(" "+t._s(t.loadBalancingTypeTxt))]),i("span",{staticClass:"changeBalance font-blue",on:{click:function(e){t.changeBalance()}}},[i("i",{class:t.isShowChangeBalanceBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.editstrategy")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowChangeBalanceBox,expression:"isShowChangeBalanceBox"}],staticClass:"changeBalanceBox"},[i("el-radio-group",{model:{value:t.checkedTactics,callback:function(e){t.checkedTactics=e},expression:"checkedTactics"}},t._l(t.ipTactics,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])})),t._v(" "),i("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.changeBalanceEnsure()}}},[t._v("确认更改")])],1),t._v(" "),i("p",{staticClass:"myServerCheck"},[i("span",[t._v(t._s(t.$t("lg.serverhealth"))+"："),i("i",{class:t.enableScCk?"el-icon-success font-green":"el-icon-warning"}),t._v(" "+t._s(t.enableScCk?t.$t("lg.opened"):t.$t("lg.unopened")))]),i("span",{staticClass:"changeBalance font-blue",on:{click:function(e){t.changeSverCheck()}}},[i("i",{class:t.isShowServerCheckBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.healthExam")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowServerCheckBox,expression:"isShowServerCheckBox"}],staticClass:"serverCheckBox"},[i("el-form",{ref:"editSvCkfrom",attrs:{model:t.editSvCkfrom,"label-width":"135px",rules:t.editSvCkfromRules}},[i("el-form-item",{attrs:{label:t.$t("lg.checkinterval"),prop:"scInterval"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{staticStyle:{width:"98%"},attrs:{"auto-complete":"off",placeholder:t.$t("lg.plzenter")},model:{value:t.editSvCkfrom.scInterval,callback:function(e){t.$set(t.editSvCkfrom,"scInterval","string"==typeof e?e.trim():e)},expression:"editSvCkfrom.scInterval"}})],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.scIntervalUnitVal,callback:function(e){t.scIntervalUnitVal=e},expression:"scIntervalUnitVal"}},[t._l(t.scTimeIntervalUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.serverstopcounts"),prop:"scFall"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:t.$t("lg.plzenter")},model:{value:t.editSvCkfrom.scFall,callback:function(e){t.$set(t.editSvCkfrom,"scFall","string"==typeof e?e.trim():e)},expression:"editSvCkfrom.scFall"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.serverstartcounts"),prop:"scRise"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:t.$t("lg.plzenter")},model:{value:t.editSvCkfrom.scRise,callback:function(e){t.$set(t.editSvCkfrom,"scRise","string"==typeof e?e.trim():e)},expression:"editSvCkfrom.scRise"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),prop:"scTimeout"}},[i("el-row",[i("el-col",{attrs:{span:16}},[i("el-input",{staticStyle:{width:"98%"},attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.editSvCkfrom.scTimeout,callback:function(e){t.$set(t.editSvCkfrom,"scTimeout","string"==typeof e?e.trim():e)},expression:"editSvCkfrom.scTimeout"}})],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.scTimeoutUnitVal,callback:function(e){t.scTimeoutUnitVal=e},expression:"scTimeoutUnitVal"}},[t._l(t.scTimeIntervalUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.protocolused"),prop:"scTypeUnit"}},[i("el-select",{staticStyle:{width:"50%"},model:{value:t.editSvCkfrom.scType,callback:function(e){t.$set(t.editSvCkfrom,"scType",e)},expression:"editSvCkfrom.scType"}},[t._l(t.scTypeUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1),t._v(" "),"http"==t.editSvCkfrom.scType?i("el-form-item",{attrs:{label:t.$t("lg.httpcheck"),prop:"checkHttpSendTxt"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.editSvCkfrom.checkHttpSendTxt,callback:function(e){t.$set(t.editSvCkfrom,"checkHttpSendTxt",e)},expression:"editSvCkfrom.checkHttpSendTxt"}},[i("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:t.$t("lg.select")},slot:"prepend",model:{value:t.editSvCkfrom.checkHttpSendType,callback:function(e){t.$set(t.editSvCkfrom,"checkHttpSendType",e)},expression:"editSvCkfrom.checkHttpSendType"}},[t._l(t.ckHtpSendUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1):t._e(),t._v(" "),"http"==t.editSvCkfrom.scType?i("el-form-item",{attrs:{label:t.$t("lg.httpcheckexptected"),"label-width":"170px",prop:"checkHttpExpectAlive"}},[i("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:t.$t("lg.select"),multiple:""},model:{value:t.editSvCkfrom.checkHttpExpectAlive,callback:function(e){t.$set(t.editSvCkfrom,"checkHttpExpectAlive",e)},expression:"editSvCkfrom.checkHttpExpectAlive"}},[t._l(t.ckHtpExpAliveUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1):t._e(),t._v(" "),i("el-form-item",[t.enableScCk?t._e():i("el-button",{attrs:{type:"success"},on:{click:function(e){t.editSvCkEnsure(!0)}}},[t._v(t._s(t.$t("lg.on")))]),t._v(" "),t.enableScCk?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editSvCkEnsure(!0)}}},[t._v(t._s(t.$t("lg.edit")))]):t._e(),t._v(" "),t.enableScCk?i("el-button",{attrs:{type:"info"},on:{click:function(e){t.editSvCkEnsure(!1)}}},[t._v(t._s(t.$t("lg.off")))]):t._e()],1)],1)],1),t._v(" "),i("div",{staticClass:"gradeSettingBox"},[i("p",{staticClass:"gradeSettingTxt text-right"},[i("span",{staticClass:"cursor-pointer font-blue",on:{click:function(e){t.gradeSetting()}}},[i("i",{class:t.isShowHgSettingBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.highconfig")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowHgSettingBox,expression:"isShowHgSettingBox"}],staticClass:"gradeSettinginner"},[i("el-form",{ref:"editGradeSetform",attrs:{model:t.editGradeSetform,"label-width":"100px",rules:t.editGradeSetformRules}},[i("el-form-item",{attrs:{label:t.$t("lg.ntlmlong"),prop:"ntlmValule"}},[i("el-input",{attrs:{"auto-complete":"off",placeholder:t.upstreamObj.ntlmVal?t.$t("lg.inputntlmlong"):t.$t("lg.nontlmlong"),clearable:""},model:{value:t.editGradeSetform.ntlmValule,callback:function(e){t.$set(t.editGradeSetform,"ntlmValule","string"==typeof e?e.trim():e)},expression:"editGradeSetform.ntlmValule"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editGSEnsure("editGradeSetform")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)])]),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.upstreamlistmodalLoading,expression:"upstreamlistmodalLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.addStreamlistmodalShow,"close-on-click-modal":!1,"before-close":t.addStreamlistmodalClose},on:{"update:visible":function(e){t.addStreamlistmodalShow=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{ref:"upstreamform",staticStyle:{"margin-right":"30px"},attrs:{model:t.upstreamform,rules:t.upstreamformRules,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"IP",prop:"ip"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.upstreamform.ip,callback:function(e){t.$set(t.upstreamform,"ip","string"==typeof e?e.trim():e)},expression:"upstreamform.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),prop:"ipPort"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.upstreamform.ipPort,callback:function(e){t.$set(t.upstreamform,"ipPort","string"==typeof e?e.trim():e)},expression:"upstreamform.ipPort"}})],1),t._v(" "),"ip_weight"==t.loadBalancingType?i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"ipWeight"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.upstreamform.ipWeight,callback:function(e){t.$set(t.upstreamform,"ipWeight","string"==typeof e?e.trim():e)},expression:"upstreamform.ipWeight"}})],1):t._e(),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addUpstreamCmd("upstreamform")}}},[t._v(t._s(t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:t.addStreamlistmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",[0==t.upstreamCmdData.length?i("p",{staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.upstreamCmdData.length>0?i("div",[i("table",[i("thead",[i("tr",[i("th",[t._v("IP")]),t._v(" "),i("th",[t._v("PORT")]),t._v(" "),"ip_weight"==t.loadBalancingType?i("th",[t._v(t._s(t.$t("lg.weights")))]):t._e(),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.upstreamCmdData,function(e){return i("tr",[i("td",[t._v(t._s(e.ip))]),t._v(" "),i("td",[t._v(t._s(e.ipPort))]),t._v(" "),"ip_weight"==t.loadBalancingType?i("td",[t._v(t._s(e.ipWeight))]):t._e(),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.deleAddCmd(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitupstreamCmd}},[t._v(t._s(t.$t("lg.confirm")))])],1)]):t._e()])])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addStreamlistLoading,expression:"addStreamlistLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isShowEditCmd,"close-on-click-modal":!1,"before-close":t.isEditCmdClose},on:{"update:visible":function(e){t.isShowEditCmd=e}}},[i("el-form",{ref:"editCmdform",attrs:{model:t.editCmdform,rules:t.editCmdformRules,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"IP",prop:"ip"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCmdform.ip,callback:function(e){t.$set(t.editCmdform,"ip","string"==typeof e?e.trim():e)},expression:"editCmdform.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),prop:"port"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCmdform.port,callback:function(e){t.$set(t.editCmdform,"port","string"==typeof e?e.trim():e)},expression:"editCmdform.port"}})],1),t._v(" "),"ip_weight"==t.loadBalancingType?i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"ipWeight"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCmdform.ipWeight,callback:function(e){t.$set(t.editCmdform,"ipWeight","string"==typeof e?e.trim():e)},expression:"editCmdform.ipWeight"}})],1):t._e(),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editCmdEnsure("editCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.isEditCmdClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editStreamlistLoading,expression:"editStreamlistLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isIpWeight,"close-on-click-modal":!1,"before-close":t.isweightCmdformClose},on:{"update:visible":function(e){t.isIpWeight=e}}},[i("el-row",[i("el-form",{ref:"weightCmdform",attrs:{model:t.weightCmdform,"label-width":"60px"}},t._l(t.weightCmdform.weightCmdArray,function(e,a){return i("div",{key:a,staticClass:"grid-content weightIpBox"},[i("el-form-item",{attrs:{label:"IP",prop:"weightCmdArray."+a+".ip",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-. *!$@?^()<>{}[\]=%&:\;/~+#`,])+$/,message:t.$t("lg.invalidformat"),trigger:"blur"}]}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ip,callback:function(i){t.$set(e,"ip","string"==typeof i?i.trim():i)},expression:"item.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),prop:"weightCmdArray."+a+".port",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:t.$t("lg.invalidport"),trigger:"change"}]}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.port,callback:function(i){t.$set(e,"port","string"==typeof i?i.trim():i)},expression:"item.port"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"weightCmdArray."+a+".ipWeight",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:t.$t("lg.requirepositive"),trigger:"change"}]}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ipWeight,callback:function(i){t.$set(e,"ipWeight","string"==typeof i?i.trim():i)},expression:"item.ipWeight"}})],1)],1)})),t._v(" "),i("div",{staticClass:"dialog-footer text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changeEnsure("weightCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.isweightCmdformClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)],1)},staticRenderFns:[]};var _=i("VU/8")(v,b,!1,function(t){i("nLCG")},"data-v-70f6a158",null);e.a=_.exports},"4HSl":function(t,e){},"4ptU":function(t,e){},"6t4H":function(t,e){},"7DaJ":function(t,e){},"7nRM":function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("c/Tr"),r=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){return Array.isArray(t)?t:(0,r.default)(t)}},"8j07":function(t,e){},"9bzP":function(t,e,i){"use strict";var a=i("woOf"),n=i.n(a),r=i("bOdI"),o=i.n(r),s=i("//Fk"),l=i.n(s),c=i("mtWM"),d=i.n(c),u=(i("5reh"),i("qqiS")),f=i("yJCr"),h=i("kDN8"),m={components:{loading:u.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){return{url:"",getDirectiveLoading:!1,directiveData:[],addDctDialogVisible:!1,directiveform:{instructName:"",instructParam:""},directiveformRules:{instructName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},directiveList:[],addDctLoading:!1,editDctDialogVisible:!1,editDirectiveform:{instructName:"",instructParam:""},editDirectiveformRules:{instructName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},editDirectiveOrgin:{instructName:"",instructParam:""},editDctLoading:!1}},mounted:function(){this.isAuto?this.url=f.b+"pe/shadow/domain/location/directive?autoconfig=true":this.isEditConfig?this.url=f.b+"pe/shadow/domain/location/directive?savedConfig=true":this.url=f.b+"pe/shadow/domain/location/directive"},methods:{getLcCustomInstructData:function(){var t=this;return new l.a(function(e,i){Object(h.a)(t,{shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},!1,"shadow_custom",t.isAuto,t.isEditConfig).then(function(i){t.directiveData=i,e(i)})})},directiveDialogClose:function(){this.$emit("setbylcCustomInstructmodal",!1)},addDctDialogShow:function(){this.addDctDialogVisible=!0},addDirectiveList:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i={instructName:e.directiveform.instructName,instructParam:e.directiveform.instructParam};e.directiveList.push(i)}})},delDirectiveList:function(t){this.directiveList.splice(this.directiveList.indexOf(t),1)},submitDirective:function(){var t=this;t.addDctLoading=!0;var e=[];this.directiveList.forEach(function(t){var i=t.instructParam;i=Base64.encode(i),e.push(o()({},t.instructName,i))}),d.a.post(t.url,{snodeId:t.shadowObj.snodeId,domainName:t.domainObj.domainName,domainPort:t.domainObj.port,locationName:t.locationObj.name,locationType:t.locationObj.type,directives:e}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getLcCustomInstructData(),t.addDctDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.addDctLoading=!1}).catch(function(t){console.log(t)})},addDctDialogClose:function(){this.directiveList=[],this.$refs.directiveform.resetFields(),this.directiveform.raeChecklist=[this.$t("lg.encryptpa")],this.addDctDialogVisible=!1},editDctDialogShow:function(t){this.editDctDialogVisible=!0,this.editDirectiveOrgin.instructName=t.customName,this.editDirectiveOrgin.instructParam=t.customParams,this.editDirectiveform.instructName=t.customName,this.editDirectiveform.instructParam=t.customParams},editDctEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;i.editDctLoading=!0;var a="",n="";""!=e.editDirectiveOrgin.instructParam&&(a=Base64.encode(e.editDirectiveOrgin.instructParam)),""!=e.editDirectiveform.instructParam&&(n=Base64.encode(e.editDirectiveform.instructParam)),d.a.patch(i.url,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,directiveName:i.editDirectiveOrgin.instructName,srcData:a,targetData:n}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcCustomInstructData(),i.editDctDialogClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctDialogClose:function(){this.editDirectiveform.raeChecklist=[],this.$refs.editDirectiveform.resetFields(),this.editDctDialogVisible=!1},deletDirective:function(t){var e=this;e.getDirectiveLoading=!0;var i=n()([],t),a=i.customName,r=Base64.encode(i.customParams),o={},s=[];o[a]=r,s.push(o),d.a.delete(e.url,{data:{snodeId:e.shadowObj.snodeId,domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type,directives:s}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getLcCustomInstructData()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.directiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"directiveBox"},[i("el-button",{staticClass:"addDirectiveBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addDctDialogShow()}}},[t._v("新增自定义配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v("自定义配置")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[t._l(e,function(e,a,n){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editDctDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.getDirectiveLoading,expression:"getDirectiveLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.addDctDialogVisible,"close-on-click-modal":!1,"before-close":t.addDctDialogClose},on:{"update:visible":function(e){t.addDctDialogVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{ref:"directiveform",staticStyle:{"margin-right":"30px"},attrs:{model:t.directiveform,rules:t.directiveformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"instructName"}},[i("el-input",{attrs:{placeholder:"请输入配置名称"},model:{value:t.directiveform.instructName,callback:function(e){t.$set(t.directiveform,"instructName","string"==typeof e?e.trim():e)},expression:"directiveform.instructName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"instructParam"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.directiveform.instructParam,callback:function(e){t.$set(t.directiveform,"instructParam","string"==typeof e?e.trim():e)},expression:"directiveform.instructParam"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDirectiveList("directiveform")}}},[t._v(t._s(t.$t("lg.addconfig")))]),t._v(" "),i("el-button",{on:{click:t.addDctDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveList.length,expression:"directiveList.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.directiveList.length>0,expression:"directiveList.length>0"}],staticClass:"directiveListBox"},[i("table",[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.directiveList,function(e){return i("tr",[i("td",[t._v(t._s(e.instructName))]),t._v(" "),i("td",[t._v(t._s(e.instructParam))]),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.delDirectiveList(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitDirective}},[t._v(t._s(t.$t("lg.confirm")))])],1)])])])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addDctLoading,expression:"addDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.editDctDialogVisible,"close-on-click-modal":!1,"before-close":t.editDctDialogClose},on:{"update:visible":function(e){t.editDctDialogVisible=e}}},[i("el-form",{ref:"editDirectiveform",attrs:{model:t.editDirectiveform,rules:t.editDirectiveformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"instructName"}},[i("el-input",{attrs:{disabled:""},model:{value:t.editDirectiveform.instructName,callback:function(e){t.$set(t.editDirectiveform,"instructName","string"==typeof e?e.trim():e)},expression:"editDirectiveform.instructName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"instructParam"}},[i("el-input",{model:{value:t.editDirectiveform.instructParam,callback:function(e){t.$set(t.editDirectiveform,"instructParam","string"==typeof e?e.trim():e)},expression:"editDirectiveform.instructParam"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("editDirectiveform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.editDctDialogClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editDctLoading,expression:"editDctLoading"}]})],1)],1)},staticRenderFns:[]};var g=i("VU/8")(m,p,!1,function(t){i("ik3I")},"data-v-1a626a20",null);e.a=g.exports},"9vAN":function(t,e){},B8qW:function(t,e){},BUWD:function(t,e,i){"use strict";var a=i("mtWM"),n=i.n(a),r=i("yJCr"),o=i("qqiS"),s=i("5reh"),l=(i("xrTZ").Base64,{props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},domainDialogVisible:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object}},data:function(){var t=this;return{isdmGuideShow:!1,locationLoading:!1,isShowProxyPassBox:!1,domainform:{locationType:"",location:"",wafCheck:!1,checkedRulesets:[],websocketCheck:!1,proxyHttp:"http",proxyPass:"",proxyUpstream:"",locationRoot:"",accessDenied:!1},upstreamOptArr:[],domainPopRules:{locationType:[{required:!0,message:this.$t("lg.required"),trigger:"change"}],location:[{validator:function(e,i,a){i||a(new Error(t.$t("lg.required"))),"deny_url"==i?a(new Error("deny_url被系统占用，不能以deny_url命名")):(/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/.test(i)||a(new Error(t.$t("lg.invalidformat"))),a())},trigger:"blur"},{required:!0,message:this.$t("lg.required"),trigger:"blur"}],proxyPass:[{pattern:/^\/([^\u4e00-\u9fa5\s])*$/,message:this.$t("lg.reg1"),trigger:"blur"}],locationRoot:[{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},gSlableWidth:"125px",getUpstreamLoading:!1,isCheckRulesetShow:!1,rulesetform:{ruleset:[]},isShowHgSettingBox:!1}},methods:{locationResetForm:function(){this.domainform.checkedRulesets=[],this.rulesetform.ruleset=[],this.domainform.wafCheck=!1,this.domainform.websocketCheck=!1,this.domainform.accessDenied=!1,this.$refs.domainform.resetFields(),this.$emit("setbydomainpopchild",!1),this.isShowHgSettingBox=!1},checkMate:function(t){this.domainform.location="/"==t?"/":""},dmGuideShow:function(){this.isdmGuideShow=!0},dmGuideClose:function(){this.isdmGuideShow=!1},showCheckRuleset:function(){this.$store.commit(s.a),this.isCheckRulesetShow=!0},checkRulesetEnsure:function(){var t=this.rulesetform.ruleset;this.domainform.checkedRulesets=t,this.checkRulesetClose()},checkRulesetClose:function(){this.rulesetform.ruleset=this.domainform.checkedRulesets,this.isCheckRulesetShow=!1},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},proxyPassCheck:function(){this.isShowProxyPassBox=!this.isShowProxyPassBox},getUpstream:function(t){var e=this;if(t){this.getUpstreamLoading=!0;var i=this.shadowObj.snodeId,a="";a=this.isAuto?r.b+"pe/shadow/upstream/"+i+"?autoconfig=true":this.isEditConfig?r.b+"pe/shadow/upstream/"+i+"?savedConfig=true":r.b+"pe/shadow/upstream/"+i,n.a.get(a).then(function(t){if(0==t.data.responseCode){var i=[];(t.data.data?t.data.data:[]).forEach(function(t){i.push({value:t.upstream})}),e.upstreamOptArr=i}else e.$message.error("操作失败: "+t.data.data.message);e.getUpstreamLoading=!1}).catch(function(t){console.log(t)})}},addLocation:function(t){var e=this,i=this;i.$refs[t].validate(function(t){if(t){i.locationLoading=!0;var a=i.shadowObj.snodeId,o=i.domainObj.domainName,s=i.domainObj.port;if(i.isAuto)var l=r.b+"pe/shadow/domain/location?autoconfig=true";else if(i.isEditConfig)l=r.b+"pe/shadow/domain/location?savedConfig=true";else l=r.b+"pe/shadow/domain/location";var c=i.domainform.locationType,d=i.domainform.location,u=i.domainform.wafCheck,f=i.domainform.checkedRulesets,h=i.domainform.websocketCheck,m=0==i.domainform.accessDenied?"off":"on",p={protocol:i.domainform.proxyHttp,domain:i.domainform.proxyUpstream,path:i.domainform.proxyPass},g=i.domainform.locationRoot;"suffixMatch"==c&&(d="/"==d?"(.*\\/)+$":"\\.("+d+")$");var v={snodeId:a,domainName:o,domainPort:s,locationType:c,locationName:d,waf:u=0==u?"off":"on",wafRuleset:f,webSocket:h=0==h?"off":"on",accessDenied:m,root:g};e.isShowProxyPassBox&&(v.proxyPass=p),n.a.post(l,v).then(function(t){0==t.data.responseCode?(e.$emit("updateRenderTree"),e.locationResetForm(),e.$message({type:"success",message:i.$t("lg.success")})):e.$message.error(i.$t("lg.failed")+":"+t.data.data.message),e.locationLoading=!1}).catch(function(t){console.log(t)})}})}},components:{loading:o.a}}),c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"45%",title:t.domainObj.domainName,visible:t.domainDialogVisible,"close-on-click-modal":!1,"before-close":t.locationResetForm},on:{"update:visible":function(e){t.domainDialogVisible=e}}},[i("el-form",{ref:"domainform",attrs:{model:t.domainform,rules:t.domainPopRules,"label-width":"145px"}},[i("el-form-item",{attrs:{label:t.$t("lg.matchtype"),prop:"locationType"}},[i("el-select",{staticClass:"farAvtiveUrl",attrs:{placeholder:t.$t("lg.matchtype")},on:{change:t.checkMate},model:{value:t.domainform.locationType,callback:function(e){t.$set(t.domainform,"locationType",e)},expression:"domainform.locationType"}},[i("el-option",{attrs:{label:t.$t("lg.exactmatch"),value:"accurateMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.suffixmatch"),value:"suffixMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.patchmatch"),value:"pathMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.dynamicurl"),value:"dynamicMatch"}}),t._v(" "),i("el-option",{attrs:{label:"通用匹配",value:"/"}}),t._v(" "),i("el-option",{attrs:{label:"自定义配置",value:"customMatch"}})],1),t._v(" "),i("span",{staticClass:"el-icon-document pub_guide",attrs:{title:"$t('lg.matchguide')"},on:{click:t.dmGuideShow}},[i("i",[t._v(t._s(t.$t("lg.guide")))])])],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.protectedpos"),prop:"location"}},[i("el-input",{attrs:{disabled:"/"==t.domainform.locationType},model:{value:t.domainform.location,callback:function(e){t.$set(t.domainform,"location","string"==typeof e?e.trim():e)},expression:"domainform.location"}})],1),t._v(" "),i("div",{staticClass:"gradeSettingBox"},[i("p",{staticClass:"gradeSettingTxt text-right"},[i("span",{staticClass:"gradeSetting font-blue",on:{click:function(e){t.gradeSetting()}}},[i("i",{class:t.isShowHgSettingBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.highconfig")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowHgSettingBox,expression:"isShowHgSettingBox"}],staticClass:"gradeSettinginner"},[i("div",{staticClass:"wafOutBox"},[i("el-form-item",{attrs:{label:t.$t("lg.wafpassivedefense"),"label-width":t.gSlableWidth}},[i("el-switch",{model:{value:t.domainform.wafCheck,callback:function(e){t.$set(t.domainform,"wafCheck",e)},expression:"domainform.wafCheck"}})],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.domainform.checkedRulesets.length,expression:"domainform.checkedRulesets.length!=0"}],attrs:{label:t.$t("lg.selectedruleset"),"label-width":t.gSlableWidth}},[i("div",{staticClass:"wafBox"},[i("el-checkbox-group",{model:{value:t.domainform.checkedRulesets,callback:function(e){t.$set(t.domainform,"checkedRulesets",e)},expression:"domainform.checkedRulesets"}},t._l(t.domainform.checkedRulesets,function(e){return i("el-checkbox",{key:e,attrs:{label:e,disabled:""}},[t._v(t._s(e))])}))],1)])],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.websocketsupport"),"label-width":t.gSlableWidth}},[i("el-switch",{model:{value:t.domainform.websocketCheck,callback:function(e){t.$set(t.domainform,"websocketCheck",e)},expression:"domainform.websocketCheck"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"ProxyPass","label-width":t.gSlableWidth}},[i("el-switch",{on:{click:function(e){t.proxyPassCheck()}},model:{value:t.isShowProxyPassBox,callback:function(e){t.isShowProxyPassBox=e},expression:"isShowProxyPassBox"}})],1),t._v(" "),t.isShowProxyPassBox?i("div",{staticClass:"orderBoxJamb",staticStyle:{"margin-top":"-20px"}},[i("el-form-item",{attrs:{label:"协议",prop:"proxyHttp","label-width":t.gSlableWidth}},[i("el-select",{staticStyle:{width:"50%"},model:{value:t.domainform.proxyHttp,callback:function(e){t.$set(t.domainform,"proxyHttp",e)},expression:"domainform.proxyHttp"}},[[i("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),i("el-option",{attrs:{label:"https",value:"https"}})]],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.customizeproxypass"),prop:"proxyPass","label-width":t.gSlableWidth}},[i("el-input",{attrs:{placeholder:"/proxypass",disabled:"suffixMatch"==t.domainform.locationType},model:{value:t.domainform.proxyPass,callback:function(e){t.$set(t.domainform,"proxyPass","string"==typeof e?e.trim():e)},expression:"domainform.proxyPass"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"自定义Upstream",prop:"proxyUpstream","label-width":t.gSlableWidth}},[i("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:t.$t("lg.select"),loading:t.getUpstreamLoading},on:{"visible-change":function(e){t.getUpstream(e)}},model:{value:t.domainform.proxyUpstream,callback:function(e){t.$set(t.domainform,"proxyUpstream",e)},expression:"domainform.proxyUpstream"}},t._l(t.upstreamOptArr,function(t){return i("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}))],1)],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"访问拒绝","label-width":t.gSlableWidth}},[i("el-switch",{model:{value:t.domainform.accessDenied,callback:function(e){t.$set(t.domainform,"accessDenied",e)},expression:"domainform.accessDenied"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网站目录",prop:"locationRoot","label-width":t.gSlableWidth}},[i("el-input",{attrs:{placeholder:"/root"},model:{value:t.domainform.locationRoot,callback:function(e){t.$set(t.domainform,"locationRoot","string"==typeof e?e.trim():e)},expression:"domainform.locationRoot"}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addLocation("domainform")}}},[t._v(t._s(t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:function(e){t.locationResetForm()}}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.locationLoading,expression:"locationLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.$t("lg.selectruleset"),visible:t.isCheckRulesetShow,"close-on-click-modal":!1,"before-close":t.checkRulesetClose},on:{"update:visible":function(e){t.isCheckRulesetShow=e}}},[i("el-form",{ref:"rulesetform",attrs:{model:t.rulesetform,"label-width":"100px"}},[i("el-form-item",{attrs:{label:t.$t("lg.gourules")}},[i("el-checkbox-group",{model:{value:t.rulesetform.ruleset,callback:function(e){t.$set(t.rulesetform,"ruleset",e)},expression:"rulesetform.ruleset"}},t._l(t.$store.state.allRulesetData,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.fileName}},[t._v(t._s(e.fileName))])}))],1)],1),t._v(" "),i("div",{staticClass:"text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:t.checkRulesetEnsure}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.checkRulesetClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"60%",title:t.$t("lg.matchguide"),visible:t.isdmGuideShow,"before-close":t.dmGuideClose},on:{"update:visible":function(e){t.isdmGuideShow=e}}},[i("el-collapse",{attrs:{accordion:""}},[i("el-collapse-item",[i("template",{slot:"title"},[i("i",{staticClass:"header-icon el-icon-info font-green"}),t._v("   "+t._s(t.$t("lg.exactmatch"))+"\n        ")]),t._v(" "),i("div",[i("p",[t._v("1、"+t._s(t.$t("lg.mguide1"))+"。")]),t._v(" "),i("p",[t._v("2、"+t._s(t.$t("lg.mguide2"))+"。")]),t._v(" "),i("p",[t._v("3、"+t._s(t.$t("lg.eg"))+"："),i("img",{staticClass:"guidePic",attrs:{src:"static/domain_guide/jq-sl.jpg",alt:""}})])])],2),t._v(" "),i("el-collapse-item",[i("template",{slot:"title"},[i("i",{staticClass:"header-icon el-icon-info font-green"}),t._v("   "+t._s(t.$t("lg.suffixmatch"))+" \n        ")]),t._v(" "),i("div",[i("p",[t._v("1、"+t._s(t.$t("lg.mguide3"))+"。")]),t._v(" "),i("p",[t._v("2、"+t._s(t.$t("lg.mguide4"))+"。")]),t._v(" "),i("p",[t._v("3、"+t._s(t.$t("lg.eg"))+"："),i("img",{staticClass:"guidePic",attrs:{src:"static/domain_guide/hz-sl.jpg",alt:""}})])])],2),t._v(" "),i("el-collapse-item",[i("template",{slot:"title"},[i("i",{staticClass:"header-icon el-icon-info font-green"}),t._v("   "+t._s(t.$t("lg.patchmatch"))+" \n        ")]),t._v(" "),i("div",[i("p",[t._v("1、"+t._s(t.$t("lg.mguide5")))]),t._v(" "),i("p",[t._v("2、"+t._s(t.$t("lg.mguide6"))+"。")]),t._v(" "),i("p",[t._v("3、"+t._s(t.$t("lg.eg"))+"："),i("img",{staticClass:"guidePic",attrs:{src:"static/domain_guide/lj-sl.jpg",alt:""}})])])],2),t._v(" "),i("el-collapse-item",[i("template",{slot:"title"},[i("i",{staticClass:"header-icon el-icon-info font-green"}),t._v("    "+t._s(t.$t("lg.dynamicurl"))+" \n        ")]),t._v(" "),i("div",[i("p",[t._v("1、"+t._s(t.$t("lg.mguide7")))]),t._v(" "),i("p",[t._v("2、"+t._s(t.$t("lg.mguide8"))+"。")]),t._v(" "),i("p",[t._v("3、"+t._s(t.$t("lg.eg"))+"："),i("img",{staticClass:"guidePic",attrs:{src:"static/domain_guide/dt-sl.jpg",alt:""}})])])],2)],1),t._v(" "),i("el-button",{staticStyle:{"margin-top":"40px"},attrs:{type:"primary"},on:{click:function(e){t.isdmGuideShow=!1}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)},staticRenderFns:[]};var d=i("VU/8")(l,c,!1,function(t){i("Z8+H")},"data-v-316f6b94",null);e.a=d.exports},Dwag:function(t,e,i){"use strict";var a=i("woOf"),n=i.n(a),r=i("bOdI"),o=i.n(r),s=i("fZjL"),l=i.n(s),c=i("//Fk"),d=i.n(c),u=i("mtWM"),f=i.n(u),h=i("qqiS"),m=i("yJCr"),p=(i("5reh"),{components:{loading:h.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{glbInstructLoading:!1,directiveData:{httpDctList:[],globalDctList:[]},directiveHttp:!1,addGIDialogVisible:!1,glbInstructform:{instructName:"",instructParam:""},glbInstructformRules:{instructName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},glbInstructList:[],addGlbInstructLoading:!1,editGIDialogVisible:!1,editInstructform:{},editInstructformRules:{dctName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},editInstructOldform:{},editGlbInstructLoading:!1}},methods:{getSdGlbInstructData:function(){var t=this;return new d.a(function(e,i){var a=t,n=a.shadowObj.snodeId,r="";r=a.isAuto?m.b+"pe/shadow/global/directive?snodeId="+n+"&autoconfig=true":a.isEditConfig?m.b+"pe/shadow/global/directive?snodeId="+n+"&savedConfig=true":m.b+"pe/shadow/global/directive?snodeId="+n,f.a.get(r).then(function(t){if(0==t.data.responseCode){var i=t.data.data;a.directiveData.httpDctList=[],a.directiveData.globalDctList=[],i.httpDirectives&&i.httpDirectives.forEach(function(t){a.directiveData.httpDctList.push({dctName:l()(t)[0],dctParam:Base64.decode(t[l()(t)[0]])})}),i.globalDirectives&&i.globalDirectives.forEach(function(t){a.directiveData.globalDctList.push({dctName:l()(t)[0],dctParam:Base64.decode(t[l()(t)[0]])})}),e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},sdGlbInstructClose:function(){this.$emit("setbysdGlbInstructmodal",!1)},addGIDialogShow:function(t){this.directiveHttp=t,this.addGIDialogVisible=!0},addGIListItem:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.glbInstructList.push(e.glbInstructform)})},deletGIListItem:function(t){this.glbInstructList.splice(this.glbInstructList.indexOf(t),1)},submitGlbInstructList:function(){var t=this;t.addGlbInstructLoading=!0;var e="";e=t.isAuto?m.b+"pe/shadow/global/directive?http="+t.directiveHttp+"&autoconfig=true":t.isEditConfig?m.b+"pe/shadow/global/directive?http="+t.directiveHttp+"&savedConfig=true":m.b+"pe/shadow/global/directive?http="+t.directiveHttp;var i=t.shadowObj.snodeId,a=[];this.glbInstructList.forEach(function(t){var e=Base64.encode(t.instructParam);a.push(o()({},t.instructName,e))}),f.a.post(e,{snodeId:i,directives:a}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getSdGlbInstructData(),t.addGIDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.addGlbInstructLoading=!1}).catch(function(t){console.log(t)})},addGIDialogClose:function(){this.glbInstructList=[],this.$refs.glbInstructform.resetFields(),this.addGIDialogVisible=!1},editGIDialogShow:function(t,e){this.directiveHttp=e,this.editGIDialogVisible=!0,this.editInstructOldform=t,this.editInstructform=n()({},t)},editGIEnsure:function(){var t=this;t.editGlbInstructLoading=!0;var e="";e=t.isAuto?m.b+"pe/shadow/global/directive?http="+t.directiveHttp+"&autoconfig=true":t.isEditConfig?m.b+"pe/shadow/global/directive?http="+t.directiveHttp+"&savedConfig=true":m.b+"pe/shadow/global/directive?http="+t.directiveHttp;var i=t.shadowObj.snodeId,a=t.editInstructOldform.dctName,n=Base64.encode(t.editInstructOldform.dctParam),r=Base64.encode(t.editInstructform.dctParam);f.a.patch(e,{snodeId:i,directiveName:a,srcData:n,targetData:r}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getSdGlbInstructData(),t.editGIDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.editGlbInstructLoading=!1}).catch(function(t){console.log(t)})},editGIDialogClose:function(){this.editGIDialogVisible=!1},deletGlbInstruct:function(t,e){var i=this;i.glbInstructLoading=!0;var a="";a=i.isAuto?m.b+"pe/shadow/global/directive?http="+e+"&autoconfig=true":i.isEditConfig?m.b+"pe/shadow/global/directive?http="+e+"&savedConfig=true":m.b+"pe/shadow/global/directive?http="+e;var n=i.shadowObj.snodeId,r=[];r.push(o()({},t.dctName,Base64.encode(t.dctParam))),f.a.delete(a,{data:{snodeId:n,directives:r}}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getSdGlbInstructData()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.glbInstructLoading=!1}).catch(function(t){console.log(t)})}}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.sdGlbInstructClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"httpDctBox"},[i("el-button",{staticClass:"addGIBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addGIDialogShow(!0)}}},[t._v("新增http配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v("http自定义配置")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.httpDctList.length,expression:"directiveData.httpDctList.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.httpDctList.length>0,expression:"directiveData.httpDctList.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData.httpDctList,function(e){return i("tr",[i("td",[t._v(t._s(e.dctName))]),t._v(" "),i("td",[t._v(t._s(e.dctParam))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editGIDialogShow(e,!0)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletGlbInstruct(e,!0)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("div",{staticClass:"globalDctBox"},[i("el-button",{staticClass:"addGIBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addGIDialogShow(!1)}}},[t._v("新增global配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v("global块自定义配置")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.globalDctList.length,expression:"directiveData.globalDctList.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.globalDctList.length>0,expression:"directiveData.globalDctList.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData.globalDctList,function(e){return i("tr",[i("td",[t._v(t._s(e.dctName))]),t._v(" "),i("td",[t._v(t._s(e.dctParam))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editGIDialogShow(e,!1)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletGlbInstruct(e,!1)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.glbInstructLoading,expression:"glbInstructLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.directiveHttp?t.shadowObj.name+" ["+t.shadowObj.snodeId+"]--新增http自定义配置":t.shadowObj.name+" ["+t.shadowObj.snodeId+"]--新增global块自定义配置",visible:t.addGIDialogVisible,"close-on-click-modal":!1,"before-close":t.addGIDialogClose},on:{"update:visible":function(e){t.addGIDialogVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{ref:"glbInstructform",staticStyle:{"margin-right":"30px"},attrs:{model:t.glbInstructform,rules:t.glbInstructformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"instructName"}},[i("el-input",{attrs:{placeholder:"请输入配置名称"},model:{value:t.glbInstructform.instructName,callback:function(e){t.$set(t.glbInstructform,"instructName","string"==typeof e?e.trim():e)},expression:"glbInstructform.instructName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"instructParam"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.glbInstructform.instructParam,callback:function(e){t.$set(t.glbInstructform,"instructParam","string"==typeof e?e.trim():e)},expression:"glbInstructform.instructParam"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addGIListItem("glbInstructform")}}},[t._v(t._s(t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:t.addGIDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.glbInstructList.length,expression:"glbInstructList.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.glbInstructList.length>0,expression:"glbInstructList.length>0"}]},[i("table",[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.glbInstructList,function(e){return i("tr",[i("td",[t._v(t._s(e.instructName))]),t._v(" "),i("td",[t._v(t._s(e.instructParam))]),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.deletGIListItem(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitGlbInstructList}},[t._v(t._s(t.$t("lg.confirm")))])],1)])])])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addGlbInstructLoading,expression:"addGlbInstructLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.directiveHttp?t.shadowObj.name+" ["+t.shadowObj.snodeId+"]--修改http自定义配置":t.shadowObj.name+" ["+t.shadowObj.snodeId+"]--修改global块自定义配置",visible:t.editGIDialogVisible,"close-on-click-modal":!1,"before-close":t.editGIDialogClose},on:{"update:visible":function(e){t.editGIDialogVisible=e}}},[i("el-form",{ref:"editInstructform",attrs:{model:t.editInstructform,rules:t.editInstructformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"dctName"}},[i("el-input",{attrs:{disabled:""},model:{value:t.editInstructform.dctName,callback:function(e){t.$set(t.editInstructform,"dctName","string"==typeof e?e.trim():e)},expression:"editInstructform.dctName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"dctParam"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.editInstructform.dctParam,callback:function(e){t.$set(t.editInstructform,"dctParam","string"==typeof e?e.trim():e)},expression:"editInstructform.dctParam"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editGIEnsure("editCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editGIDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editGlbInstructLoading,expression:"editGlbInstructLoading"}]})],1)],1)},staticRenderFns:[]};var v=i("VU/8")(p,g,!1,function(t){i("UW28")},"data-v-605606e8",null);e.a=v.exports},E0qh:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Xxa5"),n=i.n(a),r=i("mvHQ"),o=i.n(r),s=i("Gu7T"),l=i.n(s),c=i("exGp"),d=i.n(c),u=i("fZjL"),f=i.n(u),h=i("//Fk"),m=i.n(h),p=i("7nRM"),g=i.n(p),v=i("vwbq"),b=i("mtWM"),_=i.n(b),w=i("5reh"),y=i("yJCr"),x=i("gQxQ"),k=i("rBmc"),$=i("InnB"),C={props:{isShow:{type:Boolean}},data:function(){return{dynamicStatus:!1,dynamicStatusTxt:"已关"}},methods:{getDynamicStatus:function(){var t=this;return new m.a(function(e,i){var a=y.b+"mc/dynamic/configuration/status";_.a.get(a).then(function(i){if(0==i.data.responseCode){var a=i.data.data;t.dynamicStatus=a,t.dynamicStatusTxt=a?"已开":"已关",e(a)}else t.$message.error("操作失败:"+i.data.data.message)}).catch(function(t){console.log(t)})})},updateDynamicStatus:function(){var t=this,e=y.b+"mc/dynamic/configuration/status?option="+this.dynamicStatus;_.a.post(e).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dynamicStatusTxt=t.dynamicStatus?"已开":"已关"):t.dynamicStatus=!t.dynamicStatus}).catch(function(t){console.log(t)})},dynamicChanges:function(){var t=this,e=y.b+"mc/dynamic/configuration";_.a.post(e,{}).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error("操作失败:"+e.data.data.message)}).catch(function(t){console.log(t)})}}},S={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{staticClass:"dynamic-wrapper"},[i("div",{staticClass:"dynamic-triangle"}),t._v(" "),i("el-switch",{attrs:{"inactive-text":"自动变换状态","active-text":t.dynamicStatusTxt},on:{change:t.updateDynamicStatus},model:{value:t.dynamicStatus,callback:function(e){t.dynamicStatus=e},expression:"dynamicStatus"}}),t._v(" "),i("el-button",{staticClass:"dynamicChangeBtn",attrs:{type:"primary",size:"small",title:t.dynamicStatus?"":"请先开启自动变换",disabled:0==t.dynamicStatus},on:{click:t.dynamicChanges}},[t._v("立即变换")])],1):t._e()},staticRenderFns:[]};var D=i("VU/8")(C,S,!1,function(t){i("yFFM")},"data-v-c81a7496",null).exports,j=i("wtEF"),N=i("xrTZ").Base64,O={props:{isShow:{type:Boolean}},data:function(){return{productName:j.a.state.productName,jsonData:{name:this.productName,shadowtitle:!0,children:[]},searchType:[{value:"domian",label:this.$t("lg.business")},{value:"location",label:this.$t("lg.protectedpos")},{value:"configure",label:this.$t("lg.protected")}],searchValue:"domian",searchDomainform:{domainName:"",domainPort:""},searchLocationform:{locationName:"",locationType:""},searchConfigureform:{configure:""},isDomain:!0,isLocation:!1,isConfigure:!1,searchDomainformRules:{domainName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],domainPort:[{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}]},searchLocationformRules:{locationName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},searchConfigureformRules:{configure:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]}}},created:function(){this.$store.state.productName||this.getProductname()},methods:{getProductname:function(){var t=this,e=y.c+"pe/shadow/kv/productName";_.a.get(e).then(function(e){if(0==e.data.responseCode){var i=e.data.data;t.productName=i,t.$store.state.productName=i}})},getSearchType:function(t){"domian"==t?(this.isDomain=!0,this.isLocation=!1,this.isConfigure=!1):"location"==t?(this.isLocation=!0,this.isDomain=!1,this.isConfigure=!1):"configure"==t&&(this.isConfigure=!0,this.isDomain=!1,this.isLocation=!1)},searchEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;if(i.$store.state.contentLoading=!0,"domian"==i.searchValue){var a=N.encode(i.searchDomainform.domainName),n=i.searchDomainform.domainPort;i.$store.state.configServerUrl=n?y.b+"topology/filter?domainName="+a+"&domainPort="+n:y.b+"topology/filter?domainName="+a}else if("location"==i.searchValue){var r=N.encode(i.searchLocationform.locationName),o=i.searchLocationform.locationType;i.$store.state.configServerUrl=o?y.b+"topology/filter?locationName="+r+"&locationType="+o:y.b+"topology/filter?locationName="+r}else if("configure"==i.searchValue){var s=N.encode(i.searchConfigureform.configure);i.$store.state.configServerUrl=y.b+"topology/filter?urlName="+s}i.$emit("updateRenderTree")}})}}},T={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isShow?i("div",{staticClass:"search-wrapper"},[i("div",{staticClass:"search-triangle"}),t._v(" "),i("el-form",{attrs:{"label-width":"80px"}},[i("el-form-item",{attrs:{label:t.$t("lg.baseon"),prop:"name"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{change:function(e){t.getSearchType(t.searchValue)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},t._l(t.searchType,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),t._v(" "),i("span",[t._v(t._s(t.$t("lg.search")))])],1)],1),t._v(" "),t.isDomain?i("el-form",{ref:"searchDomainform",attrs:{model:t.searchDomainform,rules:t.searchDomainformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:t.$t("lg.bsdomain"),prop:"domainName"}},[i("el-input",{attrs:{placeholder:t.$t("lg.bsdomain"),clearable:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchEnsure("searchDomainform")}},model:{value:t.searchDomainform.domainName,callback:function(e){t.$set(t.searchDomainform,"domainName",e)},expression:"searchDomainform.domainName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsport"),prop:"domainPort"}},[i("el-input",{attrs:{placeholder:t.$t("lg.bsport"),clearable:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchEnsure("searchDomainform")}},model:{value:t.searchDomainform.domainPort,callback:function(e){t.$set(t.searchDomainform,"domainPort",e)},expression:"searchDomainform.domainPort"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.searchEnsure("searchDomainform")}}},[t._v(t._s(t.$t("lg.search")))])],1)],1):t._e(),t._v(" "),t.isLocation?i("el-form",{ref:"searchLocationform",attrs:{model:t.searchLocationform,rules:t.searchLocationformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:t.$t("lg.objposition"),prop:"locationName"}},[i("el-input",{attrs:{placeholder:t.$t("lg.protectedpos"),clearable:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchEnsure("searchLocationform")}},model:{value:t.searchLocationform.locationName,callback:function(e){t.$set(t.searchLocationform,"locationName",e)},expression:"searchLocationform.locationName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.matchtype"),prop:"locationType"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},model:{value:t.searchLocationform.locationType,callback:function(e){t.$set(t.searchLocationform,"locationType",e)},expression:"searchLocationform.locationType"}},[i("el-option",{attrs:{label:t.$t("lg.exactmatch"),value:"accurateMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.suffixmatch"),value:"suffixMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.patchmatch"),value:"pathMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.nolimited"),value:""}})],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.searchEnsure("searchLocationform")}}},[t._v(t._s(t.$t("lg.search")))])],1)],1):t._e(),t._v(" "),t.isConfigure?i("el-form",{ref:"searchConfigureform",attrs:{model:t.searchConfigureform,rules:t.searchConfigureformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:t.$t("lg.ourl"),prop:"configure"}},[i("el-input",{attrs:{placeholder:t.$t("lg.ourl2"),clearable:""},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.searchEnsure("searchConfigureform")}},model:{value:t.searchConfigureform.configure,callback:function(e){t.$set(t.searchConfigureform,"configure",e)},expression:"searchConfigureform.configure"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.searchEnsure("searchConfigureform")}}},[t._v(t._s(t.$t("lg.search")))])],1)],1):t._e()],1):t._e()},staticRenderFns:[]};var I=i("VU/8")(O,T,!1,function(t){i("w5yU")},"data-v-54c65cd5",null).exports,L=i("bOdI"),E=i.n(L),R=i("qqiS"),A=(i("xrTZ").Base64,{props:{isEditConfig:{type:Boolean},diplomas:{type:Array},keys:{type:Array},shadowObj:{type:Object},shadowDialogVisible:{type:Boolean}},watch:{"shadowform.http":function(){this.shadowform.domainPort="https"==this.shadowform.http?443:80}},computed:{isShowWeight:function(){return"ip_weight"==this.checkedTactics},loadBalancingTypeTxt:function(){switch(this.checkedTactics){case"polling":return this.$t("lg.polling");case"least_conn":return this.$t("lg.leastcon");case"ip_weight":return this.$t("lg.weights");case"ip_hash":return"ip_hash";default:return"xff_hash"}}},data:function(){return{abc:"",domainCmdLoading:!1,domainDisable:!1,domainCmdData:[],domainObj:{domainName:"",port:80},shadowform:{http:"http",domain:"",domainPort:80,remark:"",diplomas:"",keys:"",innerHttp:"http",configArray:[{ip:"",ipPort:"",ipWeight:""}],scInterval:null,scFall:null,scRise:null,scTimeout:null,scType:"tcp",checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[],hostPort:"",ntlmValue:null,enableXff:!1,checkList:["ipv4"]},scTimeIntervalUnit:[{value:"s",label:"秒"}],scIntervalUnitVal:"s",scTimeoutUnitVal:"s",scTypeUnit:[{value:"tcp",label:"tcp"},{value:"http",label:"http"},{value:"ssl_hello",label:"ssl_hello"}],ckHtpSendUnit:[{value:"GET",label:"GET"},{value:"HEAD",label:"HEAD"}],ckHtpExpAliveUnit:[{value:"http_2xx",label:"http_2xx"},{value:"http_3xx",label:"http_3xx"},{value:"http_4xx",label:"http_4xx"},{value:"http_5xx",label:"http_5xx"}],isShowServerCheckBox:!1,isShowHgSettingBox:!1,checkedTactics:"polling",ipTactics:[{value:"polling",name:this.$t("lg.polling")},{value:"least_conn",name:this.$t("lg.leastcon")},{value:"ip_weight",name:this.$t("lg.weights")},{value:"ip_hash",name:"ip_hash"},{value:"xxf_hash",name:"xff_hash"}],shadowPopRules:{domain:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],domainPort:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],diplomas:[{required:!0,message:this.$t("lg.select"),trigger:"blur"}],keys:[{required:!0,message:this.$t("lg.select"),trigger:"blur"}],scInterval:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scFall:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scRise:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scTimeout:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],checkHttpSendTxt:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^([\w\-.\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invaidformat"),trigger:"blur"}],checkHttpExpectAlive:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],hostPort:[{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],ntlmValue:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},ipLabelWidth:"100px"}},methods:{handleShadowClose:function(){this.domainDisable=!1,this.domainCmdData=[],this.shadowform.http="http",this.$refs.shadowform.resetFields(),this.$emit("setbyshadowpopchild",!1),this.shadowform.configArray.length=1,this.shadowform.checkList=["ipv4"],this.checkedTactics="polling",this.isShowServerCheckBox=!1,this.isShowHgSettingBox=!1},addDomainBox:function(){this.shadowform.configArray.push({ip:"",ipPort:"",ipWeight:""})},delDomainBox:function(t){1!=this.shadowform.configArray.length&&this.shadowform.configArray.splice(t,1)},serverCheck:function(){this.isShowServerCheckBox=!this.isShowServerCheckBox},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},addDomainCmd:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e.shadowform,a=i.http,n=i.domain,r=i.domainPort,o=i.diplomas,s=i.keys;i.checkList;"https"==a&&(e.domainObj.key=s,e.domainObj.diploma=o),e.domainObj.domainName=n,e.domainObj.port=r,i.configArray.forEach(function(t){e.domainCmdData.push(t),console.log(e.domainCmdData)}),e.domainDisable=!0,e.shadowform.configArray=[{ip:"",ipPort:"",ipWeight:""}]}})},deleCmd:function(t){this.domainCmdData.splice(this.domainCmdData.indexOf(t),1),0==this.domainCmdData.length&&(this.domainDisable=!1)},submitDomainCmd:function(){var t,e=this,i=this,a=i.shadowObj.snodeId,n=i.domainObj.domainName,r=i.domainObj.port,o=i.shadowform.remark,s=i.shadowform.http,l=i.shadowform.innerHttp,c=i.shadowform.enableXff,d=i.shadowform.hostPort||0,u=i.shadowform.ntlmValue,f=!!u,h=i.isShowServerCheckBox,m=i.shadowform.checkList;1==m.length?t=m[0]:2==m.length&&(t=m[0]+"|"+m[1]);var p=[];if(p=i.domainCmdData.map(function(t){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(t.ip)&&!/^\[|\]$/.test(t.ip)&&(t.ip="["+t.ip+"]"),"ip_weight"==i.checkedTactics?{server:t.ip+":"+t.ipPort+" weight="+t.ipWeight}:{server:t.ip+":"+t.ipPort}}),"polling"!==i.checkedTactics&&"ip_weight"!==i.checkedTactics&&p.push(E()({},i.checkedTactics,"")),f&&p.push({ntlm:u}),i.isEditConfig)var g=y.b+"pe/shadow/domain?savedConfig=true";else g=y.b+"pe/shadow/domain";var v={snodeId:a,domainName:n,domainPort:r,remark:o,serverScheme:l,servers:p,ssl:"off",enableXFF:c,serverPort:d,enableNTLM:f,ipListenConfs:t};if("https"==s&&(v.ssl="on",v.key=i.domainObj.key,v.crt=i.domainObj.diploma),h){var b={enabled:!0,param:{}};b.enabled=h,b.param.interval=1e3*i.shadowform.scInterval,b.param.fall=i.shadowform.scFall,b.param.rise=i.shadowform.scRise,b.param.timeout=1e3*i.shadowform.scTimeout,b.param.type=i.shadowform.scType,"http"==i.shadowform.scType&&(b.param.check_http_send='"'+i.shadowform.checkHttpSendType+" "+(i.shadowform.checkHttpSendTxt||"/")+' HTTP/1.0\\r\\n\\r\\n"',b.param.check_http_expect_alive=i.shadowform.checkHttpExpectAlive.join(" ")),v.serverCheck=b}i.domainCmdLoading=!0,_.a.post(g,v).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.$emit("updateRenderTree"),i.handleShadowClose()):8==t.data.responseCode?i.$message.error(i.$t("lg.failed")+":"+t.data.data):i.$message.error(i.$t("lg.failed")),i.domainCmdLoading=!1}).catch(function(t){console.log(t),i.$message.error(e.$t("lg.failed")),i.domainCmdLoading=!1})}},components:{loading:R.a}}),M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shadowpop-wrapper"},[i("el-dialog",{attrs:{width:"72%",title:t.shadowObj.snodeId+" ["+t.shadowObj.name+"]",visible:t.shadowDialogVisible,"close-on-click-modal":!1,"before-close":t.handleShadowClose},on:{"update:visible":function(e){t.shadowDialogVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content",staticStyle:{"margin-right":"30px"}},[i("el-form",{ref:"shadowform",attrs:{model:t.shadowform,rules:t.shadowPopRules,"label-width":"120px"}},[i("div",{staticClass:"outBorder"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.externalserviceconf")))]),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.httpout")}},[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.domainDisable},model:{value:t.shadowform.http,callback:function(e){t.$set(t.shadowform,"http",e)},expression:"shadowform.http"}},[[i("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),i("el-option",{attrs:{label:"https",value:"https"}})]],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsdomain"),prop:"domain"}},[i("el-input",{attrs:{disabled:t.domainDisable},model:{value:t.shadowform.domain,callback:function(e){t.$set(t.shadowform,"domain","string"==typeof e?e.trim():e)},expression:"shadowform.domain"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsport"),prop:"domainPort"}},[i("el-input",{attrs:{disabled:t.domainDisable},model:{value:t.shadowform.domainPort,callback:function(e){t.$set(t.shadowform,"domainPort","string"==typeof e?e.trim():e)},expression:"shadowform.domainPort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{disabled:t.domainDisable,placeholder:"域名备注信息"},model:{value:t.shadowform.remark,callback:function(e){t.$set(t.shadowform,"remark","string"==typeof e?e.trim():e)},expression:"shadowform.remark"}})],1),t._v(" "),"https"==t.shadowform.http?i("el-form-item",{attrs:{label:t.$t("lg.selectcer"),prop:"diplomas"}},[i("el-select",{attrs:{placeholder:t.$t("lg.selectcer"),disabled:t.domainDisable},model:{value:t.shadowform.diplomas,callback:function(e){t.$set(t.shadowform,"diplomas",e)},expression:"shadowform.diplomas"}},[t._l(t.diplomas,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1):t._e(),t._v(" "),"https"==t.shadowform.http?i("el-form-item",{attrs:{label:t.$t("lg.selectsec"),prop:"keys"}},[i("el-select",{attrs:{placeholder:t.$t("lg.selectsec"),disabled:t.domainDisable},model:{value:t.shadowform.keys,callback:function(e){t.$set(t.shadowform,"keys",e)},expression:"shadowform.keys"}},[t._l(t.keys,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1):t._e(),t._v(" "),i("el-form-item",[i("el-checkbox-group",{attrs:{min:1,disabled:t.domainDisable},model:{value:t.shadowform.checkList,callback:function(e){t.$set(t.shadowform,"checkList",e)},expression:"shadowform.checkList"}},[i("el-checkbox",{attrs:{label:"ipv4"}},[t._v("IPV4")]),t._v(" "),i("el-checkbox",{attrs:{label:"ipv6"}},[t._v("IPV6")])],1)],1)],1),t._v(" "),i("div",{staticClass:"outBorder"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.internalserviceconf")))]),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.httpin"),"label-width":t.ipLabelWidth}},[i("el-select",{staticStyle:{width:"100%"},attrs:{disabled:t.domainDisable},model:{value:t.shadowform.innerHttp,callback:function(e){t.$set(t.shadowform,"innerHttp",e)},expression:"shadowform.innerHttp"}},[[i("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),i("el-option",{attrs:{label:"https",value:"https"}})]],2)],1),t._v(" "),i("div",{staticStyle:{position:"relative"}},[t._l(t.shadowform.configArray,function(e,a){return i("div",{key:a,staticClass:"inBorder"},[i("span",{staticClass:"delIp",on:{click:function(e){t.delDomainBox(a)}}},[i("i",{staticClass:"el-icon-close"})]),t._v(" "),i("el-form-item",{attrs:{label:"IP","label-width":t.ipLabelWidth,prop:"configArray."+a+".ip",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-. *!$@?^()<>{}[\]=%&:\;/~+#`,])+$/,message:t.$t("lg.invalidformat"),trigger:"blur"}]}},[i("el-input",{model:{value:e.ip,callback:function(i){t.$set(e,"ip","string"==typeof i?i.trim():i)},expression:"item.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),"label-width":t.ipLabelWidth,prop:"configArray."+a+".ipPort",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:t.$t("lg.invalidport"),trigger:"change"}]}},[i("el-input",{model:{value:e.ipPort,callback:function(i){t.$set(e,"ipPort","string"==typeof i?i.trim():i)},expression:"item.ipPort"}})],1),t._v(" "),"ip_weight"==t.checkedTactics?i("el-form-item",{attrs:{label:t.$t("lg.weights"),"label-width":t.ipLabelWidth,prop:"configArray."+a+".ipWeight",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:t.$t("lg.requirepositive"),trigger:"change"}]}},[i("el-input",{model:{value:e.ipWeight,callback:function(i){t.$set(e,"ipWeight","string"==typeof i?i.trim():i)},expression:"item.ipWeight"}})],1):t._e()],1)}),t._v(" "),i("span",{staticClass:"addIp",attrs:{title:t.$t("lg.addmoreinternalbs")},on:{click:t.addDomainBox}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],2),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.balancestrategy")}},[i("el-radio-group",{attrs:{disabled:t.domainDisable},model:{value:t.checkedTactics,callback:function(e){t.checkedTactics=e},expression:"checkedTactics"}},t._l(t.ipTactics,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1),t._v(" "),i("div",{staticClass:"serverCheckBox"},[i("el-form-item",{attrs:{label:t.$t("lg.serverhealth"),"label-width":"135px"}},[i("el-switch",{attrs:{disabled:t.domainDisable},on:{click:function(e){t.serverCheck()}},model:{value:t.isShowServerCheckBox,callback:function(e){t.isShowServerCheckBox=e},expression:"isShowServerCheckBox"}})],1),t._v(" "),t.isShowServerCheckBox?i("div",{staticClass:"serverCheckinner"},[i("el-form-item",{attrs:{label:t.$t("lg.checkinterval"),"label-width":"90px",prop:"scInterval"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-input",{staticStyle:{width:"98%"},attrs:{"auto-complete":"off",placeholder:t.$t("lg.plzenter"),disabled:t.domainDisable},model:{value:t.shadowform.scInterval,callback:function(e){t.$set(t.shadowform,"scInterval","string"==typeof e?e.trim():e)},expression:"shadowform.scInterval"}})],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-select",{attrs:{placeholder:t.$t("lg.select"),disabled:t.domainDisable},model:{value:t.scIntervalUnitVal,callback:function(e){t.scIntervalUnitVal=e},expression:"scIntervalUnitVal"}},[t._l(t.scTimeIntervalUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.serverstopcounts"),"label-width":"145px",prop:"scFall"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter"),disabled:t.domainDisable},model:{value:t.shadowform.scFall,callback:function(e){t.$set(t.shadowform,"scFall","string"==typeof e?e.trim():e)},expression:"shadowform.scFall"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.serverstartcounts"),"label-width":"145px",prop:"scRise"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter"),disabled:t.domainDisable},model:{value:t.shadowform.scRise,callback:function(e){t.$set(t.shadowform,"scRise","string"==typeof e?e.trim():e)},expression:"shadowform.scRise"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),"label-width":"120px",prop:"scTimeout"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-input",{staticStyle:{width:"98%"},attrs:{placeholder:t.$t("lg.plzenter"),disabled:t.domainDisable},model:{value:t.shadowform.scTimeout,callback:function(e){t.$set(t.shadowform,"scTimeout","string"==typeof e?e.trim():e)},expression:"shadowform.scTimeout"}})],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-select",{attrs:{placeholder:t.$t("lg.select"),disabled:t.domainDisable},model:{value:t.scTimeoutUnitVal,callback:function(e){t.scTimeoutUnitVal=e},expression:"scTimeoutUnitVal"}},[t._l(t.scTimeIntervalUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.protocolused"),"label-width":"145px",prop:"scTypeUnit"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:t.$t("lg.select"),disabled:t.domainDisable},model:{value:t.shadowform.scType,callback:function(e){t.$set(t.shadowform,"scType",e)},expression:"shadowform.scType"}},[t._l(t.scTypeUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1),t._v(" "),"http"==t.shadowform.scType?i("el-form-item",{attrs:{label:t.$t("lg.httpcheck"),"label-width":"145px",prop:"checkHttpSendTxt"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter"),disabled:t.domainDisable},model:{value:t.shadowform.checkHttpSendTxt,callback:function(e){t.$set(t.shadowform,"checkHttpSendTxt",e)},expression:"shadowform.checkHttpSendTxt"}},[i("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:t.$t("lg.select"),disabled:t.domainDisable},slot:"prepend",model:{value:t.shadowform.checkHttpSendType,callback:function(e){t.$set(t.shadowform,"checkHttpSendType",e)},expression:"shadowform.checkHttpSendType"}},[t._l(t.ckHtpSendUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1):t._e(),t._v(" "),"http"==t.shadowform.scType?i("el-form-item",{attrs:{label:t.$t("lg.httpcheckexptected"),"label-width":"175px",prop:"checkHttpExpectAlive"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:t.$t("lg.select"),disabled:t.domainDisable,multiple:""},model:{value:t.shadowform.checkHttpExpectAlive,callback:function(e){t.$set(t.shadowform,"checkHttpExpectAlive",e)},expression:"shadowform.checkHttpExpectAlive"}},[t._l(t.ckHtpExpAliveUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1):t._e()],1):t._e()],1),t._v(" "),i("div",{staticClass:"gradeSettingBox"},[i("p",{staticClass:"gradeSettingTxt text-right"},[i("span",{staticClass:"cursor-pointer font-blue",on:{click:function(e){t.gradeSetting()}}},[i("i",{class:t.isShowHgSettingBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.highconfig")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowHgSettingBox,expression:"isShowHgSettingBox"}],staticClass:"gradeSettinginner"},[i("el-form-item",{attrs:{label:"开启x-forwarded-for功能","label-width":"190px",prop:"enableXff"}},[i("el-switch",{attrs:{disabled:t.domainDisable},model:{value:t.shadowform.enableXff,callback:function(e){t.$set(t.shadowform,"enableXff",e)},expression:"shadowform.enableXff"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.customport"),"label-width":"180px",prop:"hostPort"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter"),disabled:t.domainDisable},model:{value:t.shadowform.hostPort,callback:function(e){t.$set(t.shadowform,"hostPort","string"==typeof e?e.trim():e)},expression:"shadowform.hostPort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.ntlmlong"),"label-width":t.ipLabelWidth,prop:"ntlmValue"}},[i("el-input",{attrs:{placeholder:t.$t("lg.inputnumber"),disabled:t.domainDisable},model:{value:t.shadowform.ntlmValue,callback:function(e){t.$set(t.shadowform,"ntlmValue","string"==typeof e?e.trim():e)},expression:"shadowform.ntlmValue"}})],1)],1)])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDomainCmd("shadowform")}}},[t._v(t._s(t.$t("lg.addbs")))]),t._v(" "),i("el-button",{on:{click:t.handleShadowClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)]),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content"},[t.domainCmdData.length>0?i("div",[i("h2",{staticClass:"domaincmd-title"},[t._v(t._s(t.shadowform.http)+"://"+t._s(t.shadowform.domain)+":"+t._s(t.shadowform.domainPort)+"  ("+t._s(t.shadowform.remark)+" )  [ "+t._s(t.shadowform.checkList[0])),t.shadowform.checkList[1]?i("span",[t._v(" | "+t._s(t.shadowform.checkList[1]))]):t._e(),t._v(" ]")]),t._v(" "),i("div",[i("table",[i("thead",[i("tr",[i("th",[t._v("IP")]),t._v(" "),i("th",[t._v("PORT")]),t._v(" "),t.isShowWeight?i("th",[t._v(t._s(t.$t("lg.weights")))]):t._e(),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.domainCmdData,function(e){return i("tr",[i("td",[t._v(t._s(e.ip))]),t._v(" "),i("td",[t._v(t._s(e.ipPort))]),t._v(" "),t.isShowWeight?i("td",[t._v(t._s(e.ipWeight))]):t._e(),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.deleCmd(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("p",{staticClass:"loadBaTypeTxt"},[t._v(t._s(t.$t("lg.curloadbalance"))+"："),i("i",{staticClass:"el-icon-success font-green"}),t._v(" "+t._s(t.loadBalancingTypeTxt))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitDomainCmd}},[t._v(t._s(t.$t("lg.confirmadd")))])],1)])]):i("div",[i("p",{staticClass:"text-center"},[t._v(t._s(t.$t("lg.nodata")))])])])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.domainCmdLoading,expression:"domainCmdLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1)],1)},staticRenderFns:[]};var B=i("VU/8")(A,M,!1,function(t){i("J/O9")},"data-v-9a9924ac",null).exports,P=i("ZPNK"),q=i("Mh1v"),U=i("Dwag"),V=i("vldg"),G=i("woOf"),F=i.n(G),H=i("kDN8"),z=i("xrTZ").Base64,W={components:{loading:R.a},props:{isShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{batchDirectiveData:{},isShowSeniorDct:!1,batchDirectiveLoading:!1,updateBatchDctLoading:!1,isCheckDisable:!1,isProtectEditShow:!1,isSkipEditShow:!1,isCustomEditShow:!1,isTypesEditShow:!1,isAddEditShow:!1,isModifyEditShow:!1,isRequestTimeShow:!1,isVerifyBrowserEditShow:!1,isVerifyAgentEditShow:!1,dictateType:"",orgin:{uri1:"",uribl:"",uri2:"",time:"",refreshtimes:"",rae:""},orgin2:{uri1:"",uri2:""},orgin3:{uri1:""},orgin4:{uri1:""},orgin5:{uri1:""},orginVerifyBrowser:{verifyBrowser:""},orginVerifyAgent:{verifyAgent:""},orgin7:{sdRequestTimeV:""},orginSc:{customName:"",customParams:""},overTimeUnit:[{value:"y",label:this.$t("lg.year")},{value:"M",label:this.$t("lg.month")},{value:"w",label:this.$t("lg.week")},{value:"d",label:this.$t("lg.day")},{value:"h",label:this.$t("lg.hour")},{value:"m",label:this.$t("lg.minite")},{value:"s",label:this.$t("lg.second")},{value:"ms",label:this.$t("lg.ms")}],overTimeValue:"",editsbform:{uri1:"",uribl:"",uri2:"",time:"",timeNum:null,refreshtimes:"",raeChecklist:[]},editslform:{uri1:"",uri2:""},edittyform:{uri1:"",options:[{value:"Content-Type text/html",label:"Content-Type text/html"},{value:"Content-Type text/plain",label:"Content-Type text/plain"},{value:"Content-Type application/json",label:"Content-Type application/json"}]},editscform:{customName:"",customParams:""},editaddform:{uri1:"",options:[{value:"Content-Type text/html",label:"Content-Type text/html"},{value:"Content-Type text/plain",label:"Content-Type text/plain"},{value:"Content-Type application/json",label:"Content-Type application/json"},{value:"Cache-Control no-cache",label:"Cache-Control no-cache"}]},editmodifyform:{uri1:"",options:[{value:"Cache-Control private always",label:"Cache-Control private always"},{value:"Cache-Control no-cache always",label:"Cache-Control no-cache always"},{value:"Cache-Control max-age always",label:"Cache-Control max-age always"},{value:"Cache-Control must-revalidate always",label:"Cache-Control must-revalidate always"}]},editRequestTimeform:{sdRequestTime:null,sdRequestTimeUnit:"s",sdRequestUnitOpt:[{label:"毫秒",value:"ms"},{label:"秒",value:"s"}]},editverifyBrowserform:{verifyBrowser:""},editverifyAgentform:{verifyAgent:""},editsbformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],uri2:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],uribl:[{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],timeNum:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],refreshtimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editslformRules:{uri1:[{pattern:/^([\w\-."\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],uri2:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-."\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},editscformRules:{customName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],customParams:[]},edittyformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[A-Za-z0-9\_\-\:\.\/\|\s]+$/gi,message:this.$t("lg.reg3"),trigger:"change"}]},editaddformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[A-Za-z0-9\_\-\:\.\/\|\s]+$/gi,message:this.$t("lg.reg4"),trigger:"change"}]},editmodifyformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[A-Za-z0-9\_\-\:\.\/\|\s]+$/gi,message:this.$t("lg.reg4"),trigger:"change"}]},editRequestTimeformRules:{sdRequestTime:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editverifyBrowserformRules:{verifyBrowser:[{required:!0,trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editverifyAgentformRules:{verifyAgent:[{required:!0,trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]}}},methods:{getSdBatchInstructData:function(){var t=this;return new m.a(function(e,i){Object(H.a)(t,{shadowObj:t.shadowObj},!0).then(function(i){t.batchDirectiveData=i,e(i)})})},checkedChange:function(){var t=this;0==t.editsbform.raeChecklist.length&&(t.isCheckDisable=!1),t.editsbform.raeChecklist.forEach(function(e,i){"替换配置"==e||"Replacement configuration"==e?(t.isCheckDisable=!0,t.editsbform.raeChecklist=[t.$t("lg.replaceconfig")]):t.isCheckDisable=!1})},batchDirectiveDialogClose:function(){this.$emit("setbysdBatchInstructmodalclose",!1)},batchDctEditClose:function(){this.editsbform.uribl="",this.isProtectEditShow=!1,this.isSkipEditShow=!1,this.isCustomEditShow=!1,this.isTypesEditShow=!1,this.isAddEditShow=!1,this.isModifyEditShow=!1,this.isRequestTimeShow=!1,this.isVerifyBrowserEditShow=!1,this.isVerifyAgentEditShow=!1},delBatchDirective:function(t,e){var i=this;i.batchDirectiveLoading=!0;var a=F()([],e),n=t;if("shadow_sub_filter"==n){if(""==a[4])a.pop(a[4]);else{a[4]=Object($.d)(a[4],{"替换配置":"r","允许访问原URI":"a","二次加密":"e","绝对路径":"s"},!1)}switch(a[0]="'"+a[0]+"'",a[1]="'"+a[1]+"'",a[2].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"年":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"y";break;case"月":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"M";break;case"周":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"w";break;case"天":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"d";break;case"小时":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"h";break;case"分钟":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"m";break;case"秒":a[2]=a[2].match(/(\d*)(\w*)/)[1]+"s";break;default:a[2]=a[2].match(/(\d*)(\w*)/)[1]+"ms"}}else if("shadow_location"==n)if(""==a[1])a.pop(),a[0]="'"+a[0]+"'";else{var r="'"+a[0]+"'";a[0]="'"+a[1]+"'",a[1]=r}else if("shadow_sub_filter_ex"==n){if(""==a[5])a.pop(a[5]);else{a[5]=Object($.d)(a[5],{"二次加密":"e","绝对路径":"s","路径加密":"p"},!1)}switch(a[0]="'"+a[0]+"'",a[1]="'"+a[1]+"'",a[2]="'"+a[2]+"'",a[3].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"年":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"y";break;case"月":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"M";break;case"周":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"w";break;case"天":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"d";break;case"小时":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"h";break;case"分钟":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"m";break;case"秒":a[3]=a[3].match(/(\d*)(\w*)/)[1]+"s";break;default:a[3]=a[3].match(/(\d*)(\w*)/)[1]+"ms"}}else if("shadow_custom"==n)n=a.customName,a=[a.customParams];else if("shadow_request_time"==n)switch(a[0].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"秒":a[0]=a[0].match(/(\d*)(\w*)/)[1]+"s";break;default:a[0]=a[0].match(/(\d*)(\w*)/)[1]+"ms"}var o=y.b+"pe/shadow/domain/location/directive/batch",s=z.encode(a.join(" ")),l={},c=[];l[n]=s,c.push(l),"shadow_insert_js_ex"==n&&(c[0].shadow_insert_js_ex=z.encode("pe 10s 1 '</title>' '</title><script src=\"/formvalidator/config.js\"><\/script><script src=\"/formvalidator/' 'shadowlib.js' '\"><\/script>'")),_.a.delete(o,{data:{snodeId:i.shadowObj.snodeId,directives:c}}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getSdBatchInstructData(),i.$emit("updateRenderTree")):i.$message.error(i.$t("lg.failed")+":"+t.data.data.message),i.batchDirectiveLoading=!1}).catch(function(t){console.log(t)})},editConfcmd:function(t,e){if(this.dictateType=t,"shadow_sub_filter"==t){this.isProtectEditShow=!0,this.orgin.uri1=e[0],this.orgin.uri2=e[1],this.orgin.refreshtimes=e[3];var i=e[4];switch(this.orgin.rae=Object($.d)(i,{"替换配置":"r","允许访问原URI":"a","二次加密":"e","绝对路径":"s"},!1),e[2].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"年":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"y",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"y";break;case"月":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"M",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"M";break;case"周":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"w",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"w";break;case"天":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"d",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"d";break;case"小时":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"h",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"h";break;case"分钟":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"m",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"m";break;case"秒":this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"s",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"s";break;default:this.orgin.time=e[2].match(/(\d*)(\w*)/)[1]+"ms",this.editsbform.time=e[2].match(/(\d*)(\w*)/)[1]+"ms"}this.editsbform.timeNum=this.editsbform.time.match(/(\d*)(\w*)/)[1]-0,this.overTimeValue=this.editsbform.time.match(/(\d*)(\w*)/)[2],this.editsbform.raeChecklist=[],this.editsbform.raeChecklist=i.split("、"),this.isCheckDisable=-1!==i.indexOf("替换配置"),this.editsbform.uri1=e[0],this.editsbform.uri2=e[1],this.editsbform.refreshtimes=e[3]}else if("shadow_location"==t)this.isSkipEditShow=!0,this.orgin2.uri1=e[0],this.orgin2.uri2=e[1],this.editslform.uri1=e[0],this.editslform.uri2=e[1];else if("shadow_sub_filter_ex"==t){this.isProtectEditShow=!0,this.orgin.uri1=e[0],this.orgin.uribl=e[1],this.orgin.uri2=e[2],this.orgin.refreshtimes=e[4];i=e[5];switch(this.orgin.rae=Object($.d)(i,{"二次加密":"e","绝对路径":"s","路径加密":"p"},!1),e[3].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"年":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"y",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"y";break;case"月":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"M",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"M";break;case"周":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"w",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"w";break;case"天":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"d",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"d";break;case"小时":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"h",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"h";break;case"分钟":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"m",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"m";break;case"秒":this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"s",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"s";break;default:this.orgin.time=e[3].match(/(\d*)(\w*)/)[1]+"ms",this.editsbform.time=e[3].match(/(\d*)(\w*)/)[1]+"ms"}this.editsbform.timeNum=this.editsbform.time.match(/(\d*)(\w*)/)[1]-0,this.overTimeValue=this.editsbform.time.match(/(\d*)(\w*)/)[2],this.editsbform.raeChecklist=[],this.editsbform.raeChecklist=i.split("、"),this.editsbform.uri1=e[0],this.editsbform.uribl=e[1],this.editsbform.uri2=e[2],this.editsbform.refreshtimes=e[4]}else if("shadow_custom"==t)this.isCustomEditShow=!0,this.orginSc.customName=e.customName,this.orginSc.customParams=e.customParams,this.editscform.customName=e.customName,this.editscform.customParams=e.customParams;else if("shadow_sub_filter_types"==t)this.isTypesEditShow=!0,this.orgin3.uri1=e[0],this.edittyform.uri1=e[0];else if("add_header"==t)this.isAddEditShow=!0,this.orgin4.uri1=e[0],this.editaddform.uri1=e[0];else if("shadow_modify_header"==t)this.isModifyEditShow=!0,this.orgin5.uri1=e[0],this.editmodifyform.uri1=e[0];else if("shadow_request_time"==t)switch(this.isRequestTimeShow=!0,e[0].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"秒":this.orgin7.sdRequestTimeV=e[0].match(/(\d+)([\u4e00-\u9fa5]+)/)[1]+"s",this.editRequestTimeform.sdRequestTime=e[0].match(/(\d+)([\u4e00-\u9fa5]+)/)[1],this.editRequestTimeform.sdRequestTimeUnit="s";break;default:this.orgin7.sdRequestTimeV=e[0].match(/(\d+)([\u4e00-\u9fa5]+)/)[1]+"ms",this.editRequestTimeform.sdRequestTime=e[0].match(/(\d+)([\u4e00-\u9fa5]+)/)[1],this.editRequestTimeform.sdRequestTimeUnit="ms"}else"shadow_verify_browser"==t?(this.isVerifyBrowserEditShow=!0,this.orginVerifyBrowser.verifyBrowser=e[0],this.editverifyBrowserform.verifyBrowser=e[0]):"shadow_verify_agent"==t&&(this.isVerifyAgentEditShow=!0,this.orginVerifyAgent.verifyAgent=e[0],this.editverifyAgentform.verifyAgent=e[0])},updateEditConfCmd:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.updateBatchDctLoading=!0;var i=e.editsbform.raeChecklist.join("").replace("替换配置","r").replace("允许访问原URI","a").replace("二次加密","e").replace("绝对路径","s").replace("路径加密","p");if("shadow_sub_filter"==e.dictateType){if(""==e.orgin.rae)var a=z.encode("'"+e.orgin.uri1+"' '"+e.orgin.uri2+"' "+e.orgin.time+" "+e.orgin.refreshtimes);else a=z.encode("'"+e.orgin.uri1+"' '"+e.orgin.uri2+"' "+e.orgin.time+" "+e.orgin.refreshtimes+" "+e.orgin.rae);if(""==i)var n=z.encode("'"+e.editsbform.uri1+"' '"+e.editsbform.uri2+"' "+e.editsbform.timeNum+e.overTimeValue+" "+e.editsbform.refreshtimes);else n=z.encode("'"+e.editsbform.uri1+"' '"+e.editsbform.uri2+"' "+e.editsbform.timeNum+e.overTimeValue+" "+e.editsbform.refreshtimes+" "+i)}else if("shadow_sub_filter_ex"==e.dictateType){if(""==e.orgin.rae)a=z.encode("'"+e.orgin.uri1+"' '"+e.orgin.uribl+"' '"+e.orgin.uri2+"' "+e.orgin.time+" "+e.orgin.refreshtimes);else a=z.encode("'"+e.orgin.uri1+"' '"+e.orgin.uribl+"' '"+e.orgin.uri2+"' "+e.orgin.time+" "+e.orgin.refreshtimes+" "+e.orgin.rae);if(""==i)n=z.encode("'"+e.editsbform.uri1+"' '"+e.editsbform.uribl+"' '"+e.editsbform.uri2+"' "+e.editsbform.timeNum+e.overTimeValue+" "+e.editsbform.refreshtimes);else n=z.encode("'"+e.editsbform.uri1+"' '"+e.editsbform.uribl+"' '"+e.editsbform.uri2+"' "+e.editsbform.timeNum+e.overTimeValue+" "+e.editsbform.refreshtimes+" "+i)}var r=y.b+"pe/shadow/domain/location/directive/batch";_.a.patch(r,{snodeId:e.shadowObj.snodeId,directiveName:e.dictateType,srcData:a,targetData:n}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getSdBatchInstructData(),e.$emit("updateRenderTree"),e.isProtectEditShow=!1):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.updateBatchDctLoading=!1}).catch(function(t){console.log(t)})}})},updateEditSlConfCmd:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.updateBatchDctLoading=!0;var i=y.b+"pe/shadow/domain/location/directive/batch";if(""==e.orgin2.uri2)var a=z.encode("'"+e.orgin2.uri1+"'");else a=z.encode("'"+e.orgin2.uri2+"' '"+e.orgin2.uri1+"'");if(""==e.editslform.uri2)var n=z.encode("'"+e.editslform.uri1+"'");else n=z.encode("'"+e.editslform.uri2+"' '"+e.editslform.uri1+"'");_.a.patch(i,{snodeId:e.shadowObj.snodeId,directiveName:e.dictateType,srcData:a,targetData:n}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getSdBatchInstructData(),e.isSkipEditShow=!1):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.updateBatchDctLoading=!1}).catch(function(t){console.log(t)})}})},updateEditScConfCmd:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.updateBatchDctLoading=!0;var i=y.b+"pe/shadow/domain/location/directive/batch",a="",n="";""!=e.orginSc.customParams&&(a=z.encode(e.orginSc.customParams)),""!=e.editscform.customParams&&(n=z.encode(e.editscform.customParams)),_.a.patch(i,{snodeId:e.shadowObj.snodeId,directiveName:e.orginSc.customName,srcData:a,targetData:n}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getSdBatchInstructData(),e.isCustomEditShow=!1):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.updateBatchDctLoading=!1}).catch(function(t){console.log(t)})}})},updateEditTyConfCmd:function(t){var e=this;this.updateBatchDctLoading=!0;var i=y.b+"pe/shadow/domain/location/directive/batch",a=null,n=null;if("edittyform"==t?this.$refs[t].validate(function(t){t&&(a=z.encode(e.orgin3.uri1),n=z.encode(e.edittyform.uri1))}):"editaddform"==t?this.$refs[t].validate(function(t){t&&(a=z.encode(e.orgin4.uri1),n=z.encode(e.editaddform.uri1))}):"editmodifyform"==t?this.$refs[t].validate(function(t){t&&(a=z.encode(e.orgin5.uri1),n=z.encode(e.editmodifyform.uri1))}):"editRequestTimeform"==t?this.$refs[t].validate(function(t){t&&(a=z.encode(e.orgin7.sdRequestTimeV),n=z.encode(e.editRequestTimeform.sdRequestTime+e.editRequestTimeform.sdRequestTimeUnit))}):"editverifyBrowserform"==t?this.$refs[t].validate(function(t){t&&(a=z.encode(e.orginVerifyBrowser.verifyBrowser),n=z.encode(e.editverifyBrowserform.verifyBrowser))}):"editverifyAgentform"==t&&this.$refs[t].validate(function(t){t&&(a=z.encode(e.orginVerifyAgent.verifyAgent),n=z.encode(e.editverifyAgentform.verifyAgent))}),null==n)return this.updateBatchDctLoading=!1,!1;_.a.patch(i,{snodeId:this.shadowObj.snodeId,directiveName:this.dictateType,srcData:a,targetData:n}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getSdBatchInstructData(),e.batchDctEditClose()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.updateBatchDctLoading=!1}).catch(function(t){console.log(t)})}}},J={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"cmdlist-wrapper"},[i("el-dialog",{attrs:{width:"70%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.batchDirectiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"cmdlist-box"},[i("h1",{staticClass:"title"},[t._v(t._s(t.$t("lg.protectconfig")))]),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_sub_filter")?i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.url3")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.url2")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.validdate")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.allowedrefreshes")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.configproperty")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_sub_filter,function(e,a){return i("tr",[t._l(e,function(e,a){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_sub_filter",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_sub_filter",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))]):i("p",{staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))])]),t._v(" "),i("div",{staticClass:"cmdlist-box"},[i("h1",{staticClass:"title"},[t._v(t._s(t.$t("lg.spconfig")))]),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_sub_filter_ex")?i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.url3")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.remained")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.url2")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.validdate")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.allowedrefreshes")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.configproperty")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_sub_filter_ex,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_sub_filter_ex",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_sub_filter_ex",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))]):i("p",{staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))])]),t._v(" "),t.isShowSeniorDct?i("div",{staticClass:"cmdlist-box"},[i("h1",{staticClass:"title"},[t._v(t._s(t.$t("lg.highconfig")))]),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_sub_filter_types")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.specialtype")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_sub_filter_types,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_sub_filter_types",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_sub_filter_types",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("add_header")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.headercompletion")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.add_header,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("add_header",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("add_header",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_modify_header")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.headeredit")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_modify_header,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_modify_header",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_modify_header",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_request_time")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("手动代理防御")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_request_time,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_request_time",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_request_time",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_verify_browser")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.browserParams")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_verify_browser,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_verify_browser",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_verify_browser",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_verify_agent")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.userBhIndct")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_verify_agent,function(e,a){return i("tr",[t._l(e,function(e){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editConfcmd("shadow_verify_agent",e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_verify_agent",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_verify_token")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("动态指纹功能")]),t._v(" "),i("th",{attrs:{width:"60"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_verify_token,function(e,a){return i("tr",[i("td",[t._v("动态指纹功能已开启")]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(e){t.delBatchDirective("shadow_verify_token",t.batchDirectiveData.shadow_verify_token)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])]):t._e(),t._v(" "),t.batchDirectiveData.hasOwnProperty("shadow_insert_js_ex")?i("div",{staticClass:"cmdlist-box-spc"},[i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.jstrong")))]),t._v(" "),i("th",{attrs:{width:"60"}})])]),t._v(" "),i("tbody",t._l(t.batchDirectiveData.shadow_insert_js_ex,function(e,a){return i("tr",[i("td",[t._v(t._s(t.$t("lg.jsstrongopen")))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBatchDirective("shadow_insert_js_ex",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])]):t._e()]):t._e(),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.batchDirectiveLoading,expression:"batchDirectiveLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isProtectEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isProtectEditShow=e}}},[i("el-form",{ref:"editsbform",attrs:{model:t.editsbform,rules:t.editsbformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.ourl"),prop:"uri1"}},[i("el-input",{model:{value:t.editsbform.uri1,callback:function(e){t.$set(t.editsbform,"uri1","string"==typeof e?e.trim():e)},expression:"editsbform.uri1"}})],1),t._v(" "),"shadow_sub_filter_ex"==t.dictateType?i("el-form-item",{attrs:{label:t.$t("lg.remained"),prop:"uribl"}},[i("el-input",{model:{value:t.editsbform.uribl,callback:function(e){t.$set(t.editsbform,"uribl","string"==typeof e?e.trim():e)},expression:"editsbform.uribl"}})],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.url2"),prop:"uri2"}},[i("el-input",{model:{value:t.editsbform.uri2,callback:function(e){t.$set(t.editsbform,"uri2","string"==typeof e?e.trim():e)},expression:"editsbform.uri2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),prop:"timeNum"}},[i("el-input",{staticStyle:{width:"30%"},model:{value:t.editsbform.timeNum,callback:function(e){t.$set(t.editsbform,"timeNum","string"==typeof e?e.trim():e)},expression:"editsbform.timeNum"}}),t._v(" "),i("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.overTimeValue,callback:function(e){t.overTimeValue=e},expression:"overTimeValue"}},t._l(t.overTimeUnit,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.allowedrefreshes"),prop:"refreshtimes"}},[i("el-input",{model:{value:t.editsbform.refreshtimes,callback:function(e){t.$set(t.editsbform,"refreshtimes","string"==typeof e?e.trim():e)},expression:"editsbform.refreshtimes"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.configproperty")}},[i("div",{staticClass:"checkBorder"},[i("el-checkbox-group",{attrs:{size:"mini"},on:{change:t.checkedChange},model:{value:t.editsbform.raeChecklist,callback:function(e){t.$set(t.editsbform,"raeChecklist",e)},expression:"editsbform.raeChecklist"}},[i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"shadow_sub_filter"==t.dictateType,expression:"dictateType=='shadow_sub_filter'"}],attrs:{label:t.$t("lg.replaceconfig")}}),t._v(" "),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"shadow_sub_filter"==t.dictateType,expression:"dictateType=='shadow_sub_filter'"}],attrs:{label:t.$t("lg.allowaccessourl"),disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encrypt2"),disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encryptab"),disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"shadow_sub_filter_ex"==t.dictateType,expression:"dictateType=='shadow_sub_filter_ex'"}],attrs:{label:t.$t("lg.encryptpa"),disabled:"shadow_sub_filter_ex"==t.dictateType}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditConfCmd("editsbform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isSkipEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isSkipEditShow=e}}},[i("el-form",{ref:"editslform",attrs:{model:t.editslform,rules:t.editslformRules,"label-width":"70px"}},[i("el-form-item",{attrs:{label:t.$t("lg.domain"),prop:"uri1"}},[i("el-input",{model:{value:t.editslform.uri1,callback:function(e){t.$set(t.editslform,"uri1","string"==typeof e?e.trim():e)},expression:"editslform.uri1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"URI",prop:"uri2"}},[i("el-input",{model:{value:t.editslform.uri2,callback:function(e){t.$set(t.editslform,"uri2","string"==typeof e?e.trim():e)},expression:"editslform.uri2"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditSlConfCmd("editslform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isCustomEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isCustomEditShow=e}}},[i("el-form",{ref:"editscform",attrs:{model:t.editscform,rules:t.editscformRules,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"customName"}},[i("el-input",{attrs:{disabled:""},model:{value:t.editscform.customName,callback:function(e){t.$set(t.editscform,"customName","string"==typeof e?e.trim():e)},expression:"editscform.customName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"customParams"}},[i("el-input",{model:{value:t.editscform.customParams,callback:function(e){t.$set(t.editscform,"customParams","string"==typeof e?e.trim():e)},expression:"editscform.customParams"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditScConfCmd("editscform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isTypesEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isTypesEditShow=e}}},[i("el-form",{ref:"edittyform",attrs:{model:t.edittyform,rules:t.edittyformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.specialtype"),prop:"uri1"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",clearable:"",placeholder:t.$t("lg.select")},model:{value:t.edittyform.uri1,callback:function(e){t.$set(t.edittyform,"uri1","string"==typeof e?e.trim():e)},expression:"edittyform.uri1"}},t._l(t.edittyform.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditTyConfCmd("edittyform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isAddEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isAddEditShow=e}}},[i("el-form",{ref:"editaddform",attrs:{model:t.editaddform,rules:t.editaddformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.headercompletion"),prop:"uri1"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",clearable:"",placeholder:t.$t("lg.select")},model:{value:t.editaddform.uri1,callback:function(e){t.$set(t.editaddform,"uri1","string"==typeof e?e.trim():e)},expression:"editaddform.uri1"}},t._l(t.editaddform.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditTyConfCmd("editaddform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isModifyEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isModifyEditShow=e}}},[i("el-form",{ref:"editmodifyform",attrs:{model:t.editmodifyform,rules:t.editmodifyformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.headeredit"),prop:"uri1"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",clearable:"",placeholder:t.$t("lg.select")},model:{value:t.editmodifyform.uri1,callback:function(e){t.$set(t.editmodifyform,"uri1","string"==typeof e?e.trim():e)},expression:"editmodifyform.uri1"}},t._l(t.editmodifyform.options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditTyConfCmd("editmodifyform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isRequestTimeShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isRequestTimeShow=e}}},[i("el-form",{ref:"editRequestTimeform",attrs:{model:t.editRequestTimeform,rules:t.editRequestTimeformRules}},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"手动代理防御设置",prop:"sdRequestTime","label-width":"140px"}},[i("el-input",{attrs:{placeholder:"请求时间"},model:{value:t.editRequestTimeform.sdRequestTime,callback:function(e){t.$set(t.editRequestTimeform,"sdRequestTime",e)},expression:"editRequestTimeform.sdRequestTime"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",[i("el-select",{attrs:{placeholder:t.$t("lg.select")},model:{value:t.editRequestTimeform.sdRequestTimeUnit,callback:function(e){t.$set(t.editRequestTimeform,"sdRequestTimeUnit",e)},expression:"editRequestTimeform.sdRequestTimeUnit"}},t._l(t.editRequestTimeform.sdRequestUnitOpt,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{"label-width":"140px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditTyConfCmd("editRequestTimeform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isVerifyBrowserEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isVerifyBrowserEditShow=e}}},[i("el-form",{ref:"editverifyBrowserform",attrs:{model:t.editverifyBrowserform,rules:t.editverifyBrowserformRules,"label-width":"125px"}},[i("el-form-item",{attrs:{label:t.$t("lg.browserParams"),prop:"verifyBrowser"}},[i("el-input",{attrs:{placeholder:t.$t("lg.browserParams")},model:{value:t.editverifyBrowserform.verifyBrowser,callback:function(e){t.$set(t.editverifyBrowserform,"verifyBrowser",e)},expression:"editverifyBrowserform.verifyBrowser"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditTyConfCmd("editverifyBrowserform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.bundleconfiginstruc")+":"+t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isVerifyAgentEditShow,"close-on-click-modal":!1,"before-close":t.batchDctEditClose},on:{"update:visible":function(e){t.isVerifyAgentEditShow=e}}},[i("el-form",{ref:"editverifyAgentform",attrs:{model:t.editverifyAgentform,rules:t.editverifyAgentformRules,"label-width":"125px"}},[i("el-form-item",{attrs:{label:t.$t("lg.userBhIndct"),prop:"verifyAgent"}},[i("el-input",{attrs:{placeholder:t.$t("lg.userBhIndct")},model:{value:t.editverifyAgentform.verifyAgent,callback:function(e){t.$set(t.editverifyAgentform,"verifyAgent",e)},expression:"editverifyAgentform.verifyAgent"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateEditTyConfCmd("editverifyAgentform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.batchDctEditClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.updateBatchDctLoading,expression:"updateBatchDctLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]};var Y=i("VU/8")(W,J,!1,function(t){i("kA7U")},"data-v-7086ec57",null).exports,X={props:{data:{type:Array},pushmodalShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{pushmodalform:{shadownodes:this.data},pushmodalRules:{shadownodes:[{required:!0,message:this.$t("lg.required"),trigger:"change"}]},pushmodalLoading:!1}},methods:{pushmodalResetForm:function(){this.$refs.pushmodalform.resetFields(),this.$emit("setbypushmodal",!1)},pushmodalFn:function(t,e){var i=this,a=this;this.$refs[t].validate(function(t){if(t){if(i.pushmodalLoading=!0,"pushsome"==e)var n=y.b+"pe/push";else n=y.b+"pe/shadow/config/push/folder";var r=i.shadowObj.snodeId,o=i.pushmodalform.shadownodes;_.a.post(n,{srcSnodeId:r,dstSnodeId:o}).then(function(t){"0"==t.data.responseCode?(i.$message({type:"success",message:a.$t("lg.success")}),i.$emit("updateRenderTree"),i.pushmodalResetForm()):i.$message.error(a.$t("lg.failed")+": "+t.data.data.message),i.pushmodalLoading=!1}).catch(function(t){console.log(t)})}})}},components:{loading:R.a}},Z={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"50%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.pushmodalShow,"close-on-click-modal":!1,"before-close":t.pushmodalResetForm},on:{"update:visible":function(e){t.pushmodalShow=e}}},[i("el-form",{ref:"pushmodalform",attrs:{model:t.pushmodalform,rules:t.pushmodalRules,"label-width":"105px"}},[i("el-form-item",{attrs:{label:t.$t("lg.shadownode"),prop:"shadownodes"}},[i("el-select",{attrs:{placeholder:"选择Shadow节点"},model:{value:t.pushmodalform.shadownodes,callback:function(e){t.$set(t.pushmodalform,"shadownodes",e)},expression:"pushmodalform.shadownodes"}},[t._l(t.data,function(t){return[i("el-option",{attrs:{label:t.isShadowGroup?t.hostName+"(集群)":t.hostName+"("+t.snodeId+")",value:t.snodeId}})]})],2)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.pushmodalFn("pushmodalform","pushsome")}}},[t._v(t._s(t.$t("lg.pushconfig")))]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.pushmodalFn("pushmodalform","pushall")}}},[t._v(t._s(t.$t("lg.pushcompletely")))]),t._v(" "),i("el-button",{on:{click:t.pushmodalResetForm}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.pushmodalLoading,expression:"pushmodalLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]},K=i("VU/8")(X,Z,!1,null,null,null).exports,Q=(i("xrTZ").Base64,{props:{keys:{type:Array},crts:{type:Array},pems:{type:Array},cersmodalShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{cersmodalLoading:!1,keycrt:"keys"}},methods:{cersmodalResetForm:function(){this.$emit("setbycersmodal",!1)},deleteCers:function(t,e){var i=this,a=y.b+"pe/file/client/"+this.shadowObj.snodeId+"/"+t+"/"+e.name+"/",n=this;this.cersmodalLoading=!0,_.a.delete(a).then(function(a){0==a.data.responseCode?("key"==t?i.keys.splice(i.keys.indexOf(e),1):"crt"==t?i.crts.splice(i.crts.indexOf(e),1):i.pems.splice(i.pems.indexOf(e),1),i.$message({type:"success",message:n.$t("lg.success")})):i.$message.error(n.$t("lg.failed")+": "+a.data.data.message),i.cersmodalLoading=!1}).catch(function(t){console.log(t)})}},components:{loading:R.a}}),tt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"60%",title:t.$t("lg.certifications"),visible:t.cersmodalShow,"close-on-click-modal":!1,"before-close":t.cersmodalResetForm},on:{"update:visible":function(e){t.cersmodalShow=e}}},[i("div",{staticClass:"grid-content"},[i("div",{staticStyle:{"margin-bottom":"20px"}},[i("el-radio",{attrs:{label:"keys",border:"",size:"small"},model:{value:t.keycrt,callback:function(e){t.keycrt=e},expression:"keycrt"}},[t._v(t._s(t.$t("lg.keyfiles")))]),t._v(" "),i("el-radio",{attrs:{label:"crts",border:"",size:"small"},model:{value:t.keycrt,callback:function(e){t.keycrt=e},expression:"keycrt"}},[t._v(t._s(t.$t("lg.cetfiles")))]),t._v(" "),i("el-radio",{attrs:{label:"pems",border:"",size:"small"},model:{value:t.keycrt,callback:function(e){t.keycrt=e},expression:"keycrt"}},[t._v(t._s(t.$t("lg.pemfiles")))])],1),t._v(" "),i("div",[i("div",{directives:[{name:"show",rawName:"v-show",value:"keys"==t.keycrt,expression:"keycrt=='keys'"}]},[0==t.keys.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.keys.length>0?i("table",{staticClass:"cersmodal-table"},[i("tbody",t._l(t.keys,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"100px"}},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deleteCers("key",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v("删除")])])])}))]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"crts"==t.keycrt,expression:"keycrt=='crts'"}]},[0==t.crts.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.crts.length>0?i("table",{staticClass:"cersmodal-table"},[i("tbody",t._l(t.crts,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"100px"}},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deleteCers("crt",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"pems"==t.keycrt,expression:"keycrt=='pems'"}]},[0==t.pems.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.pems.length>0?i("table",{staticClass:"cersmodal-table"},[i("tbody",t._l(t.pems,function(e){return i("tr",[i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"100px"}},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deleteCers("pem",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))]):t._e()])])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.cersmodalLoading,expression:"cersmodalLoading"}]},[i("loading",{attrs:{title:t.$t("lg.loading")}})],1)],1)},staticRenderFns:[]},et=i("VU/8")(Q,tt,!1,null,null,null).exports,it=i("203j"),at=(i("xrTZ").Base64,{props:{isEditConfig:{type:Boolean},diplomas:{type:Array},keys:{type:Array},shadowObj:{type:Object},streamShow:{type:Boolean}},watch:{"shadowform.http":function(){this.shadowform.domainPort="https"==this.shadowform.http?443:80}},computed:{isShowWeight:function(){return"ip_weight"==this.checkedTactics},loadBalancingTypeTxt:function(){switch(this.checkedTactics){case"polling":return this.$t("lg.polling");case"least_conn":return this.$t("lg.leastcon");case"ip_weight":return this.$t("lg.weights");case"ip_hash":return"ip_hash";default:return"xff_hash"}}},data:function(){return{abc:"",domainCmdLoading:!1,domainDisable:!1,domainCmdData:[],domainObj:{domainName:"",port:80},shadowform:{http:"http",domain:"",domainPort:80,remark:"",diplomas:"",keys:"",innerHttp:"http",configArray:[{ip:"",ipPort:"",ipWeight:""}],scInterval:null,scFall:null,scRise:null,scTimeout:null,scType:"tcp",checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[],hostPort:"",ntlmValue:null,enableXff:!1,checkList:["ipv4"]},scTimeIntervalUnit:[{value:"s",label:"秒"}],scIntervalUnitVal:"s",scTimeoutUnitVal:"s",scTypeUnit:[{value:"tcp",label:"tcp"},{value:"http",label:"http"},{value:"ssl_hello",label:"ssl_hello"}],ckHtpSendUnit:[{value:"GET",label:"GET"},{value:"HEAD",label:"HEAD"}],ckHtpExpAliveUnit:[{value:"http_2xx",label:"http_2xx"},{value:"http_3xx",label:"http_3xx"},{value:"http_4xx",label:"http_4xx"},{value:"http_5xx",label:"http_5xx"}],isShowServerCheckBox:!1,isShowHgSettingBox:!1,checkedTactics:"polling",ipTactics:[{value:"polling",name:this.$t("lg.polling")},{value:"least_conn",name:this.$t("lg.leastcon")},{value:"ip_weight",name:this.$t("lg.weights")}],shadowPopRules:{domainPort:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],diplomas:[{required:!0,message:this.$t("lg.select"),trigger:"blur"}],keys:[{required:!0,message:this.$t("lg.select"),trigger:"blur"}],scInterval:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scFall:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scRise:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scTimeout:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],checkHttpSendTxt:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^([\w\-.\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invaidformat"),trigger:"blur"}],checkHttpExpectAlive:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],hostPort:[{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],ntlmValue:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},ipLabelWidth:"100px"}},methods:{handleShadowClose:function(){this.domainDisable=!1,this.domainCmdData=[],this.shadowform.http="http",this.$refs.shadowform.resetFields(),this.$emit("setbyshadowpopchild",!1),this.shadowform.configArray.length=1,this.shadowform.checkList=["ipv4"],this.checkedTactics="polling",this.isShowServerCheckBox=!1,this.isShowHgSettingBox=!1},addDomainBox:function(){this.shadowform.configArray.push({ip:"",ipPort:"",ipWeight:""})},delDomainBox:function(t){1!=this.shadowform.configArray.length&&this.shadowform.configArray.splice(t,1)},serverCheck:function(){this.isShowServerCheckBox=!this.isShowServerCheckBox},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},addDomainCmd:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e.shadowform,a=i.domain,n=i.domainPort;i.diplomas,i.keys,i.checkList;e.domainObj.domainName=a,e.domainObj.port=n,i.configArray.forEach(function(t){e.domainCmdData.push(t),console.log(e.domainCmdData)}),e.domainDisable=!0,e.shadowform.configArray=[{ip:"",ipPort:"",ipWeight:""}]}})},deleCmd:function(t){this.domainCmdData.splice(this.domainCmdData.indexOf(t),1),0==this.domainCmdData.length&&(this.domainDisable=!1)},submitDomainCmd:function(){var t,e=this,i=this,a=i.shadowObj.snodeId,n=i.domainObj.domainName,r=i.domainObj.port,o=i.shadowform.remark,s=i.shadowform.checkList;1==s.length?t=s[0]:2==s.length&&(t=s[0]+"|"+s[1]);var l=[];l=i.domainCmdData.map(function(t){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(t.ip)&&!/^\[|\]$/.test(t.ip)&&(t.ip="["+t.ip+"]"),"ip_weight"==i.checkedTactics?{server:t.ip+":"+t.ipPort+" weight="+t.ipWeight}:{server:t.ip+":"+t.ipPort}}),"polling"!==i.checkedTactics&&"ip_weight"!==i.checkedTactics&&l.push(E()({},i.checkedTactics,""));var c=y.b+"pe/shadow/stream",d={snodeId:a,streamName:n,streamPort:r,remark:o,servers:l,ipListenConfs:t};i.domainCmdLoading=!0,_.a.post(c,d).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.$emit("updateRenderTree"),i.handleShadowClose()):8==t.data.responseCode?i.$message.error(i.$t("lg.failed")+": "+t.data.data):i.$message.error(i.$t("lg.failed")),i.domainCmdLoading=!1}).catch(function(t){console.log(t),i.$message.error(e.$t("lg.failed")),i.domainCmdLoading=!1})}},components:{loading:R.a}}),nt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shadowpop-wrapper"},[i("el-dialog",{attrs:{width:"72%",title:t.shadowObj.snodeId+" ["+t.shadowObj.name+"]",visible:t.streamShow,"close-on-click-modal":!1,"before-close":t.handleShadowClose},on:{"update:visible":function(e){t.streamShow=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content",staticStyle:{"margin-right":"30px"}},[i("el-form",{ref:"shadowform",attrs:{model:t.shadowform,rules:t.shadowPopRules,"label-width":"120px"}},[i("div",{staticClass:"outBorder"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.externalserviceconf")))]),t._v(" "),i("el-form-item",{attrs:{label:"名称",prop:"domain"}},[i("el-input",{attrs:{disabled:t.domainDisable},model:{value:t.shadowform.domain,callback:function(e){t.$set(t.shadowform,"domain","string"==typeof e?e.trim():e)},expression:"shadowform.domain"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsport"),prop:"domainPort"}},[i("el-input",{attrs:{disabled:t.domainDisable},model:{value:t.shadowform.domainPort,callback:function(e){t.$set(t.shadowform,"domainPort","string"==typeof e?e.trim():e)},expression:"shadowform.domainPort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{disabled:t.domainDisable,placeholder:"备注信息"},model:{value:t.shadowform.remark,callback:function(e){t.$set(t.shadowform,"remark","string"==typeof e?e.trim():e)},expression:"shadowform.remark"}})],1),t._v(" "),"https"==t.shadowform.http?i("el-form-item",{attrs:{label:t.$t("lg.selectcer"),prop:"diplomas"}},[i("el-select",{attrs:{placeholder:t.$t("lg.selectcer"),disabled:t.domainDisable},model:{value:t.shadowform.diplomas,callback:function(e){t.$set(t.shadowform,"diplomas",e)},expression:"shadowform.diplomas"}},[t._l(t.diplomas,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1):t._e(),t._v(" "),i("el-form-item",[i("el-checkbox-group",{attrs:{min:1,disabled:t.domainDisable},model:{value:t.shadowform.checkList,callback:function(e){t.$set(t.shadowform,"checkList",e)},expression:"shadowform.checkList"}},[i("el-checkbox",{attrs:{label:"ipv4"}},[t._v("IPV4")]),t._v(" "),i("el-checkbox",{attrs:{label:"ipv6"}},[t._v("IPV6")])],1)],1)],1),t._v(" "),i("div",{staticClass:"outBorder"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.internalserviceconf")))]),t._v(" "),i("div",{staticStyle:{position:"relative"}},[t._l(t.shadowform.configArray,function(e,a){return i("div",{key:a,staticClass:"inBorder"},[i("span",{staticClass:"delIp",on:{click:function(e){t.delDomainBox(a)}}},[i("i",{staticClass:"el-icon-close"})]),t._v(" "),i("el-form-item",{attrs:{label:"IP","label-width":t.ipLabelWidth,prop:"configArray."+a+".ip",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-. *!$@?^()<>{}[\]=%&:\;/~+#`,])+$/,message:t.$t("lg.invalidformat"),trigger:"blur"}]}},[i("el-input",{model:{value:e.ip,callback:function(i){t.$set(e,"ip","string"==typeof i?i.trim():i)},expression:"item.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),"label-width":t.ipLabelWidth,prop:"configArray."+a+".ipPort",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:t.$t("lg.invalidport"),trigger:"change"}]}},[i("el-input",{model:{value:e.ipPort,callback:function(i){t.$set(e,"ipPort","string"==typeof i?i.trim():i)},expression:"item.ipPort"}})],1),t._v(" "),"ip_weight"==t.checkedTactics?i("el-form-item",{attrs:{label:t.$t("lg.weights"),"label-width":t.ipLabelWidth,prop:"configArray."+a+".ipWeight",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:t.$t("lg.requirepositive"),trigger:"change"}]}},[i("el-input",{model:{value:e.ipWeight,callback:function(i){t.$set(e,"ipWeight","string"==typeof i?i.trim():i)},expression:"item.ipWeight"}})],1):t._e()],1)}),t._v(" "),i("span",{staticClass:"addIp",attrs:{title:t.$t("lg.addmoreinternalbs")},on:{click:t.addDomainBox}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],2),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.balancestrategy")}},[i("el-radio-group",{attrs:{disabled:t.domainDisable},model:{value:t.checkedTactics,callback:function(e){t.checkedTactics=e},expression:"checkedTactics"}},t._l(t.ipTactics,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDomainCmd("shadowform")}}},[t._v("添加业务")]),t._v(" "),i("el-button",{on:{click:t.handleShadowClose}},[t._v("取消")])],1)],1)],1)]),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",{staticClass:"grid-content"},[t.domainCmdData.length>0?i("div",[i("h2",{staticClass:"domaincmd-title"},[t._v("["+t._s(t.shadowform.domain)+"  - "+t._s(t.shadowform.domainPort)+"  -  "+t._s(t.shadowform.remark)+"  -  "+t._s(t.shadowform.checkList[0])),t.shadowform.checkList[1]?i("span",[t._v(" | "+t._s(t.shadowform.checkList[1]))]):t._e(),t._v(" ]")]),t._v(" "),i("div",[i("table",[i("thead",[i("tr",[i("th",[t._v("IP")]),t._v(" "),i("th",[t._v("PORT")]),t._v(" "),t.isShowWeight?i("th",[t._v(t._s(t.$t("lg.weights")))]):t._e(),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.domainCmdData,function(e){return i("tr",[i("td",[t._v(t._s(e.ip))]),t._v(" "),i("td",[t._v(t._s(e.ipPort))]),t._v(" "),t.isShowWeight?i("td",[t._v(t._s(e.ipWeight))]):t._e(),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.deleCmd(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("p",{staticClass:"loadBaTypeTxt"},[t._v(t._s(t.$t("lg.curloadbalance"))+"："),i("i",{staticClass:"el-icon-success font-green"}),t._v(" "+t._s(t.loadBalancingTypeTxt))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitDomainCmd}},[t._v(t._s(t.$t("lg.confirmadd")))])],1)])]):i("div",[i("p",{staticClass:"text-center"},[t._v(t._s(t.$t("lg.nodata")))])])])])],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.domainCmdLoading,expression:"domainCmdLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1)],1)},staticRenderFns:[]};var rt=i("VU/8")(at,nt,!1,function(t){i("l352")},"data-v-3c324787",null).exports,ot=i("BUWD"),st=i("2hv+"),lt={components:{loading:R.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},isShow:{type:Boolean}},data:function(){return{upstreamlist:[],upstreamServerCheck:{},loadBalancingType:"",upstreamObj:{ntlmVal:""},upstreamlistmodalLoading:!1,isShowChangeBalanceBox:!1,isShowEditCmd:!1,isIpWeight:!1,checkedTactics:"",ipTactics:[{value:"polling",name:this.$t("lg.polling")},{value:"least_conn",name:this.$t("lg.leastcon")},{value:"ip_weight",name:this.$t("lg.weights")}],addStreamlistLoading:!1,addStreamlistmodalShow:!1,upstreamform:{ip:"",ipPort:80,ipWeight:""},editStreamlistLoading:!1,editCmdOldform:{},editCmdform:{},weightCmdform:{weightCmdArray:[]},sureWeightArray:[],upstreamformRules:{ip:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],ipPort:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],ipWeight:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editCmdformRules:{ip:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],port:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],ipWeight:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},upstreamCmdData:[],isShowServerCheckBox:!1,enableScCk:!1,editSvCkfrom:{scInterval:null,scFall:null,scRise:null,scTimeout:null,scType:"tcp",checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[]},scTimeIntervalUnit:[{value:"s",label:"秒"}],scIntervalUnitVal:"s",scTimeoutUnitVal:"s",scTypeUnit:[{value:"tcp",label:"tcp"},{value:"http",label:"http"},{value:"ssl_hello",label:"ssl_hello"}],ckHtpSendUnit:[{value:"GET",label:"GET"},{value:"HEAD",label:"HEAD"}],ckHtpExpAliveUnit:[{value:"http_2xx",label:"http_2xx"},{value:"http_3xx",label:"http_3xx"},{value:"http_4xx",label:"http_4xx"},{value:"http_5xx",label:"http_5xx"}],editSvCkfromRules:{scInterval:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],scFall:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],scRise:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],scTimeout:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^[1-9]\d*$/,message:"必须为大于0的整数数值",trigger:"change"}],checkHttpSendTxt:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^([\w\-.\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:"非规范格式",trigger:"blur"}],checkHttpExpectAlive:[{required:!0,message:"不能为空",trigger:"blur"}]},isShowHgSettingBox:!1,editGradeSetform:{ntlmValule:""},editGradeSetformRules:{ntlmValule:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]}}},watch:{isShowChangeBalanceBox:function(){this.isShowChangeBalanceBox&&(this.checkedTactics=this.loadBalancingType)},isShow:function(){if(this.isShow){if(this.enableScCk=this.upstreamServerCheck.enabled||!1,this.upstreamServerCheck.param){var t=this.upstreamServerCheck.param;if(this.editSvCkfrom.scInterval=t.interval/1e3,this.editSvCkfrom.scFall=t.fall,this.editSvCkfrom.scRise=t.rise,this.editSvCkfrom.scTimeout=t.timeout/1e3,this.editSvCkfrom.scType=t.type,"http"==t.type){var e=t.check_http_send,i=/^"(\S+)\s(\S+)/g.exec(e);this.editSvCkfrom.checkHttpSendType=i[1],this.editSvCkfrom.checkHttpSendTxt=i[2],this.editSvCkfrom.checkHttpExpectAlive=t.check_http_expect_alive.split(" ")}}}else this.editSvCkfrom.scInterval=null,this.editSvCkfrom.scFall=null,this.editSvCkfrom.scRise=null,this.editSvCkfrom.scTimeout=null,this.editSvCkfrom.scType="tcp",this.editSvCkfrom.checkHttpSendType="GET",this.editSvCkfrom.checkHttpSendTxt="/",this.editSvCkfrom.checkHttpExpectAlive=[]},isShowHgSettingBox:function(){this.isShowHgSettingBox&&(this.editGradeSetform.ntlmValule=this.upstreamObj.ntlmVal)}},computed:{loadBalancingTypeTxt:function(){switch(this.loadBalancingType){case"polling":return this.$t("lg.polling");case"least_conn":return this.$t("lg.leastcon");case"ip_weight":return this.$t("lg.weights");case"ip_hash":return"ip_hash";default:return"xff_hash"}}},methods:{getDmUpstreamlistData:function(){var t=this;return new m.a(function(e,i){var a=t;if(a.isAuto)var n=y.b+"pe/shadow/stream/server?autoconfig=true";else if(a.isEditConfig)n=y.b+"pe/shadow/stream/server?savedConfig=true";else n=y.b+"pe/shadow/stream/server";_.a.get(n,{params:{snodeId:a.shadowObj.snodeId,streamName:a.domainObj.domainName}}).then(function(t){if(0==t.data.responseCode){var i=t.data.data,n=[],r="",o={};if(i.forEach(function(t,e){t.hasOwnProperty("ntlm")&&(r=t.ntlm,i.splice(e,1))}),i.forEach(function(t,e){t.hasOwnProperty("serverCheck")&&(o=t.serverCheck,i.splice(e,1))}),a.upstreamObj.ntlmVal=r,a.upstreamServerCheck=o,"server"==f()(i[i.length-1])[0])if(/\weight/.test(i[0].server)){a.loadBalancingType="ip_weight";var s=/(.*):(\d+)\s(?:weight=(.*))/;i.forEach(function(t,e){var i=s.exec(t.server);n.push({ip:i[1],port:i[2],ipWeight:i[3]})})}else a.loadBalancingType="polling",i.forEach(function(t,e){var i,a,r;t.server.indexOf("]:")>-1?(i=(r=t.server.split("]:"))[0]+"]",a=r[1]):(i=(r=t.server.split(":"))[0],a=r[1]),n.push({ip:i,port:a})});else"least_conn"!=f()(i[i.length-1])[0]&&"ip_hash"!=f()(i[i.length-1])[0]&&"xxf_hash"!=f()(i[i.length-1])[0]||(a.loadBalancingType=f()(i[i.length-1])[0],i.splice(i.length-1,1),i.forEach(function(t,e){var i,a,r;t.server.indexOf("]:")>-1?(i=(r=t.server.split("]:"))[0]+"]",a=r[1]):(i=(r=t.server.split(":"))[0],a=r[1]),n.push({ip:i,port:a})}));a.upstreamlist=n,e(!0)}else a.$message.error(a.$t("lg.failed"))}).catch(function(t){console.log(t)})})},upstreamlistmodalClose:function(){this.$emit("setbyupstreamlistmodal",!1),this.isShowChangeBalanceBox=!1,this.isShowServerCheckBox=!1,this.isShowHgSettingBox=!1},dmUpstreamModal:function(){this.addStreamlistmodalShow=!0},addStreamlistmodalClose:function(){this.upstreamCmdData=[],this.$refs.upstreamform.resetFields(),this.addStreamlistmodalShow=!1},addUpstreamCmd:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.upstreamCmdData.push(e.upstreamform),e.upstreamform={ip:"",ipPort:"",ipWeight:""})})},deleAddCmd:function(t){this.upstreamCmdData.splice(this.upstreamCmdData.indexOf(t),1)},submitupstreamCmd:function(){var t=this;t.addStreamlistLoading=!0;var e=t.shadowObj.snodeId,i=t.domainObj.domainName,a=[];if(a=t.upstreamCmdData.map(function(e){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(e.ip)&&!/^\[|\]$/.test(e.ip)&&(e.ip="["+e.ip+"]"),"ip_weight"==t.loadBalancingType?{server:e.ip+":"+e.ipPort+" weight="+e.ipWeight}:{server:e.ip+":"+e.ipPort}}),"polling"!==t.loadBalancingType&&"ip_weight"!==t.loadBalancingType&&a.push(E()({},t.loadBalancingType,"")),t.isAuto)var n=y.b+"pe/shadow/stream/server?autoconfig=true";else if(t.isEditConfig)n=y.b+"pe/shadow/stream/server?savedConfig=true";else n=y.b+"pe/shadow/stream/server";var r={snodeId:e,streamName:i,servers:a};_.a.post(n,r).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getDmUpstreamlistData(),t.addStreamlistmodalClose()):t.$message.error(t.$t("lg.failed")),t.addStreamlistLoading=!1}).catch(function(t){console.log(t)})},editCmd:function(t){this.isShowEditCmd=!0,this.editCmdOldform=t,this.editCmdform=F()({},t)},isEditCmdClose:function(){this.isShowEditCmd=!1},editCmdEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){e.editStreamlistLoading=!0;var i=e.shadowObj.snodeId,a=e.domainObj.domainName,n=e.editCmdOldform,r=e.editCmdform;if(e.isAuto)var o=y.b+"pe/shadow/stream/server?autoconfig=true";else if(e.isEditConfig)o=y.b+"pe/shadow/stream/server?savedConfig=true";else o=y.b+"pe/shadow/stream/server";var s=[],l="";if("ip_weight"==e.loadBalancingType){var c=r.ip+":"+r.port+" weight="+r.ipWeight;s.push({server:c}),l=n.ip+":"+n.port+" weight="+n.ipWeight}else{c=r.ip+":"+r.port;s.push({server:c}),l=n.ip+":"+n.port}var d={snodeId:i,streamName:a,srcKey:"server",servers:s,srcParam:l};_.a.patch(o,d).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getDmUpstreamlistData(),e.isEditCmdClose()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.editStreamlistLoading=!1}).catch(function(t){console.log(t)})}})},delCmd:function(t){var e=this;if(1!=e.upstreamlist.length){e.upstreamlistmodalLoading=!0;var i=e.shadowObj.snodeId,a=e.domainObj.domainName,n=e.domainObj.port;if(t.ipWeight)var r=t.ip+":"+t.port+" weight="+t.ipWeight;else r=t.ip+":"+t.port;var o={},s=[];if(o.server=r,s.push(o),e.isAuto)var l=y.b+"pe/shadow/stream/server?autoconfig=true";else if(e.isEditConfig)l=y.b+"pe/shadow/stream/server?savedConfig=true";else l=y.b+"pe/shadow/stream/server";var c={data:{snodeId:i,streamName:a,domainPort:n,servers:s}};_.a.delete(l,c).then(function(i){0==i.data.responseCode?(e.upstreamlist.splice(e.upstreamlist.indexOf(t),1),e.$message({type:"success",message:e.$t("lg.success")})):e.$message.error(e.$t("lg.failed")),e.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}else e.$message.error(e.$t("lg.leastinbs"))},changeBalance:function(){this.isShowChangeBalanceBox=!this.isShowChangeBalanceBox},isweightCmdformClose:function(){this.isIpWeight=!1,this.sureWeightArray=[],this.checkedTactics=this.loadBalancingType},changeEnsure:function(t){var e=this;this.$refs[t].validate(function(t){t&&(e.sureWeightArray=e.weightCmdform.weightCmdArray.map(function(t){return{server:t.ip+":"+t.port+" weight="+t.ipWeight}}),e.changeBalanceEnsure(),e.isIpWeight=!1)})},changeBalanceEnsure:function(){var t=this,e=t.checkedTactics;if(e!=t.loadBalancingType){t.upstreamlistmodalLoading=!0;var i=t.shadowObj.snodeId,a=t.domainObj.domainName,n=[];if(t.upstreamlist.forEach(function(t){var e=t.ip+":"+t.port;n.push({server:e})}),"ip_weight"==e){if(0==t.sureWeightArray.length)return t.upstreamlistmodalLoading=!1,t.weightCmdform.weightCmdArray=JSON.parse(o()(t.upstreamlist)),void(t.isIpWeight=!0);n=t.sureWeightArray}else"polling"!==e&&n.push(E()({},e,""));if(this.isAuto)var r=y.b+"pe/shadow/stream/server?autoconfig=true";else if(this.isEditConfig)r=y.b+"pe/shadow/stream/server?savedConfig=true";else r=y.b+"pe/shadow/stream/server";var s={snodeId:i,streamName:a,servers:n,srcKey:"",srcParam:""};_.a.patch(r,s).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.sureWeightArray=[],t.getDmUpstreamlistData()):t.$message.error(t.$t("lg.failed")),t.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}else t.$message.error(t.$t("lg.selectdstategy"))},changeSverCheck:function(){this.isShowServerCheckBox=!this.isShowServerCheckBox},editSvCkEnsure:function(t){var e=this;this.$refs.editSvCkfrom.validate(function(i){if(i){var a=e,n=a.shadowObj.snodeId,r=a.domainObj.domainName,o=a.domainObj.port;if(a.upstreamlistmodalLoading=!0,a.isAuto)var s=y.b+"pe/shadow/domain/server?autoconfig=true";else if(a.isEditConfig)s=y.b+"pe/shadow/domain/server?savedConfig=true";else s=y.b+"pe/shadow/domain/server";var l={};l={enabled:t,param:{interval:1e3*a.editSvCkfrom.scInterval,fall:a.editSvCkfrom.scFall,rise:a.editSvCkfrom.scRise,timeout:1e3*a.editSvCkfrom.scTimeout,type:a.editSvCkfrom.scType}},"http"==a.editSvCkfrom.scType&&(l.param.check_http_send='"'+a.editSvCkfrom.checkHttpSendType+" "+(a.editSvCkfrom.checkHttpSendTxt||"/")+' HTTP/1.0\\r\\n\\r\\n"',l.param.check_http_expect_alive=a.editSvCkfrom.checkHttpExpectAlive.join(" "));var c={snodeId:n,domainName:r,domainPort:o,serverCheck:l};_.a.patch(s,c).then(function(e){0==e.data.responseCode?(a.$message({type:"success",message:"操作成功"}),a.enableScCk=t,a.getDmUpstreamlistData(),a.isShowServerCheckBox=!1):a.$message.error("操作失败"),a.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}})},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},editGSEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;i.upstreamlistmodalLoading=!0;var a=i.shadowObj.snodeId,n=i.domainObj.domainName,r=i.domainObj.port;if(e.isAuto)var o=y.b+"pe/shadow/domain/server?autoconfig=true";else if(e.isEditConfig)o=y.b+"pe/shadow/domain/server?savedConfig=true";else o=y.b+"pe/shadow/domain/server";var s,l=[],c=!!(s=i.editGradeSetform.ntlmValule);s&&l.push({ntlm:s});var d={snodeId:a,domainName:n,domainPort:r,servers:l,enableNTLM:c};_.a.patch(o,d).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:"操作成功"}),i.getDmUpstreamlistData()):i.$message.error("操作失败"),i.upstreamlistmodalLoading=!1}).catch(function(t){console.log(t)})}})}}},ct={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.upstreamlistmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-button",{staticClass:"addIpBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dmUpstreamModal()}}},[t._v(t._s(t.$t("lg.addserver")))]),t._v(" "),i("div",[i("table",{staticClass:"ipTable"},[i("thead",[i("tr",[i("th",[t._v("IP")]),t._v(" "),i("th",[t._v("PORT")]),t._v(" "),"ip_weight"==t.loadBalancingType?i("th",[t._v(t._s(t.$t("lg.weights")))]):t._e(),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.upstreamlist,function(e){return i("tr",[i("td",[t._v(t._s(e.ip))]),t._v(" "),i("td",[t._v(t._s(e.port))]),t._v(" "),"ip_weight"==t.loadBalancingType?i("td",[t._v(t._s(e.ipWeight))]):t._e(),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editCmd(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delCmd(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))]),t._v(" "),i("p",{staticClass:"myBalance"},[i("span",[t._v("当前负载均衡策略："),i("i",{staticClass:"el-icon-success font-green"}),t._v(" "+t._s(t.loadBalancingTypeTxt))]),i("span",{staticClass:"changeBalance font-blue",on:{click:function(e){t.changeBalance()}}},[i("i",{class:t.isShowChangeBalanceBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.editstrategy")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowChangeBalanceBox,expression:"isShowChangeBalanceBox"}],staticClass:"changeBalanceBox"},[i("el-radio-group",{model:{value:t.checkedTactics,callback:function(e){t.checkedTactics=e},expression:"checkedTactics"}},t._l(t.ipTactics,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])})),t._v(" "),i("el-button",{staticStyle:{marginLeft:"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(e){t.changeBalanceEnsure()}}},[t._v("确认更改")])],1)]),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.upstreamlistmodalLoading,expression:"upstreamlistmodalLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.addStreamlistmodalShow,"close-on-click-modal":!1,"before-close":t.addStreamlistmodalClose},on:{"update:visible":function(e){t.addStreamlistmodalShow=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{ref:"upstreamform",staticStyle:{"margin-right":"30px"},attrs:{model:t.upstreamform,rules:t.upstreamformRules,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"IP",prop:"ip"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.upstreamform.ip,callback:function(e){t.$set(t.upstreamform,"ip","string"==typeof e?e.trim():e)},expression:"upstreamform.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),prop:"ipPort"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.upstreamform.ipPort,callback:function(e){t.$set(t.upstreamform,"ipPort","string"==typeof e?e.trim():e)},expression:"upstreamform.ipPort"}})],1),t._v(" "),"ip_weight"==t.loadBalancingType?i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"ipWeight"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.upstreamform.ipWeight,callback:function(e){t.$set(t.upstreamform,"ipWeight","string"==typeof e?e.trim():e)},expression:"upstreamform.ipWeight"}})],1):t._e(),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addUpstreamCmd("upstreamform")}}},[t._v(t._s(t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:t.addStreamlistmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",[0==t.upstreamCmdData.length?i("p",{staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.upstreamCmdData.length>0?i("div",[i("table",[i("thead",[i("tr",[i("th",[t._v("IP")]),t._v(" "),i("th",[t._v("PORT")]),t._v(" "),"ip_weight"==t.loadBalancingType?i("th",[t._v(t._s(t.$t("lg.weights")))]):t._e(),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.upstreamCmdData,function(e){return i("tr",[i("td",[t._v(t._s(e.ip))]),t._v(" "),i("td",[t._v(t._s(e.ipPort))]),t._v(" "),"ip_weight"==t.loadBalancingType?i("td",[t._v(t._s(e.ipWeight))]):t._e(),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.deleAddCmd(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitupstreamCmd}},[t._v(t._s(t.$t("lg.confirm")))])],1)]):t._e()])])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addStreamlistLoading,expression:"addStreamlistLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName,visible:t.isShowEditCmd,"close-on-click-modal":!1,"before-close":t.isEditCmdClose},on:{"update:visible":function(e){t.isShowEditCmd=e}}},[i("el-form",{ref:"editCmdform",attrs:{model:t.editCmdform,rules:t.editCmdformRules,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"IP",prop:"ip"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCmdform.ip,callback:function(e){t.$set(t.editCmdform,"ip","string"==typeof e?e.trim():e)},expression:"editCmdform.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),prop:"port"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCmdform.port,callback:function(e){t.$set(t.editCmdform,"port","string"==typeof e?e.trim():e)},expression:"editCmdform.port"}})],1),t._v(" "),"ip_weight"==t.loadBalancingType?i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"ipWeight"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editCmdform.ipWeight,callback:function(e){t.$set(t.editCmdform,"ipWeight","string"==typeof e?e.trim():e)},expression:"editCmdform.ipWeight"}})],1):t._e(),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editCmdEnsure("editCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.isEditCmdClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editStreamlistLoading,expression:"editStreamlistLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName,visible:t.isIpWeight,"close-on-click-modal":!1,"before-close":t.isweightCmdformClose},on:{"update:visible":function(e){t.isIpWeight=e}}},[i("el-row",[i("el-form",{ref:"weightCmdform",attrs:{model:t.weightCmdform,"label-width":"60px"}},t._l(t.weightCmdform.weightCmdArray,function(e,a){return i("div",{key:a,staticClass:"grid-content weightIpBox"},[i("el-form-item",{attrs:{label:"IP",prop:"weightCmdArray."+a+".ip",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-. *!$@?^()<>{}[\]=%&:\;/~+#`,])+$/,message:t.$t("lg.invalidformat"),trigger:"blur"}]}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ip,callback:function(i){t.$set(e,"ip","string"==typeof i?i.trim():i)},expression:"item.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.port"),prop:"weightCmdArray."+a+".port",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:t.$t("lg.invalidport"),trigger:"change"}]}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.port,callback:function(i){t.$set(e,"port","string"==typeof i?i.trim():i)},expression:"item.port"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"weightCmdArray."+a+".ipWeight",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:t.$t("lg.requirepositive"),trigger:"change"}]}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:e.ipWeight,callback:function(i){t.$set(e,"ipWeight","string"==typeof i?i.trim():i)},expression:"item.ipWeight"}})],1)],1)})),t._v(" "),i("div",{staticClass:"dialog-footer text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.changeEnsure("weightCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.isweightCmdformClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)],1)},staticRenderFns:[]};var dt=i("VU/8")(lt,ct,!1,function(t){i("EeaZ")},"data-v-448f05fe",null).exports,ut=i("k7kN"),ft=i("ydhF"),ht=i("ZI++"),mt=i("1Niu"),pt={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},data:{type:Object},dmEditmodalShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},diplomas:{type:Array},keys:{type:Array}},data:function(){return{editmodalLoading:!1,originEditDomainObj:{},editDomainObj:{},checkList:[],editmodalformRules:{domainName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-."\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}],domainPort:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}],serverPort:[{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:this.$t("lg.invalidport"),trigger:"change"}]},isShowHgSettingBox:!1}},watch:{data:function(){this.originEditDomainObj=JSON.parse(o()(this.data)),this.editDomainObj=this.data,this.checkList=this.editDomainObj.ipListenConfs.split("|")}},methods:{editmodalClose:function(){this.$refs.editDomainObj.resetFields(),this.$emit("setbydmEditmodal",!1),this.isShowHgSettingBox=!1},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},updateDomainName:function(t){var e=this;e.$refs[t].validate(function(t){if(t){if(e.isAuto)var i=y.b+"pe/shadow/stream?autoconfig=true";else if(e.isEditConfig)i=y.b+"pe/shadow/stream?savedConfig=true";else i=y.b+"pe/shadow/stream";var a,n=e.shadowObj.snodeId,r=e.originEditDomainObj.streamPort,o=e.domainObj.domainName;e.editmodalLoading=!0;var s=e.checkList;1==s.length?a=s[0]:2==s.length&&(a=s[0]+"|"+s[1]);var l={snodeId:n,streamName:e.editDomainObj.streamName,streamPort:e.editDomainObj.streamPort,srcStreamPort:r,srcStreamName:o,remark:e.editDomainObj.remark,ipListenConfs:a};console.log("------"),console.log(l),_.a.patch(i,l).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.$emit("updateRenderTree"),e.editmodalClose()):8==t.data.responseCode?e.$message.error(e.$t("lg.failed")+":"+t.data.data):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.editmodalLoading=!1}).catch(function(t){console.log(t)})}})}},components:{loading:R.a}},gt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName,visible:t.dmEditmodalShow,"close-on-click-modal":!1,"before-close":t.editmodalClose},on:{"update:visible":function(e){t.dmEditmodalShow=e}}},[i("div",{staticClass:"domainBox"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.editbs")))]),t._v(" "),i("el-form",{ref:"editDomainObj",attrs:{model:t.editDomainObj,"label-width":"80px",rules:t.editmodalformRules}},[i("el-form-item",{attrs:{label:"名称",prop:"streamName"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editDomainObj.streamName,callback:function(e){t.$set(t.editDomainObj,"streamName","string"==typeof e?e.trim():e)},expression:"editDomainObj.streamName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.bsport"),prop:"streamPort"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editDomainObj.streamPort,callback:function(e){t.$set(t.editDomainObj,"streamPort","string"==typeof e?e.trim():e)},expression:"editDomainObj.streamPort"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editDomainObj.remark,callback:function(e){t.$set(t.editDomainObj,"remark","string"==typeof e?e.trim():e)},expression:"editDomainObj.remark"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"IP版本"}},[i("el-checkbox-group",{attrs:{min:1},model:{value:t.checkList,callback:function(e){t.checkList=e},expression:"checkList"}},[i("el-checkbox",{attrs:{label:"ipv4"}},[t._v("IPV4")]),t._v(" "),i("el-checkbox",{attrs:{label:"ipv6"}},[t._v("IPV6")])],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateDomainName("editDomainObj")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editmodalLoading,expression:"editmodalLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]};var vt=i("VU/8")(pt,gt,!1,function(t){i("fVYR")},"data-v-84602824",null).exports,bt={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object}},data:function(){return{dmTransparentform:{ipTransparent:!1}}},methods:{getDmtransparentData:function(){var t=this;return new m.a(function(e,i){var a=t,n=a.shadowObj.snodeId,r=a.domainObj.domainName,o=a.domainObj.port;a.isAuto?a.url=y.b+"pe/shadow/domain/iptransparent?snodeId="+n+"&domainName="+r+"&domainPort="+o+"&autoconfig=true":a.isEditConfig?a.url=y.b+"pe/shadow/domain/iptransparent?snodeId="+n+"&domainName="+r+"&domainPort="+o+"&savedConfig=true":a.url=y.b+"pe/shadow/domain/iptransparent?snodeId="+n+"&domainName="+r+"&domainPort="+o,_.a.get(a.url).then(function(t){if(0==t.data.responseCode){var i=t.data.data;a.dmTransparentform.ipTransparent="on"==i.ipTransparent,e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},limReqmodalClose:function(){this.$emit("setbydmtransparentmodal",!1)},submitTransparent:function(){var t=this,e=this,i=e.shadowObj.snodeId,a=e.domainObj.domainName,n=e.domainObj.port;e.isAuto?e.url=y.b+"pe/shadow/domain/iptransparent?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&autoconfig=true":e.isEditConfig?e.url=y.b+"pe/shadow/domain/iptransparent?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&savedConfig=true":e.url=y.b+"pe/shadow/domain/iptransparent?snodeId="+i+"&domainName="+a+"&domainPort="+n,_.a.patch(e.url,{ipTransparent:1==e.dmTransparentform.ipTransparent?"on":"off"}).then(function(i){0==i.data.responseCode?t.$message({type:"success",message:e.$t("lg.success")}):t.$message.error(e.$t("lg.failed")+"："+i.data.data.message)})},limReqSwitchEvent:function(){this.dmLimReqform.limReqReject=!1}},components:{loading:R.a}},_t={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.limReqmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"dmTransparentform",attrs:{model:t.dmTransparentform,"label-width":"60px"}},[i("div",{staticClass:"orderBoxJamb",staticStyle:{"margin-bottom":"20px"}},[i("el-form-item",{attrs:{label:"开启",prop:"ipTransparent"}},[i("el-switch",{model:{value:t.dmTransparentform.ipTransparent,callback:function(e){t.$set(t.dmTransparentform,"ipTransparent",e)},expression:"dmTransparentform.ipTransparent"}})],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitTransparent}},[t._v("确定")]),t._v(" "),i("el-button",{on:{click:t.limReqmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)],1)},staticRenderFns:[]};var wt=i("VU/8")(bt,_t,!1,function(t){i("4ptU")},"data-v-39ce3324",null).exports,yt={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object}},data:function(){return{dmTransparentform:{ipTransparent:!1}}},methods:{getDmkeepaliveData:function(){var t=this;return new m.a(function(e,i){var a=t,n=a.shadowObj.snodeId,r=a.domainObj.domainName,o=a.domainObj.port,s=void 0;s=a.isAuto?y.b+"pe/shadow/domain/keepalived?snodeId="+n+"&domainName="+r+"&domainPort="+o+"&autoconfig=true":a.isEditConfig?y.b+"pe/shadow/domain/keepalived?snodeId="+n+"&domainName="+r+"&domainPort="+o+"&savedConfig=true":y.b+"pe/shadow/domain/keepalived?snodeId="+n+"&domainName="+r+"&domainPort="+o,_.a.get(s).then(function(t){if(0==t.data.responseCode){var i=t.data.data;a.dmTransparentform.ipTransparent="on"==i.keepalived,e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},limReqmodalClose:function(){this.$emit("setbydmkeepalivemodal",!1)},submitTransparent:function(){var t=this,e=this,i=e.shadowObj.snodeId,a=e.domainObj.domainName,n=e.domainObj.port;e.isAuto?e.url=y.b+"pe/shadow/domain/keepalived?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&autoconfig=true":e.isEditConfig?e.url=y.b+"pe/shadow/domain/keepalived?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&savedConfig=true":e.url=y.b+"pe/shadow/domain/keepalived?snodeId="+i+"&domainName="+a+"&domainPort="+n,_.a.patch(e.url,{keepalived:1==e.dmTransparentform.ipTransparent?"on":"off"}).then(function(i){0==i.data.responseCode?t.$message({type:"success",message:e.$t("lg.success")}):t.$message.error(e.$t("lg.failed")+"："+i.data.data.message)})},limReqSwitchEvent:function(){this.dmLimReqform.limReqReject=!1}},components:{loading:R.a}},xt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.limReqmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"dmTransparentform",attrs:{model:t.dmTransparentform,"label-width":"60px"}},[i("div",{staticClass:"orderBoxJamb",staticStyle:{"margin-bottom":"20px"}},[i("el-form-item",{attrs:{label:"开启",prop:"ipTransparent"}},[i("el-switch",{model:{value:t.dmTransparentform.ipTransparent,callback:function(e){t.$set(t.dmTransparentform,"ipTransparent",e)},expression:"dmTransparentform.ipTransparent"}})],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitTransparent}},[t._v("确定")]),t._v(" "),i("el-button",{on:{click:t.limReqmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)],1)},staticRenderFns:[]};var kt=i("VU/8")(yt,xt,!1,function(t){i("1YKf")},"data-v-0c9404da",null).exports,$t=i("qHWo"),Ct=i("TsEH"),St=i("09Ua"),Dt=i("oXcE"),jt=i("9bzP"),Nt={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},data:{type:Object},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object},attypedata:{type:Array}},data:function(){return{wafmodalform:{wafStatus:!0,checkedRulesets:[]},checkedRulesets:[],isCheckRulesetShow:!1,rulesetform:{ruleset:[]},lcwafmodalLoading:!1}},watch:{isShow:function(){this.isShow&&("on"==this.data.waf?this.wafmodalform.wafStatus=!0:this.wafmodalform.wafStatus=!1,this.data.wafRuleset.length>0?(this.wafmodalform.checkedRulesets=this.data.wafRuleset,this.rulesetform.ruleset=this.data.wafRuleset):this.wafmodalform.checkedRulesets=[])}},methods:{getAttactypeData:function(){var t=this;return new m.a(function(e,i){var a=y.b+"waf/attacktype";_.a.get(a).then(function(i){if(0==i.data.responseCode){var a=i.data.data;t.attactypeData=a,e(a)}else t.$message.error(t.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})})},lcwafstatusmodalClose:function(){this.wafmodalform.checkedRulesets=[],this.$emit("setbylcwafmodal",!1)},showCheckRuleset:function(){this.$store.commit(w.a),this.isCheckRulesetShow=!0},saveLcwaf:function(){var t=this,e=this;if(this.isAuto)var i=y.b+"pe/shadow/domain/location/waf?autoconfig=true";else if(this.isEditConfig)i=y.b+"pe/shadow/domain/location/waf?savedConfig=true";else i=y.b+"pe/shadow/domain/location/waf";this.lcwafmodalLoading=!0;var a=1==this.wafmodalform.wafStatus?"on":"off",n=this.wafmodalform.checkedRulesets;_.a.patch(i,{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type,waf:a,wafRuleset:n}).then(function(i){0==i.data.responseCode?(t.$emit("updateRenderTree"),t.lcwafstatusmodalClose(),t.$message({type:"success",message:e.$t("lg.success")})):t.$message.error(e.$t("lg.failed")+": "+i.data.data.message),t.lcwafmodalLoading=!1}).catch(function(t){console.log(t)})}},components:{loading:R.a}},Ot={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.lcwafstatusmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"wafmodalform",attrs:{"label-width":"90px"}},[i("el-form-item",{attrs:{label:t.$t("lg.wafstatus")+":"}},[i("el-switch",{model:{value:t.wafmodalform.wafStatus,callback:function(e){t.$set(t.wafmodalform,"wafStatus",e)},expression:"wafmodalform.wafStatus"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"攻击类型:"}},[i("el-checkbox-group",{model:{value:t.wafmodalform.checkedRulesets,callback:function(e){t.$set(t.wafmodalform,"checkedRulesets",e)},expression:"wafmodalform.checkedRulesets"}},t._l(t.attypedata,function(t){return i("el-checkbox",{attrs:{label:t.attackType}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.saveLcwaf}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.lcwafstatusmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.lcwafmodalLoading,expression:"lcwafmodalLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1)],1)},staticRenderFns:[]};var Tt=i("VU/8")(Nt,Ot,!1,function(t){i("J/OW")},"data-v-007b4aad",null).exports,It=i("IEBb"),Lt=i("kBWj"),Et=i("xrTZ").Base64,Rt={components:{loading:R.a,shadowpop:B,sdWarningMode:P.a,sdSeniorInstruct:q.a,sdGlbInstruct:U.a,sdCustomUpstream:V.a,domainpop:ot.a,dmUpstreamlist:st.a,dmRedict:ut.a,dmLimitReq:ft.a,dmGlbInstruct:ht.a,dmEdit:mt.a,lcProtectInstruct:$t.a,lcSpecialProtectInstruct:Ct.a,lcSkipInstruct:St.a,lcSeniorInstruct:Dt.a,lcCustomInstruct:jt.a,lcWaf:Lt.a,lcEdit:It.a},props:{isEditShow:{type:Boolean},editFile:{type:String}},data:function(){return{isEditConfig:!0,editConfigLoading:!1,isNoData:!1,jsonData:{name:"",shadowtitle:!0,children:[]},shadowObj:{snodeId:"",name:""},domainObj:{domainName:"",port:80},locationObj:{type:"",name:"",nameTxt:""},instructObj:{name:""},keys:[{name:"server.key"}],diplomas:[{name:"server.key"}],crts:[],pems:[],shadownodes:[],lcconfcmdObj:{},shadowDialogVisible:!1,sdWarningModemodalShow:!1,sdSeniorInstructmodalShow:!1,sdGlbInstructmodalShow:!1,sdCustomUpstreammodalShow:!1,domainDialogVisible:!1,upstreamlistmodalShow:!1,redirectmodalShow:!1,dmLimReqmodalShow:!1,dmGlbInstructmodalShow:!1,dmEditmodalShow:!1,lcprotectInstructmodalShow:!1,lcSpecialProtectInstructmodalShow:!1,lcSkipInstructmodalShow:!1,lcSeniorInstructmodalShow:!1,lcCustomInstructmodalShow:!1,lcwafmodalShow:!1,dmWafData:{},lcWebsocketData:{},lcDefenseCookieData:{},lcwafData:{},lcEditmodalShow:!1,redirect302Url:"",dmEditObj:{},onlyDomain:!1,isDenyUrl:!1}},watch:{isEditShow:function(){this.isEditShow&&this.dataRenderTree()}},created:function(){var t=this;window.addEventListener("resize",function(){if(t.isEditShow){t.configtree(t.jsonData);var e=document.querySelectorAll(".ed-contextmenu");g()(e).slice(0).forEach(function(t){t.style.display="none"})}})},mounted:function(){var t=this;this.isEditShow&&this.dataRenderTree(),this.$on("updateRenderTree",function(){console.log(112),t.dataRenderTree()})},methods:{isEditClose:function(){this.jsonData={name:"",shadowtitle:!0,children:[]},this.configtree(this.jsonData),this.$emit("editDocShowclose",!1)},dataRenderTree:function(){var t=this;t.editConfigLoading=!0,t.isNoData=!1;var e=t.editFile,i=y.b+"topology?savedConfig=true&fileName="+e;_.a.get(i).then(function(i){if(0==i.data.responseCode){var a=o()(i.data);a=(a=(a=(a=(a=(a=(a=a.replace(/\bhostName\b/g,"name")).replace(/\bdomains\b/g,"children")).replace(/\blocation\b/g,"children")).replace(/\burl\b/g,"children")).replace(/\blocationName\b/g,"name")).replace(/\bdomainName\b/g,"name")).replace(/\burlName\b/g,"name");var n=JSON.parse(a);t.jsonData.name=e,t.shadowObj.snodeId=e,t.shadowObj.name=e,t.jsonData.children=n.data[0].children,t.$nextTick(function(){t.configtree(t.jsonData)})}else t.isNoData=!0,t.$message.error(t.$t("lg.failed")+": ("+t.$t("lg.checkcurfile")+")"+i.data.data.message);t.editConfigLoading=!1}).catch(function(t){console.log(t)})},configtree:function(t){var e=this;if(!t)return!1;if(e.$refs.editshadowtree){var i=e.$refs.editshadowtree.clientWidth,a={top:60,right:120,bottom:60,left:135},n=i/6,r=v.g().nodeSize([30,n+20]),o=v.e("#editshadowtree").select("svg").attr("viewBox",[-a.left,-a.top,i,10]);o.selectAll("*").remove();var s=0,l=void 0,c=void 0,d=v.c(t,function(t){return t.children}),u=v.d().x(function(t){return t.y}).y(function(t){return t.x});if(d.x0=10,d.y0=n/3,d.children){d.children&&d.children.forEach(function(t,e){t.children&&t.children.forEach(p)});var h=o.append("g").attr("fill","none").attr("stroke","#ccc").attr("stroke-opacity",1).attr("stroke-width",1.5),m=o.append("g").attr("cursor","pointer").attr("pointer-events","all");!function t(n){var p=v.b&&v.b.altKey?2500:750,g=d.descendants().reverse(),b=d.links();r(d);var _=d,w=d;d.eachBefore(function(t){t.x<_.x&&(_=t),t.x>w.x&&(w=t)});var y=w.x-_.x+a.top+a.bottom,x=o.transition().duration(p).attr("viewBox",[-a.left,_.x-a.top,i,y]).tween("resize",window.ResizeObserver?null:function(){return function(){return o.dispatch("toggle")}}),k=m.selectAll("g.node").data(g,function(t){return t.id||(t.id=++s)}),$=k.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+n.y0+","+n.x0+")"}).attr("fill-opacity",0).attr("stroke-opacity",0).on("dblclick",function(t,i){c&&clearTimeout(c);var a=t.data;if(a.hasOwnProperty("snodeId")){var n=a.snodeId,r=a.name;e.shadowObj.snodeId=n,e.shadowObj.name=r,e.shadowDialogVisible=!0}else if(a.hasOwnProperty("domainPort")){e.domainDialogVisible=!0,t.parent.data;var o=Et.decode(a.name),s=a.domainPort;e.domainObj.domainName=o,e.domainObj.port=s}else if(a.hasOwnProperty("locationType")){if("ZGVueV91cmw="==a.name)return!1;var l=t.parent.data;if(t.parent.parent.data,"suffixMatch"==a.locationType)if("KC4qXC8pKyQ="==a.name)e.locationObj.nameTxt="/";else{var d=Et.decode(a.name),u=/\((.*)\)/;e.locationObj.nameTxt=u.test(d)?d.match(u)[1]:d}else e.locationObj.nameTxt=Et.decode(a.name);e.locationObj.name=Et.decode(a.name),e.locationObj.type=a.locationType,e.domainObj.domainName=Et.decode(l.name),e.domainObj.port=l.domainPort}}).on("contextmenu",function(t,i){v.b.preventDefault(),clearTimeout(l),v.f(".ed-contextmenu").style("display","none");var a,n,r,o=t.data,s=t.y+145,c=event.offsetY;if(o.hasOwnProperty("shadowtitle")){var d=o.name;e.shadowObj.snodeId=d,e.shadowObj.name=d,(a=v.e(".edshadowmenu")).style("display","block"),a.style("left",s+"px"),c>122?a.style("top",c-122+"px"):a.style("top",c+5+"px")}else if(o.hasOwnProperty("domainPort")){1==t.parent.children.length?e.onlyDomain=!0:e.onlyDomain=!1,t.parent.data;var u=Et.decode(o.name),f=o.domainPort;e.domainObj.domainName=u,e.domainObj.port=f,(n=v.e(".eddomainmenu")).style("display","block"),n.style("left",s+"px"),c>165?n.style("top",c-165+"px"):n.style("top",c+5+"px")}else if(o.hasOwnProperty("locationType")){var h=t.parent.data;if(t.parent.parent.data,"suffixMatch"==o.locationType)if("KC4qXC8pKyQ="==o.name)e.locationObj.nameTxt="/";else{var m=Et.decode(o.name),p=/\((.*)\)/;e.locationObj.nameTxt=p.test(m)?m.match(p)[1]:m}else e.locationObj.nameTxt=Et.decode(o.name);e.locationObj.name=Et.decode(o.name),e.locationObj.type=o.locationType,e.domainObj.domainName=Et.decode(h.name),e.domainObj.port=h.domainPort,(r=v.e(".edlocationmenu")).style("display","block"),r.style("left",s+"px"),"ZGVueV91cmw="==o.name?(e.isDenyUrl=!0,r.style("top",c-80+"px")):(e.isDenyUrl=!1,e.$store.state.licenceinfo.waf?c>210?r.style("top",c-210+"px"):r.style("top",c+5+"px"):c>185?r.style("top",c-185+"px"):r.style("top",c+5+"px"))}v.e("body").on("click",function(){v.f(".ed-contextmenu").style("display","none")})}).on("click",function(e,i){c&&clearTimeout(c),c=setTimeout(function(){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),t(e)},300)}).on("mouseover",function(t,i){var a,n=t.data,r=t.y+150,o=event.offsetY-50;l=setTimeout(function(){if(n.hasOwnProperty("shadowtitle")){var t=n.name;e.shadowObj.name=t,(a=v.e(".ed-onoff-box")).style("display","block"),a.style("left",r+"px"),a.style("top",o+"px")}else if(n.hasOwnProperty("domainPort")){var i=n.domainPort,s=Et.decode(n.name);e.domainObj.port=i,e.domainObj.domainName=s,(a=v.e(".ed-onoff-DomainBox")).style("display","block"),a.style("left",r+"px"),a.style("top",o+"px")}else if(n.hasOwnProperty("locationType")){if("suffixMatch"==n.locationType)if("KC4qXC8pKyQ="==n.name)e.locationObj.nameTxt="/";else{var l=Et.decode(n.name),c=/\((.*)\)/;e.locationObj.nameTxt=c.test(l)?l.match(c)[1]:l}else e.locationObj.nameTxt=Et.decode(n.name);(a=v.e(".ed-onoff-LocationBox")).style("display","block"),a.style("left",r+"px"),a.style("top",o+"px")}else if(1==f()(n).length){var d=Et.decode(n.name);e.instructObj.name=d,(a=v.e(".ed-onoff-InstructBox")).style("display","block"),a.style("left",r+"px"),a.style("top",o+"px"),console.log(1)}},1500)}).on("mouseout",function(t,e){clearTimeout(l);var i=t.data;i.hasOwnProperty("shadowtitle")?v.e(".ed-onoff-box").style("display","none"):i.hasOwnProperty("domainPort")?v.e(".ed-onoff-DomainBox").style("display","none"):i.hasOwnProperty("locationType")?v.e(".ed-onoff-LocationBox").style("display","none"):v.e(".ed-onoff-InstructBox").style("display","none")});$.append("circle").attr("class","node").attr("r",6).attr("fill",function(t){return t._children?"#606266":"#fff"}).style("stroke",function(t){if(2==t.depth){var e=t.data.locationType;return"accurateMatch"==e?"#39a8ef":"suffixMatch"==e?"#34ab83":"pathMatch"==e?"#ffc700":"dynamicMatch"==e?"#800093":"#c6b38e"}}),$.append("text").attr("dy","0.35em").attr("x",function(t){return t.children||t._children?-13:13}).attr("text-anchor",function(t){return t.children||t._children?"end":"start"}).text(function(t){var e=t.data;if(e.shadowtitle){var i=e.name;return i.length>=13?i.slice(0,10)+"...":i}if(e.hasOwnProperty("domainPort")){var a=Et.decode(e.name);return(a.length>=30?a.slice(0,27)+"...":a)+":"+e.domainPort}if(e.hasOwnProperty("locationType")){if("suffixMatch"==e.locationType){if("KC4qXC8pKyQ="==e.name)return"/";var n=Et.decode(e.name),r=/\((.*)\)/,o=r.test(n)?n.match(r)[1]:n;return o.length>=35?o.slice(0,32)+"...":o}var s=Et.decode(e.name);return s.length>=35?s.slice(0,32)+"...":s}if(1==f()(e).length){var l=Et.decode(e.name);return l.length>=40?l.slice(0,37)+"...":l}}).style("fill",function(t){return"on"==t.data.waf?"#ff0000":""}).clone(!0).lower().attr("stroke-linejoin","round").attr("stroke-width",3).attr("stroke","white"),k.merge($).transition(x).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).attr("fill-opacity",1).attr("stroke-opacity",1).select("circle.node").attr("r",6).style("fill",function(t){return t._children?"#606266":"#fff"}).attr("cursor","pointer");k.exit().transition(x).duration(p).attr("transform",function(t){return"translate("+n.y+","+n.x+")"}).attr("fill-opacity",0).attr("stroke-opacity",0).remove();var C=h.selectAll("path").data(b,function(t){return t.target.id}),S=C.enter().append("path").attr("d",function(t){var e={x:n.x0,y:n.y0};return u({source:e,target:e})});C.merge(S).transition(x).duration(p).attr("d",u),C.exit().transition(x).duration(p).attr("d",function(t){var e={x:n.x,y:n.y};return u({source:e,target:e})}).remove(),d.eachBefore(function(t){t.x0=t.x,t.y0=t.y})}(d)}else e.isNoData=!0}function p(t){t.children&&(t._children=t.children,t._children.forEach(p),t.children=null)}},updateRenderTreeFn:function(){this.dataRenderTree()},sdWarningMode:function(){var t=this;this.$refs.sd_warningMode.getSdWarningModeData().then(function(e){t.sdWarningModemodalShow=!0})},sdSeniorInstruct:function(){this.sdSeniorInstructmodalShow=!0},sdGlbInstruct:function(){var t=this;this.$refs.sd_glbInstruct.getSdGlbInstructData().then(function(e){t.sdGlbInstructmodalShow=!0})},sdCustomUpstream:function(){var t=this;this.$refs.sd_customUpstream.getSdCustUpstreamData().then(function(e){t.sdCustomUpstreammodalShow=!0})},dmUpstreamlistModal:function(){var t=this;this.$refs.dm_upstreamlist.getDmUpstreamlistData().then(function(e){t.upstreamlistmodalShow=!0})},dmRedirectModal:function(){var t=this,e=y.b+"pe/shadow/domain/redirect?savedConfig=true",i=this;_.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port}}).then(function(e){0==e.data.responseCode?t.redirect302Url=e.data.data.redirect:t.$message.error(i.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)}),this.redirectmodalShow=!0},dmLimReq:function(){var t=this;this.$refs.dm_limitReq.getDmLimReqData().then(function(e){t.dmLimReqmodalShow=!0})},dmGlbInstruct:function(){var t=this;this.$refs.dm_glbInstruct.getDmGlbInstructData().then(function(e){t.dmGlbInstructmodalShow=!0})},setRedirectInput:function(t){this.redirect302Url=t},dmEditModal:function(){var t=this,e=y.b+"/pe/shadow/domain?savedConfig=true",i=this;_.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port}}).then(function(e){if(0==e.data.responseCode){var a=e.data.data.domains;"on"==a.ssl?a.outHttp="https":a.outHttp="http",a.serverPort||(a.serverPort=""),t.dmEditObj=a,t.dmEditmodalShow=!0}else t.$message.error(i.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},dmDelete:function(){var t=this;if(t.onlyDomain)return!1;var e=y.b+"pe/shadow/domain?savedConfig=true",i=t.domainObj.domainName;t.$confirm(t.$t("lg.delete")+" "+i+" ,"+t.$t("lg.contiinue"),t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){_.a.delete(e,{data:{snodeId:t.shadowObj.snodeId,domainName:i,domainPort:t.domainObj.port}}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dataRenderTree()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:t.$t("lg.canceled")})})},lcProtectInstruct:function(){var t=this;this.$refs.lc_protectInstruct.getLcProtectInstructData().then(function(e){t.lcprotectInstructmodalShow=!0})},lcSpecialProtectInstruct:function(){var t=this;this.$refs.lc_specialProtectInstruct.getLcSpecialProtectInstructData().then(function(e){t.lcSpecialProtectInstructmodalShow=!0})},lcSkipInstruct:function(){var t=this;this.$refs.lc_skipInstruct.getLcSkipInstructData().then(function(e){t.lcSkipInstructmodalShow=!0})},lcSeniorInstruct:function(){this.lcSeniorInstructmodalShow=!0},lcCustomInstruct:function(){var t=this;this.$refs.lc_customInstruct.getLcCustomInstructData().then(function(e){t.lcCustomInstructmodalShow=!0})},lcwafModal:function(){var t=this,e=y.b+"pe/shadow/domain/waf?savedConfig=true",i=this,a=this.domainObj,n=this.locationObj;_.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:a.domainName,domainPort:a.port,locationName:n.name,locationType:n.type}}).then(function(e){0==e.data.responseCode?(t.lcwafData=e.data.data,t.lcwafmodalShow=!0):t.$message.error(i.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},lcEditModal:function(){this.lcEditmodalShow=!0},lcDelete:function(){var t=this,e=this,i=this.domainObj,a=this.locationObj;this.$confirm(e.$t("lg.delete")+""+a.nameTxt+","+e.$t("lg.continue"),e.$t("lg.tips"),{confirmButtonText:e.$t("lg.yes"),cancelButtonText:e.$t("lg.cancel"),type:"warning"}).then(function(){var n=y.b+"pe/shadow/domain/location?savedConfig=true";_.a.delete(n,{data:{snodeId:t.shadowObj.snodeId,domainName:i.domainName,domainPort:i.port,locationName:a.name,locationType:a.type}}).then(function(i){0==i.data.responseCode?(t.$message({type:"success",message:e.$t("lg.success")}),t.dataRenderTree()):t.$message.error(e.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:e.$t("lg.canceled")})})}}},At={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"aa"},[i("el-dialog",{attrs:{width:"75%",title:t.$t("lg.editconfig"),visible:t.isEditShow,"close-on-click-modal":!1,"before-close":t.isEditClose},on:{"update:visible":function(e){t.isEditShow=e}}},[i("div",{staticClass:"editConfig-wrapper"},[i("div",{staticClass:"matchtips",staticStyle:{top:"-18px"}},[i("span",[i("i",{staticClass:"i1"}),t._v(t._s(t.$t("lg.exactmatch")))]),i("span",[i("i",{staticClass:"i2"}),t._v(t._s(t.$t("lg.suffixmatch")))]),i("span",[i("i",{staticClass:"i3"}),t._v(t._s(t.$t("lg.patchmatch")))]),i("span",[i("i",{staticClass:"i4"}),t._v(t._s(t.$t("lg.dynamicurl")))]),i("span",[i("i",{staticClass:"i5"}),t._v("通用匹配")]),t._v(" "),i("i",{staticClass:"fa fa-font font-red2"}),t._v(t._s(t.$t("lg.wafstart"))+"\n\t\t\t\t")]),t._v(" "),t.isNoData?i("div",{staticClass:"noConfigData-box"},[t._v(t._s(t.$t("lg.nodata")))]):i("div",{ref:"editshadowtree",attrs:{id:"editshadowtree"}},[i("svg",[i("g")])]),t._v(" "),i("div",{staticClass:"ed-contextmenu edshadowmenu"},[i("ul",{staticClass:"ctxEd-downmenu"},[i("li",{staticClass:"item",on:{click:t.sdWarningMode}},[t._v("监控模式")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdSeniorInstruct}},[t._v("高级配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdGlbInstruct}},[t._v("自定义配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdCustomUpstream}},[t._v("自定义Upstream")])])]),t._v(" "),i("div",{staticClass:"ed-contextmenu eddomainmenu"},[i("ul",{staticClass:"ctxEd-downmenu"},[i("li",{staticClass:"item",on:{click:t.dmUpstreamlistModal}},[t._v(t._s(t.$t("lg.manageserver")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmRedirectModal}},[t._v(t._s(t.$t("lg.redirect302")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmLimReq}},[t._v("黑名单防护配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmGlbInstruct}},[t._v("自定义配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmEditModal}},[t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("li",{class:t.onlyDomain?"item , notallow":"item",on:{click:t.dmDelete}},[t._v(t._s(t.$t("lg.delete")))])])]),t._v(" "),i("div",{staticClass:"ed-contextmenu edlocationmenu"},[i("ul",{staticClass:"ctxEd-downmenu"},[i("li",{staticClass:"item",on:{click:t.lcProtectInstruct}},[t._v(t._s(t.isDenyUrl?"明文拒绝的URL":"保护配置"))]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcSpecialProtectInstruct}},[t._v("特殊保护配置")]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcSkipInstruct}},[t._v("跳转配置")]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcSeniorInstruct}},[t._v("高级配置")]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcCustomInstruct}},[t._v("自定义配置")]),t._v(" "),1==t.$store.state.licenceinfo.waf?i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcwafModal}},[t._v(t._s(t.$t("lg.wafdetail")))]):t._e(),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcEditModal}},[t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.lcDelete}},[t._v(t._s(t.$t("lg.delete")))])])]),t._v(" "),i("div",{staticClass:"ed-onoff-box"},[i("p",{staticStyle:{padding:"0px 10px"}},[t._v(t._s(t.shadowObj.name))])]),t._v(" "),i("div",{staticClass:"ed-onoff-DomainBox"},[i("p",{staticStyle:{padding:"0px 10px"}},[t._v(t._s(t.domainObj.domainName+":"+t.domainObj.port))])]),t._v(" "),i("div",{staticClass:"ed-onoff-LocationBox"},[i("p",{staticStyle:{padding:"0px 10px"}},[t._v(t._s(t.locationObj.nameTxt))])]),t._v(" "),i("div",{staticClass:"ed-onoff-InstructBox"},[i("p",{staticStyle:{padding:"0px 10px"}},[t._v(t._s(t.instructObj.name))])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.editConfigLoading,expression:"editConfigLoading"}]},[i("loading")],1)]),t._v(" "),i("shadowpop",{attrs:{shadowDialogVisible:t.shadowDialogVisible,isEditConfig:t.isEditConfig,keys:t.keys,diplomas:t.diplomas,shadowObj:t.shadowObj},on:{setbyshadowpopchild:function(e){t.shadowDialogVisible=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("sd-warning-mode",{ref:"sd_warningMode",attrs:{isShow:t.sdWarningModemodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj},on:{setbysdWarningModemodal:function(e){t.sdWarningModemodalShow=!1}}}),t._v(" "),i("sd-senior-instruct",{ref:"sd_seniorInstruct",attrs:{isShow:t.sdSeniorInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj},on:{setbysdSeniorInstructmodal:function(e){t.sdSeniorInstructmodalShow=!1}}}),t._v(" "),i("sd-glb-instruct",{ref:"sd_glbInstruct",attrs:{isShow:t.sdGlbInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj},on:{setbysdGlbInstructmodal:function(e){t.sdGlbInstructmodalShow=!1}}}),t._v(" "),i("sd-custom-upstream",{ref:"sd_customUpstream",attrs:{isShow:t.sdCustomUpstreammodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj},on:{setbysdCustomUpstreammodal:function(e){t.sdCustomUpstreammodalShow=!1}}}),t._v(" "),i("domainpop",{attrs:{domainDialogVisible:t.domainDialogVisible,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydomainpopchild:function(e){t.domainDialogVisible=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("dm-upstreamlist",{ref:"dm_upstreamlist",attrs:{isShow:t.upstreamlistmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbyupstreamlistmodal:function(e){t.upstreamlistmodalShow=!1}}}),t._v(" "),i("dm-redict",{attrs:{redirectmodalShow:t.redirectmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,data:t.redirect302Url},on:{setbyredictmodal:function(e){t.redirectmodalShow=!1},setredirect:t.setRedirectInput}}),t._v(" "),i("dm-limit-req",{ref:"dm_limitReq",attrs:{isShow:t.dmLimReqmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydmlimReqmodal:function(e){t.dmLimReqmodalShow=!1}}}),t._v(" "),i("dm-glb-instruct",{ref:"dm_glbInstruct",attrs:{isShow:t.dmGlbInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydmGlbInstructmodal:function(e){t.dmGlbInstructmodalShow=!1}}}),t._v(" "),i("dm-edit",{attrs:{dmEditmodalShow:t.dmEditmodalShow,isEditConfig:t.isEditConfig,keys:t.keys,diplomas:t.diplomas,shadowObj:t.shadowObj,domainObj:t.domainObj,data:t.dmEditObj},on:{setbydmEditmodal:function(e){t.dmEditmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-protect-instruct",{ref:"lc_protectInstruct",attrs:{isShow:t.lcprotectInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcProtectInstructmodal:function(e){t.lcprotectInstructmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-special-protect-instruct",{ref:"lc_specialProtectInstruct",attrs:{isShow:t.lcSpecialProtectInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcSpecialProtectInstructmodal:function(e){t.lcSpecialProtectInstructmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-skip-instruct",{ref:"lc_skipInstruct",attrs:{isShow:t.lcSkipInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcSkipInstructmodal:function(e){t.lcSkipInstructmodalShow=!1}}}),t._v(" "),i("lc-senior-instruct",{ref:"lc_seniorInstruct",attrs:{isShow:t.lcSeniorInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcSeniorInstructmodal:function(e){t.lcSeniorInstructmodalShow=!1}}}),t._v(" "),i("lc-custom-instruct",{ref:"lc_customInstruct",attrs:{isShow:t.lcCustomInstructmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcCustomInstructmodal:function(e){t.lcCustomInstructmodalShow=!1}}}),t._v(" "),i("lc-waf",{attrs:{isShow:t.lcwafmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj,data:t.lcwafData},on:{setbylcwafmodal:function(e){t.lcwafmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-edit",{attrs:{lcEditmodalShow:t.lcEditmodalShow,isEditConfig:t.isEditConfig,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcEditmodal:function(e){t.lcEditmodalShow=!1},updateRenderTree:t.dataRenderTree}})],1)},staticRenderFns:[]};var Mt=i("VU/8")(Rt,At,!1,function(t){i("MAKJ"),i("bFW0")},"data-v-548e4600",null).exports,Bt=(i("xrTZ").Base64,{props:{isShow:{type:Boolean},data:{type:Array},nodesdata:{type:Array}},data:function(){return{uploadheader:{Authorization:"Bearer "+sessionStorage.getItem("mytoken")},fileList:[],uploadActionUri:"",doclistLoading:!1,doclist:"conf",keycrtData:[],tdshadownodeShow:!1,selectnodeLoading:!1,shadownodesform:{shadownodes:""},shadownodesformRules:{},combinenodeLoading:!1,isCombineShow:!1,checkedArray:[],combineform:{name:""},combineformRules:{name:[{required:!0,message:this.$t("lg.required"),trigger:"change"},{pattern:/(\.conf)$/,message:this.$t("lg.confsuffix"),trigger:"blur"}]},isEditDocShow:!1,editFile:""}},mounted:function(){var t=this;this.$on("updateRoDoclist",function(e){t.doclistChange(e)})},methods:{roUploadfileClose:function(){this.fileList=[]},beforeupload:function(t){var e=t.name.split("."),i=e[1],a=e[0];return"crt"==i||"key"==i||"conf"==i||"pem"==i?"crt"!=i&&"key"!=i&&"pem"!=i||("server"!=a||(this.$message.error(this.$t("lg.noserver")),!1)):(this.$message.error(this.$t("lg.uploadtips")),!1)},onchange:function(t){var e=t.name.split(".")[1];"crt"!=e&&"key"!=e&&"conf"!=e&&"pem"!=e||(this.uploadActionUri=y.b+"pe/upload/"+e)},submitUpload:function(){this.$refs.upload.submit()},onsuccess:function(t,e,i){var a=e.name.split(".")[1];0==t.responseCode?(this.$message({type:"success",message:this.$t("lg.success")}),this.$emit("updateRoDoclist",a),this.roUploadfileClose()):(this.$message.error(this.$t("lg.failed")+": "+t.data.message),this.fileList=[])},handleRemove:function(t,e){},handlePreview:function(t){},roDoclistClose:function(){if(this.$emit("rodoclistclose",!1),this.$refs.tdshadownode)for(var t=0;t<this.$refs.tdshadownode.length;t++)this.$refs.tdshadownode[t].style.display="none"},doclistChange:function(t){var e=this,i=y.b+"pe/file/cm/"+t;_.a.get(i).then(function(t){0==t.data.responseCode&&(e.keycrtData=t.data.data)}).catch(function(t){console.log(t)})},pushDoc:function(t,e){this.shadownodesform.shadownodes="";for(var i=0;i<this.$refs.tdshadownode.length;i++)this.$refs.tdshadownode[i].style.display="none";var a=this.$refs.tdshadownode[e];"block"==a.style.display?a.style.display="none":a.style.display="block"},selectNode:function(t,e,i){var a=this;this.selectnodeLoading=!0;var n=y.b+"pe/file/"+i+"/"+e+"/"+t;_.a.put(n).then(function(t){if(0==t.data.responseCode)a.$emit("updateRenderTree"),a.$message({type:"success",message:a.$t("lg.success")}),a.roDoclistClose();else{var e=t.data.data.message;-1!=e.indexOf("duplicate")?a.$message.error(a.$t("lg.failed")+":‘请求时间配置’以及‘跳转配置’只能设置一条，重复设置会导致推送失败！请前往修改配置内容，删除多余的‘请求时间’或‘跳转配置’配置指令"):a.$message.error(a.$t("lg.failed")+": "+e)}a.selectnodeLoading=!1}).catch(function(t){console.log(t),a.$message.error(a.$t("lg.failed")+": "+t.data.message),a.selectnodeLoading=!1,a.shadownodesform.shadownodes=""})},editDoc:function(t){this.editFile=t,this.isEditDocShow=!0},delDoc:function(t,e){var i=this,a=this;this.selectnodeLoading=!0;var n=y.b+"pe/file/cm/"+e+"/"+t;_.a.delete(n).then(function(t){0==t.data.responseCode?(i.$emit("updateRoDoclist",e),i.$message({type:"success",message:a.$t("lg.success")})):i.$message.error(a.$t("lg.failed")+": "+t.data.data.message),i.selectnodeLoading=!1}).catch(function(t){console.log(t)})},downloadConf:function(t,e,i){var a=t,n=e,r=sessionStorage.getItem("mytoken"),o=y.b+"pe/download/"+a+"/"+n+"?access_token="+r;/^[@#\$%\^]/.test(n)?this.$message.error(this.$t("lg.failed1")):this.$refs.tddownload[i].setAttribute("href",o)},combineEnsureClose:function(){this.checkedArray=[],this.$refs.combineform.resetFields(),this.isCombineShow=!1},combineFile:function(){var t=this;this.data.forEach(function(e){e.ischecked&&t.checkedArray.push(e)}),2!=this.checkedArray.length?(this.checkedArray=[],this.$message.error(this.$t("lg.select2file"))):this.isCombineShow=!0},combineEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e.checkedArray[0].name,a=e.checkedArray[1].name,n=e.combineform.name,r=y.b+"pe/shadow/config/combine?srcFile1="+i+"&srcFile2="+a+"&targetFile="+n;e.combinenodeLoading=!0,_.a.post(r,{}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.$emit("updateRoDoclist","conf"),e.combineEnsureClose()):e.$message.error(e.$t("lg.failed")+": "+t.data.data.message),e.combinenodeLoading=!1}).catch(function(t){console.log(t)})}})}},filters:{toSDDate2:function(t){if(t)return function(t){function e(t){return t<10?"0"+t:t}return(t=new Date(t)).getFullYear()+"/"+e(parseInt(t.getMonth())+1)+"/"+e(t.getDate())+" "+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())}(t)}},components:{loading:R.a,editconfigtree:Mt}}),Pt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"65%",title:t.$t("lg.filemanage"),visible:t.isShow,"close-on-click-modal":!1,"before-close":t.roDoclistClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"grid-content"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.uploadActionUri,headers:t.uploadheader,"on-change":t.onchange,"before-upload":t.beforeupload,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.onsuccess,"auto-upload":!1,"file-list":t.fileList}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("lg.selectfile")))]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v(t._s(t.$t("lg.upload")))]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v(t._s(t.$t("lg.uploadtips")))])],1),t._v(" "),i("div",{staticStyle:{"margin-bottom":"20px","margin-top":"30px"}},[i("el-radio-group",{on:{change:t.doclistChange},model:{value:t.doclist,callback:function(e){t.doclist=e},expression:"doclist"}},[i("el-radio",{attrs:{label:"conf",border:"",size:"small"}},[t._v("CONF")]),t._v(" "),i("el-radio",{attrs:{label:"key",border:"",size:"small"}},[t._v("KEY")]),t._v(" "),i("el-radio",{attrs:{label:"crt",border:"",size:"small"}},[t._v("CRT")]),t._v(" "),i("el-radio",{attrs:{label:"pem",border:"",size:"small"}},[t._v("PEM")])],1)],1),t._v(" "),i("div",["conf"==t.doclist?i("div",{staticStyle:{"margin-bottom":"50px"}},[0==t.data.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.data.length>0?i("table",{staticClass:"doclist-table"},[i("thead",[i("th",{staticStyle:{width:"140px"}},[t._v(t._s(t.$t("lg.uploadtime")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.file")))]),t._v(" "),i("th")]),t._v(" "),i("tbody",t._l(t.data,function(e,a){return i("tr",[i("td",[t._v(t._s(t._f("toSDDate2")(e.timestamp)))]),t._v(" "),i("td",[i("div",{staticClass:"fl"},[t._v(t._s(e.name))]),t._v(" "),i("div",{ref:"tdshadownode",refInFor:!0,staticClass:"fr tdshadownode-cls"},[i("el-form",{ref:"shadownodesform",refInFor:!0,attrs:{model:t.shadownodesform,rules:t.shadownodesformRules,"label-width":"0px"}},[i("el-form-item",{attrs:{label:"",prop:"shadownodes"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{change:function(i){t.selectNode(t.shadownodesform.shadownodes,e.name,"conf")}},model:{value:t.shadownodesform.shadownodes,callback:function(e){t.$set(t.shadownodesform,"shadownodes",e)},expression:"shadownodesform.shadownodes"}},[t._l(t.nodesdata,function(t){return[i("el-option",{attrs:{label:t.isShadowGroup?t.hostName+"(集群)":t.hostName+"("+t.snodeId+")",value:t.snodeId}})]})],2)],1)],1)],1)]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"325"}},[i("a",{ref:"tddownload",refInFor:!0,staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.downloadConf("conf",e.name,a)}}},[i("i",{staticClass:"el-icon-download"}),t._v(t._s(t.$t("lg.downloadconfig")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.pushDoc(e,a)}}},[i("i",{staticClass:"el-icon-share"}),t._v(t._s(t.$t("lg.pushconfig")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"}},[i("el-checkbox",{staticClass:"checkStyle",model:{value:e.ischecked,callback:function(i){t.$set(e,"ischecked",i)},expression:"item.ischecked"}},[i("span",{staticClass:"checkSpan"},[t._v(t._s(t.$t("lg.chosecombine")))])])],1),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delDoc(e.name,"conf")}}},[i("i",{staticClass:"el-icon-delete"}),t._v(t._s(t.$t("lg.delete")))])])])}))]):t._e(),t._v(" "),i("el-button",{staticClass:"fr",staticStyle:{"margin-top":"20px"},attrs:{slot:"trigger",size:"small",type:"primary"},on:{click:t.combineFile},slot:"trigger"},[t._v("合并配置文件")])],1):t._e(),t._v(" "),"key"==t.doclist?i("div",[0==t.keycrtData.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.keycrtData.length>0?i("table",{staticClass:"doclist-table"},[i("thead",[i("th",{staticStyle:{width:"200px"}},[t._v(t._s(t.$t("lg.uploadtime")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.file")))]),t._v(" "),i("th")]),t._v(" "),i("tbody",t._l(t.keycrtData,function(e,a){return i("tr",[i("td",[t._v(t._s(t._f("toSDDate2")(e.timestamp)))]),t._v(" "),i("td",[i("div",{staticClass:"fl"},[t._v(t._s(e.name))]),t._v(" "),i("div",{ref:"tdshadownode",refInFor:!0,staticClass:"fr tdshadownode-cls"},[i("el-form",{ref:"shadownodesform",refInFor:!0,attrs:{model:t.shadownodesform,rules:t.shadownodesformRules,"label-width":"0px"}},[i("el-form-item",{attrs:{label:"",prop:"shadownodes"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{change:function(i){t.selectNode(t.shadownodesform.shadownodes,e.name,"key")}},model:{value:t.shadownodesform.shadownodes,callback:function(e){t.$set(t.shadownodesform,"shadownodes",e)},expression:"shadownodesform.shadownodes"}},[t._l(t.nodesdata,function(t){return[i("el-option",{attrs:{label:t.isShadowGroup?t.hostName+"(集群)":t.hostName+"("+t.snodeId+")",value:t.snodeId}})]})],2)],1)],1)],1)]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"200"}},[i("a",{ref:"tddownload",refInFor:!0,staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.downloadConf("key",e.name,a)}}},[i("i",{staticClass:"el-icon-download"}),t._v(t._s(t.$t("lg.downloadcer")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.pushDoc(e,a)}}},[i("i",{staticClass:"el-icon-share"}),t._v(t._s(t.$t("lg.pushcer")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delDoc(e.name,"key")}}},[i("i",{staticClass:"el-icon-delete"}),t._v(t._s(t.$t("lg.delete")))])])])}))]):t._e()]):t._e(),t._v(" "),"crt"==t.doclist?i("div",[0==t.keycrtData.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.keycrtData.length>0?i("table",{staticClass:"doclist-table"},[i("thead",[i("th",{staticStyle:{width:"200px"}},[t._v(t._s(t.$t("lg.uploadtime")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.file")))]),t._v(" "),i("th")]),t._v(" "),i("tbody",t._l(t.keycrtData,function(e,a){return i("tr",[i("td",[t._v(t._s(t._f("toSDDate2")(e.timestamp)))]),t._v(" "),i("td",[i("div",{staticClass:"fl"},[t._v(t._s(e.name))]),t._v(" "),i("div",{ref:"tdshadownode",refInFor:!0,staticClass:"fr tdshadownode-cls"},[i("el-form",{ref:"shadownodesform",refInFor:!0,attrs:{model:t.shadownodesform,rules:t.shadownodesformRules,"label-width":"0px"}},[i("el-form-item",{attrs:{label:"",prop:"shadownodes"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{change:function(i){t.selectNode(t.shadownodesform.shadownodes,e.name,"crt")}},model:{value:t.shadownodesform.shadownodes,callback:function(e){t.$set(t.shadownodesform,"shadownodes",e)},expression:"shadownodesform.shadownodes"}},[t._l(t.nodesdata,function(t){return[i("el-option",{attrs:{label:t.isShadowGroup?t.hostName+"(集群)":t.hostName+"("+t.snodeId+")",value:t.snodeId}})]})],2)],1)],1)],1)]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"200"}},[i("a",{ref:"tddownload",refInFor:!0,staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.downloadConf("crt",e.name,a)}}},[i("i",{staticClass:"el-icon-download"}),t._v(t._s(t.$t("lg.downloadcer")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.pushDoc(e,a)}}},[i("i",{staticClass:"el-icon-share"}),t._v(t._s(t.$t("lg.pushcer")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delDoc(e.name,"crt")}}},[i("i",{staticClass:"el-icon-delete"}),t._v(t._s(t.$t("lg.delete")))])])])}))]):t._e()]):t._e(),t._v(" "),"pem"==t.doclist?i("div",[0==t.keycrtData.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.keycrtData.length>0?i("table",{staticClass:"doclist-table"},[i("thead",[i("th",{staticStyle:{width:"200px"}},[t._v(t._s(t.$t("lg.uploadtime")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.file")))]),t._v(" "),i("th")]),t._v(" "),i("tbody",t._l(t.keycrtData,function(e,a){return i("tr",[i("td",[t._v(t._s(t._f("toSDDate2")(e.timestamp)))]),t._v(" "),i("td",[i("div",{staticClass:"fl"},[t._v(t._s(e.name))]),t._v(" "),i("div",{ref:"tdshadownode",refInFor:!0,staticClass:"fr tdshadownode-cls"},[i("el-form",{ref:"shadownodesform",refInFor:!0,attrs:{model:t.shadownodesform,rules:t.shadownodesformRules,"label-width":"0px"}},[i("el-form-item",{attrs:{label:"",prop:"shadownodes"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{change:function(i){t.selectNode(t.shadownodesform.shadownodes,e.name,"pem")}},model:{value:t.shadownodesform.shadownodes,callback:function(e){t.$set(t.shadownodesform,"shadownodes",e)},expression:"shadownodesform.shadownodes"}},[t._l(t.nodesdata,function(t){return[i("el-option",{attrs:{label:t.isShadowGroup?t.hostName+"(集群)":t.hostName+"("+t.snodeId+")",value:t.snodeId}})]})],2)],1)],1)],1)]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"200"}},[i("a",{ref:"tddownload",refInFor:!0,staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.downloadConf("pem",e.name,a)}}},[i("i",{staticClass:"el-icon-download"}),t._v(t._s(t.$t("lg.downloadcer")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.pushDoc(e,a)}}},[i("i",{staticClass:"el-icon-share"}),t._v(t._s(t.$t("lg.pushcer")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delDoc(e.name,"pem")}}},[i("i",{staticClass:"el-icon-delete"}),t._v(t._s(t.$t("lg.delete")))])])])}))]):t._e()]):t._e()])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.selectnodeLoading,expression:"selectnodeLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.$t("lg.combineconfig"),visible:t.isCombineShow,"close-on-click-modal":!1,"before-close":t.combineEnsureClose},on:{"update:visible":function(e){t.isCombineShow=e}}},[i("p",{staticClass:"tips"},[t._v("注："+t._s(t.$t("lg.combinetips")))]),t._v(" "),i("el-form",{ref:"combineform",attrs:{model:t.combineform,rules:t.combineformRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:t.$t("lg.configfilename"),prop:"name"}},[i("el-input",{attrs:{placeholder:t.$t("lg.combinedfile")},model:{value:t.combineform.name,callback:function(e){t.$set(t.combineform,"name",e)},expression:"combineform.name"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-top":"20px"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.combineEnsure("combineform")}}},[t._v(t._s(t.$t("lg.confirmcombine")))]),t._v(" "),i("el-button",{on:{click:t.combineEnsureClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.combinenodeLoading,expression:"combinenodeLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("editconfigtree",{attrs:{editFile:t.editFile,isEditShow:t.isEditDocShow},on:{editDocShowclose:function(e){t.isEditDocShow=!1}}})],1)},staticRenderFns:[]};var qt=i("VU/8")(Bt,Pt,!1,function(t){i("cJUj")},"data-v-4a01aaf6",null).exports,Ut={props:{isShow:{type:Boolean},data:{type:Array},backbtnShow:{type:Boolean,default:!0}},created:function(){this.getAttactypeData()},data:function(){return{isEdit:!1,isView:!1,viewRuleData:"",attactypeData:[],attactype:[],editruleform:{sid:"",id:"",timestamp:"",active:"",ruleType:"",negative:"",msg:"",detect:"",remarks:"",ruleset:"",checkedMzs:[],checkedscs:[],mzlist:["BODY","URL","ARGS","FILE_EXT","$HEADERS_VAR:User-Agent ","HEADERS","$HEADERS_VAR:Connection","$HEADERS_VAR:Cookie","$HEADERS_VAR:Content-Type","$HEADERS_VAR:Accept-Encoding","$HEADERS_VAR:X-Forward-For"],sclist:[{name:"$SQL",val:8},{name:"$RFI",val:8},{name:"$TRAVERSAL",val:8},{name:"$EVADE",val:8},{name:"$XSS",val:8},{name:"$UWA",val:8},{name:"$ATTACK",val:8}]},editruleformRules:{msg:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],detect:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]}}},methods:{getAttactypeData:function(){var t=this;return new m.a(function(e,i){var a=y.b+"waf/attacktype";_.a.get(a).then(function(i){if(0==i.data.responseCode){var a=i.data.data;t.attactypeData=a,e(a)}else t.$message.error(t.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})})},getRuleset:function(t){t&&this.$store.commit(w.a)},roRulesClose:function(){this.editruleform.checkedMzs=[],this.editruleform.checkedscs=[],this.$emit("rootrulesclose")},roRulesEditClose:function(){this.isEdit=!1},roRulesViewClose:function(){this.isView=!1},eidtRule:function(t,e){var i=this;console.log(t),this.getAttactypeData().then(function(e){i.isView=!1,i.isEdit=!0,i.editruleform.sid=t.sid,i.editruleform.id=t.id,i.editruleform.timestamp=t.timestamp,i.editruleform.active=1==t.active,i.editruleform.ruleType=t.ruleType,i.editruleform.negative=t.negative,i.editruleform.msg=t.message,i.editruleform.detect=t.detection,i.editruleform.remarks=t.remarks,t.matchZone&&(i.editruleform.checkedMzs=t.matchZone.split("|")),t.score&&(i.attactype=t.score.split(",")),i.editruleform.ruleset=t.ruleset})},viewRule:function(t){var e=this;this.isEdit=!1,this.isView=!0;var i=y.b+"waf/rule/"+t.sid+"/view";_.a.get(i).then(function(t){e.viewRuleData=t.data.data})},saveRule:function(){var t=this,e=this;this.$refs.editruleform.validate(function(i){if(i){var a=y.b+"waf/rule/"+t.editruleform.sid,n="";t.editruleform.checkedMzs.length>0&&(n=t.editruleform.checkedMzs.join("|"));var r=e.attactype.join(),o=t.editruleform.id,s=t.editruleform.sid,l=1==t.editruleform.active?1:0;_.a.post(a,{active:l,detection:t.editruleform.detect,id:o,matchZone:n,message:t.editruleform.msg,negative:t.editruleform.negative,remarks:t.editruleform.remarks,ruleType:t.editruleform.ruleType,ruleset:t.editruleform.ruleset,score:r,sid:s,timestamp:t.editruleform.timestamp}).then(function(i){0==i.data.responseCode?(t.$emit("updateRootRule"),t.$message({type:"success",message:e.$t("lg.success")}),t.roRulesEditClose()):t.$message.error(e.$t("lg.failed")+"："+i.data.data.message)}).catch(function(t){console.log(t)})}})},deleteRule:function(t){var e=this,i=this,a=y.b+"waf/rule/"+t.sid;_.a.delete(a).then(function(t){e.$emit("updateRootRule"),e.isView=!1,e.isEdit=!1,e.$message({type:"success",message:i.$t("lg.success")})})}},components:{loading:R.a}},Vt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"68%",title:"Waf Rules",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.roRulesClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"rules-container"},[0==t.data.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.data.length>0?i("table",[i("tbody",t._l(t.data,function(e,a){return i("tr",[i("td",[t._v(t._s(e.message))]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"150"}},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.eidtRule(e,a)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.viewRule(e)}}},[i("i",{staticClass:"el-icon-tickets"}),t._v(t._s(t.$t("lg.detail")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deleteRule(e)}}},[i("i",{staticClass:"el-icon-delete"}),t._v("删除")])])])}))]):t._e()])]),t._v(" "),i("el-dialog",{attrs:{width:"68%",title:"Waf Rules",visible:t.isEdit,"close-on-click-modal":!1,"before-close":t.roRulesEditClose},on:{"update:visible":function(e){t.isEdit=e}}},[i("div",{staticClass:"editrule-wrapper"},[i("div",{staticClass:"editrule-content"},[i("el-form",{ref:"editruleform",attrs:{model:t.editruleform,rules:t.editruleformRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"描述",prop:"msg"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editruleform.msg,callback:function(e){t.$set(t.editruleform,"msg",e)},expression:"editruleform.msg"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"规则",prop:"detect"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editruleform.detect,callback:function(e){t.$set(t.editruleform,"detect",e)},expression:"editruleform.detect"}})],1),t._v(" "),i("div",{staticClass:"checkflexbox"},[i("div",{staticClass:"checkflex-item"},[i("el-form-item",{attrs:{label:"Mz"}},[i("el-checkbox-group",{model:{value:t.editruleform.checkedMzs,callback:function(e){t.$set(t.editruleform,"checkedMzs",e)},expression:"editruleform.checkedMzs"}},t._l(t.editruleform.mzlist,function(e){return i("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1)],1),t._v(" "),i("div",{staticClass:"checkflex-item ckitem-box"},[i("el-form-item",{attrs:{label:"Score"}},[i("el-checkbox-group",{model:{value:t.attactype,callback:function(e){t.attactype=e},expression:"attactype"}},t._l(t.attactypeData,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.attackType+":"+e.score}},[t._v("\n                  "+t._s(e.attackType)),i("i",{staticClass:"spani"},[t._v(t._s(e.score))])])}))],1)],1)]),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.editruleform.remarks,callback:function(e){t.$set(t.editruleform,"remarks",e)},expression:"editruleform.remarks"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"RuleSet",prop:"ruleset"}},[i("el-select",{attrs:{placeholder:"选择RuleSet"},on:{"visible-change":function(e){t.getRuleset(e)}},model:{value:t.editruleform.ruleset,callback:function(e){t.$set(t.editruleform,"ruleset",e)},expression:"editruleform.ruleset"}},[t._l(t.$store.state.allRulesetData,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.onoff")}},[i("el-switch",{model:{value:t.editruleform.active,callback:function(e){t.$set(t.editruleform,"active",e)},expression:"editruleform.active"}})],1)],1)],1),t._v(" "),i("div",{staticClass:"back-btn"},[t.backbtnShow?i("el-button",{attrs:{type:"success"},on:{click:t.roRulesEditClose}},[t._v(t._s(t.$t("lg.back")))]):t._e(),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.saveRule}},[t._v(t._s(t.$t("lg.save")))])],1)])]),t._v(" "),i("el-dialog",{staticClass:"myView",attrs:{width:"45%",title:"Waf Rules",visible:t.isView,"close-on-click-modal":!1,"before-close":t.roRulesViewClose},on:{"update:visible":function(e){t.isView=e}}},[i("div",{staticClass:"viewrule-wrapper"},[t.viewRuleData?i("div",{staticClass:"viewrule-content"},[t._v("\n        "+t._s(t.viewRuleData)+"\n      ")]):t._e(),t._v(" "),i("div",{staticClass:"back-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.roRulesViewClose}},[t._v(t._s(t.$t("lg.back")))])],1)])])],1)},staticRenderFns:[]};var Gt=i("VU/8")(Ut,Vt,!1,function(t){i("8j07")},"data-v-32c77fd3",null).exports,Ft={props:{isShow:{type:Boolean},sid:{type:String},attypedata:{type:Array}},data:function(){return{attactype:[],attactypeData:[],addruleform:{sid:this.sid,id:"",timestamp:"",active:"",ruleType:"",negative:"",msg:"",detect:"",remarks:"",ruleset:"",ison:!0,checkedMzs:[],checkedscs:[],mzlist:["BODY","URL","ARGS","FILE_EXT","$HEADERS_VAR:User-Agent ","HEADERS","$HEADERS_VAR:Connection","$HEADERS_VAR:Cookie","$HEADERS_VAR:Content-Type","$HEADERS_VAR:Accept-Encoding","$HEADERS_VAR:X-Forward-For"],sclist:[{name:"$SQL",val:8},{name:"$RFI",val:8},{name:"$TRAVERSAL",val:8},{name:"$EVADE",val:8},{name:"$XSS",val:8},{name:"$UWA",val:8},{name:"$ATTACK",val:8}]},addruleformRules:{msg:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],detect:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],ruleset:[{required:!0,message:this.$t("lg.required"),trigger:"change"}]}}},methods:{getAttactypeData:function(){var t=this;return new m.a(function(e,i){var a=y.b+"waf/attacktype";_.a.get(a).then(function(i){if(0==i.data.responseCode){var a=i.data.data;t.attactypeData=a,e(a)}else t.$message.error(t.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})})},getRuleset:function(t){t&&this.$store.commit(w.a)},roAddRuleClose:function(){this.addruleform.checkedMzs=[],this.addruleform.checkedscs=[],this.attactype=[],this.$refs.addruleform.resetFields(),this.$emit("rootaddruleclose")},addRule:function(){var t=this,e=this;this.$refs.addruleform.validate(function(i){if(i){var a=y.b+"waf/rule/"+t.sid,n="";t.addruleform.checkedMzs.length>0&&(n=t.addruleform.checkedMzs.join("|"));var r=e.attactype.join(),o=1==t.addruleform.ison?1:0,s=Date.now();_.a.put(a,{active:o,detection:t.addruleform.detect,matchZone:n,message:t.addruleform.msg,negative:0,remarks:t.addruleform.remarks,ruleType:"MainRule",ruleset:t.addruleform.ruleset,score:r,sid:t.sid,timestamp:s}).then(function(i){0==i.data.responseCode?(t.roAddRuleClose(),t.$message({type:"success",message:e.$t("lg.success")})):t.$message.error(e.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})}})}},components:{loading:R.a}},Ht={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"68%",title:"Add Waf Rule",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.roAddRuleClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"addruleform",attrs:{model:t.addruleform,rules:t.addruleformRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"Id",prop:"sid"}},[i("el-input",{attrs:{"auto-complete":"off",disabled:!0},model:{value:t.sid,callback:function(e){t.sid=e},expression:"sid"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"描述",prop:"msg"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addruleform.msg,callback:function(e){t.$set(t.addruleform,"msg",e)},expression:"addruleform.msg"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"规则",prop:"detect"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addruleform.detect,callback:function(e){t.$set(t.addruleform,"detect",e)},expression:"addruleform.detect"}})],1),t._v(" "),i("div",{staticClass:"checkflexbox"},[i("div",{staticClass:"checkflex-item"},[i("el-form-item",{attrs:{label:"Mz"}},[i("el-checkbox-group",{model:{value:t.addruleform.checkedMzs,callback:function(e){t.$set(t.addruleform,"checkedMzs",e)},expression:"addruleform.checkedMzs"}},t._l(t.addruleform.mzlist,function(e){return i("el-checkbox",{key:e,attrs:{label:e}},[t._v(t._s(e))])}))],1)],1),t._v(" "),i("div",{staticClass:"checkflex-item ckitem-box"},[i("div",{staticClass:"ck-item-item"},[i("el-form-item",{attrs:{label:"Score"}},[i("el-checkbox-group",{model:{value:t.attactype,callback:function(e){t.attactype=e},expression:"attactype"}},t._l(t.attypedata,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.attackType+":"+e.score}},[t._v("\n                  "+t._s(e.attackType)),i("i",{staticClass:"spani"},[t._v(t._s(e.score))])])}))],1)],1)])]),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remarks"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4}},model:{value:t.addruleform.remarks,callback:function(e){t.$set(t.addruleform,"remarks",e)},expression:"addruleform.remarks"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"RuleSet",prop:"ruleset"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{"visible-change":function(e){t.getRuleset(e)}},model:{value:t.addruleform.ruleset,callback:function(e){t.$set(t.addruleform,"ruleset",e)},expression:"addruleform.ruleset"}},[t._l(t.$store.state.allRulesetData,function(t){return[i("el-option",{attrs:{label:t.name,value:t.name}})]})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.onoff")}},[i("el-switch",{model:{value:t.addruleform.ison,callback:function(e){t.$set(t.addruleform,"ison",e)},expression:"addruleform.ison"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.addRule}},[t._v(t._s(t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:t.roAddRuleClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)],1)},staticRenderFns:[]};var zt=i("VU/8")(Ft,Ht,!1,function(t){i("fr1F")},"data-v-1221da76",null).exports,Wt={props:{isShow:{type:Boolean}},data:function(){return{uploadheader:{Authorization:"Bearer "+sessionStorage.getItem("mytoken")},fileList:[],uploadActionUri:"",doclistLoading:!1}},mounted:function(){},methods:{importClose:function(){this.$emit("importclose",!1)},roUploadfileClose:function(){this.fileList=[]},beforeupload:function(t){},onchange:function(t){this.uploadActionUri=y.b+"waf/rule/import"},submitUpload:function(){this.$refs.upload.submit()},onsuccess:function(t,e,i){var a=e.name.split(".")[1];0==t.responseCode?(this.$message({type:"success",message:this.$t("lg.success")}),this.$emit("updateRoDoclist",a)):(this.$message.error("导入失败"),this.fileList=[])},handleRemove:function(t,e){},handlePreview:function(t){}},components:{loading:R.a}},Jt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"65%",title:t.$t("lg.filemanage"),visible:t.isShow,"close-on-click-modal":!1,"before-close":t.importClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"grid-content"},[i("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:t.uploadActionUri,headers:t.uploadheader,"on-change":t.onchange,"before-upload":t.beforeupload,"on-preview":t.handlePreview,"on-remove":t.handleRemove,"on-success":t.onsuccess,"auto-upload":!1,"file-list":t.fileList}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v(t._s(t.$t("lg.selectfile")))]),t._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{size:"small",type:"success"},on:{click:t.submitUpload}},[t._v("导入")])],1)],1)])],1)},staticRenderFns:[]};var Yt=i("VU/8")(Wt,Jt,!1,function(t){i("QXXM")},"data-v-4ddcd210",null).exports,Xt={props:{isShow:{type:Boolean},data:{type:Array}},data:function(){return{rulesetsform:{desc:"",name:""},ruleData:[],rootrulesetData:[],rulesinrulesetsShow:!1,nobackbtnShow:!1,viewrulesetShow:!1,rulesethtml:"",importRulesetShow:!1}},mounted:function(){},watch:{data:function(){this.rootrulesetData=this.data}},methods:{roRulesetsClose:function(){this.viewrulesetShow=!1,this.$emit("rootrulesetsclose")},addRuleset:function(){var t=this,e=this,i=this.rulesetsform.name,a=this.rulesetsform.desc;if(i)if(/(\.rules)$/.test(i)){var n=y.b+"waf/ruleset/"+i,r={fileName:i,name:i,remarks:a,timestamp:Date.now()};_.a.put(n,r).then(function(i){0==i.data.responseCode?(t.$emit("updateRulesets"),t.$message({type:"success",message:e.$t("lg.success")}),t.rulesetsform.name="",t.rulesetsform.desc=""):t.$message.error(e.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})}else this.$message.error(e.$t("lg.rulesetnametips"));else this.$message.error(e.$t("lg.required"))},showRulesInRuleset:function(t){var e=this,i=this,a=y.b+"waf/ruleset/"+t+"/rules";_.a.get(a).then(function(t){0==t.data.responseCode?e.ruleData=t.data.data:e.$message.error(i.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)}),this.rulesinrulesetsShow=!0},viewRuleset:function(t){var e=this,i=this;this.rulesethtml="",this.viewrulesetShow=!0;var a=y.b+"waf/ruleset/"+t+"/view";_.a.get(a).then(function(t){if(0==t.data.responseCode){var a=t.data.data.data;a&&(e.rulesethtml=a.replace(/\n/g,"<br/>"))}else e.$message.error(i.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})},back:function(){this.viewrulesetShow=!1},importRuleset:function(){this.importRulesetShow=!0},downloadRuleset:function(){var t=y.b+"waf/rule/export";_()({url:t,method:"get",responseType:"blob"}).then(function(t){var e=t.data,i=new Blob([e]),a=new Date,n="全部规则_"+a.getFullYear()+"-"+(parseInt(a.getMonth())+1)+"-"+a.getDay()+".xlsx";if("download"in document.createElement("a")){var r=document.createElement("a");r.download=n,r.style.display="none",r.href=URL.createObjectURL(i),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}else navigator.msSaveBlob(i,n)})},exportRuleset:function(t){var e=this,i=this,a=y.b+"waf/ruleset/"+t+"/export";this.$confirm(i.$t("lg.rulesetconfirm"),i.$t("lg.tips"),{confirmButtonText:i.$t("lg.yes"),cancelButtonText:i.$t("lg.cancel"),type:"warning"}).then(function(){_.a.get(a).then(function(t){0==t.data.responseCode?e.$message({type:"success",message:i.$t("lg.success")}):e.$message.error(i.$t("lg.failed"))}).catch(function(t){console.log(t)})}).catch(function(){e.$message({type:"info",message:i.$t("lg.canceled")})})}},components:{loading:R.a,roRules:Gt,importruleset:Yt}},Zt={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"68%",title:"RuleSets",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.roRulesetsClose},on:{"update:visible":function(e){t.isShow=e}}},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(e){t.downloadRuleset()}}},[i("i",{staticClass:"el-icon-download"}),t._v("下载")]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(e){t.importRuleset()}}},[i("i",{staticClass:"el-icon-d-arrow-right"}),t._v("导入")]),t._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[0==t.data.length?i("p",[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),t.data.length>0?i("table",{staticClass:"rulesets-table"},[i("thead",[i("tr",[i("th",[t._v("DESC")]),t._v(" "),i("th",[t._v("FILE")]),t._v(" "),i("th")])]),t._v(" "),i("tbody",t._l(t.data,function(e){return i("tr",[i("td",[t._v(t._s(e.remarks))]),t._v(" "),i("td",[t._v(t._s(e.name))]),t._v(" "),i("td",{staticClass:"text-center",attrs:{width:"280"}},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.showRulesInRuleset(e.name)}}},[i("i",{staticClass:"el-icon-document"}),t._v("规则")]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.viewRuleset(e.name)}}},[i("i",{staticClass:"el-icon-tickets"}),t._v("查看")]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.exportRuleset(e.name)}}},[i("i",{staticClass:"el-icon-upload2"}),t._v("推送")])])])}))]):t._e()])]),t._v(" "),i("el-dialog",{attrs:{width:"68%",title:"RuleSets",visible:t.viewrulesetShow,"close-on-click-modal":!1,"before-close":t.back},on:{"update:visible":function(e){t.viewrulesetShow=e}}},[i("div",{staticClass:"show-rulesetcontent"},[i("div",{staticClass:"ruleset-c"},[t.rulesethtml?t._e():i("p",[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),t.rulesethtml?i("div",{domProps:{innerHTML:t._s(t.rulesethtml)}}):t._e()]),t._v(" "),i("div",{staticClass:"ruleset-back-btn"},[i("el-button",{attrs:{type:"primary"},on:{click:t.back}},[t._v(t._s(t.$t("lg.back")))])],1)])]),t._v(" "),t.rulesinrulesetsShow?i("div",{staticClass:"rulesinrulesets"},[i("ro-rules",{attrs:{isShow:t.rulesinrulesetsShow,data:t.ruleData,rulesetdata:t.rootrulesetData,backbtnShow:t.nobackbtnShow},on:{rootrulesclose:function(e){t.rulesinrulesetsShow=!1}}})],1):t._e(),t._v(" "),i("importruleset",{attrs:{isShow:t.importRulesetShow},on:{importclose:function(e){t.importRulesetShow=!1}}})],1)},staticRenderFns:[]};var Kt=i("VU/8")(Xt,Zt,!1,function(t){i("S7PT")},"data-v-3d383757",null).exports,Qt={components:{loading:R.a},props:{isShow:{type:Boolean},isGrpEdit:{type:Boolean},editGrpObj:{type:Object}},watch:{isShow:function(){this.isShow&&!this.isGrpEdit&&this.getShadowNodes()},isGrpEdit:function(){var t=this;this.isGrpEdit&&this.editGrpObj.groupName?(this.sdGrpNamedisabled=!0,this.getShadowNodes().then(function(e){console.log(t.editGrpObj);var i=t.editGrpObj;t.sdGrpfrom.groupName=i.groupName,t.sdGrpfrom.masterNodeId=i.masterNode.snodeId,t.sdGrpfrom.masterNodeNetcardName=i.masterNode.networkCardName,t.sdGrpfrom.virtualIPs=i.virtualIPs,t.getNetcardFromNode(i.masterNode.snodeId);var a=i.masterNode;t.slctNodesdata.push({key:a.snodeId,label:a.snodeId+" ("+a.hostName+")",disabled:!1}),t.transfNodesdata.push({key:a.snodeId,label:a.snodeId+" ("+a.hostName+")",disabled:!0}),console.log(t.transfNodesdata),t.nodesdata.push({key:a.snodeId,label:a.snodeId+" ("+a.hostName+")",disabled:!1});var n=[];i.backupNodes.forEach(function(e){n.push(e.snodeId);var i={};i.key=e.snodeId,i.label=e.snodeId+" ("+e.hostName+")",i.disabled=!1;var a={};a.key=e.snodeId,a.label=e.snodeId+" ("+e.hostName+")",a.disabled=!0,t.slctNodesdata.push(a),t.transfNodesdata.push(i),t.nodesdata.push(i)}),t.sdGrpfrom.backupNodes=n})):this.sdGrpNamedisabled=!1}},data:function(){return{sdGrpfrom:{groupName:"",masterNodeId:"",backupNodes:[],virtualIPs:[],masterNodeNetcardName:"",masterNodeNetcards:[],secNodesCheced:[],secNodeNetcardName0:"",secNodeNetcardName1:"",secNodeNetcardName2:"",secNodeNetcardName3:"",secNodeNetcardName4:"",secNodeNetcardName5:"",secNodeNetcardName6:"",secNodeNetcardName7:"",secNodeNetcardName8:"",secNodeNetcardName9:"",secNodeNetcardName10:"",secNodeNetcardName11:"",secNodeNetcardName12:"",secNodeNetcardName13:"",secNodeNetcardName14:"",secNodeNetcardName15:"",secNodeNetcardName16:"",secNodeNetcardName17:"",secNodeNetcardName18:"",secNodeNetcardName19:"",secNodeNetcards0:[],secNodeNetcards1:[],secNodeNetcards2:[],secNodeNetcards3:[],secNodeNetcards4:[],secNodeNetcards5:[],secNodeNetcards6:[],secNodeNetcards7:[],secNodeNetcards8:[],secNodeNetcards9:[],secNodeNetcards10:[],secNodeNetcards11:[],secNodeNetcards12:[],secNodeNetcards13:[],secNodeNetcards14:[],secNodeNetcards15:[],secNodeNetcards16:[],secNodeNetcards17:[],secNodeNetcards18:[],secNodeNetcards19:[]},nodesdata:[],slctNodesdata:[],transfNodesdata:[],inputVisible:!1,inputValue:"",sdGrpfromRules:{groupName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],masterNodeId:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],masterNodeNetcardName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],backupNodes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},sdGrpPopLoading:!1,sdGrpNamedisabled:!1}},methods:{sdGrpPopClose:function(){this.$refs.sdGrpfrom.resetFields(),this.transfNodesdata=[],this.sdGrpfrom.masterNodeNetcards=[],this.sdGrpfrom.secNodesCheced=[],this.$emit("sdGrpPopclose");for(var t=0;t<10;t++)this.sdGrpfrom["secNodeNetcardName"+t]="",this.sdGrpfrom["secNodeNetcards"+t]=[]},getShadowNodes:function(){var t=this;return new m.a(function(e,i){var a=t,n=y.b+"pe/shadow/snode";_.a.get(n).then(function(t){if(0==t.data.responseCode){var i=[];t.data.data.filter(function(t){if(!t.isShadowGroup)return t}).forEach(function(t){i.push({key:t.snodeId,label:t.snodeId+" ("+t.hostName+")",disabled:!1})}),a.nodesdata=i,a.slctNodesdata=JSON.parse(o()(i)),a.transfNodesdata=JSON.parse(o()(i)),e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},getNetcardFromNode:function(t,e){var i=this,a=this;if(t&&!(e>19)){var n=y.b+"pe/shadow/networkCard/name/"+t;_.a.get(n).then(function(t){if(0==t.data.responseCode){var n=t.data.data;void 0===e?a.sdGrpfrom.masterNodeNetcards=n:i.sdGrpfrom["secNodeNetcards"+e]=n}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)})}},haldSelect:function(t){var e=JSON.parse(o()(this.nodesdata));e.forEach(function(e,i){e.key===t&&(e.disabled=!0)}),this.transfNodesdata=e,this.sdGrpfrom.masterNodeNetcardName="",this.sdGrpfrom.masterNodeNetcards=[],this.getNetcardFromNode(t)},checkboxChecked:function(t){var e=this;e.sdGrpfrom.secNodesCheced=t;var i=JSON.parse(o()(e.nodesdata)),a="";t.forEach(function(t,n){a=t.split("(")[0],i.forEach(function(e,i){e.label===t&&(e.disabled=!0)}),e.getNetcardFromNode(a,n)}),this.slctNodesdata=i},checkTransfer:function(t){t=[].concat(l()(t),l()(this.sdGrpfrom.backupNodes));var e=JSON.parse(o()(this.nodesdata));t.forEach(function(t){e.forEach(function(e,i){e.key===t&&(e.disabled=!0)})}),this.slctNodesdata=e},handleTagClose:function(t){this.sdGrpfrom.virtualIPs.splice(t,1)},showTagInput:function(){var t=this;this.inputVisible=!0,this.$nextTick(function(e){t.$refs.saveTagInput.$refs.input.focus()})},handleTagInputConfirm:function(){var t=this.inputValue;/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))$/.test(t)&&this.sdGrpfrom.virtualIPs.push(t),this.inputVisible=!1,this.inputValue=""},saveSingleSdGrp:function(){var t=this;this.$refs.sdGrpfrom.validate(function(e){if(e){t.sdGrpPopLoading=!0;var i=y.b+"/pe/shadow/group",a="post";t.isGrpEdit&&(a="put");var n=[],r=[],o=void 0,s=void 0,l=void 0;t.sdGrpfrom.secNodesCheced.forEach(function(e,i){o=e.split(" ("),s=o[0],l=t.sdGrpfrom["secNodeNetcardName"+i],r.push({backupNode:s,backupNodeNetworkCardName:l}),n.push(s)}),_.a[a](i,{backupNodeList:r,backupNodes:n,groupName:t.sdGrpfrom.groupName,masterNode:t.sdGrpfrom.masterNodeId,masterNodeNetworkCardName:t.sdGrpfrom.masterNodeNetcardName,virtualIPs:t.sdGrpfrom.virtualIPs}).then(function(e){t.$emit("updateSdGrpData"),t.$emit("updateConfigTree"),t.sdGrpPopClose(),t.$message({type:"success",message:t.$t("lg.success")}),t.sdGrpPopLoading=!1}).catch(function(t){console.log(t)})}})}}},te={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"sdGrppop-wrapper"},[i("el-dialog",{attrs:{width:"55%",title:t.isGrpEdit?t.sdGrpfrom.groupName:"shadow Group Add",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.sdGrpPopClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"sdGrpfrom",attrs:{model:t.sdGrpfrom,rules:t.sdGrpfromRules,"label-width":"65px"}},[i("el-form-item",{attrs:{label:"集群名",prop:"groupName"}},[i("el-input",{staticStyle:{width:"65%"},attrs:{disabled:t.sdGrpNamedisabled},model:{value:t.sdGrpfrom.groupName,callback:function(e){t.$set(t.sdGrpfrom,"groupName","string"==typeof e?e.trim():e)},expression:"sdGrpfrom.groupName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"主节点",prop:"masterNodeId"}},[i("el-select",{staticStyle:{width:"50%"},attrs:{clearable:"",placeholder:t.$t("lg.select")},on:{change:t.haldSelect},model:{value:t.sdGrpfrom.masterNodeId,callback:function(e){t.$set(t.sdGrpfrom,"masterNodeId",e)},expression:"sdGrpfrom.masterNodeId"}},[t._l(t.slctNodesdata,function(t){return[i("el-option",{attrs:{label:t.label,value:t.key,disabled:t.disabled}})]})],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"网卡名",prop:"masterNodeNetcardName"}},[i("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.sdGrpfrom.masterNodeNetcardName,callback:function(e){t.$set(t.sdGrpfrom,"masterNodeNetcardName",e)},expression:"sdGrpfrom.masterNodeNetcardName"}},t._l(t.sdGrpfrom.masterNodeNetcards,function(t,e){return i("el-option",{key:e,attrs:{label:t,value:t}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"从节点",prop:"backupNodes"}},[i("el-checkbox-group",{on:{change:t.checkboxChecked},model:{value:t.sdGrpfrom.backupNodes,callback:function(e){t.$set(t.sdGrpfrom,"backupNodes",e)},expression:"sdGrpfrom.backupNodes"}},t._l(t.transfNodesdata,function(t){return i("el-checkbox",{attrs:{label:t.label,disabled:t.disabled}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"网卡名"}},[i("div",{staticClass:"transferBox"},t._l(t.sdGrpfrom.secNodesCheced,function(e,a){return i("div",{key:a,staticClass:"mgb14"},[i("p",{staticClass:"lh18p"},[t._v(t._s(e))]),t._v(" "),i("el-select",{staticStyle:{width:"50%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.sdGrpfrom["secNodeNetcardName"+a],callback:function(e){t.$set(t.sdGrpfrom,"secNodeNetcardName"+a,e)},expression:"sdGrpfrom['secNodeNetcardName'+index]"}},[t._l(t.sdGrpfrom["secNodeNetcards"+a],function(t,e){return[i("el-option",{attrs:{label:t,value:t}})]})],2)],1)}))]),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.virtualIP"),prop:"virtualIPs"}},[i("div",{staticClass:"transferBox tagBox"},[t._l(t.sdGrpfrom.virtualIPs,function(e,a){return i("el-tag",{key:a,attrs:{closable:"","disable-transitions":!1},on:{close:function(e){t.handleTagClose(a)}}},[t._v("\n            "+t._s(e)+"\n          ")])}),t._v(" "),t.inputVisible?i("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleTagInputConfirm},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.handleTagInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):i("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showTagInput}},[t._v("+ Add IP")])],2)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.saveSingleSdGrp}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.sdGrpPopClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sdGrpPopLoading,expression:"sdGrpPopLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1)],1)},staticRenderFns:[]};var ee=i("VU/8")(Qt,te,!1,function(t){i("B8qW")},null,null).exports,ie={components:{loading:R.a,roShadowGroupPop:ee},props:{isShow:{type:Boolean},updateRenderTree:{type:Function}},data:function(){return{sdGrpPopVisible:!1,sdGrpData:[],isEdit:!1,editGroup:{},sdGrpLoading:!1}},methods:{getSdGrpData:function(){var t=this;return new m.a(function(e,i){var a=y.b+"pe/shadow/group/m1";_.a.get(a).then(function(i){if(0==i.data.responseCode){var a=i.data.data.content;t.sdGrpData=a,e(a)}else t.$message.error(t.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})})},sdGrpClose:function(){this.$emit("rootShadowGroupclose",!1)},showSdGrpPop:function(t){t?(this.isEdit=!0,this.editGroup=t):this.isEdit=!1,this.sdGrpPopVisible=!0},updateConfigTree:function(){this.updateRenderTree(!0)},delSingleSdGrp:function(t){var e=this;this.$confirm(this.$t("lg.itdelete")+t+", "+this.$t("lg.continue")+"?",this.$t("lg.tips"),{confirmButtonText:this.$t("lg.yes"),cancelButtonText:this.$t("lg.cancel"),type:"warning"}).then(function(){e.sdGrpLoading=!0;var i=y.b+"pe/shadow/group/"+t;_.a.delete(i).then(function(t){0==t.data.responseCode?(e.getSdGrpData(),e.updateConfigTree(),e.$message({message:e.$t("lg.success"),type:"success"})):e.$message.error(e.$t("lg.failed")+": "+t.data.data.message),e.sdGrpLoading=!1}).catch(function(t){console.log(t)})}).catch(function(){e.$message({type:"info",message:e.$t("lg.canceled")})})}}},ae={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"60%",title:"shadow Group",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.sdGrpClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-button",{staticClass:"addSdGrpBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.showSdGrpPop()}}},[t._v(t._s(t.$t("lg.addSdGrp")))]),t._v(" "),0==t.sdGrpData.length?i("div",{staticClass:"nodata-box sdGrpTable"},[t._v(t._s(t.$t("lg.nodata")))]):i("table",{staticClass:"sdGrpTable"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.clusterName")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.masterNode")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.backupNode")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.virtualIP")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.sdGrpData,function(e){return i("tr",[i("td",[t._v(t._s(e.groupName))]),t._v(" "),i("td",[t._v(t._s(e.masterNode.snodeId)+" ("+t._s(e.masterNode.hostName)+")")]),t._v(" "),i("td",[i("ul",{staticClass:"sdGrpParamsList"},t._l(e.backupNodes,function(e){return i("li",[t._v(t._s(e.snodeId)+" ("+t._s(e.hostName)+")")])}))]),t._v(" "),i("td",[i("ul",{staticClass:"sdGrpParamsList"},t._l(e.virtualIPs,function(e){return i("li",[t._v(t._s(e))])}))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delSingleSdGrp(e.groupName)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sdGrpLoading,expression:"sdGrpLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1),t._v(" "),i("ro-shadow-group-pop",{attrs:{isShow:t.sdGrpPopVisible,isGrpEdit:t.isEdit,editGrpObj:t.editGroup},on:{updateSdGrpData:t.getSdGrpData,sdGrpPopclose:function(e){t.sdGrpPopVisible=!1,t.isEdit=!1},updateConfigTree:t.updateConfigTree}})],1)},staticRenderFns:[]};var ne=i("VU/8")(ie,ae,!1,function(t){i("4HSl")},"data-v-e04db0cc",null).exports,re={components:{loading:R.a},props:{isShow:{type:Boolean}},data:function(){return{asloading:!1,addattfrom:{attackType:"",remark:"",score:8},addattfromRules:{attackType:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],score:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.number"),trigger:"change"}]}}},methods:{attClose:function(){this.$refs.addattfrom.resetFields(),this.$emit("addattactypeclose",!1)},addattype:function(){var t=this,e=this;e.$refs.addattfrom.validate(function(i){if(i){e.asloading=!0;var a=y.b+"waf/attacktype";_.a.put(a,{attackType:e.addattfrom.attackType,remark:e.addattfrom.remark,score:e.addattfrom.score}).then(function(i){0==i.data.responseCode?(e.attClose(),e.$message({type:"success",message:e.$t("lg.success")}),t.$emit("addattdone")):t.$message.error(i.data.data.message),e.asloading=!1}).catch(function(t){console.log(t)})}})}}},oe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"60%",title:"增加攻击类型",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.attClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"addattfrom",attrs:{model:t.addattfrom,rules:t.addattfromRules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"攻击类型",prop:"attackType"}},[i("el-input",{model:{value:t.addattfrom.attackType,callback:function(e){t.$set(t.addattfrom,"attackType","string"==typeof e?e.trim():e)},expression:"addattfrom.attackType"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{model:{value:t.addattfrom.remark,callback:function(e){t.$set(t.addattfrom,"remark","string"==typeof e?e.trim():e)},expression:"addattfrom.remark"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分数",prop:"score"}},[i("el-input",{model:{value:t.addattfrom.score,callback:function(e){t.$set(t.addattfrom,"score","string"==typeof e?e.trim():e)},expression:"addattfrom.score"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.addattype}},[t._v("增加")]),t._v(" "),i("el-button",{on:{click:t.attClose}},[t._v("取消")])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.asloading,expression:"asloading"}],attrs:{title:"数据处理中..."}})],1)],1)},staticRenderFns:[]};var se=i("VU/8")(re,oe,!1,function(t){i("hxxP")},"data-v-eac7a352",null).exports,le={components:{loading:R.a},props:{isShow:{type:Boolean},data:{type:Object}},watch:{isShow:function(){this.addattfrom.attackType=this.data.attackType,this.addattfrom.remark=this.data.remark,this.addattfrom.score=this.data.score,this.addattfrom.id=this.data.id}},data:function(){return{asloading:!1,addattfrom:{id:"",attackType:"",remark:"",score:8},addattfromRules:{attackType:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],score:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.number"),trigger:"change"}]}}},methods:{attClose:function(){this.$refs.addattfrom.resetFields(),this.$emit("updateattactypeclose",!1)},updateatttype:function(){var t=this,e=this;e.$refs.addattfrom.validate(function(i){if(i){e.asloading=!0;var a=y.b+"waf/attacktype";_.a.post(a,{id:e.addattfrom.id,attackType:e.addattfrom.attackType,remark:e.addattfrom.remark,score:e.addattfrom.score}).then(function(i){0==i.data.responseCode?(e.attClose(),e.$message({type:"success",message:e.$t("lg.success")}),t.$emit("updateattdone")):t.$message.error(i.data.data.message),e.asloading=!1}).catch(function(t){console.log(t)})}})}}},ce={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"60%",title:"修改攻击类型",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.attClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"addattfrom",attrs:{model:t.addattfrom,rules:t.addattfromRules,"label-width":"100px"}},[i("el-form-item",{staticStyle:{display:"none"},attrs:{label:"id",prop:"id"}},[i("el-input",{model:{value:t.addattfrom.id,callback:function(e){t.$set(t.addattfrom,"id","string"==typeof e?e.trim():e)},expression:"addattfrom.id"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"攻击类型",prop:"attackType"}},[i("el-input",{model:{value:t.addattfrom.attackType,callback:function(e){t.$set(t.addattfrom,"attackType","string"==typeof e?e.trim():e)},expression:"addattfrom.attackType"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"备注",prop:"remark"}},[i("el-input",{model:{value:t.addattfrom.remark,callback:function(e){t.$set(t.addattfrom,"remark","string"==typeof e?e.trim():e)},expression:"addattfrom.remark"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"分数",prop:"score"}},[i("el-input",{model:{value:t.addattfrom.score,callback:function(e){t.$set(t.addattfrom,"score","string"==typeof e?e.trim():e)},expression:"addattfrom.score"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.updateatttype}},[t._v("更新")]),t._v(" "),i("el-button",{on:{click:t.attClose}},[t._v("取消")])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.asloading,expression:"asloading"}],attrs:{title:"数据处理中..."}})],1)],1)},staticRenderFns:[]};var de=i("VU/8")(le,ce,!1,function(t){i("7DaJ")},"data-v-8c696f7a",null).exports,ue={components:{loading:R.a,addattactype:se,editattactype:de},props:{isShow:{type:Boolean}},data:function(){return{asloading:!1,addattactypeShow:!1,editattactypeShow:!1,attactypeData:[],editdata:{}}},methods:{delatt:function(t){var e=this,i=y.b+"waf/attacktype/"+t;e.asloading=!0;var a={accurateMatch:"精确匹配",suffixMatch:"后缀匹配",pathMatch:"路径匹配",dynamicurl:"动态url",customMatch:"自定义配置",dynamicMatch:"动态匹配",all:"通用配置"};_.a.delete(i).then(function(t){if(0==t.data.responseCode)e.$message({type:"success",message:e.$t("lg.success")}),e.getAttactypeData();else if("WS0018"==t.data.reasonCode){for(var i=t.data.data,n="<div>该攻击类型在以下路径还存在配置：</div><ul>",r=void 0,o=void 0,s=0;s<i.length;s++)o=(r=i[s]).domainPort,"/"==r.locationType&&(r.locationType="all"),n+="<li>域名："+r.domain+"    端口："+o+"    路径："+r.location+"    匹配类型：["+a[r.locationType]+"]</li>";n+="</ul>",e.$message({dangerouslyUseHTMLString:!0,message:n})}else e.$message.error(t.data.data.message);e.asloading=!1}).catch(function(t){console.log(t)})},addAttactype:function(){this.addattactypeShow=!0},editatt:function(t){console.log(t),this.editdata=t,this.editattactypeShow=!0},attClose:function(){this.$emit("attactypeclose",!1)},getAttactypeData:function(){var t=this;return new m.a(function(e,i){var a=y.b+"waf/attacktype";_.a.get(a).then(function(i){if(0==i.data.responseCode){var a=i.data.data;t.attactypeData=a,e(a)}else t.$message.error(t.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})})}}},fe={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"60%",title:"攻击类型",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.attClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-button",{staticClass:"addSdGrpBtn",attrs:{type:"primary",size:"mini"},on:{click:t.addAttactype}},[t._v("增加")]),t._v(" "),0==t.attactypeData.length?i("div",{staticClass:"nodata-box sdGrpTable"},[t._v("暂无数据")]):i("table",{staticClass:"sdGrpTable"},[i("thead",[i("tr",[i("th",[t._v("ID")]),t._v(" "),i("th",[t._v("攻击类型")]),t._v(" "),i("th",[t._v("分数")]),t._v(" "),i("th",[t._v("备注")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.attactypeData,function(e){return i("tr",[i("td",[t._v(t._s(e.id))]),t._v(" "),i("td",[t._v(t._s(e.attackType))]),t._v(" "),i("td",[t._v(t._s(e.score)+" ")]),t._v(" "),i("td",[t._v(t._s(e.remark)+" ")]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editatt(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delatt(e.id)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("addattactype",{attrs:{isShow:t.addattactypeShow},on:{addattactypeclose:function(e){t.addattactypeShow=!1},addattdone:t.getAttactypeData}}),t._v(" "),i("editattactype",{attrs:{isShow:t.editattactypeShow,data:t.editdata},on:{updateattactypeclose:function(e){t.editattactypeShow=!1},updateattdone:t.getAttactypeData}}),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.asloading,expression:"asloading"}],attrs:{title:"数据处理中..."}})],1)},staticRenderFns:[]};var he=i("VU/8")(ue,fe,!1,function(t){i("vRYt")},"data-v-b0c1591c",null).exports,me=i("xrTZ").Base64,pe={components:{stEdit:vt,stUpstreamlist:dt,streampop:rt,attactypepop:he,dynamicChange:D,searchtree:I,shadowpop:B,sdWarningMode:P.a,sdSeniorInstruct:q.a,sdGlbInstruct:U.a,sdCustomUpstream:V.a,sdBatchInstruct:Y,pushmodal:K,cersmodal:et,saveconfmodal:it.a,domainpop:ot.a,dmUpstreamlist:st.a,dmRedict:ut.a,dmLimitReq:ft.a,dmGlbInstruct:ht.a,dmEdit:mt.a,lcProtectInstruct:$t.a,lcSpecialProtectInstruct:Ct.a,lcSkipInstruct:St.a,lcSeniorInstruct:Dt.a,lcCustomInstruct:jt.a,lcWaf2:Tt,lcEdit:It.a,roDoclist:qt,roRules:Gt,roAddrule:zt,roRulesets:Kt,roShadowGroup:ne,dmtransparent:wt,dmkeepalive:kt},data:function(){return{attactypepopShow:!1,attactypeData:[],productName:j.a.state.productName,myRole:sessionStorage.getItem("myRoles"),shadowNodeData:[],defaultProps:{children:"children",label:"label"},currentSdNodeId:"",currentSdNodeName:"",isSdRootmenuShow:!0,isNoConfigData:!1,jsonData:{},nodeDomainList:[],firstNodeDomainList:{},curSelectedDomain:"",isCurSelectedDm:!1,newShadowNodeOpt:[],shadowObj:{snodeId:"",name:""},domainObj:{domainName:"",port:80},locationObj:{type:"",name:"",nameTxt:""},instructObj:{name:""},isShadowStatusLoading:!0,shadowStatusObj2:{status:3,ip:"",version:"--"},shadowStatusObj:{},isGroupInfo:{},isShadowGroup2:!1,isShadowGrpNode:!1,crts:[],pems:[],diplomas:[],keys:[],shadownodes:[],isSvCkLoading:!1,domainStatusData:[],svCkfailed:!1,dynamicChangeShow:!1,treeSearchShow:!1,shadowDialogVisible:!1,shadowStreamShow:!1,sdWarningModemodalShow:!1,sdSeniorInstructmodalShow:!1,sdGlbInstructmodalShow:!1,sdCustomUpstreammodalShow:!1,sdBatchInstructmodalShow:!1,pushmodalShow:!1,cersmodalShow:!1,saveconfmodalShow:!1,domainDialogVisible:!1,upstreamlistmodalShow:!1,streamlistmodalShow:!1,redirectmodalShow:!1,dmLimReqmodalShow:!1,dmGlbInstructmodalShow:!1,dmEditmodalShow:!1,stEditmodalShow:!1,dmtransparentShow:!1,dmkeepaliveShow:!1,lcprotectInstructmodalShow:!1,lcSpecialProtectInstructmodalShow:!1,lcSkipInstructmodalShow:!1,lcSeniorInstructmodalShow:!1,lcCustomInstructmodalShow:!1,lcwafmodalShow:!1,dmWafData:{},lcwafData:{},lcEditmodalShow:!1,redirect302Url:"",dmEditObj:{},stEditObj:{},rootdoclistShow:!1,rootrulesShow:!1,rootaddruleShow:!1,rootdoclistData:[],rootrulesData:[],rootruleSid:"",rootrulesetsShow:!1,rootRulesetsData:[],rootShadowGroupShow:!1,isDenyUrl:!1}},watch:{"$store.state.isMenuShow":function(){this.configtree(this.firstNodeDomainList)}},created:function(){var t=this;this.$store.state.productName||this.getProductname(),this.$store.state.contentLoading=!0,window.addEventListener("resize",function(){if("/config"==t.$route.path){t.configtree(t.firstNodeDomainList);var e=document.querySelectorAll(".cm-contextmenu");g()(e).slice(0).forEach(function(t){t.style.display="none"})}})},mounted:function(){var t=this;this.dataRenderTree(),document.querySelector("body").onclick=function(){var e=t.$refs.shadowmenuref;e&&(e.style.display="none")}},methods:{getProductname:function(){var t=this,e=y.c+"pe/shadow/kv/productName";_.a.get(e).then(function(e){if(0==e.data.responseCode){var i=e.data.data;t.productName=i,t.$store.state.productName=i}})},shadownodeAddStream:function(){this.shadowStreamShow=!0},shadownodeAddDm:function(){this.getCrts(),this.getKeys(),this.shadowDialogVisible=!0},getDataFromDm:function(t){var e=this;e.firstNodeDomainList=t,e.$nextTick(function(){e.configtree(e.firstNodeDomainList)})},shadowNodeClick:function(t){if(!t.id)return!1;var e=this;e.currentSdNodeId=t.id,e.currentSdNodeName=t.label,e.firstNodeDomainList={},e.$nextTick(function(){var t=document.querySelectorAll(".cm-contextmenu");g()(t).slice(0).forEach(function(t){t.style.display="none"}),e.dataRenderTree()})},shadowNodeCtm:function(t,e){this.shadowObj.snodeId=e.id,this.shadowObj.name=e.label;this.$refs.shadowmenuref.style.left="0px",this.$refs.shadowmenuref.style.bottom="10px",this.$refs.shadowmenuref.style.display="block"},sdRenderContent:function(t,e){var i=this,a=e.node,n=e.data;e.store;return n.children?t("span",{class:"sdMag-tree-node"},[t("span",null,[a.label]),t("span",{directives:[{name:"show",value:"ADMIN"==this.myRole}]},[t("span",{directives:[{name:"show",value:this.isSdRootmenuShow}]},[t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.showDynamicChange()}}},["动态变换"]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.roDoclist()}}},["文件管理"]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.roRules()}}},["Rules查看"]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.roAddRule()}}},["Rule增加"]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.attactypeMsg()}}},["攻击类型管理"]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.roRulesets()}}},["RuleSets"]),t("el-button",{attrs:{size:"small",type:"text"},on:{click:function(t){return i.roShadowGroup()}}},["Shadow集群管理"])]),t("el-button",{attrs:{size:"small",type:"text",icon:this.isSdRootmenuShow?"el-icon-caret-left":"el-icon-caret-right"},on:{click:function(t){return i.isSdRootmenuShow=!i.isSdRootmenuShow}}},[])])]):t("span",{class:"sdMag-tree-node"},[t("span",null,[a.label])])},getCurrentUserDomain:function(){var t=this;return new m.a(function(e,i){var a=t.$store.state.user.name||sessionStorage.getItem("myname"),n=y.b+"pe/shadow/user/accessdomain/"+a;_.a.get(n).then(function(t){if(0==t.data.responseCode){var i=t.data.data?t.data.data.domains:[];e(i)}})})},getElementFromArrobj:function(t,e,i){return t.find(function(t){return t.name===e&&t.domainPort==i})},isEqualFor2Objs:function(t,e){return t.name==e.name&&t.domainPort==e.domainPort?this.isCurSelectedDm=!0:this.isCurSelectedDm=!1,this.isCurSelectedDm},isObjEmpty:function(t){return 0===f()(t).length},dataRenderTree:function(t){var e=this;return d()(n.a.mark(function i(){var a,r,s;return n.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=e,r=[],i.next=4,a.getCurrentUserDomain().then(function(t){r=t.map(function(t){return me.encode(t)})});case 4:s=a.$store.state.configServerUrl?a.$store.state.configServerUrl:y.b+"topology",_.a.get(s).then(function(i){if(0==i.data.responseCode){for(var n=i.data,s=void 0,c=void 0,d=void 0,u=void 0,f=0;f<n.data.length;f++)c=(s=n.data[f]).domains,d=s.streams,u=[].concat(l()(c),l()(d)),s.dmSm=u,delete s.domains,delete s.streams;var h=o()(n);h=(h=(h=(h=(h=(h=(h=(h=h.replace(/\bhostName\b/g,"name")).replace(/\bdmSm\b/g,"children")).replace(/\blocation\b/g,"children")).replace(/\burl\b/g,"children")).replace(/\blocationName\b/g,"name")).replace(/\bdomainName\b/g,"name")).replace(/\burlName\b/g,"name")).replace(/\bstreamName\b/g,"name");var m=JSON.parse(h);if("USER"==a.myRole&&m.data.forEach(function(t){t.children=t.children.filter(function(t){return r.includes(t.name)})}),!a.$store.state.configServerUrl){var p=[],g={};m.data.forEach(function(t){t.isShadowGroup&&(g={masterNode:t.masterNode,backupNodes:t.backupNodes,virtualIPs:t.virtualIPs}),e.isGroupInfo=g,"USER"==a.myRole?t.children.length>0&&p.push({id:t.snodeId,label:t.isShadowGroup?t.name+"(集群)":t.name,isShadowGroup:t.isShadowGroup,isgroupinfo:g}):"ADMIN"==a.myRole&&p.push({id:t.snodeId,label:t.isShadowGroup?t.name+"(集群)":t.name,isShadowGroup:t.isShadowGroup,isgroupinfo:g})});var v=[{label:e.productName,children:p}];e.newShadowNodeOpt=p,e.shadowNodeData=p.length>0?v:[],e.currentSdNodeId=e.currentSdNodeId?e.currentSdNodeId:p.length>0&&p[0].id,e.currentSdNodeName=e.currentSdNodeName?e.currentSdNodeName:p.length>0&&p[0].label,e.isShadowGroup2=e.isShadowGroup2?e.isShadowGroup2:p.length>0&&p[0].isShadowGroup,t&&(e.currentSdNodeId=p[0].id,e.currentSdNodeName=p[0].label,e.isShadowGroup2=p[0].isShadowGroup,e.isGroupInfo=p[0].isgroupinfo),e.$nextTick(function(){e.currentSdNodeId&&e.$refs.sdNodeTree.setCurrentKey(a.currentSdNodeId)})}a.getShadowstatus(a.currentSdNodeId);var b=m.data.filter(function(t){return t.snodeId===e.currentSdNodeId});if(0==b.length?a.isNoConfigData=!0:a.isNoConfigData=!1,a.nodeDomainList=b[0]?b[0].children:[],a.isObjEmpty(a.firstNodeDomainList))a.nodeDomainList.length>0?a.firstNodeDomainList=a.nodeDomainList[0]:(a.firstNodeDomainList={},a.isNoConfigData=!0);else{var _=a.firstNodeDomainList.name,w=a.firstNodeDomainList.domainPort,y=a.getElementFromArrobj(a.nodeDomainList,_,w);a.firstNodeDomainList=y||a.nodeDomainList[0]}a.$nextTick(function(){a.configtree(a.firstNodeDomainList)}),a.$store.state.configServerUrl="",a.$store.state.contentLoading=!1}else e.$message.error(a.$t("lg.failed")+":"+i.data.data.message)}).catch(function(t){console.log(t)});case 6:case"end":return i.stop()}},i,e)}))()},configtree:function(t){var e=this;if(e.$refs.shadowtree2){var i=e.$refs.shadowtree2.clientWidth,a={top:60,right:120,bottom:60,left:240},n=i/6,r=v.g().nodeSize([30,n+20]),o=v.e("#shadowtree2").select("svg").attr("viewBox",[-a.left,-a.top,i,10]);if(o.selectAll("*").remove(),0!=f()(t).length){var s=0,l=void 0,c=void 0,d=v.c(t,function(t){return t.children}),u=v.d().x(function(t){return t.y}).y(function(t){return t.x});d.x0=10,d.y0=n/3,d.children&&d.children.forEach(function(t,e){t.children&&t.children.forEach(p)});var h=o.append("g").attr("fill","none").attr("stroke","#ccc").attr("stroke-opacity",1).attr("stroke-width",1.5),m=o.append("g").attr("cursor","pointer").attr("pointer-events","all");!function t(n){var p=v.b&&v.b.altKey?2500:750,g=d.descendants().reverse(),b=d.links();r(d);var _=d,w=d;d.eachBefore(function(t){t.x<_.x&&(_=t),t.x>w.x&&(w=t)});var y=w.x-_.x+a.top+a.bottom,x=o.transition().duration(p).attr("viewBox",[-a.left,_.x-a.top,i,y]).tween("resize",window.ResizeObserver?null:function(){return function(){return o.dispatch("toggle")}}),k=m.selectAll("g.node").data(g,function(t){return t.id||(t.id=++s)}),$=k.enter().append("g").attr("class","node").attr("transform",function(t){return"translate("+n.y0+","+n.x0+")"}).attr("fill-opacity",0).attr("stroke-opacity",0).on("dblclick",function(t,i){c&&clearTimeout(c);var a=t.data;if(a.hasOwnProperty("snodeId")){var n=a.snodeId,r=a.name;e.shadowObj.snodeId=n,e.shadowObj.name=r,e.getCrts(),e.getKeys(),e.shadowDialogVisible=!0}else if(a.hasOwnProperty("domainPort")){e.domainDialogVisible=!0;var o=me.decode(a.name),s=a.domainPort;e.domainObj.domainName=o,e.domainObj.port=s;var l=e.currentSdNodeId?e.currentSdNodeId:e.newShadowNodeOpt.length>0&&e.newShadowNodeOpt[0].id;e.shadowObj.snodeId=l}else if(a.hasOwnProperty("locationType")){if("ZGVueV91cmw="==a.name)return!1;var d=t.parent.data;if("suffixMatch"==a.locationType)if("KC4qXC8pKyQ="==a.name)e.locationObj.nameTxt="/";else{var u=me.decode(a.name),f=/\((.*)\)/;e.locationObj.nameTxt=f.test(u)?u.match(f)[1]:u}else e.locationObj.nameTxt=me.decode(a.name);e.locationObj.name=me.decode(a.name),e.locationObj.type=a.locationType,e.domainObj.domainName=me.decode(d.name),e.domainObj.port=d.domainPort;var h=e.currentSdNodeId?e.currentSdNodeId:e.newShadowNodeOpt.length>0&&e.newShadowNodeOpt[0].id;e.shadowObj.snodeId=h}}).on("contextmenu",function(t,i){v.b.preventDefault();var a=void 0,n=void 0;v.b.pageX||v.b.pageY?(a=v.b.pageX,n=v.b.pageY+e.$refs.configtreeBoxref.scrollTop):(v.b.clientX||v.b.clientY)&&(a=v.b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,n=v.b.clientY+document.body.scrollTop+document.documentElement.scrollTop),clearTimeout(l),v.f(".cm-contextmenu").style("display","none");var r,o,s,c,d=t.data;if(d.hasOwnProperty("snodeId")){var u=d.snodeId,f=d.name;e.shadowObj.snodeId=u,e.shadowObj.name=f,(r=v.e(".shadowmenu")).style("display","block"),r.style("left",a+"px"),d.isShadowGroup?(e.isShadowGrpNode=!0,n>200?r.style("top",n-200+"px"):r.style("top",n+55+"px")):(e.isShadowGrpNode=!1,n>270?r.style("top",n-270+"px"):r.style("top",n+55+"px"))}else if(d.hasOwnProperty("domainPort")){var h=me.decode(d.name),m=d.domainPort;e.domainObj.domainName=h,e.domainObj.port=m;var p=e.currentSdNodeId?e.currentSdNodeId:e.newShadowNodeOpt.length>0&&e.newShadowNodeOpt[0].id;e.shadowObj.snodeId=p,(o=v.e(".domainmenu")).style("display","block"),o.style("left",a-215+"px"),o.style("top",n-320+"px")}else if(d.hasOwnProperty("streamPort")){var g=me.decode(d.name);e.domainObj.domainName=g;var b=e.currentSdNodeId?e.currentSdNodeId:e.newShadowNodeOpt.length>0&&e.newShadowNodeOpt[0].id;e.shadowObj.snodeId=b,(c=v.e(".streammenu")).style("display","block"),c.style("left",a-215+"px"),c.style("top",n-280+"px")}else if(d.hasOwnProperty("locationType")){var _=t.parent.data;if("suffixMatch"==d.locationType)if("KC4qXC8pKyQ="==d.name)e.locationObj.nameTxt="/";else{var w=me.decode(d.name),y=/\((.*)\)/;e.locationObj.nameTxt=y.test(w)?w.match(y)[1]:w}else e.locationObj.nameTxt=me.decode(d.name);e.locationObj.name=me.decode(d.name),e.locationObj.type=d.locationType,e.domainObj.domainName=me.decode(_.name),e.domainObj.port=_.domainPort;var x=e.currentSdNodeId?e.currentSdNodeId:e.newShadowNodeOpt.length>0&&e.newShadowNodeOpt[0].id;e.shadowObj.snodeId=x,(s=v.e(".locationmenu")).style("display","block"),s.style("left",a-215+"px"),s.style("top",n-320+"px")}v.e("body").on("click",function(){v.f(".cm-contextmenu").style("display","none")})}).on("click",function(e,i){c&&clearTimeout(c),c=setTimeout(function(){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),t(e)},300)}).on("mouseover",function(t,i){var a,n=t.data,r=void 0,o=void 0;v.b.pageX||v.b.pageY?(r=v.b.pageX,o=v.b.pageY):(v.b.clientX||v.b.clientY)&&(r=v.b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,o=v.b.clientY+document.body.scrollTop+document.documentElement.scrollTop),l=setTimeout(function(){if(n.hasOwnProperty("snodeId")){var t=n.snodeId,i=n.name,s=n.isShadowGroup;e.shadowObj.snodeId=t,e.shadowObj.name=s?i+"(集群)":i,e.getShadowstatus(t),(a=v.e(".onoff-box")).style("display","block"),a.style("left",r+"px"),a.style("top",o+"px")}else if(n.hasOwnProperty("domainPort")){t=e.currentSdNodeId?e.currentSdNodeId:e.newShadowNodeOpt.length>0&&e.newShadowNodeOpt[0].id,i="";var l=n.domainPort,c=me.decode(n.name);e.domainObj.port=l,e.domainObj.domainName=c,e.getDomianstatus(t,i,c,l),(a=v.e(".onoff-DomainBox")).style("display","block"),a.style("left",r-210+"px"),a.style("top",o-290+"px")}else if(n.hasOwnProperty("locationType")){if("suffixMatch"==n.locationType)if("KC4qXC8pKyQ="==n.name)e.locationObj.nameTxt="/";else{var d=me.decode(n.name),u=/\((.*)\)/;e.locationObj.nameTxt=u.test(d)?d.match(u)[1]:d}else e.locationObj.nameTxt=me.decode(n.name);(a=v.e(".onoff-LocationBox")).style("display","block"),a.style("left",r-210+"px"),a.style("top",o-290+"px")}else if(1==f()(n).length){var h=me.decode(n.name);e.instructObj.name=h,(a=v.e(".onoff-InstructBox")).style("display","block"),a.style("left",r-210+"px"),a.style("top",o-290+"px")}},1500)}).on("mouseout",function(t,e){clearTimeout(l);var i=t.data;i.hasOwnProperty("snodeId")?v.e(".onoff-box").style("display","none"):i.hasOwnProperty("domainPort")?v.e(".onoff-DomainBox").style("display","none"):i.hasOwnProperty("locationType")?v.e(".onoff-LocationBox").style("display","none"):v.e(".onoff-InstructBox").style("display","none")});$.append("circle").attr("class","node").attr("r",6).attr("fill",function(t){return t._children?"#606266":"#fff"}).style("stroke",function(t){if(1==t.depth){var e=t.data.locationType;return"accurateMatch"==e?"#39a8ef":"suffixMatch"==e?"#34ab83":"pathMatch"==e?"#ffc700":"dynamicMatch"==e?"#800093":"customMatch"==e?"#d2620a":"#c6b38e"}if(0==t.depth&&t.data.hasOwnProperty("streamPort"))return"#d2620a"}),$.append("text").attr("dy","0.35em").attr("x",function(t){return t.data.snodeId?-13:t.children||t._children?-13:13}).attr("text-anchor",function(t){return t.data.snodeId?"end":t.children||t._children?"end":"start"}).text(function(t){var e=t.data;if(e.hasOwnProperty("snodeId")){var i=e.name;return(i=e.isShadowGroup?e.name+"(集群)":e.name).length>=13?i.slice(0,10)+"...":i}if(e.hasOwnProperty("domainPort")){var a=me.decode(e.name);return(a.length>=30?a.slice(0,27)+"...":a)+":"+e.domainPort}if(e.hasOwnProperty("streamPort")){var n=me.decode(e.name);return n.length>=30?n.slice(0,27)+"...":n}if(e.hasOwnProperty("locationType")){if("suffixMatch"==e.locationType){if("KC4qXC8pKyQ="==e.name)return"/";var r=me.decode(e.name),o=/\((.*)\)/,s=o.test(r)?r.match(o)[1]:r;return s.length>=35?s.slice(0,32)+"...":s}var l=me.decode(e.name);return l.length>=35?l.slice(0,32)+"...":l}if(1==f()(e).length){var c=me.decode(e.name);return c.length>=40?c.slice(0,37)+"...":c}}).style("fill",function(t){return"on"==t.data.waf?"#ff0000":""}).clone(!0).lower().attr("stroke-linejoin","round").attr("stroke-width",3).attr("stroke","white"),k.merge($).transition(x).attr("transform",function(t){return"translate("+t.y+","+t.x+")"}).attr("fill-opacity",1).attr("stroke-opacity",1).select("circle.node").attr("r",6).style("fill",function(t){return t._children?"#606266":"#fff"}).attr("cursor","pointer");k.exit().transition(x).duration(p).attr("transform",function(t){return"translate("+n.y+","+n.x+")"}).attr("fill-opacity",0).attr("stroke-opacity",0).remove();var C=h.selectAll("path").data(b,function(t){return t.target.id}),S=C.enter().append("path").attr("d",function(t){var e={x:n.x0,y:n.y0};return u({source:e,target:e})});C.merge(S).transition(x).duration(p).attr("d",u),C.exit().transition(x).duration(p).attr("d",function(t){var e={x:n.x,y:n.y};return u({source:e,target:e})}).remove(),d.eachBefore(function(t){t.x0=t.x,t.y0=t.y})}(d)}}function p(t){t.children&&(t._children=t.children,t._children.forEach(p),t.children=null)}},showDynamicChange:function(){var t=this;this.dynamicChangeShow?this.dynamicChangeShow=!1:this.$refs.dynamicChange.getDynamicStatus().then(function(e){t.treeSearchShow=!1,t.dynamicChangeShow=!0})},showSearch:function(){this.dynamicChangeShow=!1,this.treeSearchShow=!this.treeSearchShow},getCrts:function(){var t=this,e=this.shadowObj.snodeId;if(e){var i=y.b+"pe/file/client/"+e+"/crt";_.a.get(i).then(function(e){0==e.data.responseCode?(t.crts=e.data.data,t.getPems()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}},getPems:function(){var t=this,e=this.shadowObj.snodeId;if(e){var i=y.b+"pe/file/client/"+e+"/pem";_.a.get(i).then(function(e){0==e.data.responseCode?(t.pems=e.data.data,t.diplomas=t.crts.concat(t.pems)):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}},getKeys:function(){var t=this,e=this.shadowObj.snodeId;if(e){var i=y.b+"pe/file/client/"+e+"/key";_.a.get(i).then(function(e){0==e.data.responseCode?t.keys=e.data.data:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}},getShadowstatus:function(t){var e=this;this.isShadowStatusLoading=!0;var i=y.b+"pe/shadow/snode/"+t;_.a.get(i).then(function(t){if(0==t.data.responseCode){var i=t.data.data;e.shadowStatusObj2.status=i.masterNode.status,e.shadowStatusObj2.ip=i.masterNode.ip,e.shadowStatusObj2.version=i.masterNode.version,e.shadowStatusObj=JSON.parse(o()(i))}else e.$message.error(e.$t("lg.failed")+": "+t.data.data.message);e.isShadowStatusLoading=!1}).catch(function(t){console.log(t)})},getDomianstatus:function(t,e,i,a){var n=this;this.domainStatusData=[],this.svCkfailed=!1,this.isSvCkLoading=!0;var r=y.b+"pe/shadow/domain/server/status?snodeId="+t+"&domainName="+i+"&domainPort="+a;_.a.get(r).then(function(t){if(0==t.data.responseCode){var r=t.data.data.server;n.getUpstreamStatus(e,i,a).then(function(t){var e,i=[];e=t,r.forEach(function(t){var a=e.findIndex(function(e){return e.key===t.name});a>-1?i.push({name:t.name,status:t.status,doc_count:e[a].doc_count}):i.push({name:t.name,status:t.status,doc_count:"--"})}),n.domainStatusData=i})}else n.svCkfailed=!0;n.isSvCkLoading=!1}).catch(function(t){console.log(t)})},getUpstreamStatus:function(t,e,i){var a=this;return new m.a(function(n,r){var o=a,s=o.$store.state.mydatedata.starttime,l=o.$store.state.mydatedata.endtime,c=Object(k.a)(s),d=Object(k.a)(l),u=c||Object(k.a)(new Date(Date.now()-o.$store.state.dateTimeLong)),f=d||Object(k.a)(new Date),h="";h="80"==i||"443"==i?e:e+":"+i,x.a.search({index:"shadow-filebeat*",body:{size:0,query:{bool:{filter:[{range:{"@timestamp":{from:u,to:f,include_lower:!0,include_upper:!0}}}],must:[{terms:{"host.name":[t]}},{term:{"shadow.access.domain":h}},{query_string:{query:"shadow.access.response_code:200"}},{query_string:{fields:["shadow.access.upstream_ip"],query:"-\\-"}}]}},aggs:{GroupByUpstream:{terms:{field:"shadow.access.upstream_ip",size:500}}}}}).then(function(t){var e=t.aggregations.GroupByUpstream.buckets;n(e)})})},sdStart:function(){var t=this,e=y.b+"pe/shadow/"+this.shadowObj.snodeId+"/start";_.a.post(e).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},sdStop:function(){var t=this,e=y.b+"pe/shadow/"+this.shadowObj.snodeId+"/stop";_.a.post(e).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},sdRestart:function(){var t=this,e=y.b+"pe/shadow/"+this.shadowObj.snodeId+"/restart";_.a.post(e).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},sdReset:function(){var t=this;this.$confirm(this.$t("lg.resetshadowtips"),this.$t("lg.tips"),{confirmButtonText:this.$t("lg.yes"),cancelButtonText:this.$t("lg.cancel"),type:"warning"}).then(function(){var e=y.b+"pe/shadow/reset/"+t.shadowObj.snodeId;_.a.post(e).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dataRenderTree()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)})}).catch(function(t){console.log(t)})},sdRecover:function(){var t=this;this.$confirm(this.$t("lg.recovershadowtips"),this.$t("lg.tips"),{confirmButtonText:this.$t("lg.yes"),cancelButtonText:this.$t("lg.cancel"),type:"warning"}).then(function(){var e=y.b+"pe/shadow/reset/default/"+t.shadowObj.snodeId;_.a.post(e).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dataRenderTree()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)})}).catch(function(t){console.log(t)})},sdWarningMode:function(){var t=this;this.$refs.sd_warningMode.getSdWarningModeData().then(function(e){t.sdWarningModemodalShow=!0})},sdSeniorInstruct:function(){this.sdSeniorInstructmodalShow=!0},sdGlbInstruct:function(){var t=this;this.$refs.sd_glbInstruct.getSdGlbInstructData().then(function(e){t.sdGlbInstructmodalShow=!0})},sdCustomUpstream:function(){var t=this;this.$refs.sd_customUpstream.getSdCustUpstreamData().then(function(e){t.sdCustomUpstreammodalShow=!0})},sdBatchInstruct:function(){var t=this;this.$refs.sd_batchInstruct.getSdBatchInstructData().then(function(e){t.sdBatchInstructmodalShow=!0})},sdPushModal:function(){var t=this;this.pushmodalShow=!0;var e=y.b+"pe/shadow/snode";_.a.get(e).then(function(e){0==e.data.responseCode?t.shadownodes=e.data.data:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},sdCersModal:function(){this.getCrts(),this.getKeys(),this.cersmodalShow=!0},sdSaveConf:function(){this.saveconfmodalShow=!0},dmUpstreamlistModal:function(){var t=this;this.$refs.dm_upstreamlist.getDmUpstreamlistData().then(function(e){t.upstreamlistmodalShow=!0})},stUpstreamlistModal:function(){var t=this;this.$refs.st_upstreamlist.getDmUpstreamlistData().then(function(e){t.streamlistmodalShow=!0})},dmRedirectModal:function(){var t=this,e=y.b+"pe/shadow/domain/redirect";_.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port}}).then(function(e){0==e.data.responseCode?(t.redirect302Url=e.data.data.redirect,t.redirectmodalShow=!0):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},setRedirectInput:function(t){this.redirect302Url=t},dmLimReq:function(){var t=this;this.$refs.dm_limitReq.getDmLimReqData().then(function(e){t.dmLimReqmodalShow=!0})},dmTransparentModal:function(){var t=this;this.$refs.dm_transparent.getDmtransparentData().then(function(e){t.dmtransparentShow=!0})},dmKeepalivetModal:function(){var t=this;this.$refs.dm_keepalive.getDmkeepaliveData().then(function(e){t.dmkeepaliveShow=!0})},dmGlbInstruct:function(){var t=this;this.$refs.dm_glbInstruct.getDmGlbInstructData().then(function(e){t.dmGlbInstructmodalShow=!0})},dmEditModal:function(){var t=this;this.getCrts(),this.getKeys();var e=y.b+"/pe/shadow/domain";_.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port}}).then(function(e){if(0==e.data.responseCode){var i=e.data.data.domains;"on"==i.ssl?i.outHttp="https":i.outHttp="http",i.serverPort||(i.serverPort=""),t.dmEditObj=i,t.dmEditmodalShow=!0}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},stEditModal:function(){var t=this,e=y.b+"/pe/shadow/stream";_.a.get(e,{params:{snodeId:this.shadowObj.snodeId,streamName:this.domainObj.domainName}}).then(function(e){if(0==e.data.responseCode){var i=e.data.data.streams;i.streamPort||(i.streamPort=""),t.stEditObj=i,t.stEditmodalShow=!0}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},dmDelete:function(){var t=this,e=y.b+"pe/shadow/domain",i=t.domainObj.domainName;t.$confirm(t.$t("lg.itdelete")+" "+i+", "+t.$t("lg.continue"),t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){_.a.delete(e,{data:{snodeId:t.shadowObj.snodeId,domainName:i,domainPort:t.domainObj.port}}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dataRenderTree()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:t.$t("lg.canceled")})})},stDelete:function(){var t=this,e=y.b+"pe/shadow/stream",i=t.domainObj.domainName;t.$confirm(t.$t("lg.itdelete")+" "+i+", "+t.$t("lg.continue"),t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){_.a.delete(e,{data:{snodeId:t.shadowObj.snodeId,streamName:i}}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dataRenderTree()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:t.$t("lg.canceled")})})},lcProtectInstruct:function(){var t=this;this.$refs.lc_protectInstruct.getLcProtectInstructData().then(function(e){t.lcprotectInstructmodalShow=!0})},lcSpecialProtectInstruct:function(){var t=this;this.$refs.lc_specialProtectInstruct.getLcSpecialProtectInstructData().then(function(e){t.lcSpecialProtectInstructmodalShow=!0})},lcSkipInstruct:function(){var t=this;this.$refs.lc_skipInstruct.getLcSkipInstructData().then(function(e){t.lcSkipInstructmodalShow=!0})},lcSeniorInstruct:function(){this.lcSeniorInstructmodalShow=!0},lcCustomInstruct:function(){var t=this;this.$refs.lc_customInstruct.getLcCustomInstructData().then(function(e){t.lcCustomInstructmodalShow=!0})},lcwafModal:function(){var t=this,e=y.b+"pe/shadow/domain/location/waf",i=this.domainObj,a=this.locationObj;this.$refs.lcwaf2.getAttactypeData().then(function(n){t.attactypeData=n,_.a.get(e,{params:{snodeId:t.shadowObj.snodeId,domainName:i.domainName,domainPort:i.port,locationName:a.name,locationType:a.type}}).then(function(e){0==e.data.responseCode?(t.lcwafData=e.data.data,t.lcwafmodalShow=!0):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})})},lcEditModal:function(){this.lcEditmodalShow=!0},lcDelete:function(){var t=this,e=t.domainObj,i=t.locationObj;t.$confirm(t.$t("lg.itdelete")+" "+i.nameTxt+","+t.$t("lg.continue"),t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){var a=y.b+"pe/shadow/domain/location";_.a.delete(a,{data:{snodeId:t.shadowObj.snodeId,domainName:e.domainName,domainPort:e.port,locationName:i.name,locationType:i.type}}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.dataRenderTree()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){t.$message({type:"info",message:t.$t("lg.canceled")})})},roDoclist:function(){var t=this,e=y.b+"pe/file/cm/conf/";_.a.get(e).then(function(e){if(0==e.data.responseCode){var i=e.data.data;i.forEach(function(t){t.ischecked=!1}),t.rootdoclistData=i,t.rootdoclistShow=!0}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)});var i=y.b+"pe/shadow/snode";_.a.get(i).then(function(e){0==e.data.responseCode?t.shadownodes=e.data.data:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},roRules:function(){var t=this,e=y.b+"waf/rule";_.a.get(e).then(function(e){if(0==e.data.responseCode){var i=e.data.data;i.forEach(function(t){t.ischecked=!1}),t.rootrulesData=i,t.rootrulesShow=!0}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},roAddRule:function(){var t=this;this.$refs.roaddrule.getAttactypeData().then(function(e){t.attactypeData=e;var i=y.b+"waf/rule/id/new";_.a.get(i).then(function(e){0==e.data.responseCode?(t.rootruleSid=e.data.data.data,t.rootaddruleShow=!0):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})})},attactypeMsg:function(){var t=this;this.$refs.attactypepop.getAttactypeData().then(function(e){t.attactypepopShow=!0})},roRulesets:function(){var t=this,e=y.b+"waf/ruleset";_.a.get(e).then(function(e){0==e.data.responseCode?t.rootRulesetsData=e.data.data:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)}),t.rootrulesetsShow=!0},roShadowGroup:function(){var t=this;this.$refs.ro_shadowGroup.getSdGrpData().then(function(e){t.rootShadowGroupShow=!0})}},beforeDestroy:function(){window.removeEventListener("resize",function(){})},filters:{base64Str:function(t){return me.decode(t)},arrayShow:function(t){return t.join("  |  ")}}},ge={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"configtree-wrapper"},[i("div",{staticClass:"shadowManageBox"},[i("div",{staticClass:"sdowMagContent"},[i("div",{staticClass:"sdMagTitle"},[t._v(t._s(t.productName)+"节点显示控制")]),t._v(" "),i("div",{staticClass:"sdMagTreeBox"},[i("el-tree",{ref:"sdNodeTree",attrs:{data:t.shadowNodeData,"default-expand-all":"","node-key":"id",props:t.defaultProps,"highlight-current":"","expand-on-click-node":!1,"render-content":t.sdRenderContent},on:{"node-click":t.shadowNodeClick,"node-contextmenu":t.shadowNodeCtm}}),t._v(" "),i("div",{ref:"shadowmenuref",staticClass:"cm-contextmenu shadowmenu"},[i("ul",{staticClass:"ctx-downmenu"},[i("li",{staticClass:"item",on:{click:t.shadownodeAddDm}},[t._v("域名添加")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.shadownodeAddStream}},[t._v("四层转发配置")]),t._v(" "),i("li",{class:t.isShadowGrpNode?"item toHide":"item",on:{click:t.sdStart}},[t._v(t._s(t.$t("lg.on")))]),t._v(" "),i("li",{class:t.isShadowGrpNode?"item toHide":"item",on:{click:t.sdStop}},[t._v(t._s(t.$t("lg.off")))]),t._v(" "),i("li",{class:t.isShadowGrpNode?"item toHide":"item",on:{click:t.sdRestart}},[t._v(t._s(t.$t("lg.restart")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdReset}},[t._v(t._s(t.$t("lg.onereset")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdRecover}},[t._v(t._s(t.$t("lg.onerecover")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdWarningMode}},[t._v("监控模式")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdSeniorInstruct}},[t._v("高级配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdGlbInstruct}},[t._v("自定义配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdCustomUpstream}},[t._v("自定义Upstream")]),t._v(" "),i("li",{staticClass:"item",on:{click:function(e){t.sdBatchInstruct()}}},[t._v(t._s(t.$t("lg.bundleconfiginstruc")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdPushModal}},[t._v(t._s(t.$t("lg.pushconfig")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdCersModal}},[t._v(t._s(t.$t("lg.cermanage")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.sdSaveConf}},[t._v(t._s(t.$t("lg.saveconfig")))])])])],1)]),t._v(" "),i("dynamic-change",{ref:"dynamicChange",attrs:{isShow:t.dynamicChangeShow}})],1),t._v(" "),i("div",{ref:"configtreeBoxref",staticClass:"configtreeBox"},[i("div",{staticClass:"fixedTop"},[i("div",{staticClass:"matchtips"},[i("span",[i("i",{staticClass:"i1"}),t._v(t._s(t.$t("lg.exactmatch")))]),i("span",[i("i",{staticClass:"i2"}),t._v(t._s(t.$t("lg.suffixmatch")))]),i("span",[i("i",{staticClass:"i3"}),t._v(t._s(t.$t("lg.patchmatch")))]),i("span",[i("i",{staticClass:"i4"}),t._v(t._s(t.$t("lg.dynamicurl")))]),t._m(0),t._v(" "),t._m(1),t._v(" "),i("i",{staticClass:"fa fa-font font-red2"}),t._v(t._s(t.$t("lg.wafstart"))+"\n        ")]),t._v(" "),i("div",{staticClass:"functionbtnBox"},[i("el-button",{attrs:{type:"primary",size:"mini",round:"",icon:"el-icon-search",title:t.treeSearchShow?t.$t("lg.closesearch"):t.$t("lg.clicksearch")},on:{click:t.showSearch}}),t._v(" "),i("el-button",{attrs:{type:"info",size:"mini",round:"",icon:"el-icon-refresh",title:t.$t("lg.f5back")},on:{click:function(e){t.dataRenderTree()}}})],1)]),t._v(" "),i("searchtree",{attrs:{isShow:t.treeSearchShow},on:{updateRenderTree:t.dataRenderTree}}),t._v(" "),i("div",{staticClass:"configtreeBox-l"},[i("div",{staticClass:"nodetitlebox"},[i("h2",{staticClass:"nodetitle"},[t._v(t._s(t.currentSdNodeName))]),t._v(" "),t.isShadowGroup2?i("div",[i("p",[t._v("主节点:"+t._s(t.isGroupInfo.masterNode))]),t._v(" "),i("p",[t._v("从节点:"+t._s(t._f("arrayShow")(t.isGroupInfo.backupNodes)))]),t._v(" "),i("p",[t._v("虚拟IP:"+t._s(t._f("arrayShow")(t.isGroupInfo.virtualIPs)))])]):i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.shadowStatusObj2.status,expression:"shadowStatusObj2.status==1"}],staticClass:"font-green"},[i("i",{staticClass:"el-icon-success shadow-icon-color-success"}),t._v(" "+t._s(t.$t("lg.running")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:2==t.shadowStatusObj2.status,expression:"shadowStatusObj2.status==2"}]},[i("i",{staticClass:"el-icon-warning"}),t._v(" "+t._s(t.$t("lg.ting")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:3==t.shadowStatusObj2.status,expression:"shadowStatusObj2.status==3"}]},[i("i",{staticClass:"el-icon-error"}),t._v(" "+t._s(t.$t("lg.nostatus")))]),t._v(" "),i("p",[t._v("IP:"+t._s(t.shadowStatusObj2.ip))]),t._v(" "),i("p",[t._v("版本:"+t._s(t.shadowStatusObj2.version||"--"))])])]),t._v(" "),i("ul",t._l(t.nodeDomainList,function(e,a){return i("li",{staticClass:"domainitem",class:{active:e.name==t.firstNodeDomainList.name&&e.domainPort==t.firstNodeDomainList.domainPort},attrs:{title:t._f("base64Str")(e.name)},on:{click:function(i){t.getDataFromDm(e)}}},[e.domainPort?i("p",[t._v(t._s(t._f("base64Str")(e.name))+":"+t._s(e.domainPort))]):i("p",[t._v(t._s(t._f("base64Str")(e.name))),i("i",{staticClass:"stream4"},[t._v("[ 四层转发 ]")])]),t._v(" "),i("p",{staticClass:"remarkinfo"},[t._v("("+t._s(e.remark||"暂无备注")+")")])])}))]),t._v(" "),i("div",{staticClass:"configtreeBox-r"},[t.isNoConfigData?i("div",{staticClass:"noConfigData-box"},[t._v(t._s(t.$t("lg.nodata")))]):t._e(),t._v(" "),i("div",{ref:"shadowtree2",staticClass:"configtreeContent",attrs:{id:"shadowtree2"}},[i("svg",{attrs:{id:"svg1"}},[i("g")])]),t._v(" "),t._e(),t._v(" "),i("div",{staticClass:"cm-contextmenu domainmenu"},[i("ul",{staticClass:"ctx-downmenu"},[i("li",{staticClass:"item",on:{click:t.dmUpstreamlistModal}},[t._v(t._s(t.$t("lg.manageserver")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmTransparentModal}},[t._v("IP透传")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmLimReq}},[t._v("指纹黑名单防护配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmGlbInstruct}},[t._v("自定义配置")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmKeepalivetModal}},[t._v("Keepalive")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmEditModal}},[t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.dmDelete}},[t._v(t._s(t.$t("lg.delete")))])])]),t._v(" "),i("div",{staticClass:"cm-contextmenu streammenu"},[i("ul",{staticClass:"ctx-downmenu"},[i("li",{staticClass:"item",on:{click:t.stUpstreamlistModal}},[t._v("管理服务器")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.stEditModal}},[t._v("修改")]),t._v(" "),i("li",{staticClass:"item",on:{click:t.stDelete}},[t._v("删除")])])]),t._v(" "),i("div",{staticClass:"cm-contextmenu locationmenu"},[i("ul",{staticClass:"ctx-downmenu"},[i("li",{staticClass:"item",on:{click:t.lcProtectInstruct}},[t._v(t._s(t.isDenyUrl?"明文拒绝的URL":"保护配置"))]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcSpecialProtectInstruct}},[t._v("特殊保护配置")]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcSkipInstruct}},[t._v("跳转配置")]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcSeniorInstruct}},[t._v("高级配置")]),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcCustomInstruct}},[t._v("自定义配置")]),t._v(" "),1==t.$store.state.licenceinfo.waf?i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcwafModal}},[t._v(t._s(t.$t("lg.wafdetail")))]):t._e(),t._v(" "),i("li",{directives:[{name:"show",rawName:"v-show",value:!t.isDenyUrl,expression:"!isDenyUrl"}],staticClass:"item",on:{click:t.lcEditModal}},[t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("li",{staticClass:"item",on:{click:t.lcDelete}},[t._v(t._s(t.$t("lg.delete")))])])]),t._v(" "),i("div",{staticClass:"onoff-box"},[i("p",{staticStyle:{padding:"5px 10px 0px"}},[t._v(t._s(t.shadowObj.name))]),t._v(" "),t.isShadowStatusLoading?i("div",{staticStyle:{padding:"10px 15px 10px 10px"}},[t._m(2)]):i("ul",{staticClass:"shadowStatusList"},[t.shadowStatusObj.isShadowGroup?i("li",{staticClass:"sStatusTitle"},[t._v(t._s(t.$t("lg.masterNode")))]):t._e(),t._v(" "),i("li",[i("p",{directives:[{name:"show",rawName:"v-show",value:1==t.shadowStatusObj.masterNode.status,expression:"shadowStatusObj.masterNode.status==1"}],staticClass:"font-green"},[i("i",{staticClass:"el-icon-success shadow-icon-color-success"}),t._v(" "+t._s(t.$t("lg.running")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:2==t.shadowStatusObj.masterNode.status,expression:"shadowStatusObj.masterNode.status==2"}]},[i("i",{staticClass:"el-icon-warning"}),t._v(" "+t._s(t.$t("lg.ting")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:3==t.shadowStatusObj.masterNode.status,expression:"shadowStatusObj.masterNode.status==3"}]},[i("i",{staticClass:"el-icon-error"}),t._v(" "+t._s(t.$t("lg.nostatus")))]),t._v(" "),i("p",[t._v("IP:"+t._s(t.shadowStatusObj.masterNode.ip))]),t._v(" "),i("p",[t._v(t._s(t.$t("lg.version"))+":"+t._s(t.shadowStatusObj.masterNode.version))])]),t._v(" "),t.shadowStatusObj.isShadowGroup?i("li",{staticClass:"sStatusTitle marginTop"},[t._v(t._s(t.$t("lg.backupNode")))]):t._e(),t._v(" "),t._l(t.shadowStatusObj.backupNode,function(e,a){return t.shadowStatusObj.isShadowGroup?i("li",{key:a,class:a<t.shadowStatusObj.backupNode.length-1?"backupNodeLi":""},[i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:1==e.status,expression:"item.status==1"}],staticClass:"font-green"},[i("i",{staticClass:"el-icon-success shadow-icon-color-success"}),t._v(" "+t._s(t.$t("lg.running")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:2==e.status,expression:"item.status==2"}]},[i("i",{staticClass:"el-icon-warning"}),t._v(" "+t._s(t.$t("lg.ting")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:3==e.status,expression:"item.status==3"}]},[i("i",{staticClass:"el-icon-error"}),t._v(" "+t._s(t.$t("lg.nostatus")))])]),t._v(" "),i("p",[t._v("IP:"+t._s(e.ip))]),t._v(" "),i("p",[t._v(t._s(t.$t("lg.version"))+":"+t._s(e.version))])]):t._e()}),t._v(" "),t.shadowStatusObj.isShadowGroup?i("li",{staticClass:"sStatusTitle marginTop"},[t._v(t._s(t.$t("lg.virtualIP")))]):t._e(),t._v(" "),t._l(t.shadowStatusObj.virtualIPs,function(e){return t.shadowStatusObj.isShadowGroup?i("li",[t._v(t._s(e))]):t._e()})],2)]),t._v(" "),i("div",{staticClass:"onoff-DomainBox"},[i("p",{staticStyle:{padding:"5px 10px 0px"}},[t._v(t._s(t.domainObj.domainName+":"+t.domainObj.port))]),t._v(" "),t.isSvCkLoading?i("div",{staticStyle:{padding:"10px 15px 10px 10px"}},[t._m(3)]):i("div",[0==t.domainStatusData.length?i("div",{staticStyle:{padding:"10px 15px 10px 10px"}},[i("span",[t._v(t._s(t.svCkfailed?t.$t("lg.failureStatus"):t.$t("lg.healthCkNotOpen")))])]):i("ul",{staticClass:"domainStatusList"},t._l(t.domainStatusData,function(e,a){return i("li",{key:a},[i("p",[t._v("服务器："+t._s(e.name))]),t._v(" "),i("p",[t._v("已处理请求数："+t._s(e.doc_count))]),t._v(" "),i("p",[t._v("状态："),"up"==e.status?i("span",{staticClass:"font-green"},[i("i",{staticClass:"el-icon-success shadow-icon-color-success"}),t._v(" "+t._s(t.$t("lg.running")))]):i("span",[i("i",{staticClass:"el-icon-warning"}),t._v(" "+t._s(t.$t("lg.ting")))])])])}))])]),t._v(" "),i("div",{staticClass:"onoff-LocationBox"},[i("p",{staticStyle:{padding:"0px 10px"}},[t._v(t._s(t.locationObj.nameTxt))])]),t._v(" "),i("div",{staticClass:"onoff-InstructBox"},[i("p",{staticStyle:{padding:"0px 10px"}},[t._v(t._s(t.instructObj.name))])])])],1),t._v(" "),i("shadowpop",{attrs:{shadowDialogVisible:t.shadowDialogVisible,shadowObj:t.shadowObj,keys:t.keys,diplomas:t.diplomas},on:{setbyshadowpopchild:function(e){t.shadowDialogVisible=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("sd-warning-mode",{ref:"sd_warningMode",attrs:{isShow:t.sdWarningModemodalShow,shadowObj:t.shadowObj},on:{setbysdWarningModemodal:function(e){t.sdWarningModemodalShow=!1}}}),t._v(" "),i("sd-senior-instruct",{ref:"sd_seniorInstruct",attrs:{isShow:t.sdSeniorInstructmodalShow,shadowObj:t.shadowObj},on:{setbysdSeniorInstructmodal:function(e){t.sdSeniorInstructmodalShow=!1}}}),t._v(" "),i("sd-glb-instruct",{ref:"sd_glbInstruct",attrs:{isShow:t.sdGlbInstructmodalShow,shadowObj:t.shadowObj},on:{setbysdGlbInstructmodal:function(e){t.sdGlbInstructmodalShow=!1}}}),t._v(" "),i("sd-custom-upstream",{ref:"sd_customUpstream",attrs:{isShow:t.sdCustomUpstreammodalShow,shadowObj:t.shadowObj},on:{setbysdCustomUpstreammodal:function(e){t.sdCustomUpstreammodalShow=!1}}}),t._v(" "),i("sd-batch-instruct",{ref:"sd_batchInstruct",attrs:{isShow:t.sdBatchInstructmodalShow,shadowObj:t.shadowObj},on:{setbysdBatchInstructmodalclose:function(e){t.sdBatchInstructmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("pushmodal",{attrs:{pushmodalShow:t.pushmodalShow,data:t.shadownodes,shadowObj:t.shadowObj},on:{setbypushmodal:function(e){t.pushmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("cersmodal",{attrs:{cersmodalShow:t.cersmodalShow,keys:t.keys,crts:t.crts,pems:t.pems,shadowObj:t.shadowObj},on:{setbycersmodal:function(e){t.cersmodalShow=!1}}}),t._v(" "),i("saveconfmodal",{attrs:{saveconfmodalShow:t.saveconfmodalShow,shadowObj:t.shadowObj},on:{setbysaveconfmodal:function(e){t.saveconfmodalShow=!1}}}),t._v(" "),i("domainpop",{attrs:{domainDialogVisible:t.domainDialogVisible,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydomainpopchild:function(e){t.domainDialogVisible=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("dm-upstreamlist",{ref:"dm_upstreamlist",attrs:{isShow:t.upstreamlistmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbyupstreamlistmodal:function(e){t.upstreamlistmodalShow=!1}}}),t._v(" "),i("st-upstreamlist",{ref:"st_upstreamlist",attrs:{isShow:t.streamlistmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbyupstreamlistmodal:function(e){t.streamlistmodalShow=!1}}}),t._v(" "),i("dm-redict",{attrs:{redirectmodalShow:t.redirectmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,data:t.redirect302Url},on:{setbyredictmodal:function(e){t.redirectmodalShow=!1},setredirect:t.setRedirectInput}}),t._v(" "),i("dm-limit-req",{ref:"dm_limitReq",attrs:{isShow:t.dmLimReqmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydmlimReqmodal:function(e){t.dmLimReqmodalShow=!1}}}),t._v(" "),i("dm-glb-instruct",{ref:"dm_glbInstruct",attrs:{isShow:t.dmGlbInstructmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydmGlbInstructmodal:function(e){t.dmGlbInstructmodalShow=!1}}}),t._v(" "),i("dm-edit",{attrs:{dmEditmodalShow:t.dmEditmodalShow,keys:t.keys,diplomas:t.diplomas,shadowObj:t.shadowObj,domainObj:t.domainObj,data:t.dmEditObj},on:{setbydmEditmodal:function(e){t.dmEditmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("st-edit",{attrs:{dmEditmodalShow:t.stEditmodalShow,keys:t.keys,diplomas:t.diplomas,shadowObj:t.shadowObj,domainObj:t.domainObj,data:t.stEditObj},on:{setbydmEditmodal:function(e){t.stEditmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("dmtransparent",{ref:"dm_transparent",attrs:{isShow:t.dmtransparentShow,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydmtransparentmodal:function(e){t.dmtransparentShow=!1}}}),t._v(" "),i("dmkeepalive",{ref:"dm_keepalive",attrs:{isShow:t.dmkeepaliveShow,shadowObj:t.shadowObj,domainObj:t.domainObj},on:{setbydmkeepalivemodal:function(e){t.dmkeepaliveShow=!1}}}),t._v(" "),i("lc-protect-instruct",{ref:"lc_protectInstruct",attrs:{isShow:t.lcprotectInstructmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcProtectInstructmodal:function(e){t.lcprotectInstructmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-special-protect-instruct",{ref:"lc_specialProtectInstruct",attrs:{isShow:t.lcSpecialProtectInstructmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcSpecialProtectInstructmodal:function(e){t.lcSpecialProtectInstructmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-skip-instruct",{ref:"lc_skipInstruct",attrs:{isShow:t.lcSkipInstructmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcSkipInstructmodal:function(e){t.lcSkipInstructmodalShow=!1}}}),t._v(" "),i("lc-senior-instruct",{ref:"lc_seniorInstruct",attrs:{isShow:t.lcSeniorInstructmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcSeniorInstructmodal:function(e){t.lcSeniorInstructmodalShow=!1}}}),t._v(" "),i("lc-custom-instruct",{ref:"lc_customInstruct",attrs:{isShow:t.lcCustomInstructmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcCustomInstructmodal:function(e){t.lcCustomInstructmodalShow=!1}}}),t._v(" "),i("lc-waf2",{ref:"lcwaf2",attrs:{isShow:t.lcwafmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj,data:t.lcwafData,attypedata:t.attactypeData},on:{setbylcwafmodal:function(e){t.lcwafmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("lc-edit",{attrs:{lcEditmodalShow:t.lcEditmodalShow,shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},on:{setbylcEditmodal:function(e){t.lcEditmodalShow=!1},updateRenderTree:t.dataRenderTree}}),t._v(" "),i("ro-doclist",{attrs:{isShow:t.rootdoclistShow,data:t.rootdoclistData,nodesdata:t.shadownodes},on:{rodoclistclose:function(e){t.rootdoclistShow=!1},updateRoDoclist:t.roDoclist,updateRenderTree:t.dataRenderTree}}),t._v(" "),i("ro-rules",{attrs:{isShow:t.rootrulesShow,data:t.rootrulesData},on:{updateRootRule:t.roRules,rootrulesclose:function(e){t.rootrulesShow=!1}}}),t._v(" "),i("ro-addrule",{ref:"roaddrule",attrs:{isShow:t.rootaddruleShow,sid:t.rootruleSid,attypedata:t.attactypeData},on:{rootaddruleclose:function(e){t.rootaddruleShow=!1}}}),t._v(" "),i("ro-rulesets",{attrs:{isShow:t.rootrulesetsShow,data:t.rootRulesetsData},on:{updateRulesets:t.roRulesets,rootrulesetsclose:function(e){t.rootrulesetsShow=!1}}}),t._v(" "),i("ro-shadow-group",{ref:"ro_shadowGroup",attrs:{isShow:t.rootShadowGroupShow,updateRenderTree:t.dataRenderTree},on:{rootShadowGroupclose:function(e){t.rootShadowGroupShow=!1},updateSdGrpData:t.dataRenderTree}}),t._v(" "),i("attactypepop",{ref:"attactypepop",attrs:{isShow:t.attactypepopShow,data:t.attactypeData},on:{attactypeclose:function(e){t.attactypepopShow=!1}}}),t._v(" "),i("streampop",{attrs:{streamShow:t.shadowStreamShow,shadowObj:t.shadowObj,keys:t.keys,diplomas:t.diplomas},on:{setbyshadowpopchild:function(e){t.shadowStreamShow=!1},updateRenderTree:t.dataRenderTree}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"i5"}),this._v("通用匹配")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"i6"}),this._v("stream")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-loading"}),this._v("loading...")])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"el-icon-loading"}),this._v("loading...")])}]};var ve=i("VU/8")(pe,ge,!1,function(t){i("JXNQ")},null,null);e.default=ve.exports},EeaZ:function(t,e){},IEBb:function(t,e,i){"use strict";var a=i("mtWM"),n=i.n(a),r=i("qqiS"),o=i("yJCr"),s={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},lcEditmodalShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){var t=this;return{editmodalLoading:!1,editlocationObj:{type:"",name:""},editlocationObjRules:{type:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],name:[{validator:function(e,i,a){i||a(new Error(t.$t("lg.required"))),"deny_url"==i?a(new Error("deny_url被系统占用，不能以deny_url命名")):(/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/.test(i)||a(new Error(t.$t("lg.invalidformat"))),a())},trigger:"blur"},{required:!0,message:this.$t("lg.required"),trigger:"blur"}]}}},watch:{lcEditmodalShow:function(){this.lcEditmodalShow&&(this.editlocationObj.name=this.locationObj.nameTxt,this.editlocationObj.type=this.locationObj.type)}},methods:{editmodalClose:function(){this.$refs.editlocationObj.resetFields(),this.$emit("setbylcEditmodal",!1)},checkMate:function(t){this.editlocationObj.name="/"==t?"/":this.editlocationObj.name},updateLocation:function(t){var e=this;e.$refs[t].validate(function(t){if(t){if(e.isAuto)var i=o.b+"pe/shadow/domain/location?autoconfig=true";else if(e.isEditConfig)i=o.b+"pe/shadow/domain/location?savedConfig=true";else i=o.b+"pe/shadow/domain/location";var a=e.shadowObj.snodeId,r=e.domainObj.domainName,s=e.domainObj.port,l=e.locationObj.name,c=e.locationObj.type,d=e.editlocationObj.name,u=e.editlocationObj.type;"suffixMatch"==u&&(d="/"==d?"(.*\\/)+$":"\\.("+d+")$"),n.a.patch(i,{snodeId:a,domainName:r,domainPort:s,srcLocationName:l,srcLocationType:c,locationName:d,locationType:u}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.$emit("updateRenderTree"),e.editmodalClose()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message)}).catch(function(t){console.log(t)})}})}},components:{loading:r.a}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.lcEditmodalShow,"close-on-click-modal":!1,"before-close":t.editmodalClose},on:{"update:visible":function(e){t.lcEditmodalShow=e}}},[i("div",{staticClass:"locationBox"},[i("span",{staticClass:"titleSpan"},[t._v(t._s(t.$t("lg.editprotected")))]),t._v(" "),i("el-form",{ref:"editlocationObj",attrs:{model:t.editlocationObj,"label-width":"135px",rules:t.editlocationObjRules}},[i("el-form-item",{attrs:{label:t.$t("lg.matchtype"),prop:"type"}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},on:{change:function(e){t.checkMate(t.editlocationObj.type)}},model:{value:t.editlocationObj.type,callback:function(e){t.$set(t.editlocationObj,"type",e)},expression:"editlocationObj.type"}},[i("el-option",{attrs:{label:t.$t("lg.exactmatch"),value:"accurateMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.suffixmatch"),value:"suffixMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.patchmatch"),value:"pathMatch"}}),t._v(" "),i("el-option",{attrs:{label:t.$t("lg.dynamicurl"),value:"dynamicMatch"}}),t._v(" "),i("el-option",{attrs:{label:"通用匹配",value:"/"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.protectedpos"),prop:"name"}},[i("el-input",{attrs:{disabled:"/"==t.editlocationObj.type},model:{value:t.editlocationObj.name,callback:function(e){t.$set(t.editlocationObj,"name","string"==typeof e?e.trim():e)},expression:"editlocationObj.name"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateLocation("editlocationObj")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.editmodalLoading,expression:"editmodalLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)])],1)},staticRenderFns:[]};var c=i("VU/8")(s,l,!1,function(t){i("9vAN")},null,null);e.a=c.exports},"J/O9":function(t,e){},"J/OW":function(t,e){},JXNQ:function(t,e){},MAKJ:function(t,e){},Mh1v:function(t,e,i){"use strict";var a=i("Dd8w"),n=i.n(a),r=i("woOf"),o=i.n(r),s=i("//Fk"),l=i.n(s),c=i("mvHQ"),d=i.n(c),u=i("fZjL"),f=i.n(u),h=i("bOdI"),m=i.n(h),p=i("mtWM"),g=i.n(p),v=(i("5reh"),i("qqiS")),b=i("yJCr"),_=i("xrTZ").Base64,w={components:{loading:v.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{url:"",getDirectiveLoading:!1,activeName:"",directiveData:[],blackdirectiveData:[],verifyUserAgentDctform:{verifyUserAgentVal:!1},rejectHeaderDctform:{rejectHeaderVal:""},rejectHeaderDctformRules:{rejectHeaderVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-."\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},verifyLimitIpDctform:{verifyLimitIpVal:!1,limitIpVal:""},verifyBlackIpDctform:{verifyblackIpVal:!1,blackIpVal:""},verifyLimitIpDctformRules:{limitIpVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))?)$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},verifyBlackIpDctformRules:{blackIpVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))?)$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},isShowEditBlockDct:!1,isShowEditBlackip:!1,editBlockDctform:{editBlockDctVal:""},editBlackipform:{editBlackip:""},editBlackipOriform:{editBlackip:""},editBlockDctOrgin:{editBlockDctVal:""},editBlockDctLoading:!1,whiteListswitch:!1,editWhiteIpIndex:null,whiteListform:{white_ip:""},whiteListformRules:{white_ip:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{validator:function(t,e,i){if(""===e)i(new Error("IP/IP段"));else{for(var a=e.split(","),n=0;n<a.length;n++){var r=a[n].replace(/^\s*|\s*$/g,"");if(r&&!/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))?)$/.test(r)){i(new Error("请输入符合规范的IP/IP段字符"));break}}i()}},trigger:"blur"}]},whiteIplistData:[],isShowEditWhiteList:!1,editWhiteListform:{white_ip:""},editWhiteListformRules:{white_ip:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^((25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d)))\.){3}(25[0-5]|2[0-4]\d|((1\d{2})|([1-9]?\d))?)$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},editWhitelistLoading:!1,whiteIpListRemark:"",hasWIpRemark:!1,isShowWIpRemark:!1,wIpRemarkform:{wIpRemark:""},wIpRemarkLoading:!1,agtTimeoutSwitch:!1,agtTimeoutform:{agtTimeoutVal:null,agtTimeoutUnit:"s",agtTimeoutUnitOpt:[{label:"毫秒",value:"ms"},{label:"秒",value:"s"}]},agtTimeoutformRules:{agtTimeoutVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},sdApiSwitch:!1,sdApiform:{sdApiTime:"",sdApiTimes:""},sdApiTimeUnit:"s",apiUnitOpt:[{label:"秒",value:"s"}],sdApiformRules:{sdApiTime:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],sdApiTimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},shadowlibData:{},addSdlibDialogVisible:!1,shadowlibform:{domainName:"",crossdomain:"",encryptionType:"1",bodye:!1,isws:!1,isa:!1},shadowlibformRules:{domainName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},shadowlibList:[],addShadowlibLoading:!1,editSdlibDialogVisible:!1,editShadowlibform:{},editShadowlibformRules:{domainName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},editShadowlibLoading:!1,dfsCookieTimeUnit:"s",defenseCookieswitch:!1,defenseCookieform:{defenseTime:"",defenseTimes:""},defenseCookieformRules:{defenseTime:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],defenseTimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]}}},methods:{handleChange:function(t){if(t){var e={shadow_verify_user_agent:this.getSdDirective,shadow_reject_header:this.getSdDirective,shadow_limit_ip:this.getSdDirective,shadow_black_ip:this.getBlackipDirective,shadow_white_ip:this.getWhiteIpListData,agent_time:this.getSdAgtTimeoutData,shadow_api:this.getSdApiData,shadowlib_config:this.getSdShadowlibData,shadow_dyncookie:this.getSdDefenseCookieData};this.$nextTick(function(){e[t]()})}},getSdDirective:function(){var t=this,e=this,i=e.shadowObj.snodeId;e.directiveData=[],e.getDirectiveLoading=!0;var a="";a=e.isAuto?b.b+"pe/shadow/global/blockdirective?snodeId="+i+"&http=true&autoconfig=true":e.isEditConfig?b.b+"pe/shadow/global/blockdirective?snodeId="+i+"&http=true&savedConfig=true":b.b+"pe/shadow/global/blockdirective?snodeId="+i+"&http=true",g.a.get(a).then(function(i){if(0==i.data.responseCode){var a={shadow_reject_header:[],shadow_limit_ip:[]};(i.data.data.hasOwnProperty("httpBlockDirectives")?i.data.data.httpBlockDirectives:[]).forEach(function(t){if(t.hasOwnProperty("shadow_verify_user_agent")){var i=_.decode(t.shadow_verify_user_agent);e.verifyUserAgentDctform.verifyUserAgentVal="on"==i}if(t.hasOwnProperty("shadow_reject_header")&&a.shadow_reject_header.push({shadow_reject_header:_.decode(t.shadow_reject_header)}),t.hasOwnProperty("shadow_verify_limit_ip")){var n=_.decode(t.shadow_verify_limit_ip);e.verifyLimitIpDctform.verifyLimitIpVal="on"==n}t.hasOwnProperty("shadow_limit_ip")&&a.shadow_limit_ip.push({shadow_limit_ip:_.decode(t.shadow_limit_ip)})}),"shadow_reject_header"!=e.activeName&&"shadow_limit_ip"!=e.activeName||(e.directiveData=a[e.activeName])}else e.$message.error(t.$t("lg.failed")+": "+i.data.data.message);e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},getBlackipDirective:function(){var t=this,e=t.shadowObj.snodeId;t.getDirectiveLoading=!0;var i="";i=t.isAuto?b.b+"pe/shadow/global/ipblack/directive?snodeId="+e+"&autoconfig=true":t.isEditConfig?b.b+"pe/shadow/global/ipblack/directive?snodeId="+e+"&savedConfig=true":b.b+"pe/shadow/global/ipblack/directive?snodeId="+e,g.a.get(i).then(function(e){0===e.data.responseCode&&(t.blackdirectiveData=e.data.data,t.getDirectiveLoading=!1)})},validSubmitBlockDct:function(t,e,i){var a=this;if(i)this.$refs[i].validate(function(i){i&&(a.submitBlockDct(t,e),a.rejectHeaderDctform.rejectHeaderVal="",a.verifyLimitIpDctform.limitIpVal="")});else{var n=e?"on":"off";this.submitBlockDct(t,n)}},limitIpSwitchEvent:function(t,e){this.validSubmitBlockDct(t,e)},validSubmitBlackip:function(t){var e=this,i=e.shadowObj.snodeId,a="";a=e.isAuto?b.b+"pe/shadow/global/ipblack/directive?autoconfig=true":e.isEditConfig?b.b+"pe/shadow/global/ipblack/directive?savedConfig=true":b.b+"pe/shadow/global/ipblack/directive",t&&e.$refs[t].validate(function(t){if(t){var n={directives:[{shadow_black_ip:_.encode(e.verifyBlackIpDctform.blackIpVal)}],snodeId:i};g.a.post(a,n).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getBlackipDirective()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message)})}})},delBlackipDirective:function(t){console.log(t);var e=this,i=e.shadowObj.snodeId,a="";a=e.isAuto?b.b+"pe/shadow/global/ipblack/directive?autoconfig=true":e.isEditConfig?b.b+"pe/shadow/global/ipblack/directive?savedConfig=true":b.b+"pe/shadow/global/ipblack/directive";var n={directives:[{shadow_black_ip:t.shadow_black_ip}],snodeId:i};g.a.delete(a,{data:n}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getBlackipDirective()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message)})},submitBlockDct:function(t,e){var i=this,a=i.shadowObj.snodeId;i.getDirectiveLoading=!0;var n="";n=i.isAuto?b.b+"pe/shadow/global/blockdirective?http=true&autoconfig=true":i.isEditConfig?b.b+"pe/shadow/global/blockdirective?http=true&savedConfig=true":b.b+"pe/shadow/global/blockdirective?http=true";var r=[m()({},t,_.encode(e))];g.a.post(n,{snodeId:a,directives:r}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getSdDirective()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},delBlockDirective:function(t,e){var i=this,a=this.shadowObj.snodeId;i.getDirectiveLoading=!0;var n="";n=this.isAuto?b.b+"pe/shadow/global/blockdirective?http=true&autoconfig=true":this.isEditConfig?b.b+"pe/shadow/global/blockdirective?http=true&savedConfig=true":b.b+"pe/shadow/global/blockdirective?http=true";var r=[m()({},t,_.encode(e))];g.a.delete(n,{data:{snodeId:a,directives:r}}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getSdDirective()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},editBlockDctDialogShow:function(t){var e=f()(t)[0];this.editBlockDctform.editBlockDctVal=t[e],this.editBlockDctOrgin.editBlockDctVal=t[e],this.isShowEditBlockDct=!0},editBlackipDialogShow:function(t){this.editBlackipform.editBlackip=_.decode(t.shadow_black_ip),this.editBlackipOriform.editBlackip=t.shadow_black_ip,this.isShowEditBlackip=!0},editBlackipDirective:function(t){var e=this;e.$refs[t].validate(function(t){if(t){var i=e.shadowObj.snodeId,a="";a=e.isAuto?b.b+"pe/shadow/global/ipblack/directive?autoconfig=true":e.isEditConfig?b.b+"pe/shadow/global/ipblack/directive?savedConfig=true":b.b+"pe/shadow/global/ipblack/directive";var n=e.editBlackipOriform.editBlackip,r=_.encode(e.editBlackipform.editBlackip);g.a.patch(a,{snodeId:i,directiveName:"shadow_black_ip",srcData:n,targetData:r}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getBlackipDirective(),e.editBlackipClose()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message)}).catch(function(t){console.log(t)})}})},editBlockDirective:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e,a=i.shadowObj.snodeId;i.editBlockDctLoading=!0;var n="";n=i.isAuto?b.b+"pe/shadow/global/blockdirective?http=true&autoconfig=true":i.isEditConfig?b.b+"pe/shadow/global/blockdirective?http=true&savedConfig=true":b.b+"pe/shadow/global/blockdirective?http=true";var r="shadow_reject_header"==i.activeName?"shadow_reject_header":"shadow_limit_ip",o=_.encode(i.editBlockDctOrgin.editBlockDctVal),s=_.encode(i.editBlockDctform.editBlockDctVal);g.a.patch(n,{snodeId:a,directiveName:r,srcData:o,targetData:s}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getSdDirective(),i.editBlockDctClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.editBlockDctLoading=!1}).catch(function(t){console.log(t)})}})},editBlockDctClose:function(){this.$refs.editBlockDctform.resetFields(),this.isShowEditBlockDct=!1},editBlackipClose:function(){this.isShowEditBlackip=!1},getWhiteIpListData:function(){var t=this,e=this.shadowObj.snodeId,i=b.b+"pe/shadow/whiteip/"+e;this.getDirectiveLoading=!0,g.a.get(i).then(function(e){if(0==e.data.responseCode){var i=e.data.data;t.whiteIplistData=i,0==t.whiteIplistData.length?t.whiteListswitch=!1:t.whiteListswitch=!0,t.getRemak()}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message);t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},submitWhiteList:function(){var t=this;this.$refs.whiteListform.validate(function(e){if(e){var i=t,a=i.shadowObj.snodeId;i.getDirectiveLoading=!0;var n=JSON.parse(d()(t.whiteIplistData));i.whiteListform.white_ip.split(",").forEach(function(t){t&&n.push(t)});var r=b.b+"pe/shadow/whiteip";g.a.post(r,{snodeId:a,whiteIp:n}).then(function(e){0==e.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.whiteListform.white_ip="",t.getWhiteIpListData()):i.$message.error(i.$t("lg.failed")+": "+e.data.data.message),i.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}})},whiteIpSwitchEvent:function(){var t=this,e=this;this.whiteListswitch?(this.whiteListswitch=!1,this.$message.error(e.$t("lg.whiteauto"))):this.$confirm(e.$t("lg.deletewhitetips"),e.$t("lg.tips"),{confirmButtonText:e.$t("lg.yes"),cancelButtonText:e.$t("lg.cancel"),type:"warning"}).then(function(){var i=t.shadowObj.snodeId,a=b.b+"pe/shadow/whiteip/"+i;g.a.delete(a).then(function(i){0==i.data.responseCode?(t.$message({type:"success",message:e.$t("lg.success")}),t.getWhiteIpListData()):t.$message.error(e.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){t.whiteListswitch=!0,t.$message({type:"info",message:e.$t("lg.canceled")})})},editWhiteIp:function(t,e){this.editWhiteIpIndex=e,this.editWhiteListform.white_ip=t,this.isShowEditWhiteList=!0},editwIEnsure:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e.shadowObj.snodeId;e.whiteIplistData[e.editWhiteIpIndex]=e.editWhiteListform.white_ip;var a=b.b+"pe/shadow/whiteip";e.editWhitelistLoading=!0,g.a.patch(a,{snodeId:i,whiteIp:e.whiteIplistData}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.isEditWhiteListClose(),e.getWhiteIpListData()):e.$message.error(e.$t("lg.failed")+": "+t.data.data.message),e.editWhitelistLoading=!1}).catch(function(t){console.log(t)})}})},isEditWhiteListClose:function(){this.isShowEditWhiteList=!1},delWhiteIp:function(t){var e=this,i=this,a=this.shadowObj.snodeId;if(1==this.whiteIplistData.length)this.$confirm(i.$t("lg.closewhitetips"),i.$t("lg.tips"),{confirmButtonText:i.$t("lg.yes"),cancelButtonText:i.$t("lg.cancel"),type:"warning"}).then(function(){var t=b.b+"pe/shadow/whiteip/"+a;g.a.delete(t).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:i.$t("lg.success")}),e.getWhiteIpListData(),e.whiteListswitch=!1):e.$message.error(i.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})}).catch(function(){e.whiteListswitch=!0,e.$message({type:"info",message:i.$t("lg.canceled")})});else{this.getDirectiveLoading=!0,this.whiteIplistData.splice(t,1);var n=b.b+"pe/shadow/whiteip";g.a.patch(n,{snodeId:a,whiteIp:this.whiteIplistData}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:i.$t("lg.success")}),e.getWhiteIpListData()):e.$message.error(i.$t("lg.failed")+": "+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}},getRemak:function(){var t=this,e=this.shadowObj.snodeId,i=b.b+"pe/shadow/kv/"+e+"whiteIpRemarks";g.a.get(i).then(function(e){if(0==e.data.responseCode){var i=e.data.data;t.whiteIpListRemark=i&&i.value,t.hasWIpRemark=!!i}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},showRemarkDialog:function(){this.wIpRemarkform.wIpRemark=this.whiteIpListRemark,this.isShowWIpRemark=!0},setWIpRemark:function(){var t=this;this.wIpRemarkLoading=!0;var e=this.shadowObj.snodeId,i=b.b+"pe/shadow/kv/",a=e+"whiteIpRemarks",n="post";this.hasWIpRemark&&(n="patch"),g.a[n](i,m()({},a,this.wIpRemarkform.wIpRemark)).then(function(e){0==e.data.responseCode?(t.getWhiteIpListData(),t.wIpRemarkDialogClose()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message),t.wIpRemarkLoading=!1}).catch(function(t){console.log(t)})},wIpRemarkDialogClose:function(){this.$refs.wIpRemarkform.resetFields(),this.isShowWIpRemark=!1},getSdAgtTimeoutData:function(){var t=this,e=t.shadowObj.snodeId;t.getDirectiveLoading=!0,t.isAuto?t.url=b.b+"pe/shadow/agenttime/"+e+"?autoconfig=true":t.isEditConfig?t.url=b.b+"pe/shadow/agenttime/"+e+"?savedConfig=true":t.url=b.b+"pe/shadow/agenttime/"+e,g.a.get(t.url).then(function(e){if(0==e.data.responseCode){var i=e.data.data;i&&(t.agtTimeoutSwitch=!0,t.agtTimeoutform.agtTimeoutVal=i.match(/(\d*)(\w*)/)[1],t.agtTimeoutform.agtTimeoutUnit=i.match(/(\d*)(\w*)/)[2])}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message);t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},agtTimeSwitchEvent:function(){var t=this;t.agtTimeoutSwitch?(t.agtTimeoutSwitch=!1,t.$message.error("填写下面的请求时间，将自动开启开关")):t.$confirm("此操作将删除‘请求超时时间’这条配置指令,是否继续？",t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){t.getDirectiveLoading=!0,g.a.delete(t.url).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.$refs.agtTimeoutform.resetFields()):(t.agtTimeoutSwitch=!0,t.$message.error(t.$t("lg.failed")+":"+e.data.data.message)),t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}).catch(function(){t.agtTimeoutSwitch=!0,t.$message({type:"info",message:t.$t("lg.canceled")})})},submitAgtTimeout:function(){var t=this;this.$refs.agtTimeoutform.validate(function(e){if(e){var i=t;i.getDirectiveLoading=!0,g.a.post(i.url,{shadow_agent_timeout:i.agtTimeoutform.agtTimeoutVal+i.agtTimeoutform.agtTimeoutUnit}).then(function(e){0==e.data.responseCode?(t.agtTimeoutSwitch=!0,i.$message({type:"success",message:i.$t("lg.success")})):i.$message.error(i.$t("lg.failed")+": "+e.data.data.message),i.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}})},getSdApiData:function(){var t=this;return new l.a(function(e,i){var a=t,n=a.shadowObj.snodeId;a.getDirectiveLoading=!0,a.isAuto?a.url=b.b+"pe/shadow/api/"+n+"?autoconfig=true":a.isEditConfig?a.url=b.b+"pe/shadow/api/"+n+"?savedConfig=true":a.url=b.b+"pe/shadow/api/"+n,g.a.get(a.url).then(function(t){if(0==t.data.responseCode){var i=t.data.data;i&&(a.sdApiSwitch=!0,a.sdApiform.sdApiTimes=i.num,a.sdApiform.sdApiTime=i.time.match(/(\d*)(\w*)/)[1],a.sdApiTimeUnit=i.time.match(/(\d*)(\w*)/)[2]),e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message);a.getDirectiveLoading=!1}).catch(function(t){console.log(t)})})},sdApiSwitchEvent:function(){var t=this;t.sdApiSwitch?(t.sdApiSwitch=!1,t.$message.error("提交下面的参数，将自动开启JS加密防护功能")):t.$confirm("此操作将删除‘shadow_api’这条配置指令,是否继续？",t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){t.getDirectiveLoading=!0,g.a.delete(t.url).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.$refs.sdApiform.resetFields()):(t.sdApiSwitch=!0,t.$message.error(t.$t("lg.failed")+":"+e.data.data.message)),t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}).catch(function(){t.sdApiSwitch=!0,t.$message({type:"info",message:t.$t("lg.canceled")})})},submitSdApi:function(){var t=this;this.$refs.sdApiform.validate(function(e){e&&(t.getDirectiveLoading=!0,g.a.post(t.url,{num:t.sdApiform.sdApiTimes,time:t.sdApiform.sdApiTime+t.sdApiTimeUnit}).then(function(e){0==e.data.responseCode?(t.sdApiSwitch=!0,t.$message({type:"success",message:t.$t("lg.success")})):t.$message.error(t.$t("lg.failed")+":"+e.data.data.message),t.getDirectiveLoading=!1}).catch(function(t){console.log(t)}))})},getSdShadowlibData:function(){var t=this;return new l.a(function(e,i){var a=t,n=a.shadowObj.snodeId;t.getDirectiveLoading=!0,a.isAuto?a.url=b.b+"pe/shadow/config/shadowlib/"+n+"?autoconfig=true":t.isEditConfig?a.url=b.b+"pe/shadow/config/shadowlib/"+n+"?savedConfig=true":a.url=b.b+"pe/shadow/config/shadowlib/"+n,g.a.get(a.url).then(function(i){if(0==i.data.responseCode){var n=i.data.data||{},r={};f()(n).forEach(function(t){var e=t.split("_").join(".");r[e]=n[t]}),a.shadowlibData=r,e(n)}else a.$message.error(a.$t("lg.failed")+": "+i.data.data.message);t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})})},addSdlibDialogShow:function(){this.addSdlibDialogVisible=!0},addSdlibListItem:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=o()({},e.shadowlibform);e.shadowlibList.push(i)}})},deletSdlibListItem:function(t){this.shadowlibList.splice(this.shadowlibList.indexOf(t),1)},submitShadowlibList:function(){var t=this;t.addShadowlibLoading=!0;var e=_.encode(t.shadowlibform.domainName),i=t.shadowlibform.isa,a=t.shadowlibform.crossdomain,r=t.shadowlibform.bodye,o=t.shadowlibform.isws,s="2"==t.shadowlibform.encryptionType,l={};l[e]={aclick:i,crossdomain:a,bodye:r,isws:o,acookieorencpyt:!1,xhrqueryparamsorurl:s};var c=t.shadowObj.snodeId;t.isAuto?b.b:this.isEditConfig?b.b:b.b;var d=t.shadowlibData;n()({},d,l);g.a.patch(t.url,l).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getSdShadowlibData(),t.addSdlibDialogClose()):t.$message.error(t.$t("lg.failed")+":"+e.data.data.message),t.addShadowlibLoading=!1}).catch(function(t){console.log(t)})},submitShadowlibList2:function(){var t=this;t.addShadowlibLoading=!0;var e={};t.shadowlibList.forEach(function(t){var i=t.domainName.split(".").join("_").split(":").join("_"),a="3"!=t.encryptionType,n="2"==t.encryptionType;e[i]={aclick:a,crossdomain:t.crossdomain,bodye:t.bodye,isws:t.isws,acookieorencpyt:n}}),g.a.patch(t.url,e).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getSdShadowlibData(),t.addSdlibDialogClose()):t.$message.error(t.$t("lg.failed")+":"+e.data.data.message),t.addShadowlibLoading=!1}).catch(function(t){console.log(t)})},addSdlibDialogClose:function(){this.shadowlibList=[],this.$refs.shadowlibform.resetFields(),this.addSdlibDialogVisible=!1},editSdlibDialogShow:function(t,e){this.editSdlibDialogVisible=!0,this.editShadowlibform=o()({},{domainName:_.decode(t),crossdomain:e.crossdomain,isa:e.aclick,encryptionType:e.xhrqueryparamsorurl?"2":"1",bodye:e.bodye,isws:e.isws,acookieorencpyt:e.acookieorencpyt})},editSdlibEnsure:function(){var t=this;t.editShadowlibLoading=!0;var e={},i=t.editShadowlibform.domainName,a=_.encode(i),n=t.editShadowlibform.isa,r="2"==t.editShadowlibform.encryptionType;e[a]={aclick:n,crossdomain:t.editShadowlibform.crossdomain,bodye:t.editShadowlibform.bodye,isws:t.editShadowlibform.isws,acookieorencpyt:!1,xhrqueryparamsorurl:r},g.a.patch(t.url,e).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getSdShadowlibData(),t.editSdlibDialogClose()):t.$message.error(t.$t("lg.failed")+":"+e.data.data),t.editShadowlibLoading=!1}).catch(function(t){console.log(t)})},editSdlibDialogClose:function(){this.editSdlibDialogVisible=!1},deletShadowlib:function(t){var e=this,i=e.shadowObj.snodeId,a=t.split(".").join("_").split(":").join("_"),n="";e.getDirectiveLoading=!0,n=e.isAuto?b.b+"pe/shadow/config/shadowlib/"+i+"?domain="+a+"&autoconfig=true":e.isEditConfig?b.b+"pe/shadow/config/shadowlib/"+i+"?domain="+a+"&savedConfig=true":b.b+"pe/shadow/config/shadowlib/"+i+"?domain="+a,g.a.delete(n).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getSdShadowlibData()):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},getSdDefenseCookieData:function(){var t=this;return new l.a(function(e,i){var a=t.shadowObj.snodeId;t.getDirectiveLoading=!0,t.isAuto?t.url=b.b+"pe/shadow/dyncookie/"+a+"?autoconfig=true":t.isEditConfig?t.url=b.b+"pe/shadow/dyncookie/"+a+"?savedConfig=true":t.url=b.b+"pe/shadow/dyncookie/"+a,g.a.get(t.url).then(function(i){if(0==i.data.responseCode){var a=i.data.data;a.shadow_server_cookie_timeout&&(t.defenseCookieswitch=!0,t.defenseCookieform.defenseTime=a.shadow_server_cookie_timeout,t.defenseCookieform.defenseTimes=a.shadow_server_cookie_num),e(a)}else t.$message.error(t.$t("lg.failed")+": "+i.data.data.message);t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})})},sdDefCookieSwitchEvent:function(){var t=this;t.defenseCookieswitch?(t.defenseCookieswitch=!1,t.$message.error(t.$t("lg.ondfcookietips"))):t.$confirm(t.$t("lg.offdfcookietips"),t.$t("lg.tips"),{confirmButtonText:t.$t("lg.yes"),cancelButtonText:t.$t("lg.cancel"),type:"warning"}).then(function(){t.getDirectiveLoading=!0,g.a.delete(t.url).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.$refs.defenseCookieform.resetFields()):(t.defenseCookieswitch=!0,t.$message.error(t.$t("lg.failed")+":"+e.data.data.message)),t.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}).catch(function(){t.defenseCookieswitch=!0,t.$message({type:"info",message:t.$t("lg.canceled")})})},submitdefenseCookie:function(t){var e=this,i=this;this.$refs.defenseCookieform.validate(function(a){if(a){e.getDirectiveLoading=!0;var n="post";t&&(n="patch"),g.a[n](e.url,{timeout:e.defenseCookieform.defenseTime,num:e.defenseCookieform.defenseTimes}).then(function(t){0==t.data.responseCode?(e.defenseCookieswitch=!0,e.$message({type:"success",message:i.$t("lg.success")})):e.$message.error(i.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}})},directiveDialogClose:function(){this.activeName="",this.$refs.rejectHeaderDctform.resetFields(),this.$refs.verifyLimitIpDctform.resetFields(),this.whiteListswitch=!1,this.whiteIplistData=[],this.whiteIpListRemark="",this.$refs.whiteListform.resetFields(),this.agtTimeoutSwitch=!1,this.$refs.agtTimeoutform.resetFields(),this.sdApiSwitch=!1,this.$refs.sdApiform.resetFields(),this.shadowlibData={},this.defenseCookieswitch=!1,this.$refs.defenseCookieform.resetFields(),this.$emit("setbysdSeniorInstructmodal",!1)}},filters:{toBase64:function(t){return _.decode(t)}}},y={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.directiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"directiveBox"},[i("h1",{staticClass:"directiveTitle"},[t._v("高级配置")]),t._v(" "),i("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-collapse-item",{attrs:{title:"头域校验功能",name:"shadow_verify_user_agent"}},[i("div",{staticClass:"seniorDctBox"},[i("el-form",{ref:"verifyUserAgentDctform",attrs:{model:t.verifyUserAgentDctform,"label-width":"125px"}},[i("el-form-item",{attrs:{label:"开启头域校验功能",prop:"verifyUserAgentVal"}},[i("el-switch",{model:{value:t.verifyUserAgentDctform.verifyUserAgentVal,callback:function(e){t.$set(t.verifyUserAgentDctform,"verifyUserAgentVal",e)},expression:"verifyUserAgentDctform.verifyUserAgentVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.validSubmitBlockDct("shadow_verify_user_agent",t.verifyUserAgentDctform.verifyUserAgentVal)}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"拒绝头域名参数设置",name:"shadow_reject_header"}},[i("div",{staticClass:"seniorDctBox"},[i("div",{staticClass:"orderBoxJamb"},[i("el-form",{ref:"rejectHeaderDctform",attrs:{model:t.rejectHeaderDctform,rules:t.rejectHeaderDctformRules}},[i("el-form-item",{attrs:{label:"拒绝头域名参数",prop:"rejectHeaderVal"}},[i("el-input",{staticStyle:{width:"60%","margin-right":"10px"},model:{value:t.rejectHeaderDctform.rejectHeaderVal,callback:function(e){t.$set(t.rejectHeaderDctform,"rejectHeaderVal","string"==typeof e?e.trim():e)},expression:"rejectHeaderDctform.rejectHeaderVal"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.validSubmitBlockDct("shadow_reject_header",t.rejectHeaderDctform.rejectHeaderVal,"rejectHeaderDctform")}}},[t._v("添加参数")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dataBox"},[0==t.directiveData.length?i("p",{staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]):i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("头域名参数")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[i("td",[t._v(t._s(e.shadow_reject_header))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editBlockDctDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBlockDirective("shadow_reject_header",e.shadow_reject_header)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])])])]),t._v(" "),i("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:!t.isAuto&&!t.isEditConfig,expression:"!isAuto && !isEditConfig"}],attrs:{title:"IP白名单功能",name:"shadow_white_ip"}},[i("div",{staticClass:"seniorDctBox"},[i("el-form",{ref:"whiteListform",attrs:{model:t.whiteListform,rules:t.whiteListformRules}},[i("el-form-item",{attrs:{label:"开启IP白名单功能",prop:"whiteListswitch"}},[i("el-switch",{on:{change:function(e){t.whiteIpSwitchEvent()}},model:{value:t.whiteListswitch,callback:function(e){t.whiteListswitch=e},expression:"whiteListswitch"}})],1),t._v(" "),i("div",{staticClass:"tips"},[i("p",[t._v("1、允许输入IP，多个IP请用英文字符逗号( , ) 分隔，比如192.168.1.1,192.168.1.2")]),t._v(" "),i("p",[t._v("2、允许输入IP段，多个IP段请用英文字符逗号( , )分隔，比如192.168.1.,192.168.2.")]),t._v(" "),i("p",[t._v("3、允许同时输入IP、IP段，多个IP、IP段请用英文字符逗号( , ) 分隔，比如192.168.1.1,192.168.2.")])]),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:t.$t("lg.ips"),prop:"white_ip","label-width":"75px"}},[i("el-input",{staticStyle:{width:"60%","margin-right":"10px"},attrs:{type:"textarea",autosize:{minRows:4}},model:{value:t.whiteListform.white_ip,callback:function(e){t.$set(t.whiteListform,"white_ip","string"==typeof e?e.trim():e)},expression:"whiteListform.white_ip"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.submitWhiteList()}}},[t._v(t._s(t.$t("lg.addwhite")))])],1)],1)],1),t._v(" "),i("div",{staticClass:"dataBox"},[0==t.whiteIplistData.length?i("p",{staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]):i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.serialnumber")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.ips")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.whiteIplistData,function(e,a){return i("tr",[i("td",[t._v(t._s(a+1))]),t._v(" "),i("td",[t._v(t._s(e))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editWhiteIp(e,a)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(e){t.delWhiteIp(a)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])]),t._v(" "),i("div",{staticClass:"wIpRemarkBox"},[i("span",{staticClass:"wIpRemarkTxt"},[t._v("备注："+t._s(t.whiteIpListRemark?t.whiteIpListRemark:"暂无备注"))]),t._v(" "),i("el-button",{staticClass:"wIpRemarkBtn",attrs:{type:"text"},on:{click:t.showRemarkDialog}},[t._v("添加/编辑")])],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"IP限制名单功能",name:"shadow_limit_ip"}},[i("div",{staticClass:"seniorDctBox"},[i("el-form",{ref:"verifyLimitIpDctform",attrs:{model:t.verifyLimitIpDctform,rules:t.verifyLimitIpDctformRules}},[i("el-form-item",{attrs:{label:"开启IP限制名单功能",prop:"verifyLimitIpVal"}},[i("el-switch",{on:{change:function(e){t.limitIpSwitchEvent("shadow_verify_limit_ip",t.verifyLimitIpDctform.verifyLimitIpVal)}},model:{value:t.verifyLimitIpDctform.verifyLimitIpVal,callback:function(e){t.$set(t.verifyLimitIpDctform,"verifyLimitIpVal",e)},expression:"verifyLimitIpDctform.verifyLimitIpVal"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:t.$t("lg.ips"),prop:"limitIpVal","label-width":"75px"}},[i("el-input",{staticStyle:{width:"60%","margin-right":"10px"},model:{value:t.verifyLimitIpDctform.limitIpVal,callback:function(e){t.$set(t.verifyLimitIpDctform,"limitIpVal","string"==typeof e?e.trim():e)},expression:"verifyLimitIpDctform.limitIpVal"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.validSubmitBlockDct("shadow_limit_ip",t.verifyLimitIpDctform.limitIpVal,"verifyLimitIpDctform")}}},[t._v("添加ip限制名单")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dataBox"},[0==t.directiveData.length?i("p",{staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]):i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.serialnumber")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.ips")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e,a){return i("tr",[i("td",[t._v(t._s(a+1))]),t._v(" "),i("td",[t._v(t._s(e.shadow_limit_ip))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editBlockDctDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBlockDirective("shadow_limit_ip",e.shadow_limit_ip)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])])],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"IP黑名单功能",name:"shadow_black_ip"}},[i("div",{staticClass:"seniorDctBox"},[i("el-form",{ref:"verifyBlackIpDctform",attrs:{model:t.verifyBlackIpDctform,rules:t.verifyBlackIpDctformRules}},[i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:t.$t("lg.ips"),prop:"blackIpVal","label-width":"75px"}},[i("el-input",{staticStyle:{width:"60%","margin-right":"10px"},model:{value:t.verifyBlackIpDctform.blackIpVal,callback:function(e){t.$set(t.verifyBlackIpDctform,"blackIpVal","string"==typeof e?e.trim():e)},expression:"verifyBlackIpDctform.blackIpVal"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){t.validSubmitBlackip("verifyBlackIpDctform")}}},[t._v("添加ip黑名单")])],1)],1)]),t._v(" "),i("div",{staticClass:"dataBox"},[0==t.blackdirectiveData.length?i("p",{staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]):i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.serialnumber")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.ips")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.blackdirectiveData,function(e,a){return i("tr",[i("td",[t._v(t._s(a+1))]),t._v(" "),i("td",[t._v(t._s(t._f("toBase64")(e.shadow_black_ip)))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editBlackipDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delBlackipDirective(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])])],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"请求超时时间设置",name:"agent_time"}},[i("div",{staticClass:"seniorDctBox"},[i("el-form",{ref:"agtTimeoutform",attrs:{model:t.agtTimeoutform,rules:t.agtTimeoutformRules}},[i("el-form-item",{attrs:{label:"开启请求超时时间调整功能"}},[i("el-switch",{attrs:{title:t.agtTimeoutSwitch?t.$t("lg.clickdel"):""},on:{change:function(e){t.agtTimeSwitchEvent()}},model:{value:t.agtTimeoutSwitch,callback:function(e){t.agtTimeoutSwitch=e},expression:"agtTimeoutSwitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-row",{attrs:{gutter:10}},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"请求超时时间调整",prop:"agtTimeoutVal","label-width":"140px"}},[i("el-input",{attrs:{placeholder:"请求时间"},model:{value:t.agtTimeoutform.agtTimeoutVal,callback:function(e){t.$set(t.agtTimeoutform,"agtTimeoutVal",e)},expression:"agtTimeoutform.agtTimeoutVal"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:8}},[i("el-form-item",[i("el-select",{attrs:{placeholder:t.$t("lg.select")},model:{value:t.agtTimeoutform.agtTimeoutUnit,callback:function(e){t.$set(t.agtTimeoutform,"agtTimeoutUnit",e)},expression:"agtTimeoutform.agtTimeoutUnit"}},t._l(t.agtTimeoutform.agtTimeoutUnitOpt,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{"label-width":"140px"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitAgtTimeout}},[t._v(t._s(t.agtTimeoutSwitch?t.$t("lg.edit"):t.$t("lg.save")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Js加密防护设置",name:"shadow_api"}},[i("div",{staticClass:"seniorDctBox"},[i("el-form",{ref:"sdApiform",attrs:{model:t.sdApiform,rules:t.sdApiformRules,"label-width":"60px"}},[i("el-form-item",{attrs:{label:"开启Js加密防护功能","label-width":"140px"}},[i("el-switch",{attrs:{title:t.sdApiSwitch?t.$t("lg.clickoff"):""},on:{change:function(e){t.sdApiSwitchEvent()}},model:{value:t.sdApiSwitch,callback:function(e){t.sdApiSwitch=e},expression:"sdApiSwitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:t.$t("lg.counts"),prop:"sdApiTimes"}},[i("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:t.$t("lg.counts")},model:{value:t.sdApiform.sdApiTimes,callback:function(e){t.$set(t.sdApiform,"sdApiTimes","string"==typeof e?e.trim():e)},expression:"sdApiform.sdApiTimes"}}),t._v(" /次\n                ")],1),t._v(" "),i("el-form-item",{attrs:{label:"时间",prop:"sdApiTime"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:t.$t("lg.validdate")},model:{value:t.sdApiform.sdApiTime,callback:function(e){t.$set(t.sdApiform,"sdApiTime","string"==typeof e?e.trim():e)},expression:"sdApiform.sdApiTime"}}),t._v(" "),i("el-select",{staticStyle:{width:"30%"},model:{value:t.sdApiTimeUnit,callback:function(e){t.sdApiTimeUnit=e},expression:"sdApiTimeUnit"}},t._l(t.apiUnitOpt,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitSdApi()}}},[t._v(t._s(t.sdApiSwitch?t.$t("lg.editparams"):t.$t("lg.addparams")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Js配置选项",name:"shadowlib_config"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-button",{staticClass:"addSeniorDctBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addSdlibDialogShow()}}},[t._v("新增配置项")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==Object.keys(t.shadowlibData).length,expression:"Object.keys(shadowlibData).length==0"}],staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:Object.keys(t.shadowlibData).length>0,expression:"Object.keys(shadowlibData).length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("域名")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.shadowlibData,function(e,a){return i("tr",{key:a},[i("td",[t._v(t._s(t._f("toBase64")(a)))]),t._v(" "),i("td",[i("ul",{staticClass:"sdlibList"},[i("li",[i("span",[t._v("跨域功能设置：")]),t._v(t._s(e.crossdomain?e.crossdomain:"无设置"))]),t._v(" "),i("li",[i("span",[t._v("A链接加密：")]),i("i",{class:e.aclick?"el-icon-success font-green":"el-icon-warning"}),t._v(" "+t._s(e.aclick?"已开启":"未开启"))]),t._v(" "),i("li",[i("span",[t._v("加密方式：")]),t._v(t._s(e.xhrqueryparamsorurl?"url加密":"arg加密"))]),t._v(" "),i("li",[i("span",[t._v("body加密功能：")]),i("i",{class:e.bodye?"el-icon-success font-green":"el-icon-warning"}),t._v(" "+t._s(e.bodye?"已开启":"未开启"))]),t._v(" "),i("li",[i("span",[t._v("websocket加密功能：")]),i("i",{class:e.isws?"el-icon-success font-green":"el-icon-warning"}),t._v(" "+t._s(e.isws?"已开启":"未开启"))])])]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editSdlibDialogShow(a,e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(e){t.deletShadowlib(a)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Shadow Cookie验证设置",name:"shadow_dyncookie"}},[i("div",{staticClass:"seniorDctBox"},[i("p",{staticClass:"tips"},[t._v("注："+t._s(t.$t("lg.dfcookietips")))]),t._v(" "),i("el-form",{ref:"defenseCookieform",attrs:{model:t.defenseCookieform,rules:t.defenseCookieformRules,"label-width":"90px"}},[i("el-form-item",{attrs:{label:t.$t("lg.dfcookieonoff"),"label-width":"200px"}},[i("el-switch",{attrs:{title:t.defenseCookieswitch?t.$t("lg.clickoff"):""},on:{change:function(e){t.sdDefCookieSwitchEvent()}},model:{value:t.defenseCookieswitch,callback:function(e){t.defenseCookieswitch=e},expression:"defenseCookieswitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:t.$t("lg.validdate"),prop:"defenseTime"}},[i("el-input",{staticStyle:{width:"50%"},attrs:{placeholder:t.$t("lg.validdate")},model:{value:t.defenseCookieform.defenseTime,callback:function(e){t.$set(t.defenseCookieform,"defenseTime","string"==typeof e?e.trim():e)},expression:"defenseCookieform.defenseTime"}}),t._v(" "),i("el-select",{staticStyle:{width:"30%"},model:{value:t.dfsCookieTimeUnit,callback:function(e){t.dfsCookieTimeUnit=e},expression:"dfsCookieTimeUnit"}},[i("el-option",{attrs:{label:t.$t("lg.second"),value:"s"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.counts"),prop:"defenseTimes"}},[i("el-input",{staticStyle:{width:"45%"},attrs:{placeholder:t.$t("lg.counts")},model:{value:t.defenseCookieform.defenseTimes,callback:function(e){t.$set(t.defenseCookieform,"defenseTimes","string"==typeof e?e.trim():e)},expression:"defenseCookieform.defenseTimes"}}),t._v(" /次\n                ")],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitdefenseCookie(t.defenseCookieswitch)}}},[t._v(t._s(t.defenseCookieswitch?t.$t("lg.editparams"):t.$t("lg.addparams")))])],1)],1)],1)])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.getDirectiveLoading,expression:"getDirectiveLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShowEditBlockDct,"close-on-click-modal":!1,"before-close":t.editBlockDctClose},on:{"update:visible":function(e){t.isShowEditBlockDct=e}}},[i("el-form",{ref:"editBlockDctform",attrs:{model:t.editBlockDctform}},[i("el-form-item",{attrs:{label:"shadow_reject_header"==t.activeName?"拒绝头域名参数":"IP/IP段","label-width":"shadow_reject_header"==t.activeName?"125px":"80px",prop:"editBlockDctVal",rules:"shadow_reject_header"==t.activeName?t.rejectHeaderDctformRules.rejectHeaderVal:t.verifyLimitIpDctformRules.limitIpVal}},[i("el-input",{model:{value:t.editBlockDctform.editBlockDctVal,callback:function(e){t.$set(t.editBlockDctform,"editBlockDctVal","string"==typeof e?e.trim():e)},expression:"editBlockDctform.editBlockDctVal"}})],1)],1),t._v(" "),i("div",{staticClass:"text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editBlockDirective("editBlockDctform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editBlockDctClose}},[t._v(t._s(t.$t("lg.cancel")))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editBlockDctLoading,expression:"editBlockDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShowEditBlackip,"close-on-click-modal":!1,"before-close":t.editBlackipClose},on:{"update:visible":function(e){t.isShowEditBlackip=e}}},[i("el-form",{ref:"editBlackipform",attrs:{model:t.editBlackipform}},[i("el-form-item",{attrs:{label:"IP/IP段","label-width":"80px",prop:"editBlackip",rules:t.verifyBlackIpDctformRules}},[i("el-input",{model:{value:t.editBlackipform.editBlackip,callback:function(e){t.$set(t.editBlackipform,"editBlackip","string"==typeof e?e.trim():e)},expression:"editBlackipform.editBlackip"}})],1)],1),t._v(" "),i("div",{staticClass:"text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editBlackipDirective("editBlackipform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editBlackipClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShowEditWhiteList,"close-on-click-modal":!1,"before-close":t.isEditWhiteListClose},on:{"update:visible":function(e){t.isShowEditWhiteList=e}}},[i("el-form",{ref:"editWhiteListform",attrs:{model:t.editWhiteListform,rules:t.editWhiteListformRules}},[i("el-form-item",{attrs:{label:t.$t("lg.ips"),"label-width":"75px",prop:"white_ip"}},[i("el-input",{model:{value:t.editWhiteListform.white_ip,callback:function(e){t.$set(t.editWhiteListform,"white_ip","string"==typeof e?e.trim():e)},expression:"editWhiteListform.white_ip"}})],1)],1),t._v(" "),i("div",{staticClass:"text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editwIEnsure("editWhiteListform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.isEditWhiteListClose}},[t._v(t._s(t.$t("lg.cancel")))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editWhitelistLoading,expression:"editWhitelistLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShowWIpRemark,"close-on-click-modal":!1,"before-close":t.wIpRemarkDialogClose},on:{"update:visible":function(e){t.isShowWIpRemark=e}}},[i("el-form",{ref:"wIpRemarkform",attrs:{model:t.wIpRemarkform}},[i("el-form-item",{attrs:{label:"备注","label-width":"40px"}},[i("el-input",{attrs:{type:"textarea",autosize:""},model:{value:t.wIpRemarkform.wIpRemark,callback:function(e){t.$set(t.wIpRemarkform,"wIpRemark","string"==typeof e?e.trim():e)},expression:"wIpRemarkform.wIpRemark"}})],1)],1),t._v(" "),i("div",{staticClass:"text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.setWIpRemark("wIpRemarkform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.wIpRemarkDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.wIpRemarkLoading,expression:"wIpRemarkLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"70%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.addSdlibDialogVisible,"close-on-click-modal":!1,"before-close":t.addSdlibDialogClose},on:{"update:visible":function(e){t.addSdlibDialogVisible=e}}},[i("el-row",[i("el-form",{ref:"shadowlibform",staticStyle:{"margin-right":"30px"},attrs:{model:t.shadowlibform,rules:t.shadowlibformRules,"label-width":"170px"}},[i("el-form-item",{attrs:{label:"域名",prop:"domainName"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.shadowlibform.domainName,callback:function(e){t.$set(t.shadowlibform,"domainName","string"==typeof e?e.trim():e)},expression:"shadowlibform.domainName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"跨域功能设置",prop:"crossdomain"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.shadowlibform.crossdomain,callback:function(e){t.$set(t.shadowlibform,"crossdomain","string"==typeof e?e.trim():e)},expression:"shadowlibform.crossdomain"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"开启A链接加密",prop:"isa"}},[i("el-switch",{model:{value:t.shadowlibform.isa,callback:function(e){t.$set(t.shadowlibform,"isa",e)},expression:"shadowlibform.isa"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"加密方式",prop:"encryptionType"}},[i("el-radio",{attrs:{label:"1"},model:{value:t.shadowlibform.encryptionType,callback:function(e){t.$set(t.shadowlibform,"encryptionType",e)},expression:"shadowlibform.encryptionType"}},[t._v("Arg加密")]),t._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:t.shadowlibform.encryptionType,callback:function(e){t.$set(t.shadowlibform,"encryptionType",e)},expression:"shadowlibform.encryptionType"}},[t._v("Url加密")])],1),t._v(" "),i("el-form-item",{attrs:{label:"开启body加密功能",prop:"bodye"}},[i("el-switch",{model:{value:t.shadowlibform.bodye,callback:function(e){t.$set(t.shadowlibform,"bodye",e)},expression:"shadowlibform.bodye"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"开启websocket加密功能",prop:"isws"}},[i("el-switch",{model:{value:t.shadowlibform.isws,callback:function(e){t.$set(t.shadowlibform,"isws",e)},expression:"shadowlibform.isws"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitShadowlibList("shadowlibform")}}},[t._v("确定")]),t._v(" "),i("el-button",{on:{click:t.addSdlibDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addShadowlibLoading,expression:"addShadowlibLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.editSdlibDialogVisible,"close-on-click-modal":!1,"before-close":t.editSdlibDialogClose},on:{"update:visible":function(e){t.editSdlibDialogVisible=e}}},[i("el-form",{ref:"editShadowlibform",attrs:{model:t.editShadowlibform,rules:t.editShadowlibformRules,"label-width":"170px"}},[i("el-form-item",{attrs:{label:"域名",prop:"domainName"}},[i("el-input",{attrs:{disabled:""},model:{value:t.editShadowlibform.domainName,callback:function(e){t.$set(t.editShadowlibform,"domainName","string"==typeof e?e.trim():e)},expression:"editShadowlibform.domainName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"开启A链接加密",prop:"isa"}},[i("el-switch",{model:{value:t.editShadowlibform.isa,callback:function(e){t.$set(t.editShadowlibform,"isa",e)},expression:"editShadowlibform.isa"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"跨域功能设置",prop:"crossdomain"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.editShadowlibform.crossdomain,callback:function(e){t.$set(t.editShadowlibform,"crossdomain","string"==typeof e?e.trim():e)},expression:"editShadowlibform.crossdomain"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"选择链接加密方式",prop:"encryptionType"}},[i("el-radio",{attrs:{label:"1"},model:{value:t.editShadowlibform.encryptionType,callback:function(e){t.$set(t.editShadowlibform,"encryptionType",e)},expression:"editShadowlibform.encryptionType"}},[t._v("Arg加密")]),t._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:t.editShadowlibform.encryptionType,callback:function(e){t.$set(t.editShadowlibform,"encryptionType",e)},expression:"editShadowlibform.encryptionType"}},[t._v("Url加密")])],1),t._v(" "),i("el-form-item",{attrs:{label:"开启body加密功能",prop:"bodye"}},[i("el-switch",{model:{value:t.editShadowlibform.bodye,callback:function(e){t.$set(t.editShadowlibform,"bodye",e)},expression:"editShadowlibform.bodye"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"开启websocket加密功能",prop:"isws"}},[i("el-switch",{model:{value:t.editShadowlibform.isws,callback:function(e){t.$set(t.editShadowlibform,"isws",e)},expression:"editShadowlibform.isws"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editSdlibEnsure("editCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editSdlibDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editShadowlibLoading,expression:"editShadowlibLoading"}]})],1)],1)},staticRenderFns:[]};var x=i("VU/8")(w,y,!1,function(t){i("dfF3")},"data-v-2ed80c8e",null);e.a=x.exports},QXXM:function(t,e){},R3Th:function(t,e){},"S/wy":function(t,e){},S7PT:function(t,e){},SldL:function(t,e){!function(e){"use strict";var i,a=Object.prototype,n=a.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag",c="object"==typeof t,d=e.regeneratorRuntime;if(d)c&&(t.exports=d);else{(d=e.regeneratorRuntime=c?t.exports:{}).wrap=w;var u="suspendedStart",f="suspendedYield",h="executing",m="completed",p={},g={};g[o]=function(){return this};var v=Object.getPrototypeOf,b=v&&v(v(T([])));b&&b!==a&&n.call(b,o)&&(g=b);var _=$.prototype=x.prototype=Object.create(g);k.prototype=_.constructor=$,$.constructor=k,$[l]=k.displayName="GeneratorFunction",d.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===k||"GeneratorFunction"===(e.displayName||e.name))},d.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,$):(t.__proto__=$,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(_),t},d.awrap=function(t){return{__await:t}},C(S.prototype),S.prototype[s]=function(){return this},d.AsyncIterator=S,d.async=function(t,e,i,a){var n=new S(w(t,e,i,a));return d.isGeneratorFunction(e)?n:n.next().then(function(t){return t.done?t.value:n.next()})},C(_),_[l]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},d.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var a=e.pop();if(a in t)return i.value=a,i.done=!1,i}return i.done=!0,i}},d.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(N),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function a(a,n){return s.type="throw",s.arg=t,e.next=a,n&&(e.method="next",e.arg=i),!!n}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return a("end");if(o.tryLoc<=this.prev){var l=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return a(o.catchLoc,!0);if(this.prev<o.finallyLoc)return a(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return a(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return a(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&n.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var r=a;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,p):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),N(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var a=i.completion;if("throw"===a.type){var n=a.arg;N(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,a){return this.delegate={iterator:T(t),resultName:e,nextLoc:a},"next"===this.method&&(this.arg=i),p}}}function w(t,e,i,a){var n,r,o,s,l=e&&e.prototype instanceof x?e:x,c=Object.create(l.prototype),d=new O(a||[]);return c._invoke=(n=t,r=i,o=d,s=u,function(t,e){if(s===h)throw new Error("Generator is already running");if(s===m){if("throw"===t)throw e;return I()}for(o.method=t,o.arg=e;;){var i=o.delegate;if(i){var a=D(i,o);if(a){if(a===p)continue;return a}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===u)throw s=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=h;var l=y(n,r,o);if("normal"===l.type){if(s=o.done?m:f,l.arg===p)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(s=m,o.method="throw",o.arg=l.arg)}}),c}function y(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function x(){}function k(){}function $(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function S(t){var e;this._invoke=function(i,a){function r(){return new Promise(function(e,r){!function e(i,a,r,o){var s=y(t[i],t,a);if("throw"!==s.type){var l=s.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?Promise.resolve(c.__await).then(function(t){e("next",t,r,o)},function(t){e("throw",t,r,o)}):Promise.resolve(c).then(function(t){l.value=t,r(l)},o)}o(s.arg)}(i,a,e,r)})}return e=e?e.then(r,r):r()}}function D(t,e){var a=t.iterator[e.method];if(a===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,D(t,e),"throw"===e.method))return p;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=y(a,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,p;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,p):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,p)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function O(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function T(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,r=function e(){for(;++a<t.length;)if(n.call(t,a))return e.value=t[a],e.done=!1,e;return e.value=i,e.done=!0,e};return r.next=r}}return{next:I}}function I(){return{value:i,done:!0}}}(function(){return this}()||Function("return this")())},TsEH:function(t,e,i){"use strict";var a=i("woOf"),n=i.n(a),r=i("mvHQ"),o=i.n(r),s=i("//Fk"),l=i.n(s),c=i("mtWM"),d=i.n(c),u=(i("5reh"),i("qqiS")),f=i("yJCr"),h=i("kDN8"),m=i("InnB"),p={components:{loading:u.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){return{url:"",getDirectiveLoading:!1,directiveData:[],overTimeUnit:[{value:"y",label:this.$t("lg.year")},{value:"M",label:this.$t("lg.month")},{value:"w",label:this.$t("lg.week")},{value:"d",label:this.$t("lg.day")},{value:"h",label:this.$t("lg.hour")},{value:"m",label:this.$t("lg.minite")},{value:"s",label:this.$t("lg.second")},{value:"ms",label:this.$t("lg.ms")}],overTimeValue:"s",addDctDialogVisible:!1,directiveform:{uri1:"",uri2:"",uri3:"",time:500,refreshtimes:1,raeChecklist:[this.$t("lg.encryptpa")]},directiveformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],uri2:[],uri3:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],time:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],refreshtimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},directiveList:[],addDctLoading:!1,editDctDialogVisible:!1,editDirectiveform:{uri1:"",uri2:"",uri3:"",time:"",timeNum:null,refreshtimes:"",raeChecklist:[]},editDirectiveformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],uri2:[],uri3:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],timeNum:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],refreshtimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editDirectiveOrgin:{uri1:"",uri2:"",time:"",refreshtimes:1,raeChecklist:[]},orginEditdirective:{},editDctLoading:!1}},mounted:function(){this.isAuto?this.url=f.b+"pe/shadow/domain/location/protectconf/special?autoconfig=true":this.isEditConfig?this.url=f.b+"pe/shadow/domain/location/protectconf/special?savedConfig=true":this.url=f.b+"pe/shadow/domain/location/protectconf/special"},methods:{getLcSpecialProtectInstructData2:function(){var t=this;return new l.a(function(e,i){Object(h.a)(t,{shadowObj:t.shadowObj,domainObj:t.domainObj,locationObj:t.locationObj},!1,"shadow_sub_filter_ex",t.isAuto,t.isEditConfig).then(function(i){t.directiveData=i,e(i)})})},getLcSpecialProtectInstructData:function(){var t=this;return new l.a(function(e,i){var a=t;d.a.get(a.url,{params:{snodeId:a.shadowObj.snodeId,domainName:a.domainObj.domainName,domainPort:a.domainObj.port,locationName:a.locationObj.name,locationType:a.locationObj.type}}).then(function(i){var a=i.data.data||[];t.directiveData=a,e(a)})})},directiveDialogClose:function(){this.$emit("setbylcSpecialProtectInstructmodal",!1)},addDctDialogShow:function(){this.addDctDialogVisible=!0},addDirectiveList:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(t){var a=e.$t("lg.encrypt2"),n=e.$t("lg.encryptab"),r=e.$t("lg.encryptpa"),o=e.directiveform.uri1,s=e.directiveform.uri2,l=e.directiveform.uri3,c=e.directiveform.time+e.overTimeValue,u=e.directiveform.refreshtimes,f=e.directiveform.raeChecklist.join("").replace(a,"e").replace(n,"s").replace("允许访问原URI","a").replace(r,"p"),h={domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,snodeId:i.shadowObj.snodeId,srcUri:o,retainPart:s,jumpUrl:l,timeout:c,refreshNum:u,confType:f};d.a.post(i.url,h).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcSpecialProtectInstructData(),i.$emit("updateRenderTree"),i.addDctDialogClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.addDctLoading=!1}).catch(function(t){console.log(t)})}})},delDirectiveList:function(t){this.directiveList.splice(this.directiveList.indexOf(t),1)},submitDirective:function(){var t=this;t.addDctLoading=!0;var e=[];this.directiveList.forEach(function(t){var i=t.oarj,a="";""==i||(a=t.uri1+" "+t.uri2+" "+t.uri3+" "+t.time+" "+t.refreshtimes+" "+i),a=Base64.encode(a),e.push({shadow_sub_filter_ex:a})}),d.a.post(t.url,{snodeId:t.shadowObj.snodeId,domainName:t.domainObj.domainName,domainPort:t.domainObj.port,locationName:t.locationObj.name,locationType:t.locationObj.type,directives:e}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getLcSpecialProtectInstructData(),t.$emit("updateRenderTree"),t.addDctDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.addDctLoading=!1}).catch(function(t){console.log(t)})},addDctDialogClose:function(){this.directiveList=[],this.$refs.directiveform.resetFields(),this.directiveform.raeChecklist=[this.$t("lg.encryptpa")],this.addDctDialogVisible=!1},editDctDialogShow:function(t){console.log(t);this.editDctDialogVisible=!0,this.orginEditdirective=JSON.parse(o()(t));var e=t.timeout.match(/^(\d*)(\w*)/),i=[];t.confType&&(i=t.confType.split(""));var a=i.map(function(t){return"p"==t?t="路径加密":"a"==t?t="允许访问原URI":"e"==t?t="二次加密":"s"==t&&(t="绝对路径"),t});this.editDirectiveform.uri1=t.srcUri,this.editDirectiveform.uri2=t.retainPart,this.editDirectiveform.uri3=t.jumpUrl,this.editDirectiveform.refreshtimes=t.refreshNum,this.editDirectiveform.timeNum=e[1],this.editDirectiveform.overTimeValue=e[2],this.editDirectiveform.raeChecklist=a},editDctDialogShow2:function(t){this.editDctDialogVisible=!0,this.editDirectiveOrgin.uri1=t[0],this.editDirectiveOrgin.uri2=t[1],this.editDirectiveOrgin.uri3=t[2],this.editDirectiveOrgin.refreshtimes=t[4];var e=t[5];switch(this.editDirectiveOrgin.raeChecklist=Object(m.d)(e,{"二次加密":"e","绝对路径":"s","路径加密":"p","允许访问原URI":"a"},!1),this.editDirectiveform.raeChecklist=[],this.editDirectiveform.raeChecklist=e.split("、"),t[3].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"年":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"y",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"y";break;case"月":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"M",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"M";break;case"周":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"w",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"w";break;case"天":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"d",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"d";break;case"小时":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"h",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"h";break;case"分钟":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"m",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"m";break;case"秒":this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"s",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"s";break;default:this.editDirectiveOrgin.time=t[3].match(/(\d*)(\w*)/)[1]+"ms",this.editDirectiveform.time=t[3].match(/(\d*)(\w*)/)[1]+"ms"}this.editDirectiveform.timeNum=this.editDirectiveform.time.match(/(\d*)(\w*)/)[1]-0,this.overTimeValue=this.editDirectiveform.time.match(/(\d*)(\w*)/)[2],this.editDirectiveform.uri1=t[0],this.editDirectiveform.uri2=t[1],this.editDirectiveform.uri3=t[2],this.editDirectiveform.refreshtimes=t[4]},editDctEnsure:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(t){e.editDirectiveform.raeChecklist;var a=e.editDirectiveform.raeChecklist.join("").replace("路径加密","p").replace("允许访问原URI","a").replace("二次加密","e").replace("绝对路径","s");d.a.patch(i.url,{domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,snodeId:i.shadowObj.snodeId,srcUri:e.editDirectiveform.uri1,retainPart:e.editDirectiveform.uri2,jumpUrl:e.editDirectiveform.uri3,timeout:e.editDirectiveform.timeNum+e.overTimeValue,refreshNum:e.editDirectiveform.refreshtimes,confType:a,oldSrcUri:e.orginEditdirective.srcUri,oldJumpUrl:e.orginEditdirective.jumpUrl,oldTimeout:e.orginEditdirective.timeout,oldRefreshNum:e.orginEditdirective.refreshNum,oldRetainPart:e.orginEditdirective.retainPart,oldConfType:e.orginEditdirective.confType}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcSpecialProtectInstructData(),i.$emit("updateRenderTree"),i.editDctDialogClose()):i.$message.error(i.$t("lg.failed")+":"+t.data.data.message),i.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctEnsure2:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;i.editDctLoading=!0;var a=e.editDirectiveform.raeChecklist.join("").replace("二次加密","e").replace("绝对路径","s").replace("路径加密","p");if(""==e.editDirectiveOrgin.raeChecklist);else var n=Base64.encode(e.editDirectiveOrgin.uri1+" "+e.editDirectiveOrgin.uri2+" "+e.editDirectiveOrgin.uri3+" "+e.editDirectiveOrgin.time+" "+e.editDirectiveOrgin.refreshtimes+" "+e.editDirectiveOrgin.raeChecklist);if(""==a);else var r=Base64.encode(e.editDirectiveform.uri1+" "+e.editDirectiveform.uri2+" "+e.editDirectiveform.uri3+" "+e.editDirectiveform.timeNum+e.overTimeValue+" "+e.editDirectiveform.refreshtimes+" "+a);d.a.patch(i.url,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,directiveName:"shadow_sub_filter_ex",srcData:n,targetData:r}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcSpecialProtectInstructData(),i.$emit("updateRenderTree"),i.editDctDialogClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctDialogClose:function(){this.editDirectiveform.raeChecklist=[],this.$refs.editDirectiveform.resetFields(),this.editDctDialogVisible=!1},deletDirective:function(t){var e=this;e.getDirectiveLoading=!0,d.a.delete(e.url,{data:{domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type,snodeId:e.shadowObj.snodeId,oldSrcUri:t.srcUri,oldRetainPart:t.retainPart,oldJumpUrl:t.jumpUrl,oldTimeout:t.timeout,oldRefreshNum:t.refreshNum,oldConfType:t.confType}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getLcSpecialProtectInstructData(),e.$emit("updateRenderTree")):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})},deletDirective2:function(t){var e=this;e.getDirectiveLoading=!0;var i=n()([],t);if(""==i[5])i.pop(i[5]);else{i[5]=Object(m.d)(i[5],{"二次加密":"e","绝对路径":"s","路径加密":"p"},!1)}switch(i[3].match(/(\d+)([\u4e00-\u9fa5]+)/)[2]){case"年":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"y";break;case"月":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"M";break;case"周":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"w";break;case"天":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"d";break;case"小时":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"h";break;case"分钟":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"m";break;case"秒":i[3]=i[3].match(/(\d*)(\w*)/)[1]+"s";break;default:i[3]=i[3].match(/(\d*)(\w*)/)[1]+"ms"}var a=Base64.encode(i.join(" ").replace(/^\s+|\s+$/gm,"")),r={},o=[];r.shadow_sub_filter_ex=a,o.push(r),d.a.delete(e.url,{data:{snodeId:e.shadowObj.snodeId,domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type,directives:o}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getLcSpecialProtectInstructData(),e.$emit("updateRenderTree")):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}},filters:{toConftype:function(t){if(t)return t.replace("e","二次加密；").replace("a","允许访问原URI；").replace("s","绝对路径；").replace("x","正则；").replace("s","绝对路径；").replace("p","路径加密；")}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"70%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.directiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"directiveBox"},[i("el-button",{staticClass:"addDirectiveBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addDctDialogShow()}}},[t._v("新增特殊保护配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v(t._s(t.$t("lg.spconfig")))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.url3")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.remained")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.url2")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.validdate")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.allowedrefreshes")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.configproperty")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[i("td",[t._v(t._s(e.srcUri))]),t._v(" "),i("td",[t._v(t._s(e.retainPart))]),t._v(" "),i("td",[t._v(t._s(e.jumpUrl))]),t._v(" "),i("td",[t._v(t._s(e.timeout))]),t._v(" "),i("td",[t._v(t._s(e.refreshNum))]),t._v(" "),i("td",[t._v(t._s(t._f("toConftype")(e.confType)))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editDctDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.getDirectiveLoading,expression:"getDirectiveLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.addDctDialogVisible,"close-on-click-modal":!1,"before-close":t.addDctDialogClose},on:{"update:visible":function(e){t.addDctDialogVisible=e}}},[i("el-form",{ref:"directiveform",staticStyle:{"margin-right":"30px"},attrs:{model:t.directiveform,rules:t.directiveformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.ourl"),prop:"uri1"}},[i("el-input",{model:{value:t.directiveform.uri1,callback:function(e){t.$set(t.directiveform,"uri1","string"==typeof e?e.trim():e)},expression:"directiveform.uri1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.remained"),prop:"uri2"}},[i("el-input",{model:{value:t.directiveform.uri2,callback:function(e){t.$set(t.directiveform,"uri2","string"==typeof e?e.trim():e)},expression:"directiveform.uri2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.url2"),prop:"uri3"}},[i("el-input",{model:{value:t.directiveform.uri3,callback:function(e){t.$set(t.directiveform,"uri3","string"==typeof e?e.trim():e)},expression:"directiveform.uri3"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),prop:"time"}},[i("el-input",{staticStyle:{width:"40%"},model:{value:t.directiveform.time,callback:function(e){t.$set(t.directiveform,"time","string"==typeof e?e.trim():e)},expression:"directiveform.time"}}),t._v(" "),i("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"$t('lg.select')"},model:{value:t.overTimeValue,callback:function(e){t.overTimeValue=e},expression:"overTimeValue"}},t._l(t.overTimeUnit,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.allowedrefreshes"),prop:"refreshtimes"}},[i("el-input",{model:{value:t.directiveform.refreshtimes,callback:function(e){t.$set(t.directiveform,"refreshtimes","string"==typeof e?e.trim():e)},expression:"directiveform.refreshtimes"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.configproperty")}},[i("div",{staticClass:"checkBorder"},[i("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.directiveform.raeChecklist,callback:function(e){t.$set(t.directiveform,"raeChecklist",e)},expression:"directiveform.raeChecklist"}},[i("el-checkbox",{attrs:{label:t.$t("lg.encrypt2")}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encryptab")}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encryptpa"),disabled:""}}),t._v(" "),i("el-checkbox",{attrs:{label:"允许访问原URI"}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDirectiveList("directiveform")}}},[t._v("增加")]),t._v(" "),i("el-button",{on:{click:t.addDctDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addDctLoading,expression:"addDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.editDctDialogVisible,"close-on-click-modal":!1,"before-close":t.editDctDialogClose},on:{"update:visible":function(e){t.editDctDialogVisible=e}}},[i("el-form",{ref:"editDirectiveform",attrs:{model:t.editDirectiveform,rules:t.editDirectiveformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.ourl"),prop:"uri1"}},[i("el-input",{model:{value:t.editDirectiveform.uri1,callback:function(e){t.$set(t.editDirectiveform,"uri1","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri1"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.remained"),prop:"uri2"}},[i("el-input",{model:{value:t.editDirectiveform.uri2,callback:function(e){t.$set(t.editDirectiveform,"uri2","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.url2"),prop:"uri3"}},[i("el-input",{model:{value:t.editDirectiveform.uri3,callback:function(e){t.$set(t.editDirectiveform,"uri3","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri3"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),prop:"timeNum"}},[i("el-input",{staticStyle:{width:"30%"},model:{value:t.editDirectiveform.timeNum,callback:function(e){t.$set(t.editDirectiveform,"timeNum","string"==typeof e?e.trim():e)},expression:"editDirectiveform.timeNum"}}),t._v(" "),i("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.overTimeValue,callback:function(e){t.overTimeValue=e},expression:"overTimeValue"}},t._l(t.overTimeUnit,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.allowedrefreshes"),prop:"refreshtimes"}},[i("el-input",{model:{value:t.editDirectiveform.refreshtimes,callback:function(e){t.$set(t.editDirectiveform,"refreshtimes","string"==typeof e?e.trim():e)},expression:"editDirectiveform.refreshtimes"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.configproperty")}},[i("div",{staticClass:"checkBorder"},[i("el-checkbox-group",{attrs:{size:"mini"},model:{value:t.editDirectiveform.raeChecklist,callback:function(e){t.$set(t.editDirectiveform,"raeChecklist",e)},expression:"editDirectiveform.raeChecklist"}},[i("el-checkbox",{attrs:{label:t.$t("lg.encrypt2")}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encryptab")}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encryptpa"),disabled:""}}),t._v(" "),i("el-checkbox",{attrs:{label:"允许访问原URI"}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("editDirectiveform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.editDctDialogClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editDctLoading,expression:"editDctLoading"}]})],1)],1)},staticRenderFns:[]};var v=i("VU/8")(p,g,!1,function(t){i("o8+k")},"data-v-1c7cc7b4",null);e.a=v.exports},UW28:function(t,e){},Xxa5:function(t,e,i){t.exports=i("jyFz")},"Z8+H":function(t,e){},"ZI++":function(t,e,i){"use strict";var a=i("woOf"),n=i.n(a),r=i("bOdI"),o=i.n(r),s=i("fZjL"),l=i.n(s),c=i("//Fk"),d=i.n(c),u=i("mtWM"),f=i.n(u),h=i("qqiS"),m=i("yJCr"),p=(i("5reh"),{components:{loading:h.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object}},data:function(){return{url:"",glbInstructLoading:!1,directiveData:[],addGIDialogVisible:!1,glbInstructform:{instructName:"",instructParam:""},glbInstructformRules:{instructName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},glbInstructList:[],addGlbInstructLoading:!1,editGIDialogVisible:!1,editInstructform:{},editInstructformRules:{dctName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},editInstructOldform:{},editGlbInstructLoading:!1}},methods:{getDmGlbInstructData:function(){var t=this;return new d.a(function(e,i){var a=t;a.isAuto?a.url=m.b+"pe/shadow/domain/directive?autoconfig=true":a.isEditConfig?a.url=m.b+"pe/shadow/domain/directive?savedConfig=true":a.url=m.b+"pe/shadow/domain/directive",f.a.get(a.url,{params:{snodeId:a.shadowObj.snodeId,domainName:a.domainObj.domainName,domainPort:a.domainObj.port}}).then(function(t){if(0==t.data.responseCode){var i=t.data.data||[];a.directiveData=[],i.forEach(function(t){a.directiveData.push({dctName:l()(t)[0],dctParam:Base64.decode(t[l()(t)[0]])})}),e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},dmGlbInstructClose:function(){this.$emit("setbydmGlbInstructmodal",!1)},addGIDialogShow:function(){this.addGIDialogVisible=!0},addGIListItem:function(t){var e=this;this.$refs[t].validate(function(t){t&&e.glbInstructList.push(e.glbInstructform)})},deletGIListItem:function(t){this.glbInstructList.splice(this.glbInstructList.indexOf(t),1)},submitGlbInstructList:function(){var t=this;t.addGlbInstructLoading=!0;var e=t.shadowObj.snodeId,i=t.domainObj.domainName,a=t.domainObj.port,n=[];t.glbInstructList.forEach(function(t){var e=Base64.encode(t.instructParam);n.push(o()({},t.instructName,e))}),f.a.post(t.url,{snodeId:e,domainName:i,domainPort:a,directives:n}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getDmGlbInstructData(),t.addGIDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.addGlbInstructLoading=!1}).catch(function(t){console.log(t)})},addGIDialogClose:function(){this.glbInstructList=[],this.$refs.glbInstructform.resetFields(),this.addGIDialogVisible=!1},editGIDialogShow:function(t,e){this.editGIDialogVisible=!0,this.editInstructOldform=t,this.editInstructform=n()({},t)},editGIEnsure:function(){var t=this;t.editGlbInstructLoading=!0;var e=t.shadowObj.snodeId,i=t.domainObj.domainName,a=t.domainObj.port,n=t.editInstructOldform.dctName,r=Base64.encode(t.editInstructOldform.dctParam),o=Base64.encode(t.editInstructform.dctParam);f.a.patch(t.url,{snodeId:e,domainName:i,domainPort:a,directiveName:n,srcData:r,targetData:o}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getDmGlbInstructData(),t.editGIDialogClose()):t.$message.error(t.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),t.editGlbInstructLoading=!1}).catch(function(t){console.log(t)})},editGIDialogClose:function(){this.editGIDialogVisible=!1},deletGlbInstruct:function(t,e){var i=this;i.glbInstructLoading=!0;var a=i.shadowObj.snodeId,n=i.domainObj.domainName,r=i.domainObj.port,s=[];s.push(o()({},t.dctName,Base64.encode(t.dctParam))),f.a.delete(i.url,{data:{snodeId:a,domainName:n,domainPort:r,directives:s}}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getDmGlbInstructData()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.glbInstructLoading=!1}).catch(function(t){console.log(t)})}}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.dmGlbInstructClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"dctBox"},[i("el-button",{staticClass:"addGIBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addGIDialogShow()}}},[t._v("新增自定义配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v("自定义配置")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[i("td",[t._v(t._s(e.dctName))]),t._v(" "),i("td",[t._v(t._s(e.dctParam))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editGIDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletGlbInstruct(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.glbInstructLoading,expression:"glbInstructLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.addGIDialogVisible,"close-on-click-modal":!1,"before-close":t.addGIDialogClose},on:{"update:visible":function(e){t.addGIDialogVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{ref:"glbInstructform",staticStyle:{"margin-right":"30px"},attrs:{model:t.glbInstructform,rules:t.glbInstructformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"instructName"}},[i("el-input",{attrs:{placeholder:"请输入配置名称"},model:{value:t.glbInstructform.instructName,callback:function(e){t.$set(t.glbInstructform,"instructName","string"==typeof e?e.trim():e)},expression:"glbInstructform.instructName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"instructParam"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.glbInstructform.instructParam,callback:function(e){t.$set(t.glbInstructform,"instructParam","string"==typeof e?e.trim():e)},expression:"glbInstructform.instructParam"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addGIListItem("glbInstructform")}}},[t._v(t._s(t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:t.addGIDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.glbInstructList.length,expression:"glbInstructList.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.glbInstructList.length>0,expression:"glbInstructList.length>0"}]},[i("table",[i("thead",[i("tr",[i("th",[t._v("配置名称")]),t._v(" "),i("th",[t._v("配置参数")]),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.glbInstructList,function(e){return i("tr",[i("td",[t._v(t._s(e.instructName))]),t._v(" "),i("td",[t._v(t._s(e.instructParam))]),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.deletGIListItem(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:t.submitGlbInstructList}},[t._v(t._s(t.$t("lg.confirm")))])],1)])])])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addGlbInstructLoading,expression:"addGlbInstructLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.editGIDialogVisible,"close-on-click-modal":!1,"before-close":t.editGIDialogClose},on:{"update:visible":function(e){t.editGIDialogVisible=e}}},[i("el-form",{ref:"editInstructform",attrs:{model:t.editInstructform,rules:t.editInstructformRules,"label-width":"80px"}},[i("el-form-item",{attrs:{label:"配置名称",prop:"dctName"}},[i("el-input",{attrs:{disabled:""},model:{value:t.editInstructform.dctName,callback:function(e){t.$set(t.editInstructform,"dctName","string"==typeof e?e.trim():e)},expression:"editInstructform.dctName"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"配置参数",prop:"dctParam"}},[i("el-input",{attrs:{placeholder:"请输入配置参数"},model:{value:t.editInstructform.dctParam,callback:function(e){t.$set(t.editInstructform,"dctParam","string"==typeof e?e.trim():e)},expression:"editInstructform.dctParam"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editGIEnsure("editCmdform")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editGIDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editGlbInstructLoading,expression:"editGlbInstructLoading"}]})],1)],1)},staticRenderFns:[]};var v=i("VU/8")(p,g,!1,function(t){i("/gLJ")},"data-v-141a4ec0",null);e.a=v.exports},ZPNK:function(t,e,i){"use strict";var a=i("//Fk"),n=i.n(a),r=i("mtWM"),o=i.n(r),s=i("qqiS"),l=i("yJCr"),c=(i("5reh"),{props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{url:"",warningModeform:{warningModeSwitch:!1},warningModeModalLoading:!1}},methods:{getSdWarningModeData:function(){var t=this;return new n.a(function(e,i){var a=t,n=a.shadowObj.snodeId;a.isAuto?a.url=l.b+"pe/shadow/warning/"+n+"?autoconfig=true":a.isEditConfig?a.url=l.b+"pe/shadow/warning/"+n+"?savedConfig=true":a.url=l.b+"pe/shadow/warning/"+n,o.a.get(a.url).then(function(t){if(console.log(t),0==t.data.responseCode){var i=t.data.data;console.log(i),a.warningModeform.warningModeSwitch="on"==i,e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},sdWarningModeModalClose:function(){this.$emit("setbysdWarningModemodal",!1)},updateWarningMode:function(){var t=this;this.$refs.warningModeform.validate(function(e){if(e){var i=t;i.warningModeModalLoading=!0;var a=i.warningModeform.warningModeSwitch?"on":"off";o.a.post(i.url,{shadow_warning_mode:a}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.sdWarningModeModalClose()):i.$message.error(i.$t("lg.failed")+": "+t.data.data.message),i.warningModeModalLoading=!1}).catch(function(t){console.log(t)})}})}},components:{loading:s.a}}),d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.sdWarningModeModalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"warningModeform",attrs:{model:t.warningModeform,"label-width":"70px"}},[i("el-form-item",{attrs:{label:"监控模式"}},[i("el-switch",{model:{value:t.warningModeform.warningModeSwitch,callback:function(e){t.$set(t.warningModeform,"warningModeSwitch",e)},expression:"warningModeform.warningModeSwitch"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.updateWarningMode}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.sdWarningModeModalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.warningModeModalLoading,expression:"warningModeModalLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(t){i("sGkj")},null,null);e.a=u.exports},bFW0:function(t,e){},cJUj:function(t,e){},dfF3:function(t,e){},exGp:function(t,e,i){"use strict";e.__esModule=!0;var a,n=i("//Fk"),r=(a=n)&&a.__esModule?a:{default:a};e.default=function(t){return function(){var e=t.apply(this,arguments);return new r.default(function(t,i){return function a(n,o){try{var s=e[n](o),l=s.value}catch(t){return void i(t)}if(!s.done)return r.default.resolve(l).then(function(t){a("next",t)},function(t){a("throw",t)});t(l)}("next")})}}},fVYR:function(t,e){},fr1F:function(t,e){},hxxP:function(t,e){},ik3I:function(t,e){},jyFz:function(t,e,i){var a=function(){return this}()||Function("return this")(),n=a.regeneratorRuntime&&Object.getOwnPropertyNames(a).indexOf("regeneratorRuntime")>=0,r=n&&a.regeneratorRuntime;if(a.regeneratorRuntime=void 0,t.exports=i("SldL"),n)a.regeneratorRuntime=r;else try{delete a.regeneratorRuntime}catch(t){a.regeneratorRuntime=void 0}},k7kN:function(t,e,i){"use strict";var a=i("mtWM"),n=i.n(a),r=i("qqiS"),o=i("yJCr"),s={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},data:{type:String},redirectmodalShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object}},data:function(){return{redirectmodalLoading:!1,redirectmodalform:{url:this.data},redirectmodalformRules:{url:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]}}},watch:{data:function(){this.redirectmodalform.url=this.data}},methods:{redirectmodalClose:function(){this.$emit("setbyredictmodal",!1)},setRedirectInput:function(t){this.$emit("setredirect",t)},updateRedirect:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(t){if(e.isAuto)var a=o.b+"pe/shadow/domain/redirect?autoconfig=true";else if(e.isEditConfig)a=o.b+"pe/shadow/domain/redirect?savedConfig=true";else a=o.b+"pe/shadow/domain/redirect";var r=e.shadowObj.snodeId,s=e.domainObj.domainName,l=e.domainObj.port;e.redirectmodalLoading=!0,n.a.post(a,{snodeId:r,domainName:s,domainPort:l,redirect:e.redirectmodalform.url}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:i.$t("lg.success")}),e.redirectmodalLoading=!1,e.redirectmodalClose()):e.$message.error(i.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})}})}},components:{loading:r.a}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.redirectmodalShow,"close-on-click-modal":!1,"before-close":t.redirectmodalClose},on:{"update:visible":function(e){t.redirectmodalShow=e}}},[i("el-form",{ref:"redirectmodalform",attrs:{model:t.redirectmodalform,"label-width":"80px",rules:t.redirectmodalformRules}},[i("el-form-item",{attrs:{label:t.$t("lg.url2"),prop:"url"}},[i("el-input",{on:{change:function(e){t.setRedirectInput(e)}},model:{value:t.redirectmodalform.url,callback:function(e){t.$set(t.redirectmodalform,"url","string"==typeof e?e.trim():e)},expression:"redirectmodalform.url"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.updateRedirect("redirectmodalform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.redirectmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.redirectmodalLoading,expression:"redirectmodalLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1)],1)},staticRenderFns:[]},c=i("VU/8")(s,l,!1,null,null,null);e.a=c.exports},kA7U:function(t,e){},kBWj:function(t,e,i){"use strict";var a=i("bOdI"),n=i.n(a),r=i("mtWM"),o=i.n(r),s=i("qqiS"),l=i("yJCr"),c=i("5reh"),d={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},data:{type:Object},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){var t;return t={wafmodalform:{wafStatus:!0,checkedRulesets:[]},isCheckRulesetShow:!1},n()(t,"isCheckRulesetShow",!1),n()(t,"rulesetform",{ruleset:[]}),n()(t,"lcwafmodalLoading",!1),t},watch:{isShow:function(){this.isShow&&("on"==this.data.waf?this.wafmodalform.wafStatus=!0:this.wafmodalform.wafStatus=!1,this.data.wafRuleset?(this.wafmodalform.checkedRulesets=this.data.wafRuleset,this.rulesetform.ruleset=this.data.wafRuleset):this.wafmodalform.checkedRulesets=[])}},methods:{lcwafstatusmodalClose:function(){this.$emit("setbylcwafmodal",!1)},showCheckRuleset:function(){this.$store.commit(c.a),this.isCheckRulesetShow=!0},checkRulesetEnsure:function(){var t=this.rulesetform.ruleset;this.wafmodalform.checkedRulesets=t,this.checkRulesetClose()},checkRulesetClose:function(){this.rulesetform.ruleset=this.wafmodalform.checkedRulesets,this.isCheckRulesetShow=!1},saveLcwaf:function(){var t=this,e=this;if(this.isAuto)var i=l.b+"pe/shadow/domain/waf?autoconfig=true";else if(this.isEditConfig)i=l.b+"pe/shadow/domain/waf?savedConfig=true";else i=l.b+"pe/shadow/domain/waf";this.lcwafmodalLoading=!0;var a=1==this.wafmodalform.wafStatus?"on":"off",n=this.wafmodalform.checkedRulesets;o.a.patch(i,{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type,waf:a,wafRuleset:n}).then(function(i){0==i.data.responseCode?(t.$emit("updateRenderTree"),t.lcwafstatusmodalClose(),t.$message({type:"success",message:e.$t("lg.success")})):t.$message.error(e.$t("lg.failed")+": "+i.data.data.message),t.lcwafmodalLoading=!1}).catch(function(t){console.log(t)})}},components:{loading:s.a}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.lcwafstatusmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("el-form",{ref:"wafmodalform",attrs:{"label-width":"90px"}},[i("el-form-item",{attrs:{label:t.$t("lg.wafstatus")+":"}},[i("el-switch",{model:{value:t.wafmodalform.wafStatus,callback:function(e){t.$set(t.wafmodalform,"wafStatus",e)},expression:"wafmodalform.wafStatus"}})],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0!=t.wafmodalform.checkedRulesets.length,expression:"wafmodalform.checkedRulesets.length!=0"}],attrs:{label:t.$t("lg.selectedruleset")}},[i("div",{staticClass:"wafBox"},[i("el-checkbox-group",{model:{value:t.wafmodalform.checkedRulesets,callback:function(e){t.$set(t.wafmodalform,"checkedRulesets",e)},expression:"wafmodalform.checkedRulesets"}},t._l(t.wafmodalform.checkedRulesets,function(e){return i("el-checkbox",{key:e,attrs:{label:e,disabled:""}},[t._v(t._s(e))])}))],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.saveLcwaf}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.lcwafstatusmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.lcwafmodalLoading,expression:"lcwafmodalLoading"}]},[i("loading",{attrs:{title:t.$t("lg.handling")}})],1)],1),t._v(" "),i("el-dialog",{attrs:{width:"40%",title:t.$t("lg.selectruleset"),visible:t.isCheckRulesetShow,"close-on-click-modal":!1,"before-close":t.checkRulesetClose},on:{"update:visible":function(e){t.isCheckRulesetShow=e}}},[i("el-form",{ref:"rulesetform",attrs:{model:t.rulesetform,"label-width":"100px"}},[i("el-form-item",{attrs:{label:t.$t("lg.gourules")}},[i("el-checkbox-group",{model:{value:t.rulesetform.ruleset,callback:function(e){t.$set(t.rulesetform,"ruleset",e)},expression:"rulesetform.ruleset"}},t._l(t.$store.state.allRulesetData,function(e){return i("el-checkbox",{key:e.id,attrs:{label:e.fileName}},[t._v(t._s(e.fileName))])}))],1)],1),t._v(" "),i("div",{staticClass:"text-center"},[i("el-button",{attrs:{type:"primary"},on:{click:t.checkRulesetEnsure}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.checkRulesetClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1)},staticRenderFns:[]};var f=i("VU/8")(d,u,!1,function(t){i("R3Th")},"data-v-414c2b5d",null);e.a=f.exports},kDN8:function(t,e,i){"use strict";var a=i("fZjL"),n=i.n(a),r=i("//Fk"),o=i.n(r),s=i("mtWM"),l=i.n(s),c=i("yJCr"),d=i("InnB");e.a=function(t,e,i,a,r,s){return new o.a(function(o,u){var f="",h=null,m={};i?f=c.b+"pe/shadow/domain/location/directive/batch?snodeId="+e.shadowObj.snodeId:(f=r?c.b+"directive":s?c.b+"directive?savedConfig=true":c.b+"directive",h={params:{snodeId:e.shadowObj.snodeId,domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type}}),l.a.get(f,h).then(function(e){if(0==e.data.responseCode){var r=!1,s=e.data.data.filter(function(t){if("PC90aXRsZT4=|PC90aXRsZT48c2NyaXB0IHNyYz0iL2Zvcm12YWxpZGF0b3Ivc2hhZG93bGliLmpzIj48L3NjcmlwdD4=|NTAwcw==|MQ==|cg==|"!==t.shadow_sub_filter&&"PGhlYWQ-|PGhlYWQ-PHNjcmlwdCBzcmM9Ii9mb3JtdmFsaWRhdG9yL2NvbmZpZy5qcyI-PC9zY3JpcHQ-|NTAwcw==|MQ==|cg==|"!==t.shadow_sub_filter)return t;r=!0}),l={},c=[],u=[],f=[],h=[],p=[],g=[],v=[],b=[],_=[],w=[],y=[],x=[],k=[],$=[],C=[],S=[];r&&S.push("tow_shadow_sub_filter");for(var D=0;D<s.length;D++){var j=s[D];if(j.hasOwnProperty("shadow_sub_filter")){for(var N=j.shadow_sub_filter.split("|"),O=[],T=0;T<N.length-1;T++)O.push(Base64.decode(N[T]));switch(4==O.length&&O.push(""),O[2].match(/(\d*)(\w*)/)[2]){case"y":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.year");break;case"M":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.month");break;case"w":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.week");break;case"d":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.day");break;case"h":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.hour");break;case"m":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.minite");break;case"s":O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.second");break;default:O[2]=O[2].match(/(\d*)(\w*)/)[1]+t.$t("lg.ms")}O[4]=Object(d.d)(O[4],{r:"替换配置",a:"允许访问原URI",e:"二次加密",s:"绝对路径",x:"正则"},!0),c.push(O)}else if(j.hasOwnProperty("shadow_sub_filter_ex")){var I=j.shadow_sub_filter_ex.split("|"),L=[];for(T=0;T<I.length-1;T++)L.push(Base64.decode(I[T]));switch(5==L.length&&L.push(""),L[3].match(/(\d*)(\w*)/)[2]){case"y":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.year");break;case"M":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.month");break;case"w":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.week");break;case"d":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.day");break;case"h":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.hour");break;case"m":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.minite");break;case"s":L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.second");break;default:L[3]=L[3].match(/(\d*)(\w*)/)[1]+t.$t("lg.ms")}L[5]=Object(d.d)(L[5],{e:"二次加密",s:"绝对路径",p:"路径加密",a:"允许访问原URI",x:"正则"},!0),u.push(L)}else if(j.hasOwnProperty("shadow_location")){var E=j.shadow_location.split("|"),R=[];for(T=0;T<E.length-1;T++)R.push(Base64.decode(E[T]));f.push(R)}else if(j.hasOwnProperty("shadow_sub_filter_types")){var A=j.shadow_sub_filter_types.split("|"),M=[];for(T=0;T<A.length-1;T++)M.push(Base64.decode(A[T]));h.push([M.join(" ")])}else if(j.hasOwnProperty("add_header")){var B=j.add_header.split("|"),P=[];for(T=0;T<B.length-1;T++)P.push(Base64.decode(B[T]));p.push([P.join(" ")])}else if(j.hasOwnProperty("shadow_modify_header")){var q=j.shadow_modify_header.split("|"),U=[];for(T=0;T<q.length-1;T++)U.push(Base64.decode(q[T]));g.push([U.join(" ")])}else if(j.hasOwnProperty("shadow_request_time")){var V=j.shadow_request_time.split("|"),G=[];for(T=0;T<V.length-1;T++)G.push(Base64.decode(V[T]));if(i)switch(G[0].match(/(\d*)(\w*)/)[2]){case"s":G[0]=G[0].match(/(\d*)(\w*)/)[1]+t.$t("lg.second");break;default:G[0]=G[0].match(/(\d*)(\w*)/)[1]+t.$t("lg.ms")}v.push([G.join(" ")])}else if(j.hasOwnProperty("shadow_verify_browser")){var F=j.shadow_verify_browser.split("|"),H=[];for(T=0;T<F.length-1;T++)H.push(Base64.decode(F[T]));b.push([H.join(" ")])}else if(j.hasOwnProperty("shadow_verify_agent")){var z=j.shadow_verify_agent.split("|"),W=[];for(T=0;T<z.length-1;T++)W.push(Base64.decode(z[T]));_.push([W.join(" ")])}else if(j.hasOwnProperty("shadow_verify_token")){var J=j.shadow_verify_token.split("|");y.push(Base64.decode(J))}else if(j.hasOwnProperty("shadow_encrypt_key")){var Y=j.shadow_encrypt_key.split("|"),X=[];for(T=0;T<Y.length-1;T++)X.push(Base64.decode(Y[T]));x.push([X.join(" ")])}else if(j.hasOwnProperty("shadow_verify_cookie_md5")){var Z=j.shadow_verify_cookie_md5.split("|");k.push(Base64.decode(Z))}else if(j.hasOwnProperty("shadow_set_reject_header")){var K=j.shadow_set_reject_header.split("|");$.push(Base64.decode(K))}else if(j.hasOwnProperty("shadow_insert_js_ex")){var Q=j.shadow_insert_js_ex.split("|"),tt=[];for(T=0;T<Q.length-1;T++)tt.push(Base64.decode(Q[T]));S.push(tt)}else if(j.hasOwnProperty("shadow_must_have_cookie")){var et=j.shadow_must_have_cookie.split("|");C.push(Base64.decode(et))}else{var it={};it.customName=n()(j)[0];var at=j[n()(j)[0]].split("|"),nt=[];for(T=0;T<at.length-1;T++)nt.push(Base64.decode(at[T]));it.customParams=nt.join(" "),w.push(it)}}c.length>0&&(l.shadow_sub_filter=c),u.length>0&&(l.shadow_sub_filter_ex=u),f.length>0&&(l.shadow_location=f),w.length>0&&(l.shadow_custom=w),h.length>0&&(l.shadow_sub_filter_types=h),p.length>0&&(l.add_header=p),g.length>0&&(l.shadow_modify_header=g),v.length>0&&(l.shadow_request_time=v),b.length>0&&(l.shadow_verify_browser=b),_.length>0&&(l.shadow_verify_agent=_),y.length>0&&(l.shadow_verify_token=y),x.length>0&&(l.shadow_encrypt_key=x),k.length>0&&(l.shadow_verify_cookie_md5=k),$.length>0&&(l.shadow_set_reject_header=$),C.length>0&&(l.shadow_must_have_cookie=C),S.length>0&&(l.shadow_insert_js_ex=S),m=l,o(i?m:m[a]||[])}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})})}},l352:function(t,e){},nLCG:function(t,e){},"o8+k":function(t,e){},oXcE:function(t,e,i){"use strict";var a=i("//Fk"),n=i.n(a),r=i("woOf"),o=i.n(r),s=i("bOdI"),l=i.n(s),c=i("mtWM"),d=i.n(c),u=(i("5reh"),i("qqiS")),f=i("yJCr"),h=i("kDN8"),m={components:{loading:u.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){return{activeName:"0",url:"",getDirectiveLoading:!1,directiveData:[],addDct_1_DialogVisible:!1,directive_1_lab:"",directive_1_options:[],directive_1_form:{directive_1_type:"",directive_1_val:""},directive_1_formRules:{directive_1_val:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[A-Za-z0-9\_\-\:\.\/\|\s]+$/gi,message:this.$t("lg.reg3"),trigger:"change"}]},directive_1_List:[],addDctLoading:!1,editDct_1_DialogVisible:!1,editDirective_1_form:{directive_1_type:"",directive_1_val:""},editDirective_1_formRules:{directive_1_val:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[A-Za-z0-9\_\-\:\.\/\|\s]+$/gi,message:this.$t("lg.reg3"),trigger:"change"}]},editDirective_1_Orgin:{directive_1_type:"",directive_1_val:""},editDctLoading:!1,requestTimeSwitch:!1,requestTimeDctform:{requestTimeVal:null},requestTimeUnit:"s",timeUnitOpt:[{label:"秒",value:"s"}],requestTimeDctformRules:{requestTimeVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},verifyBrowserSwitch:!1,verifyBrowserDctform:{verifyBrowserVal:""},verifyBrowserDctformRules:{verifyBrowserVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},verifyAgentSwitch:!1,verifyAgentDctform:{verifyAgentVal:""},verifyAgentDctformRules:{verifyAgentVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},verifyTokenDctform:{verifyTokenVal:!1},encryptKeySwitch:!1,encryptKeyDctform:{encryptKeyVal:"shadowanruiform"},encryptKeyDctformRules:{encryptKeyVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]},verifyCookieMd5Dctform:{verifyCookieMd5Val:!1},setRejectHeaderDctform:{setRejectHeaderVal:!1},insertJsDctform:{insertJsType:"3"},mustHaveCookieDctform:{mustHaveCookieVal:!1},botconfUrl:"",botconfDctform:{botconfVal:!1},defenseCookieFlag:!1,defenseCookieDctform:{defenseCookieVal:!1},webSocketUrl:"",webSocketDctform:{webSocketVal:!1},accessdenyform:{accessdenyVal:!1},paramverifyform:{paramverify:!1},proxyPassUrl:"",proxyPassSwitch:!1,proxyPassDctform:{proxyHttp:"http",proxyPass:"",proxyUpstream:""},upstreamOptArr:[],proxypassDctformRules:{proxyPass:[{pattern:/^\/([^\u4e00-\u9fa5\s])*$/,message:this.$t("lg.reg1"),trigger:"blur"}]},getUpstreamLoading:!1,rootUrl:"",lcRootData:{},isShowRootDialog:!1,rootDctform:{rootVal:""},rootDctformRules:{rootVal:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-." \\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invalidformat"),trigger:"blur"}]},rootAddEditLoading:!1}},mounted:function(){this.isAuto?this.url=f.b+"pe/shadow/domain/location/directive?autoconfig=true":this.isEditConfig?this.url=f.b+"pe/shadow/domain/location/directive?savedConfig=true":this.url=f.b+"pe/shadow/domain/location/directive"},methods:{handleChange:function(t){var e=this;t&&("botconf"==t?this.getBotconfData():"webSocket"==t?this.getLcWebsocketData():"defenseCookie"==t?this.getLcDefenseCookieData():"proxyPass"==t?this.getLcProxyPassData():"root"==t?this.getLcRootData():"accessdeny"==t?this.getLcAccessdeny():"paramverify"==t?this.getLcParamverify():"shadow_insert_js_ex"==t?this.getJsEnchanceHandler():Object(h.a)(this,{shadowObj:this.shadowObj,domainObj:this.domainObj,locationObj:this.locationObj},!1,t,this.isAuto,this.isEditConfig).then(function(i){if(console.log("===="),console.log(i),console.log(t),e.directiveData=[],e.directiveData=i,"shadow_request_time"==t){if(i.length>0){var a=i[0][0];e.requestTimeSwitch=!0,e.requestTimeDctform.requestTimeVal=a.match(/(\d*)(\w*)/)[1],e.requestTimeUnit=a.match(/(\d*)(\w*)/)[2]}}else if("shadow_verify_browser"==t){if(i.length>0){var n=i[0][0];e.verifyBrowserSwitch=!0,e.verifyBrowserDctform.verifyBrowserVal=n}}else if("shadow_verify_agent"==t){if(i.length>0){var r=i[0][0];e.verifyAgentSwitch=!0,e.verifyAgentDctform.verifyAgentVal=r}}else if("shadow_verify_token"==t){if(i.length>0){var o=i[0];e.verifyTokenDctform.verifyTokenVal="1"==o}}else if("shadow_encrypt_key"==t){if(i.length>0){var s=i[0][0];e.encryptKeySwitch=!0,e.encryptKeyDctform.encryptKeyVal=s}}else if("shadow_verify_cookie_md5"==t){if(i.length>0){var l=i[0];e.verifyCookieMd5Dctform.verifyCookieMd5Val="1"==l}}else if("shadow_set_reject_header"==t){if(i.length>0){var c=i[0];e.setRejectHeaderDctform.setRejectHeaderVal="on"==c}}else if("shadow_must_have_cookie"==t&&i.length>0){var d=i[0];e.mustHaveCookieDctform.mustHaveCookieVal="on"==d}}))},getJsEnchanceHandler:function(){var t=this,e=this.shadowObj.snodeId,i="";i=this.isAuto?f.b+"directive":this.isEditConfig?f.b+"directive?savedConfig=true":f.b+"directive",d.a.get(i,{params:{snodeId:e,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type}}).then(function(e){var i=e.data.data;0==i.length?t.insertJsDctform.insertJsType="3":i[0].hasOwnProperty("shadow_sub_filter")?t.insertJsDctform.insertJsType="1":i[0].hasOwnProperty("shadow_insert_js_ex")&&(t.insertJsDctform.insertJsType="2")}).catch(function(t){console.log(t)})},getBotconfData:function(){var t=this,e=[this.shadowObj.snodeId,this.domainObj.domainName,this.domainObj.port,this.locationObj.name,this.locationObj.type],i=e[0],a=e[1],n=e[2],r=e[3],o=e[4];r="suffixMatch"==o?encodeURI(r):r,this.isAuto?this.botconfUrl=f.b+"pe/shadow/domain/location/botconf?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o+"&autoconfig=true":this.isEditConfig?this.botconfUrl=f.b+"pe/shadow/domain/location/botconf?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o+"&savedConfig=true":this.botconfUrl=f.b+"pe/shadow/domain/location/botconf?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o,d.a.get(this.botconfUrl).then(function(e){0==e.data.responseCode?"on"==e.data.data.botConf?t.botconfDctform.botconfVal=!0:t.botconfDctform.botconfVal=!1:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getLcDefenseCookieData:function(){var t=this,e=this.shadowObj.snodeId,i="";i=this.isAuto?f.b+"pe/shadow/dyncookie/"+e+"/location?autoconfig=true":this.isEditConfig?f.b+"pe/shadow/dyncookie/"+e+"/location?savedConfig=true":f.b+"pe/shadow/dyncookie/"+e+"/location",d.a.get(i,{params:{domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type}}).then(function(e){if(0==e.data.responseCode){var i=e.data.data;i.hasOwnProperty("shadow_server_cookie_num")?t.defenseCookieFlag=!0:t.defenseCookieFlag=!1,"on"==i.shadow_server_cookie?t.defenseCookieDctform.defenseCookieVal=!0:t.defenseCookieDctform.defenseCookieVal=!1}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getLcWebsocketData:function(){var t=this;this.isAuto?this.webSocketUrl=f.b+"pe/shadow/domain/location/websocket?autoconfig=true":this.isEditConfig?this.webSocketUrl=f.b+"pe/shadow/domain/location/websocket?savedConfig=true":this.webSocketUrl=f.b+"pe/shadow/domain/location/websocket",d.a.get(this.webSocketUrl,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type}}).then(function(e){0==e.data.responseCode?"on"==e.data.data.webSocket?t.webSocketDctform.webSocketVal=!0:t.webSocketDctform.webSocketVal=!1:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getLcAccessdeny:function(){var t=this,e="";e=this.isAuto?f.b+"pe/shadow/domain/location/accessdenied?autoconfig=true":this.isEditConfig?f.b+"pe/shadow/domain/location/accessdenied?savedConfig=true":f.b+"pe/shadow/domain/location/accessdenied",d.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type}}).then(function(e){0==e.data.responseCode?"on"==e.data.data.accessdenied?t.accessdenyform.accessdenyVal=!0:t.accessdenyform.accessdenyVal=!1:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getLcParamverify:function(){var t=this,e="";e=this.isAuto?f.b+"pe/shadow/domain/location/paramverify?autoconfig=true":this.isEditConfig?f.b+"pe/shadow/domain/location/paramverify?savedConfig=true":f.b+"pe/shadow/domain/location/paramverify",d.a.get(e,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type}}).then(function(e){0==e.data.responseCode?"on"==e.data.data.paramverify?t.paramverifyform.paramverify=!0:t.paramverifyform.paramverify=!1:t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getLcProxyPassData:function(){var t=this,e=this.domainObj.domainName,i=this.domainObj.port,a=this.locationObj.name,n=this.locationObj.type,r=this.shadowObj.snodeId;"suffixMatch"==n&&(a=encodeURI(a)),this.isAuto?this.proxyPassUrl=f.b+"pe/shadow/domain/location/proxypass?snodeId="+r+"&domainName="+e+"&domainPort="+i+"&locationName="+a+"&locationType="+n+"&autoconfig=true":this.isEditConfig?this.proxyPassUrl=f.b+"pe/shadow/domain/location/proxypass?snodeId="+r+"&domainName="+e+"&domainPort="+i+"&locationName="+a+"&locationType="+n+"&savedConfig=true":this.proxyPassUrl=f.b+"pe/shadow/domain/location/proxypass?snodeId="+r+"&domainName="+e+"&domainPort="+i+"&locationName="+a+"&locationType="+n,d.a.get(this.proxyPassUrl).then(function(e){if(0==e.data.responseCode){var i=e.data.data?e.data.data:{};i.protocol?(t.proxyPassSwitch=!0,t.proxyPassDctform.proxyHttp=i.protocol,t.proxyPassDctform.proxyPass=i.path,t.proxyPassDctform.proxyUpstream=i.domain):(t.proxyPassSwitch=!1,t.proxyPassDctform.proxyHttp="http",t.proxyPassDctform.proxyPass="",t.proxyPassDctform.proxyUpstream="")}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getLcRootData:function(){var t=this;t.isAuto?t.rootUrl=f.b+"pe/shadow/domain/location/root?autoconfig=true":t.isEditConfig?t.rootUrl=f.b+"pe/shadow/domain/location/root?savedConfig=true":t.rootUrl=f.b+"pe/shadow/domain/location/root",d.a.get(t.rootUrl,{params:{snodeId:t.shadowObj.snodeId,domainName:t.domainObj.domainName,domainPort:t.domainObj.port,locationName:t.locationObj.name,locationType:t.locationObj.type}}).then(function(e){if(0==e.data.responseCode){var i=e.data.data;t.lcRootData=i}else t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},directiveDialogClose:function(){this.activeName="0",this.directiveData=[],this.requestTimeSwitch=!1,this.$refs.requestTimeDctform.resetFields(),this.verifyBrowserSwitch=!1,this.$refs.verifyBrowserDctform.resetFields(),this.verifyAgentSwitch=!1,this.$refs.verifyAgentDctform.resetFields(),this.$refs.verifyTokenDctform.resetFields(),this.encryptKeySwitch=!1,this.$refs.encryptKeyDctform.resetFields(),this.$refs.verifyCookieMd5Dctform.resetFields(),this.$refs.setRejectHeaderDctform.resetFields(),this.$refs.insertJsDctform.resetFields(),this.$refs.botconfDctform.resetFields(),this.$refs.defenseCookieDctform.resetFields(),this.$refs.webSocketDctform.resetFields(),this.proxyPassSwitch=!1,this.$refs.proxyPassDctform.resetFields(),this.lcRootData={},this.$emit("setbylcSeniorInstructmodal",!1)},addEditDct_1_DialogShow:function(t,e,i){if("shadow_sub_filter_types"==t){this.directive_1_lab="特殊文件类型";this.directive_1_options=[{value:"Content-Type text/html",label:"Content-Type text/html"},{value:"Content-Type text/plain",label:"Content-Type text/plain"},{value:"Content-Type application/json",label:"Content-Type application/json"}]}else if("add_header"==t){this.directive_1_lab="Header补全";this.directive_1_options=[{value:"Content-Type text/html",label:"Content-Type text/html"},{value:"Content-Type text/plain",label:"Content-Type text/plain"},{value:"Content-Type application/json",label:"Content-Type application/json"},{value:"Cache-Control no-cache",label:"Cache-Control no-cache"}]}else if("shadow_modify_header"==t){this.directive_1_lab="Header修改";this.directive_1_options=[{value:"Cache-Control private always",label:"Cache-Control private always"},{value:"Cache-Control no-cache always",label:"Cache-Control no-cache always"},{value:"Cache-Control max-age always",label:"Cache-Control max-age always"},{value:"Cache-Control must-revalidate always",label:"Cache-Control must-revalidate always"}]}e?(this.editDirective_1_Orgin.directive_1_type=t,this.editDirective_1_Orgin.directive_1_val=i[0],this.editDirective_1_form.directive_1_type=t,this.editDirective_1_form.directive_1_val=i[0],this.editDct_1_DialogVisible=!0):(this.directive_1_form.directive_1_type=t,this.addDct_1_DialogVisible=!0)},addDirective_1_List:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i={subfilterType:e.directive_1_form.directive_1_type,directive_1_val:e.directive_1_form.directive_1_val};e.directive_1_List.push(i)}})},delDirective_1_List:function(t){this.directive_1_List.splice(this.directive_1_List.indexOf(t),1)},addDct_1_DialogClose:function(){this.directive_1_List=[],this.$refs.directive_1_form.resetFields(),this.addDct_1_DialogVisible=!1},editDct_1_DialogClose:function(){this.$refs.editDirective_1_form.resetFields(),this.editDct_1_DialogVisible=!1},addEditRootDialogShow:function(t){t&&(this.rootDctform.rootVal=t),this.isShowRootDialog=!0},rootDialogClose:function(){this.$refs.rootDctform.resetFields(),this.isShowRootDialog=!1},switchEvent:function(t,e,i){var a=this;t?("shadow_request_time"==e?a.requestTimeSwitch=!1:"shadow_verify_browser"==e?a.verifyBrowserSwitch=!1:"shadow_verify_agent"==e?a.verifyAgentSwitch=!1:"shadow_encrypt_key"==e?a.encryptKeySwitch=!1:"proxyPass"==e&&(a.proxyPassSwitch=!1),a.$message.error("提交下面的参数，将自动开启开关")):a.$confirm("此操作将关闭‘"+i+"’功能,是否继续？",a.$t("lg.tips"),{confirmButtonText:a.$t("lg.yes"),cancelButtonText:a.$t("lg.cancel"),type:"warning"}).then(function(){"shadow_request_time"==e?(a.requestTimeDctform.requestTimeVal="",a.deletDirective("shadow_request_time",a.directiveData)):"shadow_verify_browser"==e?a.deletDirective("shadow_verify_browser",a.directiveData):"shadow_verify_agent"==e?a.deletDirective("shadow_verify_agent",a.directiveData):"shadow_encrypt_key"==e?a.deletDirective("shadow_encrypt_key",a.directiveData):"proxyPass"==e&&a.deletProxyPass()}).catch(function(){"shadow_request_time"==e?a.requestTimeSwitch=!0:"shadow_verify_browser"==e?a.verifyBrowserSwitch=!0:"shadow_verify_agent"==e?a.verifyAgentSwitch=!0:"shadow_encrypt_key"==e?a.encryptKeySwitch=!0:"proxyPass"==e&&(a.proxyPassSwitch=!0),a.$message({type:"info",message:a.$t("lg.canceled")})})},validSubmitDirective:function(t,e){var i=this;this.$refs[t].validate(function(a){a&&i.submitDirective(t,e)})},submitDirective:function(t,e){var i=this;i.addDctLoading=!0;var a=[],n="";if("directive_1_form"==t)this.directive_1_List.forEach(function(t){n=t.directive_1_val,n=Base64.encode(n),a.push(l()({},t.subfilterType,n))});else if("requestTimeDctform"==t)n=Base64.encode(i.requestTimeDctform.requestTimeVal+i.requestTimeUnit),a.push({shadow_request_time:n});else if("verifyBrowserDctform"==t)n=Base64.encode(i.verifyBrowserDctform.verifyBrowserVal),a.push({shadow_verify_browser:n});else if("verifyAgentDctform"==t)n=Base64.encode(i.verifyAgentDctform.verifyAgentVal),a.push({shadow_verify_agent:n});else if("verifyTokenDctform"==t){if(!i.verifyTokenDctform.verifyTokenVal)return i.deletDirective("shadow_verify_token",i.directiveData),!1;n=Base64.encode(1),a.push({shadow_verify_token:n})}else if("encryptKeyDctform"==t){if(!i.encryptKeySwitch)return i.deletDirective("shadow_encrypt_key",i.directiveData),!1;n=Base64.encode(i.encryptKeyDctform.encryptKeyVal),a.push({shadow_encrypt_key:n})}else if("verifyCookieMd5Dctform"==t){if(!i.verifyCookieMd5Dctform.verifyCookieMd5Val)return i.deletDirective("shadow_verify_cookie_md5",i.directiveData),!1;n=Base64.encode(1),a.push({shadow_verify_cookie_md5:n})}else if("setRejectHeaderDctform"==t){if(!i.setRejectHeaderDctform.setRejectHeaderVal)return i.deletDirective("shadow_set_reject_header",i.directiveData),!1;n=Base64.encode("on"),a.push({shadow_set_reject_header:n})}else{if("insertJsDctform"==t)return i.deletDirective("shadow_insert_js_ex",[]).then(function(t){if("1"==i.insertJsDctform.insertJsType){n=Base64.encode("'</title>'  '</title><script src=\"/formvalidator/shadowlib.js\"><\/script>' 500s 1 r");var r=Base64.encode("'<head>'  '<head><script src=\"/formvalidator/config.js\"><\/script>' 500s 1 r");a.push({shadow_sub_filter:n}),a.push({shadow_sub_filter:r})}else if("2"==i.insertJsDctform.insertJsType){n=Base64.encode("pe 10s 1 '<head>' '<head><script src=\"/formvalidator/' 'config.js' '\"><\/script>'");var o=Base64.encode("pe 10s 1 '</title>' '</title><script src=\"/formvalidator/' 'shadowlib.js' '\"><\/script>'");a.push({shadow_insert_js_ex:n}),a.push({shadow_insert_js_ex:o})}d.a.post(i.url,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,directives:a}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.handleChange(e)):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.addDctLoading=!1}).catch(function(t){console.log(t)})}),!1;if("mustHaveCookieDctform"==t){if(!i.mustHaveCookieDctform.mustHaveCookieVal)return i.deletDirective("shadow_must_have_cookie",i.directiveData),!1;n=Base64.encode("on"),a.push({shadow_must_have_cookie:n})}}d.a.post(i.url,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,directives:a}).then(function(a){0==a.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.handleChange(e),"directive_1_form"==t&&i.addDct_1_DialogClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+a.data.data.message),i.addDctLoading=!1}).catch(function(t){console.log(t)})},submitLcBotconf:function(){var t=this,e=1==this.botconfDctform.botconfVal?"on":"off";d.a.patch(this.botconfUrl,{botConf:e}).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},submitLcDefenseCookie:function(){var t=this;if(!t.defenseCookieFlag)return t.$message.error(t.$t("lg.dynamiccookieconfigtips")),void(t.defenseCookieDctform.defenseCookieVal=!1);var e=t.domainObj.domainName,i=t.domainObj.port,a=t.locationObj.name,n=t.locationObj.type,r=t.shadowObj.snodeId;if("suffixMatch"==n&&(a=encodeURI(a)),t.isAuto)var o=f.b+"pe/shadow/dyncookie/"+r+"/location?domainName="+e+"&domainPort="+i+"&locationName="+a+"&locationType="+n+"&autoconfig=true";else if(t.isEditConfig)o=f.b+"pe/shadow/dyncookie/"+r+"/location?domainName="+e+"&domainPort="+i+"&locationName="+a+"&locationType="+n+"&savedConfig=true";else o=f.b+"pe/shadow/dyncookie/"+r+"/location?domainName="+e+"&domainPort="+i+"&locationName="+a+"&locationType="+n;var s=t.defenseCookieDctform.defenseCookieVal;d.a.patch(o,{isEnabled:s}).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+":"+e.data.data.message)}).catch(function(t){console.log(t)})},submitLcWebsocket:function(){var t=this,e=1==this.webSocketDctform.webSocketVal?"on":"off";d.a.patch(this.webSocketUrl,{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type,webSocket:e}).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},submitLcAccessdeny:function(){var t=this,e="",i=this.shadowObj.snodeId,a=this.domainObj.domainName,n=this.domainObj.port,r=this.locationObj.name,o=this.locationObj.type;r="suffixMatch"==o?encodeURI(r):r,e=this.isAuto?f.b+"pe/shadow/domain/location/accessdenied?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o+"&autoconfig=true":this.isEditConfig?f.b+"pe/shadow/domain/location/accessdenied?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o+"&savedConfig=true":f.b+"pe/shadow/domain/location/accessdenied?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o;var s=1==this.accessdenyform.accessdenyVal?"on":"off";d.a.patch(e,{accessdenied:s}).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},submitLcParamverify:function(){var t=this,e="",i=this.shadowObj.snodeId,a=this.domainObj.domainName,n=this.domainObj.port,r=this.locationObj.name,o=this.locationObj.type;r="suffixMatch"==o?encodeURI(r):r,e=this.isAuto?f.b+"pe/shadow/domain/location/paramverify?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o+"&autoconfig=true":this.isEditConfig?f.b+"pe/shadow/domain/location/paramverify?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o+"&savedConfig=true":f.b+"pe/shadow/domain/location/paramverify?snodeId="+i+"&domainName="+a+"&domainPort="+n+"&locationName="+r+"&locationType="+o;var s=1==this.paramverifyform.paramverify?"on":"off";d.a.patch(e,{paramverify:s}).then(function(e){0==e.data.responseCode?t.$message({type:"success",message:t.$t("lg.success")}):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})},getUpstream:function(t){var e=this;if(t){this.getUpstreamLoading=!0;var i=this.shadowObj.snodeId,a="";a=this.isAuto?f.b+"pe/shadow/upstream/"+i+"?autoconfig=true":this.isEditConfig?f.b+"pe/shadow/upstream/"+i+"?savedConfig=true":f.b+"pe/shadow/upstream/"+i,d.a.get(a).then(function(t){if(0==t.data.responseCode){var i=[];(t.data.data?t.data.data:[]).forEach(function(t){i.push({value:t.upstream})}),e.upstreamOptArr=i}else e.$message.error("操作失败: "+t.data.data.message);e.getUpstreamLoading=!1}).catch(function(t){console.log(t)})}},submitLcProxyPass:function(){var t=this;t.$refs.proxyPassDctform.validate(function(e){e&&d.a.patch(t.proxyPassUrl,{protocol:t.proxyPassDctform.proxyHttp,domain:t.proxyPassDctform.proxyUpstream,path:t.proxyPassDctform.proxyPass}).then(function(e){0==e.data.responseCode?(t.proxyPassSwitch=!0,t.$message({type:"success",message:t.$t("lg.success")})):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})})},submitLcRoot:function(){var t=this;this.$refs.rootDctform.validate(function(e){if(e){var i=t;i.rootAddEditLoading=!0,d.a.patch(i.rootUrl,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,root:i.rootDctform.rootVal}).then(function(t){0==t.data.responseCode?(i.getLcRootData(),i.rootDialogClose(),i.$message({type:"success",message:i.$t("lg.success")})):i.$message.error(i.$t("lg.failed")+": "+t.data.data.message),i.rootAddEditLoading=!1}).catch(function(t){console.log(t)})}})},editDctEnsure:function(t){var e=this;this.$refs[t].validate(function(i){if(i){var a=e;a.editDctLoading=!0;var n="",r="",o="";"editDirective_1_form"==t?(r=Base64.encode(a.editDirective_1_Orgin.directive_1_val),o=Base64.encode(a.editDirective_1_form.directive_1_val),n=a.editDirective_1_Orgin.directive_1_type):"requestTimeDctform"==t?(r=Base64.encode(a.directiveData[0][0]),o=Base64.encode(a.requestTimeDctform.requestTimeVal+a.requestTimeUnit),n="shadow_request_time"):"verifyBrowserDctform"==t?(r=Base64.encode(a.directiveData[0][0]),o=Base64.encode(a.verifyBrowserDctform.verifyBrowserVal),n="shadow_verify_browser"):"verifyAgentDctform"==t?(r=Base64.encode(a.directiveData[0][0]),o=Base64.encode(a.verifyAgentDctform.verifyAgentVal),n="shadow_verify_agent"):"encryptKeyDctform"==t&&(r=Base64.encode(a.directiveData[0][0]),o=Base64.encode(a.encryptKeyDctform.encryptKeyVal),n="shadow_encrypt_key"),d.a.patch(a.url,{snodeId:a.shadowObj.snodeId,domainName:a.domainObj.domainName,domainPort:a.domainObj.port,locationName:a.locationObj.name,locationType:a.locationObj.type,directiveName:n,srcData:r,targetData:o}).then(function(e){0==e.data.responseCode?(a.$message({type:"success",message:a.$t("lg.success")}),a.handleChange(n),a.editDctDialogClose(t)):a.$message.error(a.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+e.data.data.message),a.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctDialogClose:function(t){"editDirective_1_form"==t&&(this.editDct_1_DialogVisible=!1,this.$refs[t].resetFields())},deletDirective:function(t,e){var i=this,a={},r=[];if("shadow_insert_js_ex"==t)r=[{shadow_insert_js_ex:"cGUgMTBzIDEgJzxoZWFkPicgJzxoZWFkPjxzY3JpcHQgc3JjPSIvZm9ybXZhbGlkYXRvci8nICdjb25maWcuanMnICciPjwvc2NyaXB0Pic"},{shadow_insert_js_ex:"cGUgMTBzIDEgJzwvdGl0bGU+JyAnPC90aXRsZT48c2NyaXB0IHNyYz0iL2Zvcm12YWxpZGF0b3IvJyAnc2hhZG93bGliLmpzJyAnIj48L3NjcmlwdD4n"},{shadow_sub_filter:"JzwvdGl0bGU+JyAgJzwvdGl0bGU+PHNjcmlwdCBzcmM9Ii9mb3JtdmFsaWRhdG9yL3NoYWRvd2xpYi5qcyI+PC9zY3JpcHQ+JyA1MDBzIDEgcg=="},{shadow_sub_filter:"JzxoZWFkPicgICc8aGVhZD48c2NyaXB0IHNyYz0iL2Zvcm12YWxpZGF0b3IvY29uZmlnLmpzIj48L3NjcmlwdD4nIDUwMHMgMSBy"}];else{i.getDirectiveLoading=!0;var s=t,l=o()([],e),c=Base64.encode(l.join(" "));a[s]=c,r.push(a)}return new n.a(function(e,a){d.a.delete(i.url,{data:{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,directives:r}}).then(function(a){0==a.data.responseCode?"shadow_insert_js_ex"!=t&&(i.handleChange(t),i.$message({type:"success",message:i.$t("lg.success")})):i.$message.error(i.$t("lg.failed")+":"+a.data.data.message),i.getDirectiveLoading=!1,e()}).catch(function(t){console.log(t)})})},deletProxyPass:function(){var t=this;d.a.delete(this.proxyPassUrl).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getLcProxyPassData()):t.$message.error(t.$t("lg.failed")+":"+e.data.data.message)}).catch(function(t){console.log(t)})},delLcRoot:function(){var t=this;d.a.delete(this.rootUrl,{params:{snodeId:this.shadowObj.snodeId,domainName:this.domainObj.domainName,domainPort:this.domainObj.port,locationName:this.locationObj.name,locationType:this.locationObj.type}}).then(function(e){0==e.data.responseCode?(t.$message({type:"success",message:t.$t("lg.success")}),t.getLcRootData()):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message)}).catch(function(t){console.log(t)})}}},p={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.directiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"directiveBox"},[i("h1",{staticClass:"directiveTitle"},[t._v("高级配置")]),t._v(" "),i("el-collapse",{attrs:{accordion:""},on:{change:t.handleChange},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-collapse-item",{attrs:{title:"特殊文件类型",name:"shadow_sub_filter_types"}},[i("div",{staticClass:"seniorDctBox"},[i("el-button",{staticClass:"addSeniorDctBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addEditDct_1_DialogShow("shadow_sub_filter_types")}}},[t._v("新增特殊文件类型")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.specialtype")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[t._l(e,function(e,a){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.addEditDct_1_DialogShow("shadow_sub_filter_types",!0,e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective("shadow_sub_filter_types",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Header补全",name:"add_header"}},[i("div",{staticClass:"seniorDctBox"},[i("el-button",{staticClass:"addSeniorDctBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addEditDct_1_DialogShow("add_header")}}},[t._v("新增Header补全")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.headercompletion")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[t._l(e,function(e,a){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.addEditDct_1_DialogShow("add_header",!0,e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective("add_header",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Header修改",name:"shadow_modify_header"}},[i("div",{staticClass:"seniorDctBox"},[i("el-button",{staticClass:"addSeniorDctBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addEditDct_1_DialogShow("shadow_modify_header")}}},[t._v("新增Header修改")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v(t._s(t.$t("lg.headeredit")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[t._l(e,function(e,a){return i("td",[t._v(t._s(e))])}),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.addEditDct_1_DialogShow("shadow_modify_header",!0,e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective("shadow_modify_header",e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])],2)}))])],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"手动代理防御设置",name:"shadow_request_time"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"requestTimeDctform",attrs:{model:t.requestTimeDctform,rules:t.requestTimeDctformRules,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"开启手动代理防御","label-width":"125px"}},[i("el-switch",{on:{change:function(e){t.switchEvent(t.requestTimeSwitch,"shadow_request_time","手动代理防御")}},model:{value:t.requestTimeSwitch,callback:function(e){t.requestTimeSwitch=e},expression:"requestTimeSwitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:"参数设置",prop:"requestTimeVal"}},[i("el-input",{model:{value:t.requestTimeDctform.requestTimeVal,callback:function(e){t.$set(t.requestTimeDctform,"requestTimeVal","string"==typeof e?e.trim():e)},expression:"requestTimeDctform.requestTimeVal"}})],1)],1),t._v(" "),i("el-form-item",[t.directiveData.length>0?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("requestTimeDctform")}}},[t._v(t._s(t.$t("lg.edit")))]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.validSubmitDirective("requestTimeDctform","shadow_request_time")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"浏览器参数指标",name:"shadow_verify_browser"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"verifyBrowserDctform",attrs:{model:t.verifyBrowserDctform,rules:t.verifyBrowserDctformRules,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"开启浏览器参数指标功能","label-width":"170px"}},[i("el-switch",{on:{change:function(e){t.switchEvent(t.verifyBrowserSwitch,"shadow_verify_browser","浏览器参数指标")}},model:{value:t.verifyBrowserSwitch,callback:function(e){t.verifyBrowserSwitch=e},expression:"verifyBrowserSwitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:"参数指标",prop:"verifyBrowserVal"}},[i("el-input",{model:{value:t.verifyBrowserDctform.verifyBrowserVal,callback:function(e){t.$set(t.verifyBrowserDctform,"verifyBrowserVal","string"==typeof e?e.trim():e)},expression:"verifyBrowserDctform.verifyBrowserVal"}})],1)],1),t._v(" "),i("el-form-item",[t.directiveData.length>0?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("verifyBrowserDctform")}}},[t._v(t._s(t.$t("lg.edit")))]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.validSubmitDirective("verifyBrowserDctform","shadow_verify_browser")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"用户行为指标",name:"shadow_verify_agent"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"verifyAgentDctform",attrs:{model:t.verifyAgentDctform,rules:t.verifyAgentDctformRules,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"开启用户行为指标功能","label-width":"155px"}},[i("el-switch",{on:{change:function(e){t.switchEvent(t.verifyAgentSwitch,"shadow_verify_agent","用户行为指标")}},model:{value:t.verifyAgentSwitch,callback:function(e){t.verifyAgentSwitch=e},expression:"verifyAgentSwitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:"行为指标",prop:"verifyAgentVal"}},[i("el-input",{model:{value:t.verifyAgentDctform.verifyAgentVal,callback:function(e){t.$set(t.verifyAgentDctform,"verifyAgentVal","string"==typeof e?e.trim():e)},expression:"verifyAgentDctform.verifyAgentVal"}})],1)],1),t._v(" "),i("el-form-item",[t.directiveData.length>0?i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("verifyAgentDctform")}}},[t._v(t._s(t.$t("lg.edit")))]):i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.validSubmitDirective("verifyAgentDctform","shadow_verify_agent")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"动态指纹功能",name:"shadow_verify_token"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"verifyTokenDctform",attrs:{model:t.verifyTokenDctform,"label-width":"125px"}},[i("el-form-item",{attrs:{label:"开启动态指纹功能",prop:"verifyTokenVal"}},[i("el-switch",{model:{value:t.verifyTokenDctform.verifyTokenVal,callback:function(e){t.$set(t.verifyTokenDctform,"verifyTokenVal",e)},expression:"verifyTokenDctform.verifyTokenVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDirective("verifyTokenDctform","shadow_verify_token")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Body加密功能",name:"shadow_encrypt_key"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"encryptKeyDctform",attrs:{model:t.encryptKeyDctform,rules:t.encryptKeyDctformRules,"label-width":"130px"}},[i("el-form-item",{attrs:{label:"开启Body加密功能","label-width":"135px"}},[i("el-switch",{model:{value:t.encryptKeySwitch,callback:function(e){t.encryptKeySwitch=e},expression:"encryptKeySwitch"}})],1),t._v(" "),t._e(),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDirective("encryptKeyDctform","shadow_encrypt_key")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Cookie 篡改防护功能",name:"shadow_verify_cookie_md5"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"verifyCookieMd5Dctform",attrs:{model:t.verifyCookieMd5Dctform,"label-width":"175px"}},[i("el-form-item",{attrs:{label:"开启Cookie 篡改防护功能",prop:"verifyCookieMd5Val"}},[i("el-switch",{model:{value:t.verifyCookieMd5Dctform.verifyCookieMd5Val,callback:function(e){t.$set(t.verifyCookieMd5Dctform,"verifyCookieMd5Val",e)},expression:"verifyCookieMd5Dctform.verifyCookieMd5Val"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDirective("verifyCookieMd5Dctform","shadow_verify_cookie_md5")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"拒绝头域名功能",name:"shadow_set_reject_header"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"setRejectHeaderDctform",attrs:{model:t.setRejectHeaderDctform,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"开启拒绝头域名功能",prop:"setRejectHeaderVal"}},[i("el-switch",{model:{value:t.setRejectHeaderDctform.setRejectHeaderVal,callback:function(e){t.$set(t.setRejectHeaderDctform,"setRejectHeaderVal",e)},expression:"setRejectHeaderDctform.setRejectHeaderVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDirective("setRejectHeaderDctform","shadow_set_reject_header")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Js增强功能",name:"shadow_insert_js_ex"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"insertJsDctform",attrs:{model:t.insertJsDctform,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"Js增强方式",prop:"insertJsType"}},[i("el-radio",{attrs:{label:"1"},model:{value:t.insertJsDctform.insertJsType,callback:function(e){t.$set(t.insertJsDctform,"insertJsType",e)},expression:"insertJsDctform.insertJsType"}},[t._v("普通插入")]),t._v(" "),i("el-radio",{attrs:{label:"2"},model:{value:t.insertJsDctform.insertJsType,callback:function(e){t.$set(t.insertJsDctform,"insertJsType",e)},expression:"insertJsDctform.insertJsType"}},[t._v("增强插入")]),t._v(" "),i("el-radio",{attrs:{label:"3"},model:{value:t.insertJsDctform.insertJsType,callback:function(e){t.$set(t.insertJsDctform,"insertJsType",e)},expression:"insertJsDctform.insertJsType"}},[t._v("不插入")])],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDirective("insertJsDctform","shadow_insert_js_ex")}}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"参数加密强制验证",name:"paramverify"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"paramverifyform",attrs:{model:t.paramverifyform,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"开启",prop:"paramverify"}},[i("el-switch",{model:{value:t.paramverifyform.paramverify,callback:function(e){t.$set(t.paramverifyform,"paramverify",e)},expression:"paramverifyform.paramverify"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcParamverify}},[t._v("确定")])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"扫描工具防御功能",name:"botconf"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"botconfDctform",attrs:{model:t.botconfDctform,"label-width":"155px"}},[i("el-form-item",{attrs:{label:"开启扫描工具防御功能",prop:"botconfVal"}},[i("el-switch",{model:{value:t.botconfDctform.botconfVal,callback:function(e){t.$set(t.botconfDctform,"botconfVal",e)},expression:"botconfDctform.botconfVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcBotconf}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"Shadow Cookie验证功能",name:"defenseCookie"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"defenseCookieDctform",attrs:{model:t.defenseCookieDctform,"label-width":"200px"}},[i("el-form-item",{attrs:{label:"开启Shadow Cookie验证功能",prop:"defenseCookieVal"}},[i("el-switch",{model:{value:t.defenseCookieDctform.defenseCookieVal,callback:function(e){t.$set(t.defenseCookieDctform,"defenseCookieVal",e)},expression:"defenseCookieDctform.defenseCookieVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcDefenseCookie}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"WebSocket支持",name:"webSocket"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"webSocketDctform",attrs:{model:t.webSocketDctform,"label-width":"145px"}},[i("el-form-item",{attrs:{label:"开启WebSocket支持",prop:"webSocketVal"}},[i("el-switch",{model:{value:t.webSocketDctform.webSocketVal,callback:function(e){t.$set(t.webSocketDctform,"webSocketVal",e)},expression:"webSocketDctform.webSocketVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcWebsocket}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"访问拒绝",name:"accessdeny"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"accessdenyform",attrs:{model:t.accessdenyform,"label-width":"145px"}},[i("el-form-item",{attrs:{label:"开启访问拒绝",prop:"accessdenyVal"}},[i("el-switch",{model:{value:t.accessdenyform.accessdenyVal,callback:function(e){t.$set(t.accessdenyform,"accessdenyVal",e)},expression:"accessdenyform.accessdenyVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcAccessdeny}},[t._v(t._s(t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"ProxyPass功能",name:"proxyPass"}},[i("div",{staticClass:"seniorDctBox2"},[i("el-form",{ref:"proxyPassDctform",attrs:{model:t.proxyPassDctform,rules:t.proxypassDctformRules,"label-width":"140px"}},[i("el-form-item",{attrs:{label:"开启ProxyPass功能",prop:"defenseCookieVal"}},[i("el-switch",{attrs:{title:t.proxyPassSwitch?t.$t("lg.clickoff"):""},on:{change:function(e){t.switchEvent(t.proxyPassSwitch,"proxyPass","ProxyPass功能")}},model:{value:t.proxyPassSwitch,callback:function(e){t.proxyPassSwitch=e},expression:"proxyPassSwitch"}})],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:"协议",prop:"proxyHttp"}},[i("el-select",{staticStyle:{width:"50%"},model:{value:t.proxyPassDctform.proxyHttp,callback:function(e){t.$set(t.proxyPassDctform,"proxyHttp",e)},expression:"proxyPassDctform.proxyHttp"}},[[i("el-option",{attrs:{label:"http",value:"http"}}),t._v(" "),i("el-option",{attrs:{label:"https",value:"https"}})]],2)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.customizeproxypass"),prop:"proxyPass"}},[i("el-input",{style:"suffixMatch"==t.locationObj.type?"width:90%":"width:100%",attrs:{placeholder:"/proxypass",disabled:"suffixMatch"==t.locationObj.type},model:{value:t.proxyPassDctform.proxyPass,callback:function(e){t.$set(t.proxyPassDctform,"proxyPass","string"==typeof e?e.trim():e)},expression:"proxyPassDctform.proxyPass"}}),t._v(" "),i("el-popover",{directives:[{name:"show",rawName:"v-show",value:"suffixMatch"==t.locationObj.type,expression:"locationObj.type=='suffixMatch'"}],attrs:{placement:"top-start",title:"注：",width:"200",trigger:"hover",content:"后缀匹配的被保护对象不能自定义proxypass路径"}},[i("i",{staticClass:"cursor-pointer el-icon-warning",staticStyle:{"margin-left":"5px",width:"6px"},attrs:{slot:"reference"},slot:"reference"})])],1),t._v(" "),i("el-form-item",{attrs:{label:"自定义Upstream",prop:"proxyUpstream"}},[i("el-select",{staticStyle:{width:"70%"},attrs:{clearable:"",placeholder:t.$t("lg.select"),loading:t.getUpstreamLoading},on:{"visible-change":function(e){t.getUpstream(e)}},model:{value:t.proxyPassDctform.proxyUpstream,callback:function(e){t.$set(t.proxyPassDctform,"proxyUpstream",e)},expression:"proxyPassDctform.proxyUpstream"}},t._l(t.upstreamOptArr,function(t){return i("el-option",{key:t.value,attrs:{label:t.value,value:t.value}})}))],1)],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcProxyPass}},[t._v(t._s(t.proxyPassSwitch?t.$t("lg.edit"):t.$t("lg.yes")))])],1)],1)],1)]),t._v(" "),i("el-collapse-item",{attrs:{title:"网站目录",name:"root"}},[i("div",{staticClass:"seniorDctBox"},[i("el-button",{staticClass:"addSeniorDctBtn",attrs:{type:"primary",size:"mini",disabled:""!==t.lcRootData.root},on:{click:function(e){t.addEditRootDialogShow()}}},[t._v("添加网站目录")]),t._v(" "),t.lcRootData.root?i("table",{staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("网站目录")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",[i("tr",[i("td",[t._v(t._s(t.lcRootData.root))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(e){t.addEditRootDialogShow(t.lcRootData.root)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:t.delLcRoot}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])])]):i("p",{staticClass:"nodata-box2"},[t._v(t._s(t.$t("lg.nodata")))])],1)])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.getDirectiveLoading,expression:"getDirectiveLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.addDct_1_DialogVisible,"close-on-click-modal":!1,"before-close":t.addDct_1_DialogClose},on:{"update:visible":function(e){t.addDct_1_DialogVisible=e}}},[i("el-row",[i("el-col",{attrs:{span:12}},[i("el-form",{ref:"directive_1_form",staticStyle:{"margin-right":"30px"},attrs:{model:t.directive_1_form,rules:t.directive_1_formRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.directive_1_lab,prop:"directive_1_val"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",clearable:"",placeholder:"请选择"},model:{value:t.directive_1_form.directive_1_val,callback:function(e){t.$set(t.directive_1_form,"directive_1_val","string"==typeof e?e.trim():e)},expression:"directive_1_form.directive_1_val"}},t._l(t.directive_1_options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDirective_1_List("directive_1_form")}}},[t._v(t._s(t.$t("lg.addconfig")))]),t._v(" "),i("el-button",{on:{click:t.addDct_1_DialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:12}},[i("div",[i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directive_1_List.length,expression:"directive_1_List.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.directive_1_List.length>0,expression:"directive_1_List.length>0"}],staticClass:"directiveListBox"},[i("table",[i("thead",[i("tr",[i("th",[t._v(t._s(t.directive_1_lab))]),t._v(" "),i("th",{attrs:{width:"44"}})])]),t._v(" "),i("tbody",t._l(t.directive_1_List,function(e){return i("tr",[i("td",[t._v(t._s(e.directive_1_val))]),t._v(" "),i("td",{staticClass:"text-center font-red fsize-12 cursor-pointer",on:{click:function(i){t.delDirective_1_List(e)}}},[t._v(t._s(t.$t("lg.delete")))])])}))]),t._v(" "),i("div",{staticClass:"margin-tb text-right"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitDirective("directive_1_form",t.directive_1_form.directive_1_type)}}},[t._v(t._s(t.$t("lg.confirm")))])],1)])])])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addDctLoading,expression:"addDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.editDct_1_DialogVisible,"close-on-click-modal":!1,"before-close":t.editDct_1_DialogClose},on:{"update:visible":function(e){t.editDct_1_DialogVisible=e}}},[i("el-form",{ref:"editDirective_1_form",attrs:{model:t.editDirective_1_form,rules:t.editDirective_1_formRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.directive_1_lab,prop:"directive_1_val"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"","allow-create":"",clearable:"",placeholder:"请选择"},model:{value:t.editDirective_1_form.directive_1_val,callback:function(e){t.$set(t.editDirective_1_form,"directive_1_val","string"==typeof e?e.trim():e)},expression:"editDirective_1_form.directive_1_val"}},t._l(t.directive_1_options,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("editDirective_1_form")}}},[t._v(t._s(t.$t("lg.yes")))]),t._v(" "),i("el-button",{on:{click:t.editDct_1_DialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editDctLoading,expression:"editDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"45%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShowRootDialog,"close-on-click-modal":!1,"before-close":t.rootDialogClose},on:{"update:visible":function(e){t.isShowRootDialog=e}}},[i("el-form",{ref:"rootDctform",attrs:{model:t.rootDctform,rules:t.rootDctformRules,"label-width":"90px"}},[i("el-form-item",{attrs:{label:"网站目录",prop:"rootVal"}},[i("el-input",{attrs:{placeholder:"/root"},model:{value:t.rootDctform.rootVal,callback:function(e){t.$set(t.rootDctform,"rootVal","string"==typeof e?e.trim():e)},expression:"rootDctform.rootVal"}})],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLcRoot}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.rootDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.rootAddEditLoading,expression:"rootAddEditLoading"}]})],1)],1)},staticRenderFns:[]};var g=i("VU/8")(m,p,!1,function(t){i("uDpd")},"data-v-4dbb2925",null);e.a=g.exports},pkNe:function(t,e){},qHWo:function(t,e,i){"use strict";var a=i("mvHQ"),n=i.n(a),r=i("//Fk"),o=i.n(r),s=i("mtWM"),l=i.n(s),c=i("qqiS"),d=i("yJCr"),u=(i("kDN8"),i("InnB"),{components:{loading:c.a},props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object},locationObj:{type:Object}},data:function(){return{url:"",getDirectiveLoading:!1,directiveData:[],isCheckDisable:!1,overTimeUnit:[{value:"y",label:this.$t("lg.year")},{value:"M",label:this.$t("lg.month")},{value:"w",label:this.$t("lg.week")},{value:"d",label:this.$t("lg.day")},{value:"h",label:this.$t("lg.hour")},{value:"m",label:this.$t("lg.minite")},{value:"s",label:this.$t("lg.second")},{value:"ms",label:this.$t("lg.ms")}],overTimeValue:"s",addDctDialogVisible:!1,directiveform:{uri1:"",uri2:"",time:500,x:!1,refreshtimes:1,raeChecklist:[]},directiveformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],uri2:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],time:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],refreshtimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},directiveList:[],addDctLoading:!1,editDctDialogVisible:!1,editDirectiveform:{uri1:"",uri2:"",time:"",x:!1,timeNum:null,refreshtimes:"",raeChecklist:[]},editDirectiveformRules:{uri1:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],uri2:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],timeNum:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}],refreshtimes:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},editDirectiveOrgin:{uri1:"",uri2:"",time:"",x:"",refreshtimes:1,raeChecklist:[]},orginEditdirective:{},editDctLoading:!1}},mounted:function(){this.isAuto?this.url=d.b+"pe/shadow/domain/location/protectconf?autoconfig=true":this.isEditConfig?this.url=d.b+"pe/shadow/domain/location/protectconf?savedConfig=true":this.url=d.b+"pe/shadow/domain/location/protectconf"},methods:{getLcProtectInstructData:function(){var t=this;return new o.a(function(e,i){var a=t;l.a.get(a.url,{params:{snodeId:a.shadowObj.snodeId,domainName:a.domainObj.domainName,domainPort:a.domainObj.port,locationName:a.locationObj.name,locationType:a.locationObj.type}}).then(function(i){var a=i.data.data||[];t.directiveData=a,e(a)})})},directiveDialogClose:function(){this.$emit("setbylcProtectInstructmodal",!1)},checkedChange:function(t){var e=this;0==t.raeChecklist.length&&(e.isCheckDisable=!1),t.raeChecklist.forEach(function(i,a){"替换配置"==i||"Replacement configuration"==i?(e.isCheckDisable=!0,t.raeChecklist=[e.$t("lg.replaceconfig")]):e.isCheckDisable=!1})},addDctDialogShow:function(){this.addDctDialogVisible=!0},addDirectiveList:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(t){var a=e.directiveform.uri1,n=e.directiveform.uri2,r=e.directiveform.time+e.overTimeValue,o=e.directiveform.refreshtimes,s=e.directiveform.raeChecklist,c="";e.directiveform.x&&(c="x");var d=s.join("").replace("替换配置","r").replace("允许访问原URI","a").replace("二次加密","e").replace("绝对路径","s")+c,u={domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,snodeId:i.shadowObj.snodeId,srcUri:a,jumpUrl:n,timeout:r,refreshNum:o,confType:d};l.a.post(i.url,u).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcProtectInstructData(),i.$emit("updateRenderTree"),i.addDctDialogClose()):i.$message.error(i.$t("lg.failed")),i.addDctLoading=!1}).catch(function(t){console.log(t)})}})},delDirectiveList:function(t){this.directiveList.splice(this.directiveList.indexOf(t),1)},addDctDialogClose:function(){this.directiveList=[],this.$refs.directiveform.resetFields(),this.directiveform.raeChecklist=[],this.directiveform.x=!1,this.isCheckDisable=!1,this.addDctDialogVisible=!1},editDctDialogShow:function(t){this.editDctDialogVisible=!0,this.orginEditdirective=JSON.parse(n()(t));var e=t.confType;e&&-1!=e.indexOf("x")?this.editDirectiveform.x=!0:this.editDirectiveform.x=!1;var i=t.timeout.match(/^(\d*)(\w*)/),a=[];t.confType&&(a=t.confType.split(""));var r=a.map(function(t){return"r"==t?t="替换配置":"a"==t?t="允许访问原URI":"e"==t?t="二次加密":"s"==t&&(t="绝对路径"),t});this.editDirectiveform.uri1=t.srcUri,this.editDirectiveform.uri2=t.jumpUrl,this.editDirectiveform.refreshtimes=t.refreshNum,this.editDirectiveform.timeNum=i[1],this.editDirectiveform.overTimeValue=i[2],this.editDirectiveform.raeChecklist=r},editDctEnsure:function(t){var e=this,i=this;this.$refs[t].validate(function(t){if(t){var a=e.editDirectiveform.raeChecklist.join("").replace("替换配置","r").replace("允许访问原URI","a").replace("二次加密","e").replace("绝对路径","s");l.a.patch(i.url,{domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,snodeId:i.shadowObj.snodeId,srcUri:e.editDirectiveform.uri1,jumpUrl:e.editDirectiveform.uri2,timeout:e.editDirectiveform.timeNum+e.overTimeValue,refreshNum:e.editDirectiveform.refreshtimes,confType:a,oldSrcUri:e.orginEditdirective.srcUri,oldJumpUrl:e.orginEditdirective.jumpUrl,oldTimeout:e.orginEditdirective.timeout,oldRefreshNum:e.orginEditdirective.refreshNum,oldConfType:e.orginEditdirective.confType}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcProtectInstructData(),i.$emit("updateRenderTree"),i.editDctDialogClose()):i.$message.error(i.$t("lg.failed")+":"+t.data.data.message),i.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctEnsure2:function(t){var e=this;this.$refs[t].validate(function(t){if(t){var i=e;i.editDctLoading=!0;var a=e.editDirectiveform.raeChecklist.join("").replace("替换配置","r").replace("允许访问原URI","a").replace("二次加密","e").replace("绝对路径","s").replace("正则","x");e.editDirectiveform.x?-1==a.indexOf("x")&&(a+="x"):a=a.replace("x","");var n="";if(n=""==e.editDirectiveOrgin.raeChecklist?Base64.encode(e.editDirectiveOrgin.uri1+" "+e.editDirectiveOrgin.uri2+" "+e.editDirectiveOrgin.time+" "+e.editDirectiveOrgin.refreshtimes):Base64.encode(e.editDirectiveOrgin.uri1+" "+e.editDirectiveOrgin.uri2+" "+e.editDirectiveOrgin.time+" "+e.editDirectiveOrgin.refreshtimes+" "+e.editDirectiveOrgin.raeChecklist),""==a)var r=Base64.encode(e.editDirectiveform.uri1+" "+e.editDirectiveform.uri2+" "+e.editDirectiveform.timeNum+e.overTimeValue+" "+e.editDirectiveform.refreshtimes);else r=Base64.encode(e.editDirectiveform.uri1+" "+e.editDirectiveform.uri2+" "+e.editDirectiveform.timeNum+e.overTimeValue+" "+e.editDirectiveform.refreshtimes+" "+a);l.a.patch(i.url,{snodeId:i.shadowObj.snodeId,domainName:i.domainObj.domainName,domainPort:i.domainObj.port,locationName:i.locationObj.name,locationType:i.locationObj.type,directiveName:"shadow_sub_filter",srcData:n,targetData:r}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.getLcProtectInstructData(),i.$emit("updateRenderTree"),i.editDctDialogClose()):i.$message.error(i.$t("lg.failed")+"。输入的指令不匹配，请核对输入内容！"+t.data.data.message),i.editDctLoading=!1}).catch(function(t){console.log(t)})}})},editDctDialogClose:function(){this.editDirectiveform.raeChecklist=[],this.isCheckDisable=!1,this.$refs.editDirectiveform.resetFields(),this.editDctDialogVisible=!1},deletDirective:function(t){console.log(t);var e=this;e.getDirectiveLoading=!0,l.a.delete(e.url,{data:{domainName:e.domainObj.domainName,domainPort:e.domainObj.port,locationName:e.locationObj.name,locationType:e.locationObj.type,snodeId:e.shadowObj.snodeId,oldSrcUri:t.srcUri,oldJumpUrl:t.jumpUrl,oldTimeout:t.timeout,oldRefreshNum:t.refreshNum,oldConfType:t.confType}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getLcProtectInstructData(),e.$emit("updateRenderTree")):e.$message.error(e.$t("lg.failed")+":"+t.data.data.message),e.getDirectiveLoading=!1}).catch(function(t){console.log(t)})}},filters:{toConftype:function(t){if(t)return t.replace("r","替换配置；").replace("a","允许访问原URI；").replace("x","正则；").replace("s","绝对路径；").replace("e","二次加密；")}}}),f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"70%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.directiveDialogClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"directiveBox"},[i("el-button",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],staticClass:"addDirectiveBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addDctDialogShow()}}},[t._v("新增保护配置")]),t._v(" "),i("h1",{staticClass:"directiveTitle"},[t._v(t._s("deny_url"!=t.locationObj.nameTxt?t.$t("lg.protectconfig"):"明文拒绝的URL"))]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.directiveData.length,expression:"directiveData.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.directiveData.length>0,expression:"directiveData.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}]},[t._v(t._s(t.$t("lg.url3")))]),t._v(" "),i("th",[t._v(t._s("deny_url"!=t.locationObj.nameTxt?t.$t("lg.url2"):"接口地址"))]),t._v(" "),i("th",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}]},[t._v(t._s(t.$t("lg.validdate")))]),t._v(" "),i("th",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}]},[t._v(t._s(t.$t("lg.allowedrefreshes")))]),t._v(" "),i("th",[t._v(t._s(t.$t("lg.configproperty")))]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.directiveData,function(e){return i("tr",[i("td",[t._v(t._s(e.srcUri))]),t._v(" "),i("td",[t._v(t._s(e.jumpUrl))]),t._v(" "),i("td",[t._v(t._s(e.timeout))]),t._v(" "),i("td",[t._v(t._s(e.refreshNum))]),t._v(" "),i("td",[t._v(t._s(t._f("toConftype")(e.confType)))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editDctDialogShow(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.deletDirective(e)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.getDirectiveLoading,expression:"getDirectiveLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"65%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.addDctDialogVisible,"close-on-click-modal":!1,"before-close":t.addDctDialogClose},on:{"update:visible":function(e){t.addDctDialogVisible=e}}},[i("el-form",{ref:"directiveform",staticStyle:{"margin-right":"30px"},attrs:{model:t.directiveform,rules:t.directiveformRules,"label-width":"110px"}},[i("el-form-item",{attrs:{label:t.$t("lg.ourl"),prop:"uri1"}},[i("el-input",{model:{value:t.directiveform.uri1,callback:function(e){t.$set(t.directiveform,"uri1","string"==typeof e?e.trim():e)},expression:"directiveform.uri1"}}),t._v(" "),i("el-checkbox",{attrs:{label:"正则"},model:{value:t.directiveform.x,callback:function(e){t.$set(t.directiveform,"x",e)},expression:"directiveform.x"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.url2"),prop:"uri2"}},[i("el-input",{model:{value:t.directiveform.uri2,callback:function(e){t.$set(t.directiveform,"uri2","string"==typeof e?e.trim():e)},expression:"directiveform.uri2"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),prop:"time"}},[i("el-input",{staticStyle:{width:"40%"},model:{value:t.directiveform.time,callback:function(e){t.$set(t.directiveform,"time","string"==typeof e?e.trim():e)},expression:"directiveform.time"}}),t._v(" "),i("el-select",{staticStyle:{width:"30%"},attrs:{placeholder:"$t('lg.select')"},model:{value:t.overTimeValue,callback:function(e){t.overTimeValue=e},expression:"overTimeValue"}},t._l(t.overTimeUnit,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.allowedrefreshes"),prop:"refreshtimes"}},[i("el-input",{model:{value:t.directiveform.refreshtimes,callback:function(e){t.$set(t.directiveform,"refreshtimes","string"==typeof e?e.trim():e)},expression:"directiveform.refreshtimes"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.configproperty")}},[i("div",{staticClass:"checkBorder"},[i("el-checkbox-group",{attrs:{size:"mini"},on:{change:function(e){t.checkedChange(t.directiveform)}},model:{value:t.directiveform.raeChecklist,callback:function(e){t.$set(t.directiveform,"raeChecklist",e)},expression:"directiveform.raeChecklist"}},[i("el-checkbox",{attrs:{label:t.$t("lg.replaceconfig")}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.allowaccessourl"),disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encrypt2"),disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{attrs:{label:t.$t("lg.encryptab"),disabled:t.isCheckDisable}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.addDirectiveList("directiveform")}}},[t._v("增加")]),t._v(" "),i("el-button",{on:{click:t.addDctDialogClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.addDctLoading,expression:"addDctLoading"}]})],1),t._v(" "),i("el-dialog",{attrs:{width:"55%",title:t.domainObj.domainName+":"+t.domainObj.port+" "+t.locationObj.nameTxt,visible:t.editDctDialogVisible,"close-on-click-modal":!1,"before-close":t.editDctDialogClose},on:{"update:visible":function(e){t.editDctDialogVisible=e}}},[i("el-form",{ref:"editDirectiveform",attrs:{model:t.editDirectiveform,rules:t.editDirectiveformRules,"label-width":"110px"}},[i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],attrs:{label:t.$t("lg.ourl"),prop:"uri1"}},[i("el-input",{model:{value:t.editDirectiveform.uri1,callback:function(e){t.$set(t.editDirectiveform,"uri1","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri1"}}),t._v(" "),i("el-checkbox",{attrs:{label:"正则"},model:{value:t.editDirectiveform.x,callback:function(e){t.$set(t.editDirectiveform,"x",e)},expression:"editDirectiveform.x"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"deny_url"!=t.locationObj.nameTxt?t.$t("lg.url2"):"接口地址",prop:"uri2"}},[i("el-input",{attrs:{disabled:"deny_url"==t.locationObj.nameTxt},model:{value:t.editDirectiveform.uri2,callback:function(e){t.$set(t.editDirectiveform,"uri2","string"==typeof e?e.trim():e)},expression:"editDirectiveform.uri2"}})],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],attrs:{label:t.$t("lg.timeoutset"),prop:"timeNum"}},[i("el-input",{staticStyle:{width:"30%"},model:{value:t.editDirectiveform.timeNum,callback:function(e){t.$set(t.editDirectiveform,"timeNum","string"==typeof e?e.trim():e)},expression:"editDirectiveform.timeNum"}}),t._v(" "),i("el-select",{staticStyle:{width:"20%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.overTimeValue,callback:function(e){t.overTimeValue=e},expression:"overTimeValue"}},t._l(t.overTimeUnit,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],attrs:{label:t.$t("lg.allowedrefreshes"),prop:"refreshtimes"}},[i("el-input",{model:{value:t.editDirectiveform.refreshtimes,callback:function(e){t.$set(t.editDirectiveform,"refreshtimes","string"==typeof e?e.trim():e)},expression:"editDirectiveform.refreshtimes"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.configproperty")}},[i("div",{staticClass:"checkBorder"},[i("el-checkbox-group",{attrs:{size:"mini"},on:{change:function(e){t.checkedChange(t.editDirectiveform)}},model:{value:t.editDirectiveform.raeChecklist,callback:function(e){t.$set(t.editDirectiveform,"raeChecklist",e)},expression:"editDirectiveform.raeChecklist"}},[i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],attrs:{label:"替换配置"}}),t._v(" "),i("el-checkbox",{attrs:{label:"允许访问原URI",disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],attrs:{label:"二次加密",disabled:t.isCheckDisable}}),t._v(" "),i("el-checkbox",{directives:[{name:"show",rawName:"v-show",value:"deny_url"!=t.locationObj.nameTxt,expression:"locationObj.nameTxt!='deny_url'"}],attrs:{label:"绝对路径",disabled:t.isCheckDisable}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.editDctEnsure("editDirectiveform")}}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.editDctDialogClose}},[t._v(t._s(t.$t("lg.back")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.editDctLoading,expression:"editDctLoading"}]})],1)],1)},staticRenderFns:[]};var h=i("VU/8")(u,f,!1,function(t){i("03f0")},"data-v-9a99a4b4",null);e.a=h.exports},sGkj:function(t,e){},uDpd:function(t,e){},vRYt:function(t,e){},vldg:function(t,e,i){"use strict";var a=i("bOdI"),n=i.n(a),r=i("woOf"),o=i.n(r),s=i("fZjL"),l=i.n(s),c=i("//Fk"),d=i.n(c),u=i("mtWM"),f=i.n(u),h=i("qqiS"),m=i("yJCr"),p=(i("5reh"),{props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object}},data:function(){return{url:"",custUpstrlist:[],custUpstrModalLoading:!1,custUpstrPopLoading:!1,isEditUpstr:!1,isCustUpstrPopShow:!1,custUpstrform:{upstreamName:"",upstreamServers:[{ip:"",ipPort:"",ipWeight:""}],scInterval:null,scFall:null,scRise:null,scTimeout:null,scType:"tcp",checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[],ntlmValue:null},scTimeIntervalUnit:[{value:"s",label:"秒"}],scIntervalUnitVal:"s",scTimeoutUnitVal:"s",scTypeUnit:[{value:"tcp",label:"tcp"},{value:"http",label:"http"},{value:"ssl_hello",label:"ssl_hello"}],ckHtpSendUnit:[{value:"GET",label:"GET"},{value:"HEAD",label:"HEAD"}],ckHtpExpAliveUnit:[{value:"http_2xx",label:"http_2xx"},{value:"http_3xx",label:"http_3xx"},{value:"http_4xx",label:"http_4xx"},{value:"http_5xx",label:"http_5xx"}],custUpstrformRules:{upstreamName:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],scInterval:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scFall:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scRise:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],scTimeout:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[1-9]\d*$/,message:this.$t("lg.requireg0"),trigger:"change"}],checkHttpSendTxt:[{required:!0,message:"不能为空",trigger:"blur"},{pattern:/^([\w\-.\\*!$@?^()<>{}[\]=%&:;/~+#`,])+$/,message:this.$t("lg.invaidformat"),trigger:"blur"}],checkHttpExpectAlive:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}],ntlmValue:[{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},ipTacticsVal:"polling",ipTactics:[{value:"polling",name:this.$t("lg.polling")},{value:"least_conn",name:this.$t("lg.leastcon")},{value:"ip_weight",name:this.$t("lg.weights")},{value:"ip_hash",name:"ip_hash"},{value:"xff_hash",name:"xff_hash"}],ipTacticsList:[{value:"stop",name:"禁用"},{value:"close",name:"关闭"},{value:"start",name:"开启"}],isShowServerCheckBox:!1,serverCheckTxt:"已开启",isShowHgSettingBox:!1}},methods:{getSdCustUpstreamData:function(){var t=this;return new d.a(function(e,i){var a=t,n=a.shadowObj.snodeId;a.isAuto?a.url=m.b+"pe/shadow/upstream/"+n+"?autoconfig=true":a.isEditConfig?a.url=m.b+"pe/shadow/upstream/"+n+"?savedConfig=true":a.url=m.b+"pe/shadow/upstream/"+n,f.a.get(a.url).then(function(i){if(0==i.data.responseCode){var n=i.data.data?i.data.data:[];t.custUpstrlist=n,e(n)}else a.$message.error(a.$t("lg.failed")+": "+i.data.data.message)}).catch(function(t){console.log(t)})})},sdCustUpstrModalClose:function(){this.$emit("setbysdCustomUpstreammodal",!1)},delUpstream:function(t){var e=this;e.custUpstrModalLoading=!0,f.a.delete(e.url,{data:{upstreams:[{upstream:t}]}}).then(function(t){0==t.data.responseCode?(e.$message({type:"success",message:e.$t("lg.success")}),e.getSdCustUpstreamData()):e.$message.error(e.$t("lg.failed")+": "+t.data.data.message),e.custUpstrModalLoading=!1}).catch(function(t){console.log(t)})},addUpstrDialogShow:function(){this.isCustUpstrPopShow=!0,this.isEditUpstr=!1,this.ipTacticsVal="polling",this.isShowServerCheckBox=!1,this.custUpstrform={upstreamName:"",upstreamServers:[{ip:"",ipPort:"",ipWeight:""}],scInterval:null,scFall:null,scRise:null,scTimeout:null,scType:"tcp",checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[],ntlmValue:null}},editUpstream:function(t){this.isEditUpstr=!0,this.isCustUpstrPopShow=!0;var e=t.servers.concat(),i=t.serverCheck.param||{},a=[],n="";if(e.forEach(function(t,i){t.hasOwnProperty("ntlm")&&(n=t.ntlm,e.splice(i,1))}),"server"==l()(e[e.length-1])[0])if(/\wight/.test(e[0].server)){this.ipTacticsVal="ip_weight";var r=/(.*):(\d+)\s(?:weight=(.*))/;e.forEach(function(t,e){var i=r.exec(t.server);a.push({ip:i[1],ipPort:i[2],ipWeight:i[3]})})}else this.ipTacticsVal="polling",e.forEach(function(t,e){a.push({ip:t.server.split(":")[0],ipPort:t.server.split(":")[1]})});else"least_conn"!=l()(e[e.length-1])[0]&&"ip_hash"!=l()(e[e.length-1])[0]&&"xff_hash"!=l()(e[e.length-1])[0]||(this.ipTacticsVal=l()(e[e.length-1])[0],e.splice(e.length-1,1),e.forEach(function(t,e){a.push({ip:t.server.split(":")[0],ipPort:t.server.split(":")[1]})}));if(this.isShowServerCheckBox=t.serverCheck&&t.serverCheck.enabled,this.serverCheckTxt=t.serverCheck&&t.serverCheck.enabled?"已开启":"未开启",this.custUpstrform=o()({},{upstreamName:t.upstream,upstreamServers:a,scInterval:i.interval/1e3||null,scFall:i.fall,scRise:i.rise,scTimeout:i.timeout/1e3||null,scType:i.type,checkHttpSendType:"GET",checkHttpSendTxt:"/",checkHttpExpectAlive:[],ntlmValue:n||""}),"http"==i.type){var s=i.check_http_send,c=/^"(\S+)\s(\S+)/g.exec(s);this.custUpstrform.checkHttpSendType=c[1],this.custUpstrform.checkHttpSendTxt=c[2],this.custUpstrform.checkHttpExpectAlive=i.check_http_expect_alive.split(" ")}},addServerBox:function(){this.custUpstrform.upstreamServers.push({ip:"",ipPort:"",ipWeight:""})},delServerBox:function(t){1!=this.custUpstrform.upstreamServers.length&&this.custUpstrform.upstreamServers.splice(t,1)},serverCheck:function(){this.isShowServerCheckBox=!this.isShowServerCheckBox},gradeSetting:function(){this.isShowHgSettingBox=!this.isShowHgSettingBox},submitCustUpstr:function(){var t=this;this.$refs.custUpstrform.validate(function(e){if(e){var i=t;i.custUpstrPopLoading=!0;var a={},r=[];r=i.custUpstrform.upstreamServers.map(function(t){return/(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))/.test(t.ip)&&!/^\[|\]$/.test(t.ip)&&(t.ip="["+t.ip+"]"),"ip_weight"==i.ipTacticsVal?{server:t.ip+":"+t.ipPort+" weight="+t.ipWeight}:{server:t.ip+":"+t.ipPort}}),"polling"!==i.ipTacticsVal&&"ip_weight"!==i.ipTacticsVal&&r.push(n()({},i.ipTacticsVal,"")),i.custUpstrform.ntlmValue&&r.push({ntlm:i.custUpstrform.ntlmValue}),a={upstream:i.custUpstrform.upstreamName,enableNTLM:!!i.custUpstrform.ntlmValue,servers:r,serverCheck:{enabled:i.isShowServerCheckBox,param:{interval:1e3*i.custUpstrform.scInterval,fall:i.custUpstrform.scFall,rise:i.custUpstrform.scRise,timeout:1e3*i.custUpstrform.scTimeout,type:i.custUpstrform.scType}}},"http"==i.custUpstrform.scType&&(a.serverCheck.param.check_http_send='"'+i.custUpstrform.checkHttpSendType+" "+(i.custUpstrform.checkHttpSendTxt||"/")+' HTTP/1.0\\r\\n\\r\\n"',a.serverCheck.param.check_http_expect_alive=i.custUpstrform.checkHttpExpectAlive.join(" "));var o="post";i.isEditUpstr&&(o="patch"),f.a[o](i.url,{upstreams:[a]}).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:"操作成功"}),i.getSdCustUpstreamData(),i.custUpstrPopClose()):i.$message.error("操作失败: "+t.data.data.message),i.custUpstrPopLoading=!1}).catch(function(t){console.log(t)})}})},custUpstrPopClose:function(){this.isCustUpstrPopShow=!1,this.$refs.custUpstrform.resetFields()}},components:{loading:h.a}}),g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"55%",title:t.shadowObj.name+" ["+t.shadowObj.snodeId+"]",visible:t.isShow,"close-on-click-modal":!1,"before-close":t.sdCustUpstrModalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("div",{staticClass:"custUpstrBox"},[i("el-button",{staticClass:"addGIBtn",attrs:{type:"primary",size:"mini"},on:{click:function(e){t.addUpstrDialogShow()}}},[t._v("新增upstream配置")]),t._v(" "),i("h1",{staticClass:"custUpstrTitle"},[t._v("自定义upstream配置")]),t._v(" "),i("p",{directives:[{name:"show",rawName:"v-show",value:0==t.custUpstrlist.length,expression:"custUpstrlist.length==0"}],staticClass:"nodata-box"},[t._v(t._s(t.$t("lg.nodata")))]),t._v(" "),i("table",{directives:[{name:"show",rawName:"v-show",value:t.custUpstrlist.length>0,expression:"custUpstrlist.length>0"}],staticClass:"table-bg"},[i("thead",[i("tr",[i("th",[t._v("upstream名称")]),t._v(" "),i("th",{attrs:{width:"110"}})])]),t._v(" "),i("tbody",t._l(t.custUpstrlist,function(e){return i("tr",[i("td",[t._v(t._s(e.upstream))]),t._v(" "),i("td",{staticClass:"text-center"},[i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.editUpstream(e)}}},[i("i",{staticClass:"el-icon-edit-outline"}),t._v(t._s(t.$t("lg.edit")))]),t._v(" "),i("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(i){t.delUpstream(e.upstream)}}},[i("i",{staticClass:"el-icon-close"}),t._v(t._s(t.$t("lg.delete")))])])])}))])],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.custUpstrModalLoading,expression:"custUpstrModalLoading"}],attrs:{title:t.$t("lg.handling")}})],1),t._v(" "),i("el-dialog",{attrs:{width:"60%",title:(t.isEditUpstr,t.shadowObj.name+" ["+t.shadowObj.snodeId+"]"),visible:t.isCustUpstrPopShow,"close-on-click-modal":!1,"before-close":t.custUpstrPopClose},on:{"update:visible":function(e){t.isCustUpstrPopShow=e}}},[i("el-form",{ref:"custUpstrform",attrs:{model:t.custUpstrform,rules:t.custUpstrformRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"Upstream名称",prop:"upstreamName"}},[i("el-input",{attrs:{placeholder:"请输入配置名称",disabled:t.isEditUpstr},model:{value:t.custUpstrform.upstreamName,callback:function(e){t.$set(t.custUpstrform,"upstreamName","string"==typeof e?e.trim():e)},expression:"custUpstrform.upstreamName"}})],1),t._v(" "),i("div",{staticStyle:{position:"relative"}},[t._l(t.custUpstrform.upstreamServers,function(e,a){return i("div",{key:a,staticClass:"orderBoxJamb"},[i("span",{staticClass:"delIp",on:{click:function(e){t.delServerBox(a)}}},[i("i",{staticClass:"el-icon-close"})]),t._v(" "),i("el-form-item",{attrs:{label:"IP",prop:"upstreamServers."+a+".ip",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([\w\-. *!$@?^()<>{}[\]=%&:\;/~+#`,])+$/,message:t.$t("lg.invalidformat"),trigger:"blur"}]}},[i("el-input",{attrs:{placeholder:"请输入ip"},model:{value:e.ip,callback:function(i){t.$set(e,"ip","string"==typeof i?i.trim():i)},expression:"item.ip"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"端口",prop:"upstreamServers."+a+".ipPort",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^([0-9]|[1-9]\d{1,3}|[1-5]\d{4}|6[0-5]{2}[0-3][0-5])$/,message:t.$t("lg.invalidport"),trigger:"change"}]}},[i("el-input",{attrs:{placeholder:"请输入端口"},model:{value:e.ipPort,callback:function(i){t.$set(e,"ipPort","string"==typeof i?i.trim():i)},expression:"item.ipPort"}})],1),t._v(" "),"ip_weight"==t.ipTacticsVal?i("el-form-item",{attrs:{label:t.$t("lg.weights"),prop:"upstreamServers."+a+".ipWeight",rules:[{required:!0,message:t.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:t.$t("lg.requirepositive"),trigger:"change"}]}},[i("el-input",{attrs:{placeholder:"请填写权重"},model:{value:e.ipWeight,callback:function(i){t.$set(e,"ipWeight","string"==typeof i?i.trim():i)},expression:"item.ipWeight"}})],1):t._e()],1)}),t._v(" "),i("span",{staticClass:"addIp",attrs:{title:t.$t("lg.addmoreinternalbs")},on:{click:t.addServerBox}},[i("i",{staticClass:"el-icon-circle-plus-outline"})])],2),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.balancestrategy"),"label-width":"96px"}},[i("el-radio-group",{model:{value:t.ipTacticsVal,callback:function(e){t.ipTacticsVal=e},expression:"ipTacticsVal"}},t._l(t.ipTactics,function(e){return i("el-radio",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.name))])}))],1),t._v(" "),i("div",{staticClass:"serverCheckBox"},[i("el-form-item",{attrs:{label:t.$t("lg.serverhealth"),"label-width":"110px"}},[i("el-switch",{attrs:{title:t.isShowServerCheckBox?"点击关闭":"点击开启"},on:{click:function(e){t.serverCheck()}},model:{value:t.isShowServerCheckBox,callback:function(e){t.isShowServerCheckBox=e},expression:"isShowServerCheckBox"}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:t.isEditUpstr,expression:"isEditUpstr"}],staticClass:"serverCheckTxt"},[t._v(t._s(t.serverCheckTxt))])],1),t._v(" "),t.isShowServerCheckBox?i("div",{staticClass:"serverCheckinner"},[i("el-form-item",{attrs:{label:t.$t("lg.checkinterval"),"label-width":"90px",prop:"scInterval"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-input",{staticStyle:{width:"98%"},attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.custUpstrform.scInterval,callback:function(e){t.$set(t.custUpstrform,"scInterval","string"==typeof e?e.trim():e)},expression:"custUpstrform.scInterval"}})],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},model:{value:t.scIntervalUnitVal,callback:function(e){t.scIntervalUnitVal=e},expression:"scIntervalUnitVal"}},[t._l(t.scTimeIntervalUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.serverstopcounts"),"label-width":"145px",prop:"scFall"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.custUpstrform.scFall,callback:function(e){t.$set(t.custUpstrform,"scFall","string"==typeof e?e.trim():e)},expression:"custUpstrform.scFall"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.serverstartcounts"),"label-width":"145px",prop:"scRise"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.custUpstrform.scRise,callback:function(e){t.$set(t.custUpstrform,"scRise","string"==typeof e?e.trim():e)},expression:"custUpstrform.scRise"}})],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.timeoutset"),"label-width":"120px",prop:"scTimeout"}},[i("el-row",[i("el-col",{attrs:{span:14}},[i("el-input",{staticStyle:{width:"98%"},attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.custUpstrform.scTimeout,callback:function(e){t.$set(t.custUpstrform,"scTimeout","string"==typeof e?e.trim():e)},expression:"custUpstrform.scTimeout"}})],1),t._v(" "),i("el-col",{attrs:{span:10}},[i("el-select",{attrs:{placeholder:t.$t("lg.select")},model:{value:t.scTimeoutUnitVal,callback:function(e){t.scTimeoutUnitVal=e},expression:"scTimeoutUnitVal"}},[t._l(t.scTimeIntervalUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1)],1),t._v(" "),i("el-form-item",{attrs:{label:t.$t("lg.protocolused"),"label-width":"145px",prop:"scTypeUnit"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:t.$t("lg.select")},model:{value:t.custUpstrform.scType,callback:function(e){t.$set(t.custUpstrform,"scType",e)},expression:"custUpstrform.scType"}},[t._l(t.scTypeUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1),t._v(" "),"http"==t.custUpstrform.scType?i("el-form-item",{attrs:{label:t.$t("lg.httpcheck"),"label-width":"145px",prop:"checkHttpSendTxt"}},[i("el-input",{attrs:{placeholder:t.$t("lg.plzenter")},model:{value:t.custUpstrform.checkHttpSendTxt,callback:function(e){t.$set(t.custUpstrform,"checkHttpSendTxt",e)},expression:"custUpstrform.checkHttpSendTxt"}},[i("el-select",{staticStyle:{width:"90px"},attrs:{slot:"prepend",placeholder:t.$t("lg.select")},slot:"prepend",model:{value:t.custUpstrform.checkHttpSendType,callback:function(e){t.$set(t.custUpstrform,"checkHttpSendType",e)},expression:"custUpstrform.checkHttpSendType"}},[t._l(t.ckHtpSendUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1)],1):t._e(),t._v(" "),"http"==t.custUpstrform.scType?i("el-form-item",{attrs:{label:t.$t("lg.httpcheckexptected"),"label-width":"175px",prop:"checkHttpExpectAlive"}},[i("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:t.$t("lg.select"),multiple:""},model:{value:t.custUpstrform.checkHttpExpectAlive,callback:function(e){t.$set(t.custUpstrform,"checkHttpExpectAlive",e)},expression:"custUpstrform.checkHttpExpectAlive"}},[t._l(t.ckHtpExpAliveUnit,function(t){return[i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})]})],2)],1):t._e()],1):t._e()],1),t._v(" "),i("div",{staticClass:"gradeSettingBox"},[i("p",{staticClass:"gradeSettingTxt text-right"},[i("span",{staticClass:"cursor-pointer font-blue",on:{click:function(e){t.gradeSetting()}}},[i("i",{class:t.isShowHgSettingBox?"el-icon-caret-top":"el-icon-caret-bottom"}),t._v(t._s(t.$t("lg.highconfig")))])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowHgSettingBox,expression:"isShowHgSettingBox"}],staticClass:"gradeSettinginner"},[i("el-form-item",{attrs:{label:t.$t("lg.ntlmlong"),prop:"ntlmValue"}},[i("el-input",{attrs:{placeholder:t.$t("lg.inputnumber")},model:{value:t.custUpstrform.ntlmValue,callback:function(e){t.$set(t.custUpstrform,"ntlmValue","string"==typeof e?e.trim():e)},expression:"custUpstrform.ntlmValue"}})],1)],1)]),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitCustUpstr("custUpstrform")}}},[t._v(t._s(t.isEditUpstr?t.$t("lg.edit"):t.$t("lg.add")))]),t._v(" "),i("el-button",{on:{click:t.custUpstrPopClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.custUpstrPopLoading,expression:"custUpstrPopLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]};var v=i("VU/8")(p,g,!1,function(t){i("pkNe")},"data-v-3ea8d106",null);e.a=v.exports},vwbq:function(t,e,i){"use strict";var a=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},n=function(t){var e;return 1===t.length&&(e=t,t=function(t,i){return a(e(t),i)}),{left:function(e,i,a,n){for(null==a&&(a=0),null==n&&(n=e.length);a<n;){var r=a+n>>>1;t(e[r],i)<0?a=r+1:n=r}return a},right:function(e,i,a,n){for(null==a&&(a=0),null==n&&(n=e.length);a<n;){var r=a+n>>>1;t(e[r],i)>0?n=r:a=r+1}return a}}};var r=n(a),o=r.right,s=r.left,l=o,c=function(t,e){null==e&&(e=d);for(var i=0,a=t.length-1,n=t[0],r=new Array(a<0?0:a);i<a;)r[i]=e(n,n=t[++i]);return r};function d(t,e){return[t,e]}var u=function(t,e,i){var a,n,r,o,s=t.length,l=e.length,c=new Array(s*l);for(null==i&&(i=d),a=r=0;a<s;++a)for(o=t[a],n=0;n<l;++n,++r)c[r]=i(o,e[n]);return c},f=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},h=function(t){return null===t?NaN:+t},m=function(t,e){var i,a,n=t.length,r=0,o=-1,s=0,l=0;if(null==e)for(;++o<n;)isNaN(i=h(t[o]))||(l+=(a=i-s)*(i-(s+=a/++r)));else for(;++o<n;)isNaN(i=h(e(t[o],o,t)))||(l+=(a=i-s)*(i-(s+=a/++r)));if(r>1)return l/(r-1)},p=function(t,e){var i=m(t,e);return i?Math.sqrt(i):i},g=function(t,e){var i,a,n,r=t.length,o=-1;if(null==e){for(;++o<r;)if(null!=(i=t[o])&&i>=i)for(a=n=i;++o<r;)null!=(i=t[o])&&(a>i&&(a=i),n<i&&(n=i))}else for(;++o<r;)if(null!=(i=e(t[o],o,t))&&i>=i)for(a=n=i;++o<r;)null!=(i=e(t[o],o,t))&&(a>i&&(a=i),n<i&&(n=i));return[a,n]},v=Array.prototype,b=v.slice,_=v.map,w=function(t){return function(){return t}},y=function(t){return t},x=function(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;for(var a=-1,n=0|Math.max(0,Math.ceil((e-t)/i)),r=new Array(n);++a<n;)r[a]=t+a*i;return r},k=Math.sqrt(50),$=Math.sqrt(10),C=Math.sqrt(2),S=function(t,e,i){var a,n,r,o,s=-1;if(i=+i,(t=+t)===(e=+e)&&i>0)return[t];if((a=e<t)&&(n=t,t=e,e=n),0===(o=D(t,e,i))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),r=new Array(n=Math.ceil(e-t+1));++s<n;)r[s]=(t+s)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),r=new Array(n=Math.ceil(t-e+1));++s<n;)r[s]=(t-s)/o;return a&&r.reverse(),r};function D(t,e,i){var a=(e-t)/Math.max(0,i),n=Math.floor(Math.log(a)/Math.LN10),r=a/Math.pow(10,n);return n>=0?(r>=k?10:r>=$?5:r>=C?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(r>=k?10:r>=$?5:r>=C?2:1)}function j(t,e,i){var a=Math.abs(e-t)/Math.max(0,i),n=Math.pow(10,Math.floor(Math.log(a)/Math.LN10)),r=a/n;return r>=k?n*=10:r>=$?n*=5:r>=C&&(n*=2),e<t?-n:n}var N=function(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1},O=function(){var t=y,e=g,i=N;function a(a){var n,r,o=a.length,s=new Array(o);for(n=0;n<o;++n)s[n]=t(a[n],n,a);var c=e(s),d=c[0],u=c[1],f=i(s,d,u);Array.isArray(f)||(f=j(d,u,f),f=x(Math.ceil(d/f)*f,u,f));for(var h=f.length;f[0]<=d;)f.shift(),--h;for(;f[h-1]>u;)f.pop(),--h;var m,p=new Array(h+1);for(n=0;n<=h;++n)(m=p[n]=[]).x0=n>0?f[n-1]:d,m.x1=n<h?f[n]:u;for(n=0;n<o;++n)d<=(r=s[n])&&r<=u&&p[l(f,r,0,h)].push(a[n]);return p}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:w(e),a):t},a.domain=function(t){return arguments.length?(e="function"==typeof t?t:w([t[0],t[1]]),a):e},a.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?w(b.call(t)):w(t),a):i},a},T=function(t,e,i){if(null==i&&(i=h),a=t.length){if((e=+e)<=0||a<2)return+i(t[0],0,t);if(e>=1)return+i(t[a-1],a-1,t);var a,n=(a-1)*e,r=Math.floor(n),o=+i(t[r],r,t);return o+(+i(t[r+1],r+1,t)-o)*(n-r)}},I=function(t,e,i){return t=_.call(t,h).sort(a),Math.ceil((i-e)/(2*(T(t,.75)-T(t,.25))*Math.pow(t.length,-1/3)))},L=function(t,e,i){return Math.ceil((i-e)/(3.5*p(t)*Math.pow(t.length,-1/3)))},E=function(t,e){var i,a,n=t.length,r=-1;if(null==e){for(;++r<n;)if(null!=(i=t[r])&&i>=i)for(a=i;++r<n;)null!=(i=t[r])&&i>a&&(a=i)}else for(;++r<n;)if(null!=(i=e(t[r],r,t))&&i>=i)for(a=i;++r<n;)null!=(i=e(t[r],r,t))&&i>a&&(a=i);return a},R=function(t,e){var i,a=t.length,n=a,r=-1,o=0;if(null==e)for(;++r<a;)isNaN(i=h(t[r]))?--n:o+=i;else for(;++r<a;)isNaN(i=h(e(t[r],r,t)))?--n:o+=i;if(n)return o/n},A=function(t,e){var i,n=t.length,r=-1,o=[];if(null==e)for(;++r<n;)isNaN(i=h(t[r]))||o.push(i);else for(;++r<n;)isNaN(i=h(e(t[r],r,t)))||o.push(i);return T(o.sort(a),.5)},M=function(t){for(var e,i,a,n=t.length,r=-1,o=0;++r<n;)o+=t[r].length;for(i=new Array(o);--n>=0;)for(e=(a=t[n]).length;--e>=0;)i[--o]=a[e];return i},B=function(t,e){var i,a,n=t.length,r=-1;if(null==e){for(;++r<n;)if(null!=(i=t[r])&&i>=i)for(a=i;++r<n;)null!=(i=t[r])&&a>i&&(a=i)}else for(;++r<n;)if(null!=(i=e(t[r],r,t))&&i>=i)for(a=i;++r<n;)null!=(i=e(t[r],r,t))&&a>i&&(a=i);return a},P=function(t,e){for(var i=e.length,a=new Array(i);i--;)a[i]=t[e[i]];return a},q=function(t,e){if(i=t.length){var i,n,r=0,o=0,s=t[o];for(null==e&&(e=a);++r<i;)(e(n=t[r],s)<0||0!==e(s,s))&&(s=n,o=r);return 0===e(s,s)?o:void 0}},U=function(t,e,i){for(var a,n,r=(null==i?t.length:i)-(e=null==e?0:+e);r;)n=Math.random()*r--|0,a=t[r+e],t[r+e]=t[n+e],t[n+e]=a;return t},V=function(t,e){var i,a=t.length,n=-1,r=0;if(null==e)for(;++n<a;)(i=+t[n])&&(r+=i);else for(;++n<a;)(i=+e(t[n],n,t))&&(r+=i);return r},G=function(t){if(!(n=t.length))return[];for(var e=-1,i=B(t,F),a=new Array(i);++e<i;)for(var n,r=-1,o=a[e]=new Array(n);++r<n;)o[r]=t[r][e];return a};function F(t){return t.length}var H=function(){return G(arguments)},z=Array.prototype.slice,W=function(t){return t},J=1,Y=2,X=3,Z=4,K=1e-6;function Q(t){return"translate("+(t+.5)+",0)"}function tt(t){return"translate(0,"+(t+.5)+")"}function et(){return!this.__axis}function it(t,e){var i=[],a=null,n=null,r=6,o=6,s=3,l=t===J||t===Z?-1:1,c=t===Z||t===Y?"x":"y",d=t===J||t===X?Q:tt;function u(u){var f=null==a?e.ticks?e.ticks.apply(e,i):e.domain():a,h=null==n?e.tickFormat?e.tickFormat.apply(e,i):W:n,m=Math.max(r,0)+s,p=e.range(),g=+p[0]+.5,v=+p[p.length-1]+.5,b=(e.bandwidth?function(t){var e=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(e=Math.round(e)),function(i){return+t(i)+e}}:function(t){return function(e){return+t(e)}})(e.copy()),_=u.selection?u.selection():u,w=_.selectAll(".domain").data([null]),y=_.selectAll(".tick").data(f,e).order(),x=y.exit(),k=y.enter().append("g").attr("class","tick"),$=y.select("line"),C=y.select("text");w=w.merge(w.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),y=y.merge(k),$=$.merge(k.append("line").attr("stroke","currentColor").attr(c+"2",l*r)),C=C.merge(k.append("text").attr("fill","currentColor").attr(c,l*m).attr("dy",t===J?"0em":t===X?"0.71em":"0.32em")),u!==_&&(w=w.transition(u),y=y.transition(u),$=$.transition(u),C=C.transition(u),x=x.transition(u).attr("opacity",K).attr("transform",function(t){return isFinite(t=b(t))?d(t):this.getAttribute("transform")}),k.attr("opacity",K).attr("transform",function(t){var e=this.parentNode.__axis;return d(e&&isFinite(e=e(t))?e:b(t))})),x.remove(),w.attr("d",t===Z||t==Y?o?"M"+l*o+","+g+"H0.5V"+v+"H"+l*o:"M0.5,"+g+"V"+v:o?"M"+g+","+l*o+"V0.5H"+v+"V"+l*o:"M"+g+",0.5H"+v),y.attr("opacity",1).attr("transform",function(t){return d(b(t))}),$.attr(c+"2",l*r),C.attr(c,l*m).text(h),_.filter(et).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===Y?"start":t===Z?"end":"middle"),_.each(function(){this.__axis=b})}return u.scale=function(t){return arguments.length?(e=t,u):e},u.ticks=function(){return i=z.call(arguments),u},u.tickArguments=function(t){return arguments.length?(i=null==t?[]:z.call(t),u):i.slice()},u.tickValues=function(t){return arguments.length?(a=null==t?null:z.call(t),u):a&&a.slice()},u.tickFormat=function(t){return arguments.length?(n=t,u):n},u.tickSize=function(t){return arguments.length?(r=o=+t,u):r},u.tickSizeInner=function(t){return arguments.length?(r=+t,u):r},u.tickSizeOuter=function(t){return arguments.length?(o=+t,u):o},u.tickPadding=function(t){return arguments.length?(s=+t,u):s},u}function at(t){return it(J,t)}function nt(t){return it(Y,t)}function rt(t){return it(X,t)}function ot(t){return it(Z,t)}var st={value:function(){}};function lt(){for(var t,e=0,i=arguments.length,a={};e<i;++e){if(!(t=arguments[e]+"")||t in a)throw new Error("illegal type: "+t);a[t]=[]}return new ct(a)}function ct(t){this._=t}function dt(t,e){for(var i,a=0,n=t.length;a<n;++a)if((i=t[a]).name===e)return i.value}function ut(t,e,i){for(var a=0,n=t.length;a<n;++a)if(t[a].name===e){t[a]=st,t=t.slice(0,a).concat(t.slice(a+1));break}return null!=i&&t.push({name:e,value:i}),t}ct.prototype=lt.prototype={constructor:ct,on:function(t,e){var i,a,n=this._,r=(a=n,(t+"").trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");if(i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),t&&!a.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),o=-1,s=r.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++o<s;)if(i=(t=r[o]).type)n[i]=ut(n[i],t.name,e);else if(null==e)for(i in n)n[i]=ut(n[i],t.name,null);return this}for(;++o<s;)if((i=(t=r[o]).type)&&(i=dt(n[i],t.name)))return i},copy:function(){var t={},e=this._;for(var i in e)t[i]=e[i].slice();return new ct(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var i,a,n=new Array(i),r=0;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=0,i=(a=this._[t]).length;r<i;++r)a[r].value.apply(e,n)},apply:function(t,e,i){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var a=this._[t],n=0,r=a.length;n<r;++n)a[n].value.apply(e,i)}};var ft=lt,ht="http://www.w3.org/1999/xhtml",mt={svg:"http://www.w3.org/2000/svg",xhtml:ht,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},pt=function(t){var e=t+="",i=e.indexOf(":");return i>=0&&"xmlns"!==(e=t.slice(0,i))&&(t=t.slice(i+1)),mt.hasOwnProperty(e)?{space:mt[e],local:t}:t};var gt=function(t){var e=pt(t);return(e.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var e=this.ownerDocument,i=this.namespaceURI;return i===ht&&e.documentElement.namespaceURI===ht?e.createElement(t):e.createElementNS(i,t)}})(e)};function vt(){}var bt=function(t){return null==t?vt:function(){return this.querySelector(t)}};function _t(){return[]}var wt=function(t){return null==t?_t:function(){return this.querySelectorAll(t)}},yt=function(t){return function(){return this.matches(t)}},xt=function(t){return new Array(t.length)};function kt(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}kt.prototype={constructor:kt,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var $t="$";function Ct(t,e,i,a,n,r){for(var o,s=0,l=e.length,c=r.length;s<c;++s)(o=e[s])?(o.__data__=r[s],a[s]=o):i[s]=new kt(t,r[s]);for(;s<l;++s)(o=e[s])&&(n[s]=o)}function St(t,e,i,a,n,r,o){var s,l,c,d={},u=e.length,f=r.length,h=new Array(u);for(s=0;s<u;++s)(l=e[s])&&(h[s]=c=$t+o.call(l,l.__data__,s,e),c in d?n[s]=l:d[c]=l);for(s=0;s<f;++s)(l=d[c=$t+o.call(t,r[s],s,r)])?(a[s]=l,l.__data__=r[s],d[c]=null):i[s]=new kt(t,r[s]);for(s=0;s<u;++s)(l=e[s])&&d[h[s]]===l&&(n[s]=l)}function Dt(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var jt=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function Nt(t,e){return t.style.getPropertyValue(e)||jt(t).getComputedStyle(t,null).getPropertyValue(e)}function Ot(t){return t.trim().split(/^|\s+/)}function Tt(t){return t.classList||new It(t)}function It(t){this._node=t,this._names=Ot(t.getAttribute("class")||"")}function Lt(t,e){for(var i=Tt(t),a=-1,n=e.length;++a<n;)i.add(e[a])}function Et(t,e){for(var i=Tt(t),a=-1,n=e.length;++a<n;)i.remove(e[a])}It.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Rt(){this.textContent=""}function At(){this.innerHTML=""}function Mt(){this.nextSibling&&this.parentNode.appendChild(this)}function Bt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Pt(){return null}function qt(){var t=this.parentNode;t&&t.removeChild(this)}function Ut(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function Vt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}var Gt={},Ft=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(Gt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Ht(t,e,i){return t=zt(t,e,i),function(e){var i=e.relatedTarget;i&&(i===this||8&i.compareDocumentPosition(this))||t.call(this,e)}}function zt(t,e,i){return function(a){var n=Ft;Ft=a;try{t.call(this,this.__data__,e,i)}finally{Ft=n}}}function Wt(t){return function(){var e=this.__on;if(e){for(var i,a=0,n=-1,r=e.length;a<r;++a)i=e[a],t.type&&i.type!==t.type||i.name!==t.name?e[++n]=i:this.removeEventListener(i.type,i.listener,i.capture);++n?e.length=n:delete this.__on}}}function Jt(t,e,i){var a=Gt.hasOwnProperty(t.type)?Ht:zt;return function(n,r,o){var s,l=this.__on,c=a(e,r,o);if(l)for(var d=0,u=l.length;d<u;++d)if((s=l[d]).type===t.type&&s.name===t.name)return this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=c,s.capture=i),void(s.value=e);this.addEventListener(t.type,c,i),s={type:t.type,name:t.name,value:e,listener:c,capture:i},l?l.push(s):this.__on=[s]}}function Yt(t,e,i,a){var n=Ft;t.sourceEvent=Ft,Ft=t;try{return e.apply(i,a)}finally{Ft=n}}function Xt(t,e,i){var a=jt(t),n=a.CustomEvent;"function"==typeof n?n=new n(e,i):(n=a.document.createEvent("Event"),i?(n.initEvent(e,i.bubbles,i.cancelable),n.detail=i.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}var Zt=[null];function Kt(t,e){this._groups=t,this._parents=e}function Qt(){return new Kt([[document.documentElement]],Zt)}Kt.prototype=Qt.prototype={constructor:Kt,select:function(t){"function"!=typeof t&&(t=bt(t));for(var e=this._groups,i=e.length,a=new Array(i),n=0;n<i;++n)for(var r,o,s=e[n],l=s.length,c=a[n]=new Array(l),d=0;d<l;++d)(r=s[d])&&(o=t.call(r,r.__data__,d,s))&&("__data__"in r&&(o.__data__=r.__data__),c[d]=o);return new Kt(a,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=wt(t));for(var e=this._groups,i=e.length,a=[],n=[],r=0;r<i;++r)for(var o,s=e[r],l=s.length,c=0;c<l;++c)(o=s[c])&&(a.push(t.call(o,o.__data__,c,s)),n.push(o));return new Kt(a,n)},filter:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,i=e.length,a=new Array(i),n=0;n<i;++n)for(var r,o=e[n],s=o.length,l=a[n]=[],c=0;c<s;++c)(r=o[c])&&t.call(r,r.__data__,c,o)&&l.push(r);return new Kt(a,this._parents)},data:function(t,e){if(!t)return m=new Array(this.size()),d=-1,this.each(function(t){m[++d]=t}),m;var i,a=e?St:Ct,n=this._parents,r=this._groups;"function"!=typeof t&&(i=t,t=function(){return i});for(var o=r.length,s=new Array(o),l=new Array(o),c=new Array(o),d=0;d<o;++d){var u=n[d],f=r[d],h=f.length,m=t.call(u,u&&u.__data__,d,n),p=m.length,g=l[d]=new Array(p),v=s[d]=new Array(p);a(u,f,g,v,c[d]=new Array(h),m,e);for(var b,_,w=0,y=0;w<p;++w)if(b=g[w]){for(w>=y&&(y=w+1);!(_=v[y])&&++y<p;);b._next=_||null}}return(s=new Kt(s,n))._enter=l,s._exit=c,s},enter:function(){return new Kt(this._enter||this._groups.map(xt),this._parents)},exit:function(){return new Kt(this._exit||this._groups.map(xt),this._parents)},join:function(t,e,i){var a=this.enter(),n=this,r=this.exit();return a="function"==typeof t?t(a):a.append(t+""),null!=e&&(n=e(n)),null==i?r.remove():i(r),a&&n?a.merge(n).order():n},merge:function(t){for(var e=this._groups,i=t._groups,a=e.length,n=i.length,r=Math.min(a,n),o=new Array(a),s=0;s<r;++s)for(var l,c=e[s],d=i[s],u=c.length,f=o[s]=new Array(u),h=0;h<u;++h)(l=c[h]||d[h])&&(f[h]=l);for(;s<a;++s)o[s]=e[s];return new Kt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,i=t.length;++e<i;)for(var a,n=t[e],r=n.length-1,o=n[r];--r>=0;)(a=n[r])&&(o&&4^a.compareDocumentPosition(o)&&o.parentNode.insertBefore(a,o),o=a);return this},sort:function(t){function e(e,i){return e&&i?t(e.__data__,i.__data__):!e-!i}t||(t=Dt);for(var i=this._groups,a=i.length,n=new Array(a),r=0;r<a;++r){for(var o,s=i[r],l=s.length,c=n[r]=new Array(l),d=0;d<l;++d)(o=s[d])&&(c[d]=o);c.sort(e)}return new Kt(n,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each(function(){t[++e]=this}),t},node:function(){for(var t=this._groups,e=0,i=t.length;e<i;++e)for(var a=t[e],n=0,r=a.length;n<r;++n){var o=a[n];if(o)return o}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,i=0,a=e.length;i<a;++i)for(var n,r=e[i],o=0,s=r.length;o<s;++o)(n=r[o])&&t.call(n,n.__data__,o,r);return this},attr:function(t,e){var i=pt(t);if(arguments.length<2){var a=this.node();return i.local?a.getAttributeNS(i.space,i.local):a.getAttribute(i)}return this.each((null==e?i.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof e?i.local?function(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,i)}}:function(t,e){return function(){var i=e.apply(this,arguments);null==i?this.removeAttribute(t):this.setAttribute(t,i)}}:i.local?function(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}:function(t,e){return function(){this.setAttribute(t,e)}})(i,e))},style:function(t,e,i){return arguments.length>1?this.each((null==e?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof e?function(t,e,i){return function(){var a=e.apply(this,arguments);null==a?this.style.removeProperty(t):this.style.setProperty(t,a,i)}}:function(t,e,i){return function(){this.style.setProperty(t,e,i)}})(t,e,null==i?"":i)):Nt(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?function(t){return function(){delete this[t]}}:"function"==typeof e?function(t,e){return function(){var i=e.apply(this,arguments);null==i?delete this[t]:this[t]=i}}:function(t,e){return function(){this[t]=e}})(t,e)):this.node()[t]},classed:function(t,e){var i=Ot(t+"");if(arguments.length<2){for(var a=Tt(this.node()),n=-1,r=i.length;++n<r;)if(!a.contains(i[n]))return!1;return!0}return this.each(("function"==typeof e?function(t,e){return function(){(e.apply(this,arguments)?Lt:Et)(this,t)}}:e?function(t){return function(){Lt(this,t)}}:function(t){return function(){Et(this,t)}})(i,e))},text:function(t){return arguments.length?this.each(null==t?Rt:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?At:("function"==typeof t?function(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(Mt)},lower:function(){return this.each(Bt)},append:function(t){var e="function"==typeof t?t:gt(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var i="function"==typeof t?t:gt(t),a=null==e?Pt:"function"==typeof e?e:bt(e);return this.select(function(){return this.insertBefore(i.apply(this,arguments),a.apply(this,arguments)||null)})},remove:function(){return this.each(qt)},clone:function(t){return this.select(t?Vt:Ut)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,i){var a,n,r=(t+"").trim().split(/^|\s+/).map(function(t){var e="",i=t.indexOf(".");return i>=0&&(e=t.slice(i+1),t=t.slice(0,i)),{type:t,name:e}}),o=r.length;if(!(arguments.length<2)){for(s=e?Jt:Wt,null==i&&(i=!1),a=0;a<o;++a)this.each(s(r[a],e,i));return this}var s=this.node().__on;if(s)for(var l,c=0,d=s.length;c<d;++c)for(a=0,l=s[c];a<o;++a)if((n=r[a]).type===l.type&&n.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?function(t,e){return function(){return Xt(this,t,e.apply(this,arguments))}}:function(t,e){return function(){return Xt(this,t,e)}})(t,e))}};var te=Qt,ee=function(t){return"string"==typeof t?new Kt([[document.querySelector(t)]],[document.documentElement]):new Kt([[t]],Zt)},ie=function(t){return ee(gt(t).call(document.documentElement))},ae=0;function ne(){return new re}function re(){this._="@"+(++ae).toString(36)}re.prototype=ne.prototype={constructor:re,get:function(t){for(var e=this._;!(e in t);)if(!(t=t.parentNode))return;return t[e]},set:function(t,e){return t[this._]=e},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}};var oe=function(){for(var t,e=Ft;t=e.sourceEvent;)e=t;return e},se=function(t,e){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var a=i.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,[(a=a.matrixTransform(t.getScreenCTM().inverse())).x,a.y]}var n=t.getBoundingClientRect();return[e.clientX-n.left-t.clientLeft,e.clientY-n.top-t.clientTop]},le=function(t){var e=oe();return e.changedTouches&&(e=e.changedTouches[0]),se(t,e)},ce=function(t){return"string"==typeof t?new Kt([document.querySelectorAll(t)],[document.documentElement]):new Kt([null==t?[]:t],Zt)},de=function(t,e,i){arguments.length<3&&(i=e,e=oe().changedTouches);for(var a,n=0,r=e?e.length:0;n<r;++n)if((a=e[n]).identifier===i)return se(t,a);return null},ue=function(t,e){null==e&&(e=oe().touches);for(var i=0,a=e?e.length:0,n=new Array(a);i<a;++i)n[i]=se(t,e[i]);return n};function fe(){Ft.stopImmediatePropagation()}var he=function(){Ft.preventDefault(),Ft.stopImmediatePropagation()},me=function(t){var e=t.document.documentElement,i=ee(t).on("dragstart.drag",he,!0);"onselectstart"in e?i.on("selectstart.drag",he,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};function pe(t,e){var i=t.document.documentElement,a=ee(t).on("dragstart.drag",null);e&&(a.on("click.drag",he,!0),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in i?a.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}var ge=function(t){return function(){return t}};function ve(t,e,i,a,n,r,o,s,l,c){this.target=t,this.type=e,this.subject=i,this.identifier=a,this.active=n,this.x=r,this.y=o,this.dx=s,this.dy=l,this._=c}function be(){return!Ft.ctrlKey&&!Ft.button}function _e(){return this.parentNode}function we(t){return null==t?{x:Ft.x,y:Ft.y}:t}function ye(){return navigator.maxTouchPoints||"ontouchstart"in this}ve.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var xe=function(){var t,e,i,a,n=be,r=_e,o=we,s=ye,l={},c=ft("start","drag","end"),d=0,u=0;function f(t){t.on("mousedown.drag",h).filter(s).on("touchstart.drag",g).on("touchmove.drag",v).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(){if(!a&&n.apply(this,arguments)){var o=_("mouse",r.apply(this,arguments),le,this,arguments);o&&(ee(Ft.view).on("mousemove.drag",m,!0).on("mouseup.drag",p,!0),me(Ft.view),fe(),i=!1,t=Ft.clientX,e=Ft.clientY,o("start"))}}function m(){if(he(),!i){var a=Ft.clientX-t,n=Ft.clientY-e;i=a*a+n*n>u}l.mouse("drag")}function p(){ee(Ft.view).on("mousemove.drag mouseup.drag",null),pe(Ft.view,i),he(),l.mouse("end")}function g(){if(n.apply(this,arguments)){var t,e,i=Ft.changedTouches,a=r.apply(this,arguments),o=i.length;for(t=0;t<o;++t)(e=_(i[t].identifier,a,de,this,arguments))&&(fe(),e("start"))}}function v(){var t,e,i=Ft.changedTouches,a=i.length;for(t=0;t<a;++t)(e=l[i[t].identifier])&&(he(),e("drag"))}function b(){var t,e,i=Ft.changedTouches,n=i.length;for(a&&clearTimeout(a),a=setTimeout(function(){a=null},500),t=0;t<n;++t)(e=l[i[t].identifier])&&(fe(),e("end"))}function _(t,e,i,a,n){var r,s,u,h=i(e,t),m=c.copy();if(Yt(new ve(f,"beforestart",r,t,d,h[0],h[1],0,0,m),function(){return null!=(Ft.subject=r=o.apply(a,n))&&(s=r.x-h[0]||0,u=r.y-h[1]||0,!0)}))return function o(c){var p,g=h;switch(c){case"start":l[t]=o,p=d++;break;case"end":delete l[t],--d;case"drag":h=i(e,t),p=d}Yt(new ve(f,c,r,t,p,h[0]+s,h[1]+u,h[0]-g[0],h[1]-g[1],m),m.apply,m,[c,a,n])}}return f.filter=function(t){return arguments.length?(n="function"==typeof t?t:ge(!!t),f):n},f.container=function(t){return arguments.length?(r="function"==typeof t?t:ge(t),f):r},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:ge(t),f):o},f.touchable=function(t){return arguments.length?(s="function"==typeof t?t:ge(!!t),f):s},f.on=function(){var t=c.on.apply(c,arguments);return t===c?f:t},f.clickDistance=function(t){return arguments.length?(u=(t=+t)*t,f):Math.sqrt(u)},f},ke=function(t,e,i){t.prototype=e.prototype=i,i.constructor=t};function $e(t,e){var i=Object.create(t.prototype);for(var a in e)i[a]=e[a];return i}function Ce(){}var Se="\\s*([+-]?\\d+)\\s*",De="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",je="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ne=/^#([0-9a-f]{3})$/,Oe=/^#([0-9a-f]{6})$/,Te=new RegExp("^rgb\\("+[Se,Se,Se]+"\\)$"),Ie=new RegExp("^rgb\\("+[je,je,je]+"\\)$"),Le=new RegExp("^rgba\\("+[Se,Se,Se,De]+"\\)$"),Ee=new RegExp("^rgba\\("+[je,je,je,De]+"\\)$"),Re=new RegExp("^hsl\\("+[De,je,je]+"\\)$"),Ae=new RegExp("^hsla\\("+[De,je,je,De]+"\\)$"),Me={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Be(){return this.rgb().formatHex()}function Pe(){return this.rgb().formatRgb()}function qe(t){var e;return t=(t+"").trim().toLowerCase(),(e=Ne.exec(t))?new He((e=parseInt(e[1],16))>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):(e=Oe.exec(t))?Ue(parseInt(e[1],16)):(e=Te.exec(t))?new He(e[1],e[2],e[3],1):(e=Ie.exec(t))?new He(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Le.exec(t))?Ve(e[1],e[2],e[3],e[4]):(e=Ee.exec(t))?Ve(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Re.exec(t))?Ye(e[1],e[2]/100,e[3]/100,1):(e=Ae.exec(t))?Ye(e[1],e[2]/100,e[3]/100,e[4]):Me.hasOwnProperty(t)?Ue(Me[t]):"transparent"===t?new He(NaN,NaN,NaN,0):null}function Ue(t){return new He(t>>16&255,t>>8&255,255&t,1)}function Ve(t,e,i,a){return a<=0&&(t=e=i=NaN),new He(t,e,i,a)}function Ge(t){return t instanceof Ce||(t=qe(t)),t?new He((t=t.rgb()).r,t.g,t.b,t.opacity):new He}function Fe(t,e,i,a){return 1===arguments.length?Ge(t):new He(t,e,i,null==a?1:a)}function He(t,e,i,a){this.r=+t,this.g=+e,this.b=+i,this.opacity=+a}function ze(){return"#"+Je(this.r)+Je(this.g)+Je(this.b)}function We(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function Je(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function Ye(t,e,i,a){return a<=0?t=e=i=NaN:i<=0||i>=1?t=e=NaN:e<=0&&(t=NaN),new Ke(t,e,i,a)}function Xe(t){if(t instanceof Ke)return new Ke(t.h,t.s,t.l,t.opacity);if(t instanceof Ce||(t=qe(t)),!t)return new Ke;if(t instanceof Ke)return t;var e=(t=t.rgb()).r/255,i=t.g/255,a=t.b/255,n=Math.min(e,i,a),r=Math.max(e,i,a),o=NaN,s=r-n,l=(r+n)/2;return s?(o=e===r?(i-a)/s+6*(i<a):i===r?(a-e)/s+2:(e-i)/s+4,s/=l<.5?r+n:2-r-n,o*=60):s=l>0&&l<1?0:o,new Ke(o,s,l,t.opacity)}function Ze(t,e,i,a){return 1===arguments.length?Xe(t):new Ke(t,e,i,null==a?1:a)}function Ke(t,e,i,a){this.h=+t,this.s=+e,this.l=+i,this.opacity=+a}function Qe(t,e,i){return 255*(t<60?e+(i-e)*t/60:t<180?i:t<240?e+(i-e)*(240-t)/60:e)}ke(Ce,qe,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:Be,formatHex:Be,formatHsl:function(){return Xe(this).formatHsl()},formatRgb:Pe,toString:Pe}),ke(He,Fe,$e(Ce,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new He(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new He(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ze,formatHex:ze,formatRgb:We,toString:We})),ke(Ke,Ze,$e(Ce,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ke(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ke(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*e,n=2*i-a;return new He(Qe(t>=240?t-240:t+120,n,a),Qe(t,n,a),Qe(t<120?t+240:t-120,n,a),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var ti=Math.PI/180,ei=180/Math.PI,ii=.96422,ai=1,ni=.82521,ri=4/29,oi=6/29,si=3*oi*oi,li=oi*oi*oi;function ci(t){if(t instanceof fi)return new fi(t.l,t.a,t.b,t.opacity);if(t instanceof wi)return yi(t);t instanceof He||(t=Ge(t));var e,i,a=gi(t.r),n=gi(t.g),r=gi(t.b),o=hi((.2225045*a+.7168786*n+.0606169*r)/ai);return a===n&&n===r?e=i=o:(e=hi((.4360747*a+.3850649*n+.1430804*r)/ii),i=hi((.0139322*a+.0971045*n+.7141733*r)/ni)),new fi(116*o-16,500*(e-o),200*(o-i),t.opacity)}function di(t,e){return new fi(t,0,0,null==e?1:e)}function ui(t,e,i,a){return 1===arguments.length?ci(t):new fi(t,e,i,null==a?1:a)}function fi(t,e,i,a){this.l=+t,this.a=+e,this.b=+i,this.opacity=+a}function hi(t){return t>li?Math.pow(t,1/3):t/si+ri}function mi(t){return t>oi?t*t*t:si*(t-ri)}function pi(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function gi(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function vi(t){if(t instanceof wi)return new wi(t.h,t.c,t.l,t.opacity);if(t instanceof fi||(t=ci(t)),0===t.a&&0===t.b)return new wi(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*ei;return new wi(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function bi(t,e,i,a){return 1===arguments.length?vi(t):new wi(i,e,t,null==a?1:a)}function _i(t,e,i,a){return 1===arguments.length?vi(t):new wi(t,e,i,null==a?1:a)}function wi(t,e,i,a){this.h=+t,this.c=+e,this.l=+i,this.opacity=+a}function yi(t){if(isNaN(t.h))return new fi(t.l,0,0,t.opacity);var e=t.h*ti;return new fi(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}ke(fi,ui,$e(Ce,{brighter:function(t){return new fi(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new fi(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return new He(pi(3.1338561*(e=ii*mi(e))-1.6168667*(t=ai*mi(t))-.4906146*(i=ni*mi(i))),pi(-.9787684*e+1.9161415*t+.033454*i),pi(.0719453*e-.2289914*t+1.4052427*i),this.opacity)}})),ke(wi,_i,$e(Ce,{brighter:function(t){return new wi(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new wi(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return yi(this).rgb()}}));var xi=-.29227,ki=-.90649,$i=1.97294,Ci=$i*ki,Si=1.78277*$i,Di=1.78277*xi- -.14861*ki;function ji(t,e,i,a){return 1===arguments.length?function(t){if(t instanceof Ni)return new Ni(t.h,t.s,t.l,t.opacity);t instanceof He||(t=Ge(t));var e=t.r/255,i=t.g/255,a=t.b/255,n=(Di*a+Ci*e-Si*i)/(Di+Ci-Si),r=a-n,o=($i*(i-n)-xi*r)/ki,s=Math.sqrt(o*o+r*r)/($i*n*(1-n)),l=s?Math.atan2(o,r)*ei-120:NaN;return new Ni(l<0?l+360:l,s,n,t.opacity)}(t):new Ni(t,e,i,null==a?1:a)}function Ni(t,e,i,a){this.h=+t,this.s=+e,this.l=+i,this.opacity=+a}function Oi(t,e,i,a,n){var r=t*t,o=r*t;return((1-3*t+3*r-o)*e+(4-6*r+3*o)*i+(1+3*t+3*r-3*o)*a+o*n)/6}ke(Ni,ji,$e(Ce,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Ni(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Ni(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*ti,e=+this.l,i=isNaN(this.s)?0:this.s*e*(1-e),a=Math.cos(t),n=Math.sin(t);return new He(255*(e+i*(-.14861*a+1.78277*n)),255*(e+i*(xi*a+ki*n)),255*(e+i*($i*a)),this.opacity)}}));var Ti=function(t){var e=t.length-1;return function(i){var a=i<=0?i=0:i>=1?(i=1,e-1):Math.floor(i*e),n=t[a],r=t[a+1],o=a>0?t[a-1]:2*n-r,s=a<e-1?t[a+2]:2*r-n;return Oi((i-a/e)*e,o,n,r,s)}},Ii=function(t){var e=t.length;return function(i){var a=Math.floor(((i%=1)<0?++i:i)*e),n=t[(a+e-1)%e],r=t[a%e],o=t[(a+1)%e],s=t[(a+2)%e];return Oi((i-a/e)*e,n,r,o,s)}},Li=function(t){return function(){return t}};function Ei(t,e){return function(i){return t+i*e}}function Ri(t,e){var i=e-t;return i?Ei(t,i>180||i<-180?i-360*Math.round(i/360):i):Li(isNaN(t)?e:t)}function Ai(t){return 1==(t=+t)?Mi:function(e,i){return i-e?(a=e,n=i,r=t,a=Math.pow(a,r),n=Math.pow(n,r)-a,r=1/r,function(t){return Math.pow(a+t*n,r)}):Li(isNaN(e)?i:e);var a,n,r}}function Mi(t,e){var i=e-t;return i?Ei(t,i):Li(isNaN(t)?e:t)}var Bi=function t(e){var i=Ai(e);function a(t,e){var a=i((t=Fe(t)).r,(e=Fe(e)).r),n=i(t.g,e.g),r=i(t.b,e.b),o=Mi(t.opacity,e.opacity);return function(e){return t.r=a(e),t.g=n(e),t.b=r(e),t.opacity=o(e),t+""}}return a.gamma=t,a}(1);function Pi(t){return function(e){var i,a,n=e.length,r=new Array(n),o=new Array(n),s=new Array(n);for(i=0;i<n;++i)a=Fe(e[i]),r[i]=a.r||0,o[i]=a.g||0,s[i]=a.b||0;return r=t(r),o=t(o),s=t(s),a.opacity=1,function(t){return a.r=r(t),a.g=o(t),a.b=s(t),a+""}}}var qi=Pi(Ti),Ui=Pi(Ii),Vi=function(t,e){var i,a=e?e.length:0,n=t?Math.min(a,t.length):0,r=new Array(n),o=new Array(a);for(i=0;i<n;++i)r[i]=Qi(t[i],e[i]);for(;i<a;++i)o[i]=e[i];return function(t){for(i=0;i<n;++i)o[i]=r[i](t);return o}},Gi=function(t,e){var i=new Date;return e-=t=+t,function(a){return i.setTime(t+e*a),i}},Fi=function(t,e){return e-=t=+t,function(i){return t+e*i}},Hi=function(t,e){var i,a={},n={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(i in e)i in t?a[i]=Qi(t[i],e[i]):n[i]=e[i];return function(t){for(i in a)n[i]=a[i](t);return n}},zi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wi=new RegExp(zi.source,"g");var Ji,Yi,Xi,Zi,Ki=function(t,e){var i,a,n,r,o,s=zi.lastIndex=Wi.lastIndex=0,l=-1,c=[],d=[];for(t+="",e+="";(i=zi.exec(t))&&(a=Wi.exec(e));)(n=a.index)>s&&(n=e.slice(s,n),c[l]?c[l]+=n:c[++l]=n),(i=i[0])===(a=a[0])?c[l]?c[l]+=a:c[++l]=a:(c[++l]=null,d.push({i:l,x:Fi(i,a)})),s=Wi.lastIndex;return s<e.length&&(n=e.slice(s),c[l]?c[l]+=n:c[++l]=n),c.length<2?d[0]?(o=d[0].x,function(t){return o(t)+""}):(r=e,function(){return r}):(e=d.length,function(t){for(var i,a=0;a<e;++a)c[(i=d[a]).i]=i.x(t);return c.join("")})},Qi=function(t,e){var i,a=typeof e;return null==e||"boolean"===a?Li(e):("number"===a?Fi:"string"===a?(i=qe(e))?(e=i,Bi):Ki:e instanceof qe?Bi:e instanceof Date?Gi:Array.isArray(e)?Vi:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Hi:Fi)(t,e)},ta=function(t){var e=t.length;return function(i){return t[Math.max(0,Math.min(e-1,Math.floor(i*e)))]}},ea=function(t,e){var i=Ri(+t,+e);return function(t){var e=i(t);return e-360*Math.floor(e/360)}},ia=function(t,e){return e-=t=+t,function(i){return Math.round(t+e*i)}},aa=180/Math.PI,na={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ra=function(t,e,i,a,n,r){var o,s,l;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(l=t*i+e*a)&&(i-=t*l,a-=e*l),(s=Math.sqrt(i*i+a*a))&&(i/=s,a/=s,l/=s),t*a<e*i&&(t=-t,e=-e,l=-l,o=-o),{translateX:n,translateY:r,rotate:Math.atan2(e,t)*aa,skewX:Math.atan(l)*aa,scaleX:o,scaleY:s}};function oa(t,e,i,a){function n(t){return t.length?t.pop()+" ":""}return function(r,o){var s,l,c,d,u,f,h=[],m=[];return r=t(r),o=t(o),function(t,a,n,r,o,s){if(t!==n||a!==r){var l=o.push("translate(",null,e,null,i);s.push({i:l-4,x:Fi(t,n)},{i:l-2,x:Fi(a,r)})}else(n||r)&&o.push("translate("+n+e+r+i)}(r.translateX,r.translateY,o.translateX,o.translateY,h,m),s=r.rotate,l=o.rotate,c=h,s!==l?(s-l>180?l+=360:l-s>180&&(s+=360),m.push({i:c.push(n(c)+"rotate(",null,a)-2,x:Fi(s,l)})):l&&c.push(n(c)+"rotate("+l+a),d=r.skewX,u=o.skewX,f=h,d!==u?m.push({i:f.push(n(f)+"skewX(",null,a)-2,x:Fi(d,u)}):u&&f.push(n(f)+"skewX("+u+a),function(t,e,i,a,r,o){if(t!==i||e!==a){var s=r.push(n(r)+"scale(",null,",",null,")");o.push({i:s-4,x:Fi(t,i)},{i:s-2,x:Fi(e,a)})}else 1===i&&1===a||r.push(n(r)+"scale("+i+","+a+")")}(r.scaleX,r.scaleY,o.scaleX,o.scaleY,h,m),r=o=null,function(t){for(var e,i=-1,a=m.length;++i<a;)h[(e=m[i]).i]=e.x(t);return h.join("")}}}var sa=oa(function(t){return"none"===t?na:(Ji||(Ji=document.createElement("DIV"),Yi=document.documentElement,Xi=document.defaultView),Ji.style.transform=t,t=Xi.getComputedStyle(Yi.appendChild(Ji),null).getPropertyValue("transform"),Yi.removeChild(Ji),t=t.slice(7,-1).split(","),ra(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),la=oa(function(t){return null==t?na:(Zi||(Zi=document.createElementNS("http://www.w3.org/2000/svg","g")),Zi.setAttribute("transform",t),(t=Zi.transform.baseVal.consolidate())?(t=t.matrix,ra(t.a,t.b,t.c,t.d,t.e,t.f)):na)},", ",")",")"),ca=Math.SQRT2;function da(t){return((t=Math.exp(t))+1/t)/2}var ua=function(t,e){var i,a,n=t[0],r=t[1],o=t[2],s=e[0],l=e[1],c=e[2],d=s-n,u=l-r,f=d*d+u*u;if(f<1e-12)a=Math.log(c/o)/ca,i=function(t){return[n+t*d,r+t*u,o*Math.exp(ca*t*a)]};else{var h=Math.sqrt(f),m=(c*c-o*o+4*f)/(2*o*2*h),p=(c*c-o*o-4*f)/(2*c*2*h),g=Math.log(Math.sqrt(m*m+1)-m),v=Math.log(Math.sqrt(p*p+1)-p);a=(v-g)/ca,i=function(t){var e,i,s=t*a,l=da(g),c=o/(2*h)*(l*(i=ca*s+g,((i=Math.exp(2*i))-1)/(i+1))-(e=g,((e=Math.exp(e))-1/e)/2));return[n+c*d,r+c*u,o*l/da(ca*s+g)]}}return i.duration=1e3*a,i};function fa(t){return function(e,i){var a=t((e=Ze(e)).h,(i=Ze(i)).h),n=Mi(e.s,i.s),r=Mi(e.l,i.l),o=Mi(e.opacity,i.opacity);return function(t){return e.h=a(t),e.s=n(t),e.l=r(t),e.opacity=o(t),e+""}}}var ha=fa(Ri),ma=fa(Mi);function pa(t,e){var i=Mi((t=ui(t)).l,(e=ui(e)).l),a=Mi(t.a,e.a),n=Mi(t.b,e.b),r=Mi(t.opacity,e.opacity);return function(e){return t.l=i(e),t.a=a(e),t.b=n(e),t.opacity=r(e),t+""}}function ga(t){return function(e,i){var a=t((e=_i(e)).h,(i=_i(i)).h),n=Mi(e.c,i.c),r=Mi(e.l,i.l),o=Mi(e.opacity,i.opacity);return function(t){return e.h=a(t),e.c=n(t),e.l=r(t),e.opacity=o(t),e+""}}}var va=ga(Ri),ba=ga(Mi);function _a(t){return function e(i){function a(e,a){var n=t((e=ji(e)).h,(a=ji(a)).h),r=Mi(e.s,a.s),o=Mi(e.l,a.l),s=Mi(e.opacity,a.opacity);return function(t){return e.h=n(t),e.s=r(t),e.l=o(Math.pow(t,i)),e.opacity=s(t),e+""}}return i=+i,a.gamma=e,a}(1)}var wa=_a(Ri),ya=_a(Mi);function xa(t,e){for(var i=0,a=e.length-1,n=e[0],r=new Array(a<0?0:a);i<a;)r[i]=t(n,n=e[++i]);return function(t){var e=Math.max(0,Math.min(a-1,Math.floor(t*=a)));return r[e](t-e)}}var ka,$a,Ca=function(t,e){for(var i=new Array(e),a=0;a<e;++a)i[a]=t(a/(e-1));return i},Sa=0,Da=0,ja=0,Na=1e3,Oa=0,Ta=0,Ia=0,La="object"==typeof performance&&performance.now?performance:Date,Ea="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ra(){return Ta||(Ea(Aa),Ta=La.now()+Ia)}function Aa(){Ta=0}function Ma(){this._call=this._time=this._next=null}function Ba(t,e,i){var a=new Ma;return a.restart(t,e,i),a}function Pa(){Ra(),++Sa;for(var t,e=ka;e;)(t=Ta-e._time)>=0&&e._call.call(null,t),e=e._next;--Sa}function qa(){Ta=(Oa=La.now())+Ia,Sa=Da=0;try{Pa()}finally{Sa=0,function(){var t,e,i=ka,a=1/0;for(;i;)i._call?(a>i._time&&(a=i._time),t=i,i=i._next):(e=i._next,i._next=null,i=t?t._next=e:ka=e);$a=t,Va(a)}(),Ta=0}}function Ua(){var t=La.now(),e=t-Oa;e>Na&&(Ia-=e,Oa=t)}function Va(t){Sa||(Da&&(Da=clearTimeout(Da)),t-Ta>24?(t<1/0&&(Da=setTimeout(qa,t-La.now()-Ia)),ja&&(ja=clearInterval(ja))):(ja||(Oa=La.now(),ja=setInterval(Ua,Na)),Sa=1,Ea(qa)))}Ma.prototype=Ba.prototype={constructor:Ma,restart:function(t,e,i){if("function"!=typeof t)throw new TypeError("callback is not a function");i=(null==i?Ra():+i)+(null==e?0:+e),this._next||$a===this||($a?$a._next=this:ka=this,$a=this),this._call=t,this._time=i,Va()},stop:function(){this._call&&(this._call=null,this._time=1/0,Va())}};var Ga=function(t,e,i){var a=new Ma;return e=null==e?0:+e,a.restart(function(i){a.stop(),t(i+e)},e,i),a},Fa=function(t,e,i){var a=new Ma,n=e;return null==e?(a.restart(t,e,i),a):(e=+e,i=null==i?Ra():+i,a.restart(function r(o){o+=n,a.restart(r,n+=e,i),t(o)},e,i),a)},Ha=ft("start","end","cancel","interrupt"),za=[],Wa=0,Ja=1,Ya=2,Xa=3,Za=4,Ka=5,Qa=6,tn=function(t,e,i,a,n,r){var o=t.__transition;if(o){if(i in o)return}else t.__transition={};!function(t,e,i){var a,n=t.__transition;function r(l){var c,d,u,f;if(i.state!==Ja)return s();for(c in n)if((f=n[c]).name===i.name){if(f.state===Xa)return Ga(r);f.state===Za?(f.state=Qa,f.timer.stop(),f.on.call("interrupt",t,t.__data__,f.index,f.group),delete n[c]):+c<e&&(f.state=Qa,f.timer.stop(),f.on.call("cancel",t,t.__data__,f.index,f.group),delete n[c])}if(Ga(function(){i.state===Xa&&(i.state=Za,i.timer.restart(o,i.delay,i.time),o(l))}),i.state=Ya,i.on.call("start",t,t.__data__,i.index,i.group),i.state===Ya){for(i.state=Xa,a=new Array(u=i.tween.length),c=0,d=-1;c<u;++c)(f=i.tween[c].value.call(t,t.__data__,i.index,i.group))&&(a[++d]=f);a.length=d+1}}function o(e){for(var n=e<i.duration?i.ease.call(null,e/i.duration):(i.timer.restart(s),i.state=Ka,1),r=-1,o=a.length;++r<o;)a[r].call(t,n);i.state===Ka&&(i.on.call("end",t,t.__data__,i.index,i.group),s())}function s(){i.state=Qa,i.timer.stop(),delete n[e];for(var a in n)return;delete t.__transition}n[e]=i,i.timer=Ba(function(t){i.state=Ja,i.timer.restart(r,i.delay,i.time),i.delay<=t&&r(t-i.delay)},0,i.time)}(t,i,{name:e,index:a,group:n,on:Ha,tween:za,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Wa})};function en(t,e){var i=nn(t,e);if(i.state>Wa)throw new Error("too late; already scheduled");return i}function an(t,e){var i=nn(t,e);if(i.state>Xa)throw new Error("too late; already running");return i}function nn(t,e){var i=t.__transition;if(!i||!(i=i[e]))throw new Error("transition not found");return i}var rn=function(t,e){var i,a,n,r=t.__transition,o=!0;if(r){e=null==e?null:e+"";for(n in r)(i=r[n]).name===e?(a=i.state>Ya&&i.state<Ka,i.state=Qa,i.timer.stop(),i.on.call(a?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[n]):o=!1;o&&delete t.__transition}};function on(t,e,i){var a=t._id;return t.each(function(){var t=an(this,a);(t.value||(t.value={}))[e]=i.apply(this,arguments)}),function(t){return nn(t,a).value[e]}}var sn=function(t,e){var i;return("number"==typeof e?Fi:e instanceof qe?Bi:(i=qe(e))?(e=i,Bi):Ki)(t,e)};var ln=te.prototype.constructor;function cn(t){return function(){this.style.removeProperty(t)}}var dn=0;function un(t,e,i,a){this._groups=t,this._parents=e,this._name=i,this._id=a}function fn(t){return te().transition(t)}function hn(){return++dn}var mn=te.prototype;function pn(t){return+t}function gn(t){return t*t}function vn(t){return t*(2-t)}function bn(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function _n(t){return t*t*t}function wn(t){return--t*t*t+1}function yn(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}un.prototype=fn.prototype={constructor:un,select:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=bt(t));for(var a=this._groups,n=a.length,r=new Array(n),o=0;o<n;++o)for(var s,l,c=a[o],d=c.length,u=r[o]=new Array(d),f=0;f<d;++f)(s=c[f])&&(l=t.call(s,s.__data__,f,c))&&("__data__"in s&&(l.__data__=s.__data__),u[f]=l,tn(u[f],e,i,f,u,nn(s,i)));return new un(r,this._parents,e,i)},selectAll:function(t){var e=this._name,i=this._id;"function"!=typeof t&&(t=wt(t));for(var a=this._groups,n=a.length,r=[],o=[],s=0;s<n;++s)for(var l,c=a[s],d=c.length,u=0;u<d;++u)if(l=c[u]){for(var f,h=t.call(l,l.__data__,u,c),m=nn(l,i),p=0,g=h.length;p<g;++p)(f=h[p])&&tn(f,e,i,p,h,m);r.push(h),o.push(l)}return new un(r,o,e,i)},filter:function(t){"function"!=typeof t&&(t=yt(t));for(var e=this._groups,i=e.length,a=new Array(i),n=0;n<i;++n)for(var r,o=e[n],s=o.length,l=a[n]=[],c=0;c<s;++c)(r=o[c])&&t.call(r,r.__data__,c,o)&&l.push(r);return new un(a,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,i=t._groups,a=e.length,n=i.length,r=Math.min(a,n),o=new Array(a),s=0;s<r;++s)for(var l,c=e[s],d=i[s],u=c.length,f=o[s]=new Array(u),h=0;h<u;++h)(l=c[h]||d[h])&&(f[h]=l);for(;s<a;++s)o[s]=e[s];return new un(o,this._parents,this._name,this._id)},selection:function(){return new ln(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,i=hn(),a=this._groups,n=a.length,r=0;r<n;++r)for(var o,s=a[r],l=s.length,c=0;c<l;++c)if(o=s[c]){var d=nn(o,e);tn(o,t,i,c,s,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new un(a,this._parents,t,i)},call:mn.call,nodes:mn.nodes,node:mn.node,size:mn.size,empty:mn.empty,each:mn.each,on:function(t,e){var i,a,n,r,o,s,l=this._id;return arguments.length<2?nn(this.node(),l).on.on(t):this.each((i=l,n=e,s=((a=t)+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})?en:an,function(){var t=s(this,i),e=t.on;e!==r&&(o=(r=e).copy()).on(a,n),t.on=o}))},attr:function(t,e){var i=pt(t),a="transform"===i?la:sn;return this.attrTween(t,"function"==typeof e?(i.local?function(t,e,i){var a,n,r;return function(){var o,s,l=i(this);if(null!=l)return(o=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:o===a&&s===n?r:(n=s,r=e(a=o,l));this.removeAttributeNS(t.space,t.local)}}:function(t,e,i){var a,n,r;return function(){var o,s,l=i(this);if(null!=l)return(o=this.getAttribute(t))===(s=l+"")?null:o===a&&s===n?r:(n=s,r=e(a=o,l));this.removeAttribute(t)}})(i,a,on(this,"attr."+t,e)):null==e?(i.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(i):(i.local?function(t,e,i){var a,n,r=i+"";return function(){var o=this.getAttributeNS(t.space,t.local);return o===r?null:o===a?n:n=e(a=o,i)}}:function(t,e,i){var a,n,r=i+"";return function(){var o=this.getAttribute(t);return o===r?null:o===a?n:n=e(a=o,i)}})(i,a,e))},attrTween:function(t,e){var i="attr."+t;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(null==e)return this.tween(i,null);if("function"!=typeof e)throw new Error;var a=pt(t);return this.tween(i,(a.local?function(t,e){var i,a;function n(){var n,r,o=e.apply(this,arguments);return o!==a&&(i=(a=o)&&(n=t,r=o,function(t){this.setAttributeNS(n.space,n.local,r(t))})),i}return n._value=e,n}:function(t,e){var i,a;function n(){var n,r,o=e.apply(this,arguments);return o!==a&&(i=(a=o)&&(n=t,r=o,function(t){this.setAttribute(n,r(t))})),i}return n._value=e,n})(a,e))},style:function(t,e,i){var a,n,r,o,s,l,c,d,u,f,h,m,p,g,v,b,_,w,y,x,k,$,C,S,D,j="transform"==(t+="")?sa:sn;return null==e?this.styleTween(t,(k=t,$=j,function(){var t=Nt(this,k),e=(this.style.removeProperty(k),Nt(this,k));return t===e?null:t===C&&e===S?D:D=$(C=t,S=e)})).on("end.style."+t,cn(t)):"function"==typeof e?this.styleTween(t,(v=t,b=j,_=on(this,"style."+t,e),function(){var t=Nt(this,v),e=_(this),i=e+"";return null==e&&(this.style.removeProperty(v),i=e=Nt(this,v)),t===i?null:t===w&&i===y?x:(y=i,x=b(w=t,e))})).each((c=this._id,g="end."+(p="style."+(d=t)),function(){var t=an(this,c),e=t.on,i=null==t.value[p]?m||(m=cn(d)):void 0;e===u&&h===i||(f=(u=e).copy()).on(g,h=i),t.on=f})):this.styleTween(t,(a=t,n=j,r=e,l=r+"",function(){var t=Nt(this,a);return t===l?null:t===o?s:s=n(o=t,r)}),i).on("end.style."+t,null)},styleTween:function(t,e,i){var a="style."+(t+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(null==e)return this.tween(a,null);if("function"!=typeof e)throw new Error;return this.tween(a,function(t,e,i){var a,n;function r(){var r,o,s,l=e.apply(this,arguments);return l!==n&&(a=(n=l)&&(r=t,o=l,s=i,function(t){this.style.setProperty(r,o(t),s)})),a}return r._value=e,r}(t,e,null==i?"":i))},text:function(t){return this.tween("text","function"==typeof t?(i=on(this,"text",t),function(){var t=i(this);this.textContent=null==t?"":t}):(e=null==t?"":t+"",function(){this.textContent=e}));var e,i},remove:function(){return this.on("end.remove",(t=this._id,function(){var e=this.parentNode;for(var i in this.__transition)if(+i!==t)return;e&&e.removeChild(this)}));var t},tween:function(t,e){var i=this._id;if(t+="",arguments.length<2){for(var a,n=nn(this.node(),i).tween,r=0,o=n.length;r<o;++r)if((a=n[r]).name===t)return a.value;return null}return this.each((null==e?function(t,e){var i,a;return function(){var n=an(this,t),r=n.tween;if(r!==i)for(var o=0,s=(a=i=r).length;o<s;++o)if(a[o].name===e){(a=a.slice()).splice(o,1);break}n.tween=a}}:function(t,e,i){var a,n;if("function"!=typeof i)throw new Error;return function(){var r=an(this,t),o=r.tween;if(o!==a){n=(a=o).slice();for(var s={name:e,value:i},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=s;break}l===c&&n.push(s)}r.tween=n}})(i,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){en(this,t).delay=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){en(this,t).delay=e}})(e,t)):nn(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?function(t,e){return function(){an(this,t).duration=+e.apply(this,arguments)}}:function(t,e){return e=+e,function(){an(this,t).duration=e}})(e,t)):nn(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){an(this,t).ease=e}}(e,t)):nn(this.node(),e).ease},end:function(){var t,e,i=this,a=i._id,n=i.size();return new Promise(function(r,o){var s={value:o},l={value:function(){0==--n&&r()}};i.each(function(){var i=an(this,a),n=i.on;n!==t&&((e=(t=n).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),i.on=e})})}};var xn=function t(e){function i(t){return Math.pow(t,e)}return e=+e,i.exponent=t,i}(3),kn=function t(e){function i(t){return 1-Math.pow(1-t,e)}return e=+e,i.exponent=t,i}(3),$n=function t(e){function i(t){return((t*=2)<=1?Math.pow(t,e):2-Math.pow(2-t,e))/2}return e=+e,i.exponent=t,i}(3),Cn=Math.PI,Sn=Cn/2;function Dn(t){return 1-Math.cos(t*Sn)}function jn(t){return Math.sin(t*Sn)}function Nn(t){return(1-Math.cos(Cn*t))/2}function On(t){return Math.pow(2,10*t-10)}function Tn(t){return 1-Math.pow(2,-10*t)}function In(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ln(t){return 1-Math.sqrt(1-t*t)}function En(t){return Math.sqrt(1- --t*t)}function Rn(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var An=4/11,Mn=6/11,Bn=8/11,Pn=.75,qn=9/11,Un=10/11,Vn=.9375,Gn=21/22,Fn=63/64,Hn=1/An/An;function zn(t){return 1-Wn(1-t)}function Wn(t){return(t=+t)<An?Hn*t*t:t<Bn?Hn*(t-=Mn)*t+Pn:t<Un?Hn*(t-=qn)*t+Vn:Hn*(t-=Gn)*t+Fn}function Jn(t){return((t*=2)<=1?1-Wn(1-t):Wn(t-1)+1)/2}var Yn=function t(e){function i(t){return t*t*((e+1)*t-e)}return e=+e,i.overshoot=t,i}(1.70158),Xn=function t(e){function i(t){return--t*t*((e+1)*t+e)+1}return e=+e,i.overshoot=t,i}(1.70158),Zn=function t(e){function i(t){return((t*=2)<1?t*t*((e+1)*t-e):(t-=2)*t*((e+1)*t+e)+2)/2}return e=+e,i.overshoot=t,i}(1.70158),Kn=2*Math.PI,Qn=function t(e,i){var a=Math.asin(1/(e=Math.max(1,e)))*(i/=Kn);function n(t){return e*Math.pow(2,10*--t)*Math.sin((a-t)/i)}return n.amplitude=function(e){return t(e,i*Kn)},n.period=function(i){return t(e,i)},n}(1,.3),tr=function t(e,i){var a=Math.asin(1/(e=Math.max(1,e)))*(i/=Kn);function n(t){return 1-e*Math.pow(2,-10*(t=+t))*Math.sin((t+a)/i)}return n.amplitude=function(e){return t(e,i*Kn)},n.period=function(i){return t(e,i)},n}(1,.3),er=function t(e,i){var a=Math.asin(1/(e=Math.max(1,e)))*(i/=Kn);function n(t){return((t=2*t-1)<0?e*Math.pow(2,10*t)*Math.sin((a-t)/i):2-e*Math.pow(2,-10*t)*Math.sin((a+t)/i))/2}return n.amplitude=function(e){return t(e,i*Kn)},n.period=function(i){return t(e,i)},n}(1,.3),ir={time:null,delay:0,duration:250,ease:yn};function ar(t,e){for(var i;!(i=t.__transition)||!(i=i[e]);)if(!(t=t.parentNode))return ir.time=Ra(),ir;return i}te.prototype.interrupt=function(t){return this.each(function(){rn(this,t)})},te.prototype.transition=function(t){var e,i;t instanceof un?(e=t._id,t=t._name):(e=hn(),(i=ir).time=Ra(),t=null==t?null:t+"");for(var a=this._groups,n=a.length,r=0;r<n;++r)for(var o,s=a[r],l=s.length,c=0;c<l;++c)(o=s[c])&&tn(o,t,e,c,s,i||ar(o,e));return new un(a,this._parents,t,e)};var nr=[null],rr=function(t,e){var i,a,n=t.__transition;if(n){e=null==e?null:e+"";for(a in n)if((i=n[a]).state>Ja&&i.name===e)return new un([[t]],nr,e,+a)}return null},or=function(t){return function(){return t}},sr=function(t,e,i){this.target=t,this.type=e,this.selection=i};function lr(){Ft.stopImmediatePropagation()}var cr=function(){Ft.preventDefault(),Ft.stopImmediatePropagation()},dr={name:"drag"},ur={name:"space"},fr={name:"handle"},hr={name:"center"};function mr(t){return[+t[0],+t[1]]}function pr(t){return[mr(t[0]),mr(t[1])]}var gr={name:"x",handles:["w","e"].map($r),input:function(t,e){return null==t?null:[[+t[0],e[0][1]],[+t[1],e[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},vr={name:"y",handles:["n","s"].map($r),input:function(t,e){return null==t?null:[[e[0][0],+t[0]],[e[1][0],+t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},br={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map($r),input:function(t){return null==t?null:pr(t)},output:function(t){return t}},_r={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},xr={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},kr={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function $r(t){return{type:t}}function Cr(){return!Ft.ctrlKey&&!Ft.button}function Sr(){var t=this.ownerSVGElement||this;return t.hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Dr(){return navigator.maxTouchPoints||"ontouchstart"in this}function jr(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Nr(t){var e=t.__brush;return e?e.dim.output(e.selection):null}function Or(){return Lr(gr)}function Tr(){return Lr(vr)}var Ir=function(){return Lr(br)};function Lr(t){var e,i=Sr,a=Cr,n=Dr,r=!0,o=ft(l,"start","brush","end"),s=6;function l(e){var i=e.property("__brush",p).selectAll(".overlay").data([$r("overlay")]);i.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",_r.overlay).merge(i).each(function(){var t=jr(this).extent;ee(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),e.selectAll(".selection").data([$r("selection")]).enter().append("rect").attr("class","selection").attr("cursor",_r.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var a=e.selectAll(".handle").data(t.handles,function(t){return t.type});a.exit().remove(),a.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return _r[t.type]}),e.each(c).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",f).filter(n).on("touchstart.brush",f).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",m).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function c(){var t=ee(this),e=jr(this).selection;e?(t.selectAll(".selection").style("display",null).attr("x",e[0][0]).attr("y",e[0][1]).attr("width",e[1][0]-e[0][0]).attr("height",e[1][1]-e[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?e[1][0]-s/2:e[0][0]-s/2}).attr("y",function(t){return"s"===t.type[0]?e[1][1]-s/2:e[0][1]-s/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?e[1][0]-e[0][0]+s:s}).attr("height",function(t){return"e"===t.type||"w"===t.type?e[1][1]-e[0][1]+s:s})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function d(t,e,i){return!i&&t.__brush.emitter||new u(t,e)}function u(t,e){this.that=t,this.args=e,this.state=t.__brush,this.active=0}function f(){if((!e||Ft.touches)&&a.apply(this,arguments)){var i,n,o,s,l,u,f,h,m,p,g,v,b=this,_=Ft.target.__data__.type,w="selection"===(r&&Ft.metaKey?_="overlay":_)?dr:r&&Ft.altKey?hr:fr,y=t===vr?null:xr[_],x=t===gr?null:kr[_],k=jr(b),$=k.extent,C=k.selection,S=$[0][0],D=$[0][1],j=$[1][0],N=$[1][1],O=0,T=0,I=y&&x&&r&&Ft.shiftKey,L=Ft.touches?(v=Ft.changedTouches[0].identifier,function(t){return de(t,Ft.touches,v)}):le,E=L(b),R=E,A=d(b,arguments,!0).beforestart();"overlay"===_?(C&&(m=!0),k.selection=C=[[i=t===vr?S:E[0],o=t===gr?D:E[1]],[l=t===vr?j:i,f=t===gr?N:o]]):(i=C[0][0],o=C[0][1],l=C[1][0],f=C[1][1]),n=i,s=o,u=l,h=f;var M=ee(b).attr("pointer-events","none"),B=M.selectAll(".overlay").attr("cursor",_r[_]);if(Ft.touches)A.moved=q,A.ended=V;else{var P=ee(Ft.view).on("mousemove.brush",q,!0).on("mouseup.brush",V,!0);r&&P.on("keydown.brush",function(){switch(Ft.keyCode){case 16:I=y&&x;break;case 18:w===fr&&(y&&(l=u-O*y,i=n+O*y),x&&(f=h-T*x,o=s+T*x),w=hr,U());break;case 32:w!==fr&&w!==hr||(y<0?l=u-O:y>0&&(i=n-O),x<0?f=h-T:x>0&&(o=s-T),w=ur,B.attr("cursor",_r.selection),U());break;default:return}cr()},!0).on("keyup.brush",function(){switch(Ft.keyCode){case 16:I&&(p=g=I=!1,U());break;case 18:w===hr&&(y<0?l=u:y>0&&(i=n),x<0?f=h:x>0&&(o=s),w=fr,U());break;case 32:w===ur&&(Ft.altKey?(y&&(l=u-O*y,i=n+O*y),x&&(f=h-T*x,o=s+T*x),w=hr):(y<0?l=u:y>0&&(i=n),x<0?f=h:x>0&&(o=s),w=fr),B.attr("cursor",_r[_]),U());break;default:return}cr()},!0),me(Ft.view)}lr(),rn(b),c.call(b),A.start()}function q(){var t=L(b);!I||p||g||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?g=!0:p=!0),R=t,m=!0,cr(),U()}function U(){var t;switch(O=R[0]-E[0],T=R[1]-E[1],w){case ur:case dr:y&&(O=Math.max(S-i,Math.min(j-l,O)),n=i+O,u=l+O),x&&(T=Math.max(D-o,Math.min(N-f,T)),s=o+T,h=f+T);break;case fr:y<0?(O=Math.max(S-i,Math.min(j-i,O)),n=i+O,u=l):y>0&&(O=Math.max(S-l,Math.min(j-l,O)),n=i,u=l+O),x<0?(T=Math.max(D-o,Math.min(N-o,T)),s=o+T,h=f):x>0&&(T=Math.max(D-f,Math.min(N-f,T)),s=o,h=f+T);break;case hr:y&&(n=Math.max(S,Math.min(j,i-O*y)),u=Math.max(S,Math.min(j,l+O*y))),x&&(s=Math.max(D,Math.min(N,o-T*x)),h=Math.max(D,Math.min(N,f+T*x)))}u<n&&(y*=-1,t=i,i=l,l=t,t=n,n=u,u=t,_ in wr&&B.attr("cursor",_r[_=wr[_]])),h<s&&(x*=-1,t=o,o=f,f=t,t=s,s=h,h=t,_ in yr&&B.attr("cursor",_r[_=yr[_]])),k.selection&&(C=k.selection),p&&(n=C[0][0],u=C[1][0]),g&&(s=C[0][1],h=C[1][1]),C[0][0]===n&&C[0][1]===s&&C[1][0]===u&&C[1][1]===h||(k.selection=[[n,s],[u,h]],c.call(b),A.brush())}function V(){if(lr(),Ft.touches){if(Ft.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500)}else pe(Ft.view,m),P.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);var t;M.attr("pointer-events","all"),B.attr("cursor",_r.overlay),k.selection&&(C=k.selection),((t=C)[0][0]===t[1][0]||t[0][1]===t[1][1])&&(k.selection=null,c.call(b)),A.end()}}function h(){d(this,arguments).moved()}function m(){d(this,arguments).ended()}function p(){var e=this.__brush||{selection:null};return e.extent=pr(i.apply(this,arguments)),e.dim=t,e}return l.move=function(e,i){e.selection?e.on("start.brush",function(){d(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){d(this,arguments).end()}).tween("brush",function(){var e=this,a=e.__brush,n=d(e,arguments),r=a.selection,o=t.input("function"==typeof i?i.apply(this,arguments):i,a.extent),s=Qi(r,o);function l(t){a.selection=1===t&&null===o?null:s(t),c.call(e),n.brush()}return null!==r&&null!==o?l:l(1)}):e.each(function(){var e=arguments,a=this.__brush,n=t.input("function"==typeof i?i.apply(this,e):i,a.extent),r=d(this,e).beforestart();rn(this),a.selection=null===n?null:n,c.call(this),r.start().brush().end()})},l.clear=function(t){l.move(t,null)},u.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting?(this.starting=!1,this.emit("start")):this.emit("brush"),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(e){Yt(new sr(l,e,t.output(this.state.selection)),o.apply,o,[e,this.that,this.args])}},l.extent=function(t){return arguments.length?(i="function"==typeof t?t:or(pr(t)),l):i},l.filter=function(t){return arguments.length?(a="function"==typeof t?t:or(!!t),l):a},l.handleSize=function(t){return arguments.length?(s=+t,l):s},l.keyModifiers=function(t){return arguments.length?(r=!!t,l):r},l.on=function(){var t=o.on.apply(o,arguments);return t===o?l:t},l}var Er=Math.cos,Rr=Math.sin,Ar=Math.PI,Mr=Ar/2,Br=2*Ar,Pr=Math.max;var qr=function(){var t=0,e=null,i=null,a=null;function n(n){var r,o,s,l,c,d,u=n.length,f=[],h=x(u),m=[],p=[],g=p.groups=new Array(u),v=new Array(u*u);for(r=0,c=-1;++c<u;){for(o=0,d=-1;++d<u;)o+=n[c][d];f.push(o),m.push(x(u)),r+=o}for(e&&h.sort(function(t,i){return e(f[t],f[i])}),i&&m.forEach(function(t,e){t.sort(function(t,a){return i(n[e][t],n[e][a])})}),l=(r=Pr(0,Br-t*u)/r)?t:Br/u,o=0,c=-1;++c<u;){for(s=o,d=-1;++d<u;){var b=h[c],_=m[b][d],w=n[b][_],y=o,k=o+=w*r;v[_*u+b]={index:b,subindex:_,startAngle:y,endAngle:k,value:w}}g[b]={index:b,startAngle:s,endAngle:o,value:f[b]},o+=l}for(c=-1;++c<u;)for(d=c-1;++d<u;){var $=v[d*u+c],C=v[c*u+d];($.value||C.value)&&p.push($.value<C.value?{source:C,target:$}:{source:$,target:C})}return a?p.sort(a):p}return n.padAngle=function(e){return arguments.length?(t=Pr(0,e),n):t},n.sortGroups=function(t){return arguments.length?(e=t,n):e},n.sortSubgroups=function(t){return arguments.length?(i=t,n):i},n.sortChords=function(t){return arguments.length?(null==t?a=null:(e=t,a=function(t,i){return e(t.source.value+t.target.value,i.source.value+i.target.value)})._=t,n):a&&a._;var e},n},Ur=Array.prototype.slice,Vr=function(t){return function(){return t}},Gr=Math.PI,Fr=2*Gr,Hr=Fr-1e-6;function zr(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Wr(){return new zr}zr.prototype=Wr.prototype={constructor:zr,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,a){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+a)},bezierCurveTo:function(t,e,i,a,n,r){this._+="C"+ +t+","+ +e+","+ +i+","+ +a+","+(this._x1=+n)+","+(this._y1=+r)},arcTo:function(t,e,i,a,n){t=+t,e=+e,i=+i,a=+a,n=+n;var r=this._x1,o=this._y1,s=i-t,l=a-e,c=r-t,d=o-e,u=c*c+d*d;if(n<0)throw new Error("negative radius: "+n);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>1e-6)if(Math.abs(d*s-l*c)>1e-6&&n){var f=i-r,h=a-o,m=s*s+l*l,p=f*f+h*h,g=Math.sqrt(m),v=Math.sqrt(u),b=n*Math.tan((Gr-Math.acos((m+u-p)/(2*g*v)))/2),_=b/v,w=b/g;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*c)+","+(e+_*d)),this._+="A"+n+","+n+",0,0,"+ +(d*f>c*h)+","+(this._x1=t+w*s)+","+(this._y1=e+w*l)}else this._+="L"+(this._x1=t)+","+(this._y1=e);else;},arc:function(t,e,i,a,n,r){t=+t,e=+e,r=!!r;var o=(i=+i)*Math.cos(a),s=i*Math.sin(a),l=t+o,c=e+s,d=1^r,u=r?a-n:n-a;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+l+","+c:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+l+","+c),i&&(u<0&&(u=u%Fr+Fr),u>Hr?this._+="A"+i+","+i+",0,1,"+d+","+(t-o)+","+(e-s)+"A"+i+","+i+",0,1,"+d+","+(this._x1=l)+","+(this._y1=c):u>1e-6&&(this._+="A"+i+","+i+",0,"+ +(u>=Gr)+","+d+","+(this._x1=t+i*Math.cos(n))+","+(this._y1=e+i*Math.sin(n))))},rect:function(t,e,i,a){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +a+"h"+-i+"Z"},toString:function(){return this._}};var Jr=Wr;function Yr(t){return t.source}function Xr(t){return t.target}function Zr(t){return t.radius}function Kr(t){return t.startAngle}function Qr(t){return t.endAngle}var to=function(){var t=Yr,e=Xr,i=Zr,a=Kr,n=Qr,r=null;function o(){var o,s=Ur.call(arguments),l=t.apply(this,s),c=e.apply(this,s),d=+i.apply(this,(s[0]=l,s)),u=a.apply(this,s)-Mr,f=n.apply(this,s)-Mr,h=d*Er(u),m=d*Rr(u),p=+i.apply(this,(s[0]=c,s)),g=a.apply(this,s)-Mr,v=n.apply(this,s)-Mr;if(r||(r=o=Jr()),r.moveTo(h,m),r.arc(0,0,d,u,f),u===g&&f===v||(r.quadraticCurveTo(0,0,p*Er(g),p*Rr(g)),r.arc(0,0,p,g,v)),r.quadraticCurveTo(0,0,h,m),r.closePath(),o)return r=null,o+""||null}return o.radius=function(t){return arguments.length?(i="function"==typeof t?t:Vr(+t),o):i},o.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:Vr(+t),o):a},o.endAngle=function(t){return arguments.length?(n="function"==typeof t?t:Vr(+t),o):n},o.source=function(e){return arguments.length?(t=e,o):t},o.target=function(t){return arguments.length?(e=t,o):e},o.context=function(t){return arguments.length?(r=null==t?null:t,o):r},o};function eo(){}function io(t,e){var i=new eo;if(t instanceof eo)t.each(function(t,e){i.set(e,t)});else if(Array.isArray(t)){var a,n=-1,r=t.length;if(null==e)for(;++n<r;)i.set(n,t[n]);else for(;++n<r;)i.set(e(a=t[n],n,t),a)}else if(t)for(var o in t)i.set(o,t[o]);return i}eo.prototype=io.prototype={constructor:eo,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var ao=io,no=function(){var t,e,i,a=[],n=[];function r(i,n,o,s){if(n>=a.length)return null!=t&&i.sort(t),null!=e?e(i):i;for(var l,c,d,u=-1,f=i.length,h=a[n++],m=ao(),p=o();++u<f;)(d=m.get(l=h(c=i[u])+""))?d.push(c):m.set(l,[c]);return m.each(function(t,e){s(p,e,r(t,n,o,s))}),p}return i={object:function(t){return r(t,0,ro,oo)},map:function(t){return r(t,0,so,lo)},entries:function(t){return function t(i,r){if(++r>a.length)return i;var o,s=n[r-1];return null!=e&&r>=a.length?o=i.entries():(o=[],i.each(function(e,i){o.push({key:i,values:t(e,r)})})),null!=s?o.sort(function(t,e){return s(t.key,e.key)}):o}(r(t,0,so,lo),0)},key:function(t){return a.push(t),i},sortKeys:function(t){return n[a.length-1]=t,i},sortValues:function(e){return t=e,i},rollup:function(t){return e=t,i}}};function ro(){return{}}function oo(t,e,i){t[e]=i}function so(){return ao()}function lo(t,e,i){t.set(e,i)}function co(){}var uo=ao.prototype;function fo(t,e){var i=new co;if(t instanceof co)t.each(function(t){i.add(t)});else if(t){var a=-1,n=t.length;if(null==e)for(;++a<n;)i.add(t[a]);else for(;++a<n;)i.add(e(t[a],a,t))}return i}co.prototype=fo.prototype={constructor:co,has:uo.has,add:function(t){return this["$"+(t+="")]=t,this},remove:uo.remove,clear:uo.clear,values:uo.keys,size:uo.size,empty:uo.empty,each:uo.each};var ho=fo,mo=function(t){var e=[];for(var i in t)e.push(i);return e},po=function(t){var e=[];for(var i in t)e.push(t[i]);return e},go=function(t){var e=[];for(var i in t)e.push({key:i,value:t[i]});return e},vo=Array.prototype.slice,bo=function(t,e){return t-e},_o=function(t){for(var e=0,i=t.length,a=t[i-1][1]*t[0][0]-t[i-1][0]*t[0][1];++e<i;)a+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return a},wo=function(t){return function(){return t}},yo=function(t,e){for(var i,a=-1,n=e.length;++a<n;)if(i=xo(t,e[a]))return i;return 0};function xo(t,e){for(var i,a,n,r,o,s,l,c,d,u,f=e[0],h=e[1],m=-1,p=0,g=t.length,v=g-1;p<g;v=p++){var b=t[p],_=b[0],w=b[1],y=t[v],x=y[0],k=y[1];if(u=void 0,r=l=b,s=d=e,((o=c=y)[0]-r[0])*(s[1]-r[1])==(s[0]-r[0])*(o[1]-r[1])&&(i=l[u=+(l[0]===c[0])],a=d[u],n=c[u],i<=a&&a<=n||n<=a&&a<=i))return 0;w>h!=k>h&&f<(x-_)*(h-w)/(k-w)+_&&(m=-m)}return m}var ko=function(){},$o=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Co=function(){var t=1,e=1,i=N,a=s;function n(t){var e=i(t);if(Array.isArray(e))e=e.slice().sort(bo);else{var a=g(t),n=a[0],o=a[1];e=j(n,o,e),e=x(Math.floor(n/e)*e,Math.floor(o/e)*e,e)}return e.map(function(e){return r(t,e)})}function r(i,n){var r=[],s=[];return function(i,a,n){var r,s,l,c,d,u,f=new Array,h=new Array;r=s=-1,c=i[0]>=a,$o[c<<1].forEach(m);for(;++r<t-1;)l=c,c=i[r+1]>=a,$o[l|c<<1].forEach(m);$o[c<<0].forEach(m);for(;++s<e-1;){for(r=-1,c=i[s*t+t]>=a,d=i[s*t]>=a,$o[c<<1|d<<2].forEach(m);++r<t-1;)l=c,c=i[s*t+t+r+1]>=a,u=d,d=i[s*t+r+1]>=a,$o[l|c<<1|d<<2|u<<3].forEach(m);$o[c|d<<3].forEach(m)}r=-1,d=i[s*t]>=a,$o[d<<2].forEach(m);for(;++r<t-1;)u=d,d=i[s*t+r+1]>=a,$o[d<<2|u<<3].forEach(m);function m(t){var e,i,a=[t[0][0]+r,t[0][1]+s],l=[t[1][0]+r,t[1][1]+s],c=o(a),d=o(l);(e=h[c])?(i=f[d])?(delete h[e.end],delete f[i.start],e===i?(e.ring.push(l),n(e.ring)):f[e.start]=h[i.end]={start:e.start,end:i.end,ring:e.ring.concat(i.ring)}):(delete h[e.end],e.ring.push(l),h[e.end=d]=e):(e=f[d])?(i=h[c])?(delete f[e.start],delete h[i.end],e===i?(e.ring.push(l),n(e.ring)):f[i.start]=h[e.end]={start:i.start,end:e.end,ring:i.ring.concat(e.ring)}):(delete f[e.start],e.ring.unshift(a),f[e.start=c]=e):f[c]=h[d]={start:c,end:d,ring:[a,l]}}$o[d<<3].forEach(m)}(i,n,function(t){a(t,i,n),_o(t)>0?r.push([t]):s.push(t)}),s.forEach(function(t){for(var e,i=0,a=r.length;i<a;++i)if(-1!==yo((e=r[i])[0],t))return void e.push(t)}),{type:"MultiPolygon",value:n,coordinates:r}}function o(e){return 2*e[0]+e[1]*(t+1)*4}function s(i,a,n){i.forEach(function(i){var r,o=i[0],s=i[1],l=0|o,c=0|s,d=a[c*t+l];o>0&&o<t&&l===o&&(r=a[c*t+l-1],i[0]=o+(n-r)/(d-r)-.5),s>0&&s<e&&c===s&&(r=a[(c-1)*t+l],i[1]=s+(n-r)/(d-r)-.5)})}return n.contour=r,n.size=function(i){if(!arguments.length)return[t,e];var a=Math.ceil(i[0]),r=Math.ceil(i[1]);if(!(a>0&&r>0))throw new Error("invalid size");return t=a,e=r,n},n.thresholds=function(t){return arguments.length?(i="function"==typeof t?t:Array.isArray(t)?wo(vo.call(t)):wo(t),n):i},n.smooth=function(t){return arguments.length?(a=t?s:ko,n):a===s},n};function So(t,e,i){for(var a=t.width,n=t.height,r=1+(i<<1),o=0;o<n;++o)for(var s=0,l=0;s<a+i;++s)s<a&&(l+=t.data[s+o*a]),s>=i&&(s>=r&&(l-=t.data[s-r+o*a]),e.data[s-i+o*a]=l/Math.min(s+1,a-1+r-s,r))}function Do(t,e,i){for(var a=t.width,n=t.height,r=1+(i<<1),o=0;o<a;++o)for(var s=0,l=0;s<n+i;++s)s<n&&(l+=t.data[o+s*a]),s>=i&&(s>=r&&(l-=t.data[o+(s-r)*a]),e.data[o+(s-i)*a]=l/Math.min(s+1,n-1+r-s,r))}function jo(t){return t[0]}function No(t){return t[1]}function Oo(){return 1}var To=function(){var t=jo,e=No,i=Oo,a=960,n=500,r=20,o=2,s=3*r,l=a+2*s>>o,c=n+2*s>>o,d=wo(20);function u(a){var n=new Float32Array(l*c),u=new Float32Array(l*c);a.forEach(function(a,r,d){var u=+t(a,r,d)+s>>o,f=+e(a,r,d)+s>>o,h=+i(a,r,d);u>=0&&u<l&&f>=0&&f<c&&(n[u+f*l]+=h)}),So({width:l,height:c,data:n},{width:l,height:c,data:u},r>>o),Do({width:l,height:c,data:u},{width:l,height:c,data:n},r>>o),So({width:l,height:c,data:n},{width:l,height:c,data:u},r>>o),Do({width:l,height:c,data:u},{width:l,height:c,data:n},r>>o),So({width:l,height:c,data:n},{width:l,height:c,data:u},r>>o),Do({width:l,height:c,data:u},{width:l,height:c,data:n},r>>o);var h=d(n);if(!Array.isArray(h)){var m=E(n);h=j(0,m,h),(h=x(0,Math.floor(m/h)*h,h)).shift()}return Co().thresholds(h).size([l,c])(n).map(f)}function f(t){return t.value*=Math.pow(2,-2*o),t.coordinates.forEach(h),t}function h(t){t.forEach(m)}function m(t){t.forEach(p)}function p(t){t[0]=t[0]*Math.pow(2,o)-s,t[1]=t[1]*Math.pow(2,o)-s}function g(){return l=a+2*(s=3*r)>>o,c=n+2*s>>o,u}return u.x=function(e){return arguments.length?(t="function"==typeof e?e:wo(+e),u):t},u.y=function(t){return arguments.length?(e="function"==typeof t?t:wo(+t),u):e},u.weight=function(t){return arguments.length?(i="function"==typeof t?t:wo(+t),u):i},u.size=function(t){if(!arguments.length)return[a,n];var e=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return a=e,n=i,g()},u.cellSize=function(t){if(!arguments.length)return 1<<o;if(!((t=+t)>=1))throw new Error("invalid cell size");return o=Math.floor(Math.log(t)/Math.LN2),g()},u.thresholds=function(t){return arguments.length?(d="function"==typeof t?t:Array.isArray(t)?wo(vo.call(t)):wo(t),u):d},u.bandwidth=function(t){if(!arguments.length)return Math.sqrt(r*(r+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return r=Math.round((Math.sqrt(4*t*t+1)-1)/2),g()},u},Io={},Lo={},Eo=34,Ro=10,Ao=13;function Mo(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function Bo(t){var e=Object.create(null),i=[];return t.forEach(function(t){for(var a in t)a in e||i.push(e[a]=a)}),i}function Po(t,e){var i=t+"",a=i.length;return a<e?new Array(e-a+1).join(0)+i:i}function qo(t){var e,i=t.getUTCHours(),a=t.getUTCMinutes(),n=t.getUTCSeconds(),r=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Po(-e,6):e>9999?"+"+Po(e,6):Po(e,4))+"-"+Po(t.getUTCMonth()+1,2)+"-"+Po(t.getUTCDate(),2)+(r?"T"+Po(i,2)+":"+Po(a,2)+":"+Po(n,2)+"."+Po(r,3)+"Z":n?"T"+Po(i,2)+":"+Po(a,2)+":"+Po(n,2)+"Z":a||i?"T"+Po(i,2)+":"+Po(a,2)+"Z":"")}var Uo=function(t){var e=new RegExp('["'+t+"\n\r]"),i=t.charCodeAt(0);function a(t,e){var a,n=[],r=t.length,o=0,s=0,l=r<=0,c=!1;function d(){if(l)return Lo;if(c)return c=!1,Io;var e,a,n=o;if(t.charCodeAt(n)===Eo){for(;o++<r&&t.charCodeAt(o)!==Eo||t.charCodeAt(++o)===Eo;);return(e=o)>=r?l=!0:(a=t.charCodeAt(o++))===Ro?c=!0:a===Ao&&(c=!0,t.charCodeAt(o)===Ro&&++o),t.slice(n+1,e-1).replace(/""/g,'"')}for(;o<r;){if((a=t.charCodeAt(e=o++))===Ro)c=!0;else if(a===Ao)c=!0,t.charCodeAt(o)===Ro&&++o;else if(a!==i)continue;return t.slice(n,e)}return l=!0,t.slice(n,r)}for(t.charCodeAt(r-1)===Ro&&--r,t.charCodeAt(r-1)===Ao&&--r;(a=d())!==Lo;){for(var u=[];a!==Io&&a!==Lo;)u.push(a),a=d();e&&null==(u=e(u,s++))||n.push(u)}return n}function n(e,i){return e.map(function(e){return i.map(function(t){return o(e[t])}).join(t)})}function r(e){return e.map(o).join(t)}function o(t){return null==t?"":t instanceof Date?qo(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var i,n,r=a(t,function(t,a){if(i)return i(t,a-1);var r,o,s;n=t,i=e?(o=e,s=Mo(r=t),function(t,e){return o(s(t),e,r)}):Mo(t)});return r.columns=n||[],r},parseRows:a,format:function(e,i){return null==i&&(i=Bo(e)),[i.map(o).join(t)].concat(n(e,i)).join("\n")},formatBody:function(t,e){return null==e&&(e=Bo(t)),n(t,e).join("\n")},formatRows:function(t){return t.map(r).join("\n")}}},Vo=Uo(","),Go=Vo.parse,Fo=Vo.parseRows,Ho=Vo.format,zo=Vo.formatBody,Wo=Vo.formatRows,Jo=Uo("\t"),Yo=Jo.parse,Xo=Jo.parseRows,Zo=Jo.format,Ko=Jo.formatBody,Qo=Jo.formatRows;function ts(t){for(var e in t){var i,a=t[e].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(i=+a)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(a))continue;a=new Date(a)}else a=i;else a=null;t[e]=a}return t}function es(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}var is=function(t,e){return fetch(t,e).then(es)};function as(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}var ns=function(t,e){return fetch(t,e).then(as)};function rs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}var os=function(t,e){return fetch(t,e).then(rs)};function ss(t){return function(e,i,a){return 2===arguments.length&&"function"==typeof i&&(a=i,i=void 0),os(e,i).then(function(e){return t(e,a)})}}function ls(t,e,i,a){3===arguments.length&&"function"==typeof i&&(a=i,i=void 0);var n=Uo(t);return os(e,i).then(function(t){return n.parse(t,a)})}var cs=ss(Go),ds=ss(Yo),us=function(t,e){return new Promise(function(i,a){var n=new Image;for(var r in e)n[r]=e[r];n.onerror=a,n.onload=function(){i(n)},n.src=t})};function fs(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}var hs=function(t,e){return fetch(t,e).then(fs)};function ms(t){return function(e,i){return os(e,i).then(function(e){return(new DOMParser).parseFromString(e,t)})}}var ps=ms("application/xml"),gs=ms("text/html"),vs=ms("image/svg+xml"),bs=function(t,e){var i;function a(){var a,n,r=i.length,o=0,s=0;for(a=0;a<r;++a)o+=(n=i[a]).x,s+=n.y;for(o=o/r-t,s=s/r-e,a=0;a<r;++a)(n=i[a]).x-=o,n.y-=s}return null==t&&(t=0),null==e&&(e=0),a.initialize=function(t){i=t},a.x=function(e){return arguments.length?(t=+e,a):t},a.y=function(t){return arguments.length?(e=+t,a):e},a},_s=function(t){return function(){return t}},ws=function(){return 1e-6*(Math.random()-.5)};function ys(t,e,i,a){if(isNaN(e)||isNaN(i))return t;var n,r,o,s,l,c,d,u,f,h=t._root,m={data:a},p=t._x0,g=t._y0,v=t._x1,b=t._y1;if(!h)return t._root=m,t;for(;h.length;)if((c=e>=(r=(p+v)/2))?p=r:v=r,(d=i>=(o=(g+b)/2))?g=o:b=o,n=h,!(h=h[u=d<<1|c]))return n[u]=m,t;if(s=+t._x.call(null,h.data),l=+t._y.call(null,h.data),e===s&&i===l)return m.next=h,n?n[u]=m:t._root=m,t;do{n=n?n[u]=new Array(4):t._root=new Array(4),(c=e>=(r=(p+v)/2))?p=r:v=r,(d=i>=(o=(g+b)/2))?g=o:b=o}while((u=d<<1|c)==(f=(l>=o)<<1|s>=r));return n[f]=h,n[u]=m,t}var xs=function(t,e,i,a,n){this.node=t,this.x0=e,this.y0=i,this.x1=a,this.y1=n};function ks(t){return t[0]}function $s(t){return t[1]}function Cs(t,e,i){var a=new Ss(null==e?ks:e,null==i?$s:i,NaN,NaN,NaN,NaN);return null==t?a:a.addAll(t)}function Ss(t,e,i,a,n,r){this._x=t,this._y=e,this._x0=i,this._y0=a,this._x1=n,this._y1=r,this._root=void 0}function Ds(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var js=Cs.prototype=Ss.prototype;function Ns(t){return t.x+t.vx}function Os(t){return t.y+t.vy}js.copy=function(){var t,e,i=new Ss(this._x,this._y,this._x0,this._y0,this._x1,this._y1),a=this._root;if(!a)return i;if(!a.length)return i._root=Ds(a),i;for(t=[{source:a,target:i._root=new Array(4)}];a=t.pop();)for(var n=0;n<4;++n)(e=a.source[n])&&(e.length?t.push({source:e,target:a.target[n]=new Array(4)}):a.target[n]=Ds(e));return i},js.add=function(t){var e=+this._x.call(null,t),i=+this._y.call(null,t);return ys(this.cover(e,i),e,i,t)},js.addAll=function(t){var e,i,a,n,r=t.length,o=new Array(r),s=new Array(r),l=1/0,c=1/0,d=-1/0,u=-1/0;for(i=0;i<r;++i)isNaN(a=+this._x.call(null,e=t[i]))||isNaN(n=+this._y.call(null,e))||(o[i]=a,s[i]=n,a<l&&(l=a),a>d&&(d=a),n<c&&(c=n),n>u&&(u=n));if(l>d||c>u)return this;for(this.cover(l,c).cover(d,u),i=0;i<r;++i)ys(this,o[i],s[i],t[i]);return this},js.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,a=this._y0,n=this._x1,r=this._y1;if(isNaN(i))n=(i=Math.floor(t))+1,r=(a=Math.floor(e))+1;else{for(var o,s,l=n-i,c=this._root;i>t||t>=n||a>e||e>=r;)switch(s=(e<a)<<1|t<i,(o=new Array(4))[s]=c,c=o,l*=2,s){case 0:n=i+l,r=a+l;break;case 1:i=n-l,r=a+l;break;case 2:n=i+l,a=r-l;break;case 3:i=n-l,a=r-l}this._root&&this._root.length&&(this._root=c)}return this._x0=i,this._y0=a,this._x1=n,this._y1=r,this},js.data=function(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t},js.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},js.find=function(t,e,i){var a,n,r,o,s,l,c,d=this._x0,u=this._y0,f=this._x1,h=this._y1,m=[],p=this._root;for(p&&m.push(new xs(p,d,u,f,h)),null==i?i=1/0:(d=t-i,u=e-i,f=t+i,h=e+i,i*=i);l=m.pop();)if(!(!(p=l.node)||(n=l.x0)>f||(r=l.y0)>h||(o=l.x1)<d||(s=l.y1)<u))if(p.length){var g=(n+o)/2,v=(r+s)/2;m.push(new xs(p[3],g,v,o,s),new xs(p[2],n,v,g,s),new xs(p[1],g,r,o,v),new xs(p[0],n,r,g,v)),(c=(e>=v)<<1|t>=g)&&(l=m[m.length-1],m[m.length-1]=m[m.length-1-c],m[m.length-1-c]=l)}else{var b=t-+this._x.call(null,p.data),_=e-+this._y.call(null,p.data),w=b*b+_*_;if(w<i){var y=Math.sqrt(i=w);d=t-y,u=e-y,f=t+y,h=e+y,a=p.data}}return a},js.remove=function(t){if(isNaN(r=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,i,a,n,r,o,s,l,c,d,u,f,h=this._root,m=this._x0,p=this._y0,g=this._x1,v=this._y1;if(!h)return this;if(h.length)for(;;){if((c=r>=(s=(m+g)/2))?m=s:g=s,(d=o>=(l=(p+v)/2))?p=l:v=l,e=h,!(h=h[u=d<<1|c]))return this;if(!h.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(i=e,f=u)}for(;h.data!==t;)if(a=h,!(h=h.next))return this;return(n=h.next)&&delete h.next,a?(n?a.next=n:delete a.next,this):e?(n?e[u]=n:delete e[u],(h=e[0]||e[1]||e[2]||e[3])&&h===(e[3]||e[2]||e[1]||e[0])&&!h.length&&(i?i[f]=h:this._root=h),this):(this._root=n,this)},js.removeAll=function(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this},js.root=function(){return this._root},js.size=function(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t},js.visit=function(t){var e,i,a,n,r,o,s=[],l=this._root;for(l&&s.push(new xs(l,this._x0,this._y0,this._x1,this._y1));e=s.pop();)if(!t(l=e.node,a=e.x0,n=e.y0,r=e.x1,o=e.y1)&&l.length){var c=(a+r)/2,d=(n+o)/2;(i=l[3])&&s.push(new xs(i,c,d,r,o)),(i=l[2])&&s.push(new xs(i,a,d,c,o)),(i=l[1])&&s.push(new xs(i,c,n,r,d)),(i=l[0])&&s.push(new xs(i,a,n,c,d))}return this},js.visitAfter=function(t){var e,i=[],a=[];for(this._root&&i.push(new xs(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var n=e.node;if(n.length){var r,o=e.x0,s=e.y0,l=e.x1,c=e.y1,d=(o+l)/2,u=(s+c)/2;(r=n[0])&&i.push(new xs(r,o,s,d,u)),(r=n[1])&&i.push(new xs(r,d,s,l,u)),(r=n[2])&&i.push(new xs(r,o,u,d,c)),(r=n[3])&&i.push(new xs(r,d,u,l,c))}a.push(e)}for(;e=a.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},js.x=function(t){return arguments.length?(this._x=t,this):this._x},js.y=function(t){return arguments.length?(this._y=t,this):this._y};var Ts=function(t){var e,i,a=1,n=1;function r(){for(var t,r,s,l,c,d,u,f=e.length,h=0;h<n;++h)for(r=Cs(e,Ns,Os).visitAfter(o),t=0;t<f;++t)s=e[t],d=i[s.index],u=d*d,l=s.x+s.vx,c=s.y+s.vy,r.visit(m);function m(t,e,i,n,r){var o=t.data,f=t.r,h=d+f;if(!o)return e>l+h||n<l-h||i>c+h||r<c-h;if(o.index>s.index){var m=l-o.x-o.vx,p=c-o.y-o.vy,g=m*m+p*p;g<h*h&&(0===m&&(g+=(m=ws())*m),0===p&&(g+=(p=ws())*p),g=(h-(g=Math.sqrt(g)))/g*a,s.vx+=(m*=g)*(h=(f*=f)/(u+f)),s.vy+=(p*=g)*h,o.vx-=m*(h=1-h),o.vy-=p*h)}}}function o(t){if(t.data)return t.r=i[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function s(){if(e){var a,n,r=e.length;for(i=new Array(r),a=0;a<r;++a)n=e[a],i[n.index]=+t(n,a,e)}}return"function"!=typeof t&&(t=_s(null==t?1:+t)),r.initialize=function(t){e=t,s()},r.iterations=function(t){return arguments.length?(n=+t,r):n},r.strength=function(t){return arguments.length?(a=+t,r):a},r.radius=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),s(),r):t},r};function Is(t){return t.index}function Ls(t,e){var i=t.get(e);if(!i)throw new Error("missing: "+e);return i}var Es=function(t){var e,i,a,n,r,o=Is,s=function(t){return 1/Math.min(n[t.source.index],n[t.target.index])},l=_s(30),c=1;function d(a){for(var n=0,o=t.length;n<c;++n)for(var s,l,d,u,f,h,m,p=0;p<o;++p)l=(s=t[p]).source,u=(d=s.target).x+d.vx-l.x-l.vx||ws(),f=d.y+d.vy-l.y-l.vy||ws(),u*=h=((h=Math.sqrt(u*u+f*f))-i[p])/h*a*e[p],f*=h,d.vx-=u*(m=r[p]),d.vy-=f*m,l.vx+=u*(m=1-m),l.vy+=f*m}function u(){if(a){var s,l,c=a.length,d=t.length,u=ao(a,o);for(s=0,n=new Array(c);s<d;++s)(l=t[s]).index=s,"object"!=typeof l.source&&(l.source=Ls(u,l.source)),"object"!=typeof l.target&&(l.target=Ls(u,l.target)),n[l.source.index]=(n[l.source.index]||0)+1,n[l.target.index]=(n[l.target.index]||0)+1;for(s=0,r=new Array(d);s<d;++s)l=t[s],r[s]=n[l.source.index]/(n[l.source.index]+n[l.target.index]);e=new Array(d),f(),i=new Array(d),h()}}function f(){if(a)for(var i=0,n=t.length;i<n;++i)e[i]=+s(t[i],i,t)}function h(){if(a)for(var e=0,n=t.length;e<n;++e)i[e]=+l(t[e],e,t)}return null==t&&(t=[]),d.initialize=function(t){a=t,u()},d.links=function(e){return arguments.length?(t=e,u(),d):t},d.id=function(t){return arguments.length?(o=t,d):o},d.iterations=function(t){return arguments.length?(c=+t,d):c},d.strength=function(t){return arguments.length?(s="function"==typeof t?t:_s(+t),f(),d):s},d.distance=function(t){return arguments.length?(l="function"==typeof t?t:_s(+t),h(),d):l},d};function Rs(t){return t.x}function As(t){return t.y}var Ms=10,Bs=Math.PI*(3-Math.sqrt(5)),Ps=function(t){var e,i=1,a=.001,n=1-Math.pow(a,1/300),r=0,o=.6,s=ao(),l=Ba(d),c=ft("tick","end");function d(){u(),c.call("tick",e),i<a&&(l.stop(),c.call("end",e))}function u(a){var l,c,d=t.length;void 0===a&&(a=1);for(var u=0;u<a;++u)for(i+=(r-i)*n,s.each(function(t){t(i)}),l=0;l<d;++l)null==(c=t[l]).fx?c.x+=c.vx*=o:(c.x=c.fx,c.vx=0),null==c.fy?c.y+=c.vy*=o:(c.y=c.fy,c.vy=0);return e}function f(){for(var e,i=0,a=t.length;i<a;++i){if((e=t[i]).index=i,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var n=Ms*Math.sqrt(i),r=i*Bs;e.x=n*Math.cos(r),e.y=n*Math.sin(r)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function h(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:u,restart:function(){return l.restart(d),e},stop:function(){return l.stop(),e},nodes:function(i){return arguments.length?(t=i,f(),s.each(h),e):t},alpha:function(t){return arguments.length?(i=+t,e):i},alphaMin:function(t){return arguments.length?(a=+t,e):a},alphaDecay:function(t){return arguments.length?(n=+t,e):+n},alphaTarget:function(t){return arguments.length?(r=+t,e):r},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,i){return arguments.length>1?(null==i?s.remove(t):s.set(t,h(i)),e):s.get(t)},find:function(e,i,a){var n,r,o,s,l,c=0,d=t.length;for(null==a?a=1/0:a*=a,c=0;c<d;++c)(o=(n=e-(s=t[c]).x)*n+(r=i-s.y)*r)<a&&(l=s,a=o);return l},on:function(t,i){return arguments.length>1?(c.on(t,i),e):c.on(t)}}},qs=function(){var t,e,i,a,n=_s(-30),r=1,o=1/0,s=.81;function l(a){var n,r=t.length,o=Cs(t,Rs,As).visitAfter(d);for(i=a,n=0;n<r;++n)e=t[n],o.visit(u)}function c(){if(t){var e,i,r=t.length;for(a=new Array(r),e=0;e<r;++e)i=t[e],a[i.index]=+n(i,e,t)}}function d(t){var e,i,n,r,o,s=0,l=0;if(t.length){for(n=r=o=0;o<4;++o)(e=t[o])&&(i=Math.abs(e.value))&&(s+=e.value,l+=i,n+=i*e.x,r+=i*e.y);t.x=n/l,t.y=r/l}else{(e=t).x=e.data.x,e.y=e.data.y;do{s+=a[e.data.index]}while(e=e.next)}t.value=s}function u(t,n,l,c){if(!t.value)return!0;var d=t.x-e.x,u=t.y-e.y,f=c-n,h=d*d+u*u;if(f*f/s<h)return h<o&&(0===d&&(h+=(d=ws())*d),0===u&&(h+=(u=ws())*u),h<r&&(h=Math.sqrt(r*h)),e.vx+=d*t.value*i/h,e.vy+=u*t.value*i/h),!0;if(!(t.length||h>=o)){(t.data!==e||t.next)&&(0===d&&(h+=(d=ws())*d),0===u&&(h+=(u=ws())*u),h<r&&(h=Math.sqrt(r*h)));do{t.data!==e&&(f=a[t.data.index]*i/h,e.vx+=d*f,e.vy+=u*f)}while(t=t.next)}}return l.initialize=function(e){t=e,c()},l.strength=function(t){return arguments.length?(n="function"==typeof t?t:_s(+t),c(),l):n},l.distanceMin=function(t){return arguments.length?(r=t*t,l):Math.sqrt(r)},l.distanceMax=function(t){return arguments.length?(o=t*t,l):Math.sqrt(o)},l.theta=function(t){return arguments.length?(s=t*t,l):Math.sqrt(s)},l},Us=function(t,e,i){var a,n,r,o=_s(.1);function s(t){for(var o=0,s=a.length;o<s;++o){var l=a[o],c=l.x-e||1e-6,d=l.y-i||1e-6,u=Math.sqrt(c*c+d*d),f=(r[o]-u)*n[o]*t/u;l.vx+=c*f,l.vy+=d*f}}function l(){if(a){var e,i=a.length;for(n=new Array(i),r=new Array(i),e=0;e<i;++e)r[e]=+t(a[e],e,a),n[e]=isNaN(r[e])?0:+o(a[e],e,a)}}return"function"!=typeof t&&(t=_s(+t)),null==e&&(e=0),null==i&&(i=0),s.initialize=function(t){a=t,l()},s.strength=function(t){return arguments.length?(o="function"==typeof t?t:_s(+t),l(),s):o},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),l(),s):t},s.x=function(t){return arguments.length?(e=+t,s):e},s.y=function(t){return arguments.length?(i=+t,s):i},s},Vs=function(t){var e,i,a,n=_s(.1);function r(t){for(var n,r=0,o=e.length;r<o;++r)(n=e[r]).vx+=(a[r]-n.x)*i[r]*t}function o(){if(e){var r,o=e.length;for(i=new Array(o),a=new Array(o),r=0;r<o;++r)i[r]=isNaN(a[r]=+t(e[r],r,e))?0:+n(e[r],r,e)}}return"function"!=typeof t&&(t=_s(null==t?0:+t)),r.initialize=function(t){e=t,o()},r.strength=function(t){return arguments.length?(n="function"==typeof t?t:_s(+t),o(),r):n},r.x=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),o(),r):t},r},Gs=function(t){var e,i,a,n=_s(.1);function r(t){for(var n,r=0,o=e.length;r<o;++r)(n=e[r]).vy+=(a[r]-n.y)*i[r]*t}function o(){if(e){var r,o=e.length;for(i=new Array(o),a=new Array(o),r=0;r<o;++r)i[r]=isNaN(a[r]=+t(e[r],r,e))?0:+n(e[r],r,e)}}return"function"!=typeof t&&(t=_s(null==t?0:+t)),r.initialize=function(t){e=t,o()},r.strength=function(t){return arguments.length?(n="function"==typeof t?t:_s(+t),o(),r):n},r.y=function(e){return arguments.length?(t="function"==typeof e?e:_s(+e),o(),r):t},r},Fs=function(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,a=t.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+t.slice(i+1)]},Hs=function(t){return(t=Fs(Math.abs(t)))?t[1]:NaN},zs=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ws(t){if(!(e=zs.exec(t)))throw new Error("invalid format: "+t);var e;return new Js({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function Js(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}Ws.prototype=Js.prototype,Js.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ys,Xs,Zs,Ks,Qs=function(t){t:for(var e,i=t.length,a=1,n=-1;a<i;++a)switch(t[a]){case".":n=e=a;break;case"0":0===n&&(n=a),e=a;break;default:if(n>0){if(!+t[a])break t;n=0}}return n>0?t.slice(0,n)+t.slice(e+1):t},tl=function(t,e){var i=Fs(t,e);if(!i)return t+"";var a=i[0],n=i[1];return n<0?"0."+new Array(-n).join("0")+a:a.length>n+1?a.slice(0,n+1)+"."+a.slice(n+1):a+new Array(n-a.length+2).join("0")},el={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return tl(100*t,e)},r:tl,s:function(t,e){var i=Fs(t,e);if(!i)return t+"";var a=i[0],n=i[1],r=n-(Ys=3*Math.max(-8,Math.min(8,Math.floor(n/3))))+1,o=a.length;return r===o?a:r>o?a+new Array(r-o+1).join("0"):r>0?a.slice(0,r)+"."+a.slice(r):"0."+new Array(1-r).join("0")+Fs(t,Math.max(0,e+r-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},il=function(t){return t},al=Array.prototype.map,nl=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],rl=function(t){var e,i,a,n=void 0===t.grouping||void 0===t.thousands?il:(i=al.call(t.grouping,Number),a=t.thousands+"",function(t,e){for(var n=t.length,r=[],o=0,s=i[0],l=0;n>0&&s>0&&(l+s+1>e&&(s=Math.max(1,e-l)),r.push(t.substring(n-=s,n+s)),!((l+=s+1)>e));)s=i[o=(o+1)%i.length];return r.reverse().join(a)}),r=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",s=void 0===t.decimal?".":t.decimal+"",l=void 0===t.numerals?il:(e=al.call(t.numerals,String),function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}),c=void 0===t.percent?"%":t.percent+"",d=void 0===t.minus?"-":t.minus+"",u=void 0===t.nan?"NaN":t.nan+"";function f(t){var e=(t=Ws(t)).fill,i=t.align,a=t.sign,f=t.symbol,h=t.zero,m=t.width,p=t.comma,g=t.precision,v=t.trim,b=t.type;"n"===b?(p=!0,b="g"):el[b]||(void 0===g&&(g=12),v=!0,b="g"),(h||"0"===e&&"="===i)&&(h=!0,e="0",i="=");var _="$"===f?r:"#"===f&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",w="$"===f?o:/[%p]/.test(b)?c:"",y=el[b],x=/[defgprs%]/.test(b);function k(t){var r,o,c,f=_,k=w;if("c"===b)k=y(t)+k,t="";else{var $=(t=+t)<0;if(t=isNaN(t)?u:y(Math.abs(t),g),v&&(t=Qs(t)),$&&0==+t&&($=!1),f=($?"("===a?a:d:"-"===a||"("===a?"":a)+f,k=("s"===b?nl[8+Ys/3]:"")+k+($&&"("===a?")":""),x)for(r=-1,o=t.length;++r<o;)if(48>(c=t.charCodeAt(r))||c>57){k=(46===c?s+t.slice(r+1):t.slice(r))+k,t=t.slice(0,r);break}}p&&!h&&(t=n(t,1/0));var C=f.length+t.length+k.length,S=C<m?new Array(m-C+1).join(e):"";switch(p&&h&&(t=n(S+t,S.length?m-k.length:1/0),S=""),i){case"<":t=f+t+k+S;break;case"=":t=f+S+t+k;break;case"^":t=S.slice(0,C=S.length>>1)+f+t+k+S.slice(C);break;default:t=S+f+t+k}return l(t)}return g=void 0===g?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),k.toString=function(){return t+""},k}return{format:f,formatPrefix:function(t,e){var i=f(((t=Ws(t)).type="f",t)),a=3*Math.max(-8,Math.min(8,Math.floor(Hs(e)/3))),n=Math.pow(10,-a),r=nl[8+a/3];return function(t){return i(n*t)+r}}}};function ol(t){return Xs=rl(t),Zs=Xs.format,Ks=Xs.formatPrefix,Xs}ol({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});var sl=function(t){return Math.max(0,-Hs(Math.abs(t)))},ll=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Hs(e)/3)))-Hs(Math.abs(t)))},cl=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Hs(e)-Hs(t))+1},dl=function(){return new ul};function ul(){this.reset()}ul.prototype={constructor:ul,reset:function(){this.s=this.t=0},add:function(t){hl(fl,t,this.t),hl(this,fl.s,this.s),this.s?this.t+=fl.t:this.s=fl.t},valueOf:function(){return this.s}};var fl=new ul;function hl(t,e,i){var a=t.s=e+i,n=a-e,r=a-n;t.t=e-r+(i-n)}var ml=1e-6,pl=1e-12,gl=Math.PI,vl=gl/2,bl=gl/4,_l=2*gl,wl=180/gl,yl=gl/180,xl=Math.abs,kl=Math.atan,$l=Math.atan2,Cl=Math.cos,Sl=Math.ceil,Dl=Math.exp,jl=(Math.floor,Math.log),Nl=Math.pow,Ol=Math.sin,Tl=Math.sign||function(t){return t>0?1:t<0?-1:0},Il=Math.sqrt,Ll=Math.tan;function El(t){return t>1?0:t<-1?gl:Math.acos(t)}function Rl(t){return t>1?vl:t<-1?-vl:Math.asin(t)}function Al(t){return(t=Ol(t/2))*t}function Ml(){}function Bl(t,e){t&&ql.hasOwnProperty(t.type)&&ql[t.type](t,e)}var Pl={Feature:function(t,e){Bl(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,a=-1,n=i.length;++a<n;)Bl(i[a].geometry,e)}},ql={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,a=-1,n=i.length;++a<n;)t=i[a],e.point(t[0],t[1],t[2])},LineString:function(t,e){Ul(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,a=-1,n=i.length;++a<n;)Ul(i[a],e,0)},Polygon:function(t,e){Vl(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,a=-1,n=i.length;++a<n;)Vl(i[a],e)},GeometryCollection:function(t,e){for(var i=t.geometries,a=-1,n=i.length;++a<n;)Bl(i[a],e)}};function Ul(t,e,i){var a,n=-1,r=t.length-i;for(e.lineStart();++n<r;)a=t[n],e.point(a[0],a[1],a[2]);e.lineEnd()}function Vl(t,e){var i=-1,a=t.length;for(e.polygonStart();++i<a;)Ul(t[i],e,1);e.polygonEnd()}var Gl,Fl,Hl,zl,Wl,Jl=function(t,e){t&&Pl.hasOwnProperty(t.type)?Pl[t.type](t,e):Bl(t,e)},Yl=dl(),Xl=dl(),Zl={point:Ml,lineStart:Ml,lineEnd:Ml,polygonStart:function(){Yl.reset(),Zl.lineStart=Kl,Zl.lineEnd=Ql},polygonEnd:function(){var t=+Yl;Xl.add(t<0?_l+t:t),this.lineStart=this.lineEnd=this.point=Ml},sphere:function(){Xl.add(_l)}};function Kl(){Zl.point=tc}function Ql(){ec(Gl,Fl)}function tc(t,e){Zl.point=ec,Gl=t,Fl=e,Hl=t*=yl,zl=Cl(e=(e*=yl)/2+bl),Wl=Ol(e)}function ec(t,e){e=(e*=yl)/2+bl;var i=(t*=yl)-Hl,a=i>=0?1:-1,n=a*i,r=Cl(e),o=Ol(e),s=Wl*o,l=zl*r+s*Cl(n),c=s*a*Ol(n);Yl.add($l(c,l)),Hl=t,zl=r,Wl=o}var ic=function(t){return Xl.reset(),Jl(t,Zl),2*Xl};function ac(t){return[$l(t[1],t[0]),Rl(t[2])]}function nc(t){var e=t[0],i=t[1],a=Cl(i);return[a*Cl(e),a*Ol(e),Ol(i)]}function rc(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function oc(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function sc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function lc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function cc(t){var e=Il(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}var dc,uc,fc,hc,mc,pc,gc,vc,bc,_c,wc=dl(),yc={point:xc,lineStart:$c,lineEnd:Cc,polygonStart:function(){yc.point=Sc,yc.lineStart=Dc,yc.lineEnd=jc,wc.reset(),Zl.polygonStart()},polygonEnd:function(){Zl.polygonEnd(),yc.point=xc,yc.lineStart=$c,yc.lineEnd=Cc,Yl<0?(dc=-(fc=180),uc=-(hc=90)):wc>ml?hc=90:wc<-ml&&(uc=-90),_c[0]=dc,_c[1]=fc},sphere:function(){dc=-(fc=180),uc=-(hc=90)}};function xc(t,e){bc.push(_c=[dc=t,fc=t]),e<uc&&(uc=e),e>hc&&(hc=e)}function kc(t,e){var i=nc([t*yl,e*yl]);if(vc){var a=oc(vc,i),n=oc([a[1],-a[0],0],a);cc(n),n=ac(n);var r,o=t-mc,s=o>0?1:-1,l=n[0]*wl*s,c=xl(o)>180;c^(s*mc<l&&l<s*t)?(r=n[1]*wl)>hc&&(hc=r):c^(s*mc<(l=(l+360)%360-180)&&l<s*t)?(r=-n[1]*wl)<uc&&(uc=r):(e<uc&&(uc=e),e>hc&&(hc=e)),c?t<mc?Nc(dc,t)>Nc(dc,fc)&&(fc=t):Nc(t,fc)>Nc(dc,fc)&&(dc=t):fc>=dc?(t<dc&&(dc=t),t>fc&&(fc=t)):t>mc?Nc(dc,t)>Nc(dc,fc)&&(fc=t):Nc(t,fc)>Nc(dc,fc)&&(dc=t)}else bc.push(_c=[dc=t,fc=t]);e<uc&&(uc=e),e>hc&&(hc=e),vc=i,mc=t}function $c(){yc.point=kc}function Cc(){_c[0]=dc,_c[1]=fc,yc.point=xc,vc=null}function Sc(t,e){if(vc){var i=t-mc;wc.add(xl(i)>180?i+(i>0?360:-360):i)}else pc=t,gc=e;Zl.point(t,e),kc(t,e)}function Dc(){Zl.lineStart()}function jc(){Sc(pc,gc),Zl.lineEnd(),xl(wc)>ml&&(dc=-(fc=180)),_c[0]=dc,_c[1]=fc,vc=null}function Nc(t,e){return(e-=t)<0?e+360:e}function Oc(t,e){return t[0]-e[0]}function Tc(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var Ic,Lc,Ec,Rc,Ac,Mc,Bc,Pc,qc,Uc,Vc,Gc,Fc,Hc,zc,Wc,Jc=function(t){var e,i,a,n,r,o,s;if(hc=fc=-(dc=uc=1/0),bc=[],Jl(t,yc),i=bc.length){for(bc.sort(Oc),e=1,r=[a=bc[0]];e<i;++e)Tc(a,(n=bc[e])[0])||Tc(a,n[1])?(Nc(a[0],n[1])>Nc(a[0],a[1])&&(a[1]=n[1]),Nc(n[0],a[1])>Nc(a[0],a[1])&&(a[0]=n[0])):r.push(a=n);for(o=-1/0,e=0,a=r[i=r.length-1];e<=i;a=n,++e)n=r[e],(s=Nc(a[1],n[0]))>o&&(o=s,dc=n[0],fc=a[1])}return bc=_c=null,dc===1/0||uc===1/0?[[NaN,NaN],[NaN,NaN]]:[[dc,uc],[fc,hc]]},Yc={sphere:Ml,point:Xc,lineStart:Kc,lineEnd:ed,polygonStart:function(){Yc.lineStart=id,Yc.lineEnd=ad},polygonEnd:function(){Yc.lineStart=Kc,Yc.lineEnd=ed}};function Xc(t,e){t*=yl;var i=Cl(e*=yl);Zc(i*Cl(t),i*Ol(t),Ol(e))}function Zc(t,e,i){Ec+=(t-Ec)/++Ic,Rc+=(e-Rc)/Ic,Ac+=(i-Ac)/Ic}function Kc(){Yc.point=Qc}function Qc(t,e){t*=yl;var i=Cl(e*=yl);Hc=i*Cl(t),zc=i*Ol(t),Wc=Ol(e),Yc.point=td,Zc(Hc,zc,Wc)}function td(t,e){t*=yl;var i=Cl(e*=yl),a=i*Cl(t),n=i*Ol(t),r=Ol(e),o=$l(Il((o=zc*r-Wc*n)*o+(o=Wc*a-Hc*r)*o+(o=Hc*n-zc*a)*o),Hc*a+zc*n+Wc*r);Lc+=o,Mc+=o*(Hc+(Hc=a)),Bc+=o*(zc+(zc=n)),Pc+=o*(Wc+(Wc=r)),Zc(Hc,zc,Wc)}function ed(){Yc.point=Xc}function id(){Yc.point=nd}function ad(){rd(Gc,Fc),Yc.point=Xc}function nd(t,e){Gc=t,Fc=e,t*=yl,e*=yl,Yc.point=rd;var i=Cl(e);Hc=i*Cl(t),zc=i*Ol(t),Wc=Ol(e),Zc(Hc,zc,Wc)}function rd(t,e){t*=yl;var i=Cl(e*=yl),a=i*Cl(t),n=i*Ol(t),r=Ol(e),o=zc*r-Wc*n,s=Wc*a-Hc*r,l=Hc*n-zc*a,c=Il(o*o+s*s+l*l),d=Rl(c),u=c&&-d/c;qc+=u*o,Uc+=u*s,Vc+=u*l,Lc+=d,Mc+=d*(Hc+(Hc=a)),Bc+=d*(zc+(zc=n)),Pc+=d*(Wc+(Wc=r)),Zc(Hc,zc,Wc)}var od=function(t){Ic=Lc=Ec=Rc=Ac=Mc=Bc=Pc=qc=Uc=Vc=0,Jl(t,Yc);var e=qc,i=Uc,a=Vc,n=e*e+i*i+a*a;return n<pl&&(e=Mc,i=Bc,a=Pc,Lc<ml&&(e=Ec,i=Rc,a=Ac),(n=e*e+i*i+a*a)<pl)?[NaN,NaN]:[$l(i,e)*wl,Rl(a/Il(n))*wl]},sd=function(t){return function(){return t}},ld=function(t,e){function i(i,a){return i=t(i,a),e(i[0],i[1])}return t.invert&&e.invert&&(i.invert=function(i,a){return(i=e.invert(i,a))&&t.invert(i[0],i[1])}),i};function cd(t,e){return[xl(t)>gl?t+Math.round(-t/_l)*_l:t,e]}function dd(t,e,i){return(t%=_l)?e||i?ld(fd(t),hd(e,i)):fd(t):e||i?hd(e,i):cd}function ud(t){return function(e,i){return[(e+=t)>gl?e-_l:e<-gl?e+_l:e,i]}}function fd(t){var e=ud(t);return e.invert=ud(-t),e}function hd(t,e){var i=Cl(t),a=Ol(t),n=Cl(e),r=Ol(e);function o(t,e){var o=Cl(e),s=Cl(t)*o,l=Ol(t)*o,c=Ol(e),d=c*i+s*a;return[$l(l*n-d*r,s*i-c*a),Rl(d*n+l*r)]}return o.invert=function(t,e){var o=Cl(e),s=Cl(t)*o,l=Ol(t)*o,c=Ol(e),d=c*n-l*r;return[$l(l*n+c*r,s*i+d*a),Rl(d*i-s*a)]},o}cd.invert=cd;var md=function(t){function e(e){return(e=t(e[0]*yl,e[1]*yl))[0]*=wl,e[1]*=wl,e}return t=dd(t[0]*yl,t[1]*yl,t.length>2?t[2]*yl:0),e.invert=function(e){return(e=t.invert(e[0]*yl,e[1]*yl))[0]*=wl,e[1]*=wl,e},e};function pd(t,e,i,a,n,r){if(i){var o=Cl(e),s=Ol(e),l=a*i;null==n?(n=e+a*_l,r=e-l/2):(n=gd(o,n),r=gd(o,r),(a>0?n<r:n>r)&&(n+=a*_l));for(var c,d=n;a>0?d>r:d<r;d-=l)c=ac([o,-s*Cl(d),-s*Ol(d)]),t.point(c[0],c[1])}}function gd(t,e){(e=nc(e))[0]-=t,cc(e);var i=El(-e[1]);return((-e[2]<0?-i:i)+_l-ml)%_l}var vd=function(){var t,e,i=sd([0,0]),a=sd(90),n=sd(6),r={point:function(i,a){t.push(i=e(i,a)),i[0]*=wl,i[1]*=wl}};function o(){var o=i.apply(this,arguments),s=a.apply(this,arguments)*yl,l=n.apply(this,arguments)*yl;return t=[],e=dd(-o[0]*yl,-o[1]*yl,0).invert,pd(r,s,l,1),o={type:"Polygon",coordinates:[t]},t=e=null,o}return o.center=function(t){return arguments.length?(i="function"==typeof t?t:sd([+t[0],+t[1]]),o):i},o.radius=function(t){return arguments.length?(a="function"==typeof t?t:sd(+t),o):a},o.precision=function(t){return arguments.length?(n="function"==typeof t?t:sd(+t),o):n},o},bd=function(){var t,e=[];return{point:function(e,i){t.push([e,i])},lineStart:function(){e.push(t=[])},lineEnd:Ml,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var i=e;return e=[],t=null,i}}},_d=function(t,e){return xl(t[0]-e[0])<ml&&xl(t[1]-e[1])<ml};function wd(t,e,i,a){this.x=t,this.z=e,this.o=i,this.e=a,this.v=!1,this.n=this.p=null}var yd=function(t,e,i,a,n){var r,o,s=[],l=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,i,a=t[0],o=t[e];if(_d(a,o)){for(n.lineStart(),r=0;r<e;++r)n.point((a=t[r])[0],a[1]);n.lineEnd()}else s.push(i=new wd(a,t,null,!0)),l.push(i.o=new wd(a,null,i,!1)),s.push(i=new wd(o,t,null,!1)),l.push(i.o=new wd(o,null,i,!0))}}),s.length){for(l.sort(e),xd(s),xd(l),r=0,o=l.length;r<o;++r)l[r].e=i=!i;for(var c,d,u=s[0];;){for(var f=u,h=!0;f.v;)if((f=f.n)===u)return;c=f.z,n.lineStart();do{if(f.v=f.o.v=!0,f.e){if(h)for(r=0,o=c.length;r<o;++r)n.point((d=c[r])[0],d[1]);else a(f.x,f.n.x,1,n);f=f.n}else{if(h)for(c=f.p.z,r=c.length-1;r>=0;--r)n.point((d=c[r])[0],d[1]);else a(f.x,f.p.x,-1,n);f=f.p}c=(f=f.o).z,h=!h}while(!f.v);n.lineEnd()}}};function xd(t){if(e=t.length){for(var e,i,a=0,n=t[0];++a<e;)n.n=i=t[a],i.p=n,n=i;n.n=i=t[0],i.p=n}}var kd=dl();function $d(t){return xl(t[0])<=gl?t[0]:Tl(t[0])*((xl(t[0])+gl)%_l-gl)}var Cd=function(t,e){var i=$d(e),a=e[1],n=Ol(a),r=[Ol(i),-Cl(i),0],o=0,s=0;kd.reset(),1===n?a=vl+ml:-1===n&&(a=-vl-ml);for(var l=0,c=t.length;l<c;++l)if(u=(d=t[l]).length)for(var d,u,f=d[u-1],h=$d(f),m=f[1]/2+bl,p=Ol(m),g=Cl(m),v=0;v<u;++v,h=_,p=y,g=x,f=b){var b=d[v],_=$d(b),w=b[1]/2+bl,y=Ol(w),x=Cl(w),k=_-h,$=k>=0?1:-1,C=$*k,S=C>gl,D=p*y;if(kd.add($l(D*$*Ol(C),g*x+D*Cl(C))),o+=S?k+$*_l:k,S^h>=i^_>=i){var j=oc(nc(f),nc(b));cc(j);var N=oc(r,j);cc(N);var O=(S^k>=0?-1:1)*Rl(N[2]);(a>O||a===O&&(j[0]||j[1]))&&(s+=S^k>=0?1:-1)}}return(o<-ml||o<ml&&kd<-ml)^1&s},Sd=function(t,e,i,a){return function(n){var r,o,s,l=e(n),c=bd(),d=e(c),u=!1,f={point:h,lineStart:p,lineEnd:g,polygonStart:function(){f.point=v,f.lineStart=b,f.lineEnd=_,o=[],r=[]},polygonEnd:function(){f.point=h,f.lineStart=p,f.lineEnd=g,o=M(o);var t=Cd(r,a);o.length?(u||(n.polygonStart(),u=!0),yd(o,jd,t,i,n)):t&&(u||(n.polygonStart(),u=!0),n.lineStart(),i(null,null,1,n),n.lineEnd()),u&&(n.polygonEnd(),u=!1),o=r=null},sphere:function(){n.polygonStart(),n.lineStart(),i(null,null,1,n),n.lineEnd(),n.polygonEnd()}};function h(e,i){t(e,i)&&n.point(e,i)}function m(t,e){l.point(t,e)}function p(){f.point=m,l.lineStart()}function g(){f.point=h,l.lineEnd()}function v(t,e){s.push([t,e]),d.point(t,e)}function b(){d.lineStart(),s=[]}function _(){v(s[0][0],s[0][1]),d.lineEnd();var t,e,i,a,l=d.clean(),f=c.result(),h=f.length;if(s.pop(),r.push(s),s=null,h)if(1&l){if((e=(i=f[0]).length-1)>0){for(u||(n.polygonStart(),u=!0),n.lineStart(),t=0;t<e;++t)n.point((a=i[t])[0],a[1]);n.lineEnd()}}else h>1&&2&l&&f.push(f.pop().concat(f.shift())),o.push(f.filter(Dd))}return f}};function Dd(t){return t.length>1}function jd(t,e){return((t=t.x)[0]<0?t[1]-vl-ml:vl-t[1])-((e=e.x)[0]<0?e[1]-vl-ml:vl-e[1])}var Nd=Sd(function(){return!0},function(t){var e,i=NaN,a=NaN,n=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,o){var s,l,c,d,u,f,h,m=r>0?gl:-gl,p=xl(r-i);xl(p-gl)<ml?(t.point(i,a=(a+o)/2>0?vl:-vl),t.point(n,a),t.lineEnd(),t.lineStart(),t.point(m,a),t.point(r,a),e=0):n!==m&&p>=gl&&(xl(i-n)<ml&&(i-=n*ml),xl(r-m)<ml&&(r-=m*ml),l=a,d=o,h=Ol((s=i)-(c=r)),a=xl(h)>ml?kl((Ol(l)*(f=Cl(d))*Ol(c)-Ol(d)*(u=Cl(l))*Ol(s))/(u*f*h)):(l+d)/2,t.point(n,a),t.lineEnd(),t.lineStart(),t.point(m,a),e=0),t.point(i=r,a=o),n=m},lineEnd:function(){t.lineEnd(),i=a=NaN},clean:function(){return 2-e}}},function(t,e,i,a){var n;if(null==t)n=i*vl,a.point(-gl,n),a.point(0,n),a.point(gl,n),a.point(gl,0),a.point(gl,-n),a.point(0,-n),a.point(-gl,-n),a.point(-gl,0),a.point(-gl,n);else if(xl(t[0]-e[0])>ml){var r=t[0]<e[0]?gl:-gl;n=i*r/2,a.point(-r,n),a.point(0,n),a.point(r,n)}else a.point(e[0],e[1])},[-gl,-vl]);var Od=function(t){var e=Cl(t),i=6*yl,a=e>0,n=xl(e)>ml;function r(t,i){return Cl(t)*Cl(i)>e}function o(t,i,a){var n=[1,0,0],r=oc(nc(t),nc(i)),o=rc(r,r),s=r[0],l=o-s*s;if(!l)return!a&&t;var c=e*o/l,d=-e*s/l,u=oc(n,r),f=lc(n,c);sc(f,lc(r,d));var h=u,m=rc(f,h),p=rc(h,h),g=m*m-p*(rc(f,f)-1);if(!(g<0)){var v=Il(g),b=lc(h,(-m-v)/p);if(sc(b,f),b=ac(b),!a)return b;var _,w=t[0],y=i[0],x=t[1],k=i[1];y<w&&(_=w,w=y,y=_);var $=y-w,C=xl($-gl)<ml;if(!C&&k<x&&(_=x,x=k,k=_),C||$<ml?C?x+k>0^b[1]<(xl(b[0]-w)<ml?x:k):x<=b[1]&&b[1]<=k:$>gl^(w<=b[0]&&b[0]<=y)){var S=lc(h,(-m+v)/p);return sc(S,f),[b,ac(S)]}}}function s(e,i){var n=a?t:gl-t,r=0;return e<-n?r|=1:e>n&&(r|=2),i<-n?r|=4:i>n&&(r|=8),r}return Sd(r,function(t){var e,i,l,c,d;return{lineStart:function(){c=l=!1,d=1},point:function(u,f){var h,m=[u,f],p=r(u,f),g=a?p?0:s(u,f):p?s(u+(u<0?gl:-gl),f):0;if(!e&&(c=l=p)&&t.lineStart(),p!==l&&(!(h=o(e,m))||_d(e,h)||_d(m,h))&&(m[0]+=ml,m[1]+=ml,p=r(m[0],m[1])),p!==l)d=0,p?(t.lineStart(),h=o(m,e),t.point(h[0],h[1])):(h=o(e,m),t.point(h[0],h[1]),t.lineEnd()),e=h;else if(n&&e&&a^p){var v;g&i||!(v=o(m,e,!0))||(d=0,a?(t.lineStart(),t.point(v[0][0],v[0][1]),t.point(v[1][0],v[1][1]),t.lineEnd()):(t.point(v[1][0],v[1][1]),t.lineEnd(),t.lineStart(),t.point(v[0][0],v[0][1])))}!p||e&&_d(e,m)||t.point(m[0],m[1]),e=m,l=p,i=g},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return d|(c&&l)<<1}}},function(e,a,n,r){pd(r,t,i,n,e,a)},a?[0,-t]:[-gl,t-gl])},Td=function(t,e,i,a,n,r){var o,s=t[0],l=t[1],c=0,d=1,u=e[0]-s,f=e[1]-l;if(o=i-s,u||!(o>0)){if(o/=u,u<0){if(o<c)return;o<d&&(d=o)}else if(u>0){if(o>d)return;o>c&&(c=o)}if(o=n-s,u||!(o<0)){if(o/=u,u<0){if(o>d)return;o>c&&(c=o)}else if(u>0){if(o<c)return;o<d&&(d=o)}if(o=a-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<d&&(d=o)}else if(f>0){if(o>d)return;o>c&&(c=o)}if(o=r-l,f||!(o<0)){if(o/=f,f<0){if(o>d)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<d&&(d=o)}return c>0&&(t[0]=s+c*u,t[1]=l+c*f),d<1&&(e[0]=s+d*u,e[1]=l+d*f),!0}}}}},Id=1e9,Ld=-Id;function Ed(t,e,i,a){function n(n,r){return t<=n&&n<=i&&e<=r&&r<=a}function r(n,r,s,c){var d=0,u=0;if(null==n||(d=o(n,s))!==(u=o(r,s))||l(n,r)<0^s>0)do{c.point(0===d||3===d?t:i,d>1?a:e)}while((d=(d+s+4)%4)!==u);else c.point(r[0],r[1])}function o(a,n){return xl(a[0]-t)<ml?n>0?0:3:xl(a[0]-i)<ml?n>0?2:1:xl(a[1]-e)<ml?n>0?1:0:n>0?3:2}function s(t,e){return l(t.x,e.x)}function l(t,e){var i=o(t,1),a=o(e,1);return i!==a?i-a:0===i?e[1]-t[1]:1===i?t[0]-e[0]:2===i?t[1]-e[1]:e[0]-t[0]}return function(o){var l,c,d,u,f,h,m,p,g,v,b,_=o,w=bd(),y={point:x,lineStart:function(){y.point=k,c&&c.push(d=[]);v=!0,g=!1,m=p=NaN},lineEnd:function(){l&&(k(u,f),h&&g&&w.rejoin(),l.push(w.result()));y.point=x,g&&_.lineEnd()},polygonStart:function(){_=w,l=[],c=[],b=!0},polygonEnd:function(){var e=function(){for(var e=0,i=0,n=c.length;i<n;++i)for(var r,o,s=c[i],l=1,d=s.length,u=s[0],f=u[0],h=u[1];l<d;++l)r=f,o=h,u=s[l],f=u[0],h=u[1],o<=a?h>a&&(f-r)*(a-o)>(h-o)*(t-r)&&++e:h<=a&&(f-r)*(a-o)<(h-o)*(t-r)&&--e;return e}(),i=b&&e,n=(l=M(l)).length;(i||n)&&(o.polygonStart(),i&&(o.lineStart(),r(null,null,1,o),o.lineEnd()),n&&yd(l,s,e,r,o),o.polygonEnd());_=o,l=c=d=null}};function x(t,e){n(t,e)&&_.point(t,e)}function k(r,o){var s=n(r,o);if(c&&d.push([r,o]),v)u=r,f=o,h=s,v=!1,s&&(_.lineStart(),_.point(r,o));else if(s&&g)_.point(r,o);else{var l=[m=Math.max(Ld,Math.min(Id,m)),p=Math.max(Ld,Math.min(Id,p))],w=[r=Math.max(Ld,Math.min(Id,r)),o=Math.max(Ld,Math.min(Id,o))];Td(l,w,t,e,i,a)?(g||(_.lineStart(),_.point(l[0],l[1])),_.point(w[0],w[1]),s||_.lineEnd(),b=!1):s&&(_.lineStart(),_.point(r,o),b=!1)}m=r,p=o,g=s}return y}}var Rd,Ad,Md,Bd=function(){var t,e,i,a=0,n=0,r=960,o=500;return i={stream:function(i){return t&&e===i?t:t=Ed(a,n,r,o)(e=i)},extent:function(s){return arguments.length?(a=+s[0][0],n=+s[0][1],r=+s[1][0],o=+s[1][1],t=e=null,i):[[a,n],[r,o]]}}},Pd=dl(),qd={sphere:Ml,point:Ml,lineStart:function(){qd.point=Vd,qd.lineEnd=Ud},lineEnd:Ml,polygonStart:Ml,polygonEnd:Ml};function Ud(){qd.point=qd.lineEnd=Ml}function Vd(t,e){Rd=t*=yl,Ad=Ol(e*=yl),Md=Cl(e),qd.point=Gd}function Gd(t,e){t*=yl;var i=Ol(e*=yl),a=Cl(e),n=xl(t-Rd),r=Cl(n),o=a*Ol(n),s=Md*i-Ad*a*r,l=Ad*i+Md*a*r;Pd.add($l(Il(o*o+s*s),l)),Rd=t,Ad=i,Md=a}var Fd=function(t){return Pd.reset(),Jl(t,qd),+Pd},Hd=[null,null],zd={type:"LineString",coordinates:Hd},Wd=function(t,e){return Hd[0]=t,Hd[1]=e,Fd(zd)},Jd={Feature:function(t,e){return Xd(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,a=-1,n=i.length;++a<n;)if(Xd(i[a].geometry,e))return!0;return!1}},Yd={Sphere:function(){return!0},Point:function(t,e){return Zd(t.coordinates,e)},MultiPoint:function(t,e){for(var i=t.coordinates,a=-1,n=i.length;++a<n;)if(Zd(i[a],e))return!0;return!1},LineString:function(t,e){return Kd(t.coordinates,e)},MultiLineString:function(t,e){for(var i=t.coordinates,a=-1,n=i.length;++a<n;)if(Kd(i[a],e))return!0;return!1},Polygon:function(t,e){return Qd(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,a=-1,n=i.length;++a<n;)if(Qd(i[a],e))return!0;return!1},GeometryCollection:function(t,e){for(var i=t.geometries,a=-1,n=i.length;++a<n;)if(Xd(i[a],e))return!0;return!1}};function Xd(t,e){return!(!t||!Yd.hasOwnProperty(t.type))&&Yd[t.type](t,e)}function Zd(t,e){return 0===Wd(t,e)}function Kd(t,e){for(var i,a,n,r=0,o=t.length;r<o;r++){if(0===(a=Wd(t[r],e)))return!0;if(r>0&&(n=Wd(t[r],t[r-1]))>0&&i<=n&&a<=n&&(i+a-n)*(1-Math.pow((i-a)/n,2))<pl*n)return!0;i=a}return!1}function Qd(t,e){return!!Cd(t.map(tu),eu(e))}function tu(t){return(t=t.map(eu)).pop(),t}function eu(t){return[t[0]*yl,t[1]*yl]}var iu=function(t,e){return(t&&Jd.hasOwnProperty(t.type)?Jd[t.type]:Xd)(t,e)};function au(t,e,i){var a=x(t,e-ml,i).concat(e);return function(t){return a.map(function(e){return[t,e]})}}function nu(t,e,i){var a=x(t,e-ml,i).concat(e);return function(t){return a.map(function(e){return[e,t]})}}function ru(){var t,e,i,a,n,r,o,s,l,c,d,u,f=10,h=f,m=90,p=360,g=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return x(Sl(a/m)*m,i,m).map(d).concat(x(Sl(s/p)*p,o,p).map(u)).concat(x(Sl(e/f)*f,t,f).filter(function(t){return xl(t%m)>ml}).map(l)).concat(x(Sl(r/h)*h,n,h).filter(function(t){return xl(t%p)>ml}).map(c))}return v.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},v.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(u(o).slice(1),d(i).reverse().slice(1),u(s).reverse().slice(1))]}},v.extent=function(t){return arguments.length?v.extentMajor(t).extentMinor(t):v.extentMinor()},v.extentMajor=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],s=+t[0][1],o=+t[1][1],a>i&&(t=a,a=i,i=t),s>o&&(t=s,s=o,o=t),v.precision(g)):[[a,s],[i,o]]},v.extentMinor=function(i){return arguments.length?(e=+i[0][0],t=+i[1][0],r=+i[0][1],n=+i[1][1],e>t&&(i=e,e=t,t=i),r>n&&(i=r,r=n,n=i),v.precision(g)):[[e,r],[t,n]]},v.step=function(t){return arguments.length?v.stepMajor(t).stepMinor(t):v.stepMinor()},v.stepMajor=function(t){return arguments.length?(m=+t[0],p=+t[1],v):[m,p]},v.stepMinor=function(t){return arguments.length?(f=+t[0],h=+t[1],v):[f,h]},v.precision=function(f){return arguments.length?(g=+f,l=au(r,n,90),c=nu(e,t,g),d=au(s,o,90),u=nu(a,i,g),v):g},v.extentMajor([[-180,-90+ml],[180,90-ml]]).extentMinor([[-180,-80-ml],[180,80+ml]])}function ou(){return ru()()}var su,lu,cu,du,uu=function(t,e){var i=t[0]*yl,a=t[1]*yl,n=e[0]*yl,r=e[1]*yl,o=Cl(a),s=Ol(a),l=Cl(r),c=Ol(r),d=o*Cl(i),u=o*Ol(i),f=l*Cl(n),h=l*Ol(n),m=2*Rl(Il(Al(r-a)+o*l*Al(n-i))),p=Ol(m),g=m?function(t){var e=Ol(t*=m)/p,i=Ol(m-t)/p,a=i*d+e*f,n=i*u+e*h,r=i*s+e*c;return[$l(n,a)*wl,$l(r,Il(a*a+n*n))*wl]}:function(){return[i*wl,a*wl]};return g.distance=m,g},fu=function(t){return t},hu=dl(),mu=dl(),pu={point:Ml,lineStart:Ml,lineEnd:Ml,polygonStart:function(){pu.lineStart=gu,pu.lineEnd=_u},polygonEnd:function(){pu.lineStart=pu.lineEnd=pu.point=Ml,hu.add(xl(mu)),mu.reset()},result:function(){var t=hu/2;return hu.reset(),t}};function gu(){pu.point=vu}function vu(t,e){pu.point=bu,su=cu=t,lu=du=e}function bu(t,e){mu.add(du*t-cu*e),cu=t,du=e}function _u(){bu(su,lu)}var wu=pu,yu=1/0,xu=yu,ku=-yu,$u=ku;var Cu,Su,Du,ju,Nu={point:function(t,e){t<yu&&(yu=t);t>ku&&(ku=t);e<xu&&(xu=e);e>$u&&($u=e)},lineStart:Ml,lineEnd:Ml,polygonStart:Ml,polygonEnd:Ml,result:function(){var t=[[yu,xu],[ku,$u]];return ku=$u=-(xu=yu=1/0),t}},Ou=0,Tu=0,Iu=0,Lu=0,Eu=0,Ru=0,Au=0,Mu=0,Bu=0,Pu={point:qu,lineStart:Uu,lineEnd:Fu,polygonStart:function(){Pu.lineStart=Hu,Pu.lineEnd=zu},polygonEnd:function(){Pu.point=qu,Pu.lineStart=Uu,Pu.lineEnd=Fu},result:function(){var t=Bu?[Au/Bu,Mu/Bu]:Ru?[Lu/Ru,Eu/Ru]:Iu?[Ou/Iu,Tu/Iu]:[NaN,NaN];return Ou=Tu=Iu=Lu=Eu=Ru=Au=Mu=Bu=0,t}};function qu(t,e){Ou+=t,Tu+=e,++Iu}function Uu(){Pu.point=Vu}function Vu(t,e){Pu.point=Gu,qu(Du=t,ju=e)}function Gu(t,e){var i=t-Du,a=e-ju,n=Il(i*i+a*a);Lu+=n*(Du+t)/2,Eu+=n*(ju+e)/2,Ru+=n,qu(Du=t,ju=e)}function Fu(){Pu.point=qu}function Hu(){Pu.point=Wu}function zu(){Ju(Cu,Su)}function Wu(t,e){Pu.point=Ju,qu(Cu=Du=t,Su=ju=e)}function Ju(t,e){var i=t-Du,a=e-ju,n=Il(i*i+a*a);Lu+=n*(Du+t)/2,Eu+=n*(ju+e)/2,Ru+=n,Au+=(n=ju*t-Du*e)*(Du+t),Mu+=n*(ju+e),Bu+=3*n,qu(Du=t,ju=e)}var Yu=Pu;function Xu(t){this._context=t}Xu.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,_l)}},result:Ml};var Zu,Ku,Qu,tf,ef,af=dl(),nf={point:Ml,lineStart:function(){nf.point=rf},lineEnd:function(){Zu&&of(Ku,Qu),nf.point=Ml},polygonStart:function(){Zu=!0},polygonEnd:function(){Zu=null},result:function(){var t=+af;return af.reset(),t}};function rf(t,e){nf.point=of,Ku=tf=t,Qu=ef=e}function of(t,e){tf-=t,ef-=e,af.add(Il(tf*tf+ef*ef)),tf=t,ef=e}var sf=nf;function lf(){this._string=[]}function cf(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}lf.prototype={_radius:4.5,_circle:cf(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=cf(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var df=function(t,e){var i,a,n=4.5;function r(t){return t&&("function"==typeof n&&a.pointRadius(+n.apply(this,arguments)),Jl(t,i(a))),a.result()}return r.area=function(t){return Jl(t,i(wu)),wu.result()},r.measure=function(t){return Jl(t,i(sf)),sf.result()},r.bounds=function(t){return Jl(t,i(Nu)),Nu.result()},r.centroid=function(t){return Jl(t,i(Yu)),Yu.result()},r.projection=function(e){return arguments.length?(i=null==e?(t=null,fu):(t=e).stream,r):t},r.context=function(t){return arguments.length?(a=null==t?(e=null,new lf):new Xu(e=t),"function"!=typeof n&&a.pointRadius(n),r):e},r.pointRadius=function(t){return arguments.length?(n="function"==typeof t?t:(a.pointRadius(+t),+t),r):n},r.projection(t).context(e)},uf=function(t){return{stream:ff(t)}};function ff(t){return function(e){var i=new hf;for(var a in t)i[a]=t[a];return i.stream=e,i}}function hf(){}function mf(t,e,i){var a=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),Jl(i,t.stream(Nu)),e(Nu.result()),null!=a&&t.clipExtent(a),t}function pf(t,e,i){return mf(t,function(i){var a=e[1][0]-e[0][0],n=e[1][1]-e[0][1],r=Math.min(a/(i[1][0]-i[0][0]),n/(i[1][1]-i[0][1])),o=+e[0][0]+(a-r*(i[1][0]+i[0][0]))/2,s=+e[0][1]+(n-r*(i[1][1]+i[0][1]))/2;t.scale(150*r).translate([o,s])},i)}function gf(t,e,i){return pf(t,[[0,0],e],i)}function vf(t,e,i){return mf(t,function(i){var a=+e,n=a/(i[1][0]-i[0][0]),r=(a-n*(i[1][0]+i[0][0]))/2,o=-n*i[0][1];t.scale(150*n).translate([r,o])},i)}function bf(t,e,i){return mf(t,function(i){var a=+e,n=a/(i[1][1]-i[0][1]),r=-n*i[0][0],o=(a-n*(i[1][1]+i[0][1]))/2;t.scale(150*n).translate([r,o])},i)}hf.prototype={constructor:hf,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var _f=16,wf=Cl(30*yl),yf=function(t,e){return+e?function(t,e){function i(a,n,r,o,s,l,c,d,u,f,h,m,p,g){var v=c-a,b=d-n,_=v*v+b*b;if(_>4*e&&p--){var w=o+f,y=s+h,x=l+m,k=Il(w*w+y*y+x*x),$=Rl(x/=k),C=xl(xl(x)-1)<ml||xl(r-u)<ml?(r+u)/2:$l(y,w),S=t(C,$),D=S[0],j=S[1],N=D-a,O=j-n,T=b*N-v*O;(T*T/_>e||xl((v*N+b*O)/_-.5)>.3||o*f+s*h+l*m<wf)&&(i(a,n,r,o,s,l,D,j,C,w/=k,y/=k,x,p,g),g.point(D,j),i(D,j,C,w,y,x,c,d,u,f,h,m,p,g))}}return function(e){var a,n,r,o,s,l,c,d,u,f,h,m,p={point:g,lineStart:v,lineEnd:_,polygonStart:function(){e.polygonStart(),p.lineStart=w},polygonEnd:function(){e.polygonEnd(),p.lineStart=v}};function g(i,a){i=t(i,a),e.point(i[0],i[1])}function v(){d=NaN,p.point=b,e.lineStart()}function b(a,n){var r=nc([a,n]),o=t(a,n);i(d,u,c,f,h,m,d=o[0],u=o[1],c=a,f=r[0],h=r[1],m=r[2],_f,e),e.point(d,u)}function _(){p.point=g,e.lineEnd()}function w(){v(),p.point=y,p.lineEnd=x}function y(t,e){b(a=t,e),n=d,r=u,o=f,s=h,l=m,p.point=b}function x(){i(d,u,c,f,h,m,n,r,a,o,s,l,_f,e),p.lineEnd=_,_()}return p}}(t,e):(i=t,ff({point:function(t,e){t=i(t,e),this.stream.point(t[0],t[1])}}));var i};var xf=ff({point:function(t,e){this.stream.point(t*yl,e*yl)}});function kf(t,e,i,a){var n=Cl(a),r=Ol(a),o=n*t,s=r*t,l=n/t,c=r/t,d=(r*i-n*e)/t,u=(r*e+n*i)/t;function f(t,a){return[o*t-s*a+e,i-s*t-o*a]}return f.invert=function(t,e){return[l*t-c*e+d,u-c*t-l*e]},f}function $f(t){return Cf(function(){return t})()}function Cf(t){var e,i,a,n,r,o,s,l,c,d,u=150,f=480,h=250,m=0,p=0,g=0,v=0,b=0,_=0,w=null,y=Nd,x=null,k=fu,$=.5;function C(t){return l(t[0]*yl,t[1]*yl)}function S(t){return(t=l.invert(t[0],t[1]))&&[t[0]*wl,t[1]*wl]}function D(){var t=kf(u,0,0,_).apply(null,e(m,p)),a=(_?kf:function(t,e,i){function a(a,n){return[e+t*a,i-t*n]}return a.invert=function(a,n){return[(a-e)/t,(i-n)/t]},a})(u,f-t[0],h-t[1],_);return i=dd(g,v,b),s=ld(e,a),l=ld(i,s),o=yf(s,$),j()}function j(){return c=d=null,C}return C.stream=function(t){return c&&d===t?c:c=xf((e=i,ff({point:function(t,i){var a=e(t,i);return this.stream.point(a[0],a[1])}}))(y(o(k(d=t)))));var e},C.preclip=function(t){return arguments.length?(y=t,w=void 0,j()):y},C.postclip=function(t){return arguments.length?(k=t,x=a=n=r=null,j()):k},C.clipAngle=function(t){return arguments.length?(y=+t?Od(w=t*yl):(w=null,Nd),j()):w*wl},C.clipExtent=function(t){return arguments.length?(k=null==t?(x=a=n=r=null,fu):Ed(x=+t[0][0],a=+t[0][1],n=+t[1][0],r=+t[1][1]),j()):null==x?null:[[x,a],[n,r]]},C.scale=function(t){return arguments.length?(u=+t,D()):u},C.translate=function(t){return arguments.length?(f=+t[0],h=+t[1],D()):[f,h]},C.center=function(t){return arguments.length?(m=t[0]%360*yl,p=t[1]%360*yl,D()):[m*wl,p*wl]},C.rotate=function(t){return arguments.length?(g=t[0]%360*yl,v=t[1]%360*yl,b=t.length>2?t[2]%360*yl:0,D()):[g*wl,v*wl,b*wl]},C.angle=function(t){return arguments.length?(_=t%360*yl,D()):_*wl},C.precision=function(t){return arguments.length?(o=yf(s,$=t*t),j()):Il($)},C.fitExtent=function(t,e){return pf(C,t,e)},C.fitSize=function(t,e){return gf(C,t,e)},C.fitWidth=function(t,e){return vf(C,t,e)},C.fitHeight=function(t,e){return bf(C,t,e)},function(){return e=t.apply(this,arguments),C.invert=e.invert&&S,D()}}function Sf(t){var e=0,i=gl/3,a=Cf(t),n=a(e,i);return n.parallels=function(t){return arguments.length?a(e=t[0]*yl,i=t[1]*yl):[e*wl,i*wl]},n}function Df(t,e){var i=Ol(t),a=(i+Ol(e))/2;if(xl(a)<ml)return function(t){var e=Cl(t);function i(t,i){return[t*e,Ol(i)/e]}return i.invert=function(t,i){return[t/e,Rl(i*e)]},i}(t);var n=1+i*(2*a-i),r=Il(n)/a;function o(t,e){var i=Il(n-2*a*Ol(e))/a;return[i*Ol(t*=a),r-i*Cl(t)]}return o.invert=function(t,e){var i=r-e;return[$l(t,xl(i))/a*Tl(i),Rl((n-(t*t+i*i)*a*a)/(2*a))]},o}var jf=function(){return Sf(Df).scale(155.424).center([0,33.6442])},Nf=function(){return jf().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])};var Of=function(){var t,e,i,a,n,r,o=Nf(),s=jf().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=jf().rotate([157,0]).center([-3,19.9]).parallels([8,18]),c={point:function(t,e){r=[t,e]}};function d(t){var e=t[0],o=t[1];return r=null,i.point(e,o),r||(a.point(e,o),r)||(n.point(e,o),r)}function u(){return t=e=null,d}return d.invert=function(t){var e=o.scale(),i=o.translate(),a=(t[0]-i[0])/e,n=(t[1]-i[1])/e;return(n>=.12&&n<.234&&a>=-.425&&a<-.214?s:n>=.166&&n<.234&&a>=-.214&&a<-.115?l:o).invert(t)},d.stream=function(i){return t&&e===i?t:(a=[o.stream(e=i),s.stream(i),l.stream(i)],n=a.length,t={point:function(t,e){for(var i=-1;++i<n;)a[i].point(t,e)},sphere:function(){for(var t=-1;++t<n;)a[t].sphere()},lineStart:function(){for(var t=-1;++t<n;)a[t].lineStart()},lineEnd:function(){for(var t=-1;++t<n;)a[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<n;)a[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<n;)a[t].polygonEnd()}});var a,n},d.precision=function(t){return arguments.length?(o.precision(t),s.precision(t),l.precision(t),u()):o.precision()},d.scale=function(t){return arguments.length?(o.scale(t),s.scale(.35*t),l.scale(t),d.translate(o.translate())):o.scale()},d.translate=function(t){if(!arguments.length)return o.translate();var e=o.scale(),r=+t[0],d=+t[1];return i=o.translate(t).clipExtent([[r-.455*e,d-.238*e],[r+.455*e,d+.238*e]]).stream(c),a=s.translate([r-.307*e,d+.201*e]).clipExtent([[r-.425*e+ml,d+.12*e+ml],[r-.214*e-ml,d+.234*e-ml]]).stream(c),n=l.translate([r-.205*e,d+.212*e]).clipExtent([[r-.214*e+ml,d+.166*e+ml],[r-.115*e-ml,d+.234*e-ml]]).stream(c),u()},d.fitExtent=function(t,e){return pf(d,t,e)},d.fitSize=function(t,e){return gf(d,t,e)},d.fitWidth=function(t,e){return vf(d,t,e)},d.fitHeight=function(t,e){return bf(d,t,e)},d.scale(1070)};function Tf(t){return function(e,i){var a=Cl(e),n=Cl(i),r=t(a*n);return[r*n*Ol(e),r*Ol(i)]}}function If(t){return function(e,i){var a=Il(e*e+i*i),n=t(a),r=Ol(n),o=Cl(n);return[$l(e*r,a*o),Rl(a&&i*r/a)]}}var Lf=Tf(function(t){return Il(2/(1+t))});Lf.invert=If(function(t){return 2*Rl(t/2)});var Ef=function(){return $f(Lf).scale(124.75).clipAngle(179.999)},Rf=Tf(function(t){return(t=El(t))&&t/Ol(t)});Rf.invert=If(function(t){return t});var Af=function(){return $f(Rf).scale(79.4188).clipAngle(179.999)};function Mf(t,e){return[t,jl(Ll((vl+e)/2))]}Mf.invert=function(t,e){return[t,2*kl(Dl(e))-vl]};var Bf=function(){return Pf(Mf).scale(961/_l)};function Pf(t){var e,i,a,n=$f(t),r=n.center,o=n.scale,s=n.translate,l=n.clipExtent,c=null;function d(){var r=gl*o(),s=n(md(n.rotate()).invert([0,0]));return l(null==c?[[s[0]-r,s[1]-r],[s[0]+r,s[1]+r]]:t===Mf?[[Math.max(s[0]-r,c),e],[Math.min(s[0]+r,i),a]]:[[c,Math.max(s[1]-r,e)],[i,Math.min(s[1]+r,a)]])}return n.scale=function(t){return arguments.length?(o(t),d()):o()},n.translate=function(t){return arguments.length?(s(t),d()):s()},n.center=function(t){return arguments.length?(r(t),d()):r()},n.clipExtent=function(t){return arguments.length?(null==t?c=e=i=a=null:(c=+t[0][0],e=+t[0][1],i=+t[1][0],a=+t[1][1]),d()):null==c?null:[[c,e],[i,a]]},d()}function qf(t){return Ll((vl+t)/2)}function Uf(t,e){var i=Cl(t),a=t===e?Ol(t):jl(i/Cl(e))/jl(qf(e)/qf(t)),n=i*Nl(qf(t),a)/a;if(!a)return Mf;function r(t,e){n>0?e<-vl+ml&&(e=-vl+ml):e>vl-ml&&(e=vl-ml);var i=n/Nl(qf(e),a);return[i*Ol(a*t),n-i*Cl(a*t)]}return r.invert=function(t,e){var i=n-e,r=Tl(a)*Il(t*t+i*i);return[$l(t,xl(i))/a*Tl(i),2*kl(Nl(n/r,1/a))-vl]},r}var Vf=function(){return Sf(Uf).scale(109.5).parallels([30,30])};function Gf(t,e){return[t,e]}Gf.invert=Gf;var Ff=function(){return $f(Gf).scale(152.63)};function Hf(t,e){var i=Cl(t),a=t===e?Ol(t):(i-Cl(e))/(e-t),n=i/a+t;if(xl(a)<ml)return Gf;function r(t,e){var i=n-e,r=a*t;return[i*Ol(r),n-i*Cl(r)]}return r.invert=function(t,e){var i=n-e;return[$l(t,xl(i))/a*Tl(i),n-Tl(a)*Il(t*t+i*i)]},r}var zf=function(){return Sf(Hf).scale(131.154).center([0,13.9389])},Wf=1.340264,Jf=-.081106,Yf=893e-6,Xf=.003796,Zf=Il(3)/2;function Kf(t,e){var i=Rl(Zf*Ol(e)),a=i*i,n=a*a*a;return[t*Cl(i)/(Zf*(Wf+3*Jf*a+n*(7*Yf+9*Xf*a))),i*(Wf+Jf*a+n*(Yf+Xf*a))]}Kf.invert=function(t,e){for(var i,a=e,n=a*a,r=n*n*n,o=0;o<12&&(r=(n=(a-=i=(a*(Wf+Jf*n+r*(Yf+Xf*n))-e)/(Wf+3*Jf*n+r*(7*Yf+9*Xf*n)))*a)*n*n,!(xl(i)<pl));++o);return[Zf*t*(Wf+3*Jf*n+r*(7*Yf+9*Xf*n))/Cl(a),Rl(Ol(a)/Zf)]};var Qf=function(){return $f(Kf).scale(177.158)};function th(t,e){var i=Cl(e),a=Cl(t)*i;return[i*Ol(t)/a,Ol(e)/a]}th.invert=If(kl);var eh=function(){return $f(th).scale(144.049).clipAngle(60)};function ih(t,e,i,a){return 1===t&&1===e&&0===i&&0===a?fu:ff({point:function(n,r){this.stream.point(n*t+i,r*e+a)}})}var ah=function(){var t,e,i,a,n,r,o=1,s=0,l=0,c=1,d=1,u=fu,f=null,h=fu;function m(){return a=n=null,r}return r={stream:function(t){return a&&n===t?a:a=u(h(n=t))},postclip:function(a){return arguments.length?(h=a,f=t=e=i=null,m()):h},clipExtent:function(a){return arguments.length?(h=null==a?(f=t=e=i=null,fu):Ed(f=+a[0][0],t=+a[0][1],e=+a[1][0],i=+a[1][1]),m()):null==f?null:[[f,t],[e,i]]},scale:function(t){return arguments.length?(u=ih((o=+t)*c,o*d,s,l),m()):o},translate:function(t){return arguments.length?(u=ih(o*c,o*d,s=+t[0],l=+t[1]),m()):[s,l]},reflectX:function(t){return arguments.length?(u=ih(o*(c=t?-1:1),o*d,s,l),m()):c<0},reflectY:function(t){return arguments.length?(u=ih(o*c,o*(d=t?-1:1),s,l),m()):d<0},fitExtent:function(t,e){return pf(r,t,e)},fitSize:function(t,e){return gf(r,t,e)},fitWidth:function(t,e){return vf(r,t,e)},fitHeight:function(t,e){return bf(r,t,e)}}};function nh(t,e){var i=e*e,a=i*i;return[t*(.8707-.131979*i+a*(a*(.003971*i-.001529*a)-.013791)),e*(1.007226+i*(.015085+a*(.028874*i-.044475-.005916*a)))]}nh.invert=function(t,e){var i,a=e,n=25;do{var r=a*a,o=r*r;a-=i=(a*(1.007226+r*(.015085+o*(.028874*r-.044475-.005916*o)))-e)/(1.007226+r*(.045255+o*(.259866*r-.311325-.005916*11*o)))}while(xl(i)>ml&&--n>0);return[t/(.8707+(r=a*a)*(r*(r*r*r*(.003971-.001529*r)-.013791)-.131979)),a]};var rh=function(){return $f(nh).scale(175.295)};function oh(t,e){return[Cl(e)*Ol(t),Ol(e)]}oh.invert=If(Rl);var sh=function(){return $f(oh).scale(249.5).clipAngle(90+ml)};function lh(t,e){var i=Cl(e),a=1+Cl(t)*i;return[i*Ol(t)/a,Ol(e)/a]}lh.invert=If(function(t){return 2*kl(t)});var ch=function(){return $f(lh).scale(250).clipAngle(142)};function dh(t,e){return[jl(Ll((vl+e)/2)),-t]}dh.invert=function(t,e){return[-e,2*kl(Dl(t))-vl]};var uh=function(){var t=Pf(dh),e=t.center,i=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):[(t=e())[1],-t[0]]},t.rotate=function(t){return arguments.length?i([t[0],t[1],t.length>2?t[2]+90:90]):[(t=i())[0],t[1],t[2]-90]},i([0,0,90]).scale(159.155)};function fh(t,e){return t.parent===e.parent?1:2}function hh(t,e){return t+e.x}function mh(t,e){return Math.max(t,e.y)}var ph=function(){var t=fh,e=1,i=1,a=!1;function n(n){var r,o=0;n.eachAfter(function(e){var i,a=e.children;a?(e.x=(i=a).reduce(hh,0)/i.length,e.y=1+a.reduce(mh,0)):(e.x=r?o+=t(e,r):0,e.y=0,r=e)});var s=function(t){for(var e;e=t.children;)t=e[0];return t}(n),l=function(t){for(var e;e=t.children;)t=e[e.length-1];return t}(n),c=s.x-t(s,l)/2,d=l.x+t(l,s)/2;return n.eachAfter(a?function(t){t.x=(t.x-n.x)*e,t.y=(n.y-t.y)*i}:function(t){t.x=(t.x-c)/(d-c)*e,t.y=(1-(n.y?t.y/n.y:1))*i})}return n.separation=function(e){return arguments.length?(t=e,n):t},n.size=function(t){return arguments.length?(a=!1,e=+t[0],i=+t[1],n):a?null:[e,i]},n.nodeSize=function(t){return arguments.length?(a=!0,e=+t[0],i=+t[1],n):a?[e,i]:null},n};function gh(t){var e=0,i=t.children,a=i&&i.length;if(a)for(;--a>=0;)e+=i[a].value;else e=1;t.value=e}function vh(t,e){var i,a,n,r,o,s=new yh(t),l=+t.value&&(s.value=t.value),c=[s];for(null==e&&(e=bh);i=c.pop();)if(l&&(i.value=+i.data.value),(n=e(i.data))&&(o=n.length))for(i.children=new Array(o),r=o-1;r>=0;--r)c.push(a=i.children[r]=new yh(n[r])),a.parent=i,a.depth=i.depth+1;return s.eachBefore(wh)}function bh(t){return t.children}function _h(t){t.data=t.data.data}function wh(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function yh(t){this.data=t,this.depth=this.height=0,this.parent=null}yh.prototype=vh.prototype={constructor:yh,count:function(){return this.eachAfter(gh)},each:function(t){var e,i,a,n,r=this,o=[r];do{for(e=o.reverse(),o=[];r=e.pop();)if(t(r),i=r.children)for(a=0,n=i.length;a<n;++a)o.push(i[a])}while(o.length);return this},eachAfter:function(t){for(var e,i,a,n=this,r=[n],o=[];n=r.pop();)if(o.push(n),e=n.children)for(i=0,a=e.length;i<a;++i)r.push(e[i]);for(;n=o.pop();)t(n);return this},eachBefore:function(t){for(var e,i,a=this,n=[a];a=n.pop();)if(t(a),e=a.children)for(i=e.length-1;i>=0;--i)n.push(e[i]);return this},sum:function(t){return this.eachAfter(function(e){for(var i=+t(e.data)||0,a=e.children,n=a&&a.length;--n>=0;)i+=a[n].value;e.value=i})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,i=function(t,e){if(t===e)return t;var i=t.ancestors(),a=e.ancestors(),n=null;for(t=i.pop(),e=a.pop();t===e;)n=t,t=i.pop(),e=a.pop();return n}(e,t),a=[e];e!==i;)e=e.parent,a.push(e);for(var n=a.length;t!==i;)a.splice(n,0,t),t=t.parent;return a},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){var t=[];return this.each(function(e){t.push(e)}),t},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(i){i!==t&&e.push({source:i.parent,target:i})}),e},copy:function(){return vh(this).eachBefore(_h)}};var xh=Array.prototype.slice;var kh=function(t){for(var e,i,a=0,n=(t=function(t){for(var e,i,a=t.length;a;)i=Math.random()*a--|0,e=t[a],t[a]=t[i],t[i]=e;return t}(xh.call(t))).length,r=[];a<n;)e=t[a],i&&Sh(i,e)?++a:(i=jh(r=$h(r,e)),a=0);return i};function $h(t,e){var i,a;if(Dh(e,t))return[e];for(i=0;i<t.length;++i)if(Ch(e,t[i])&&Dh(Nh(t[i],e),t))return[t[i],e];for(i=0;i<t.length-1;++i)for(a=i+1;a<t.length;++a)if(Ch(Nh(t[i],t[a]),e)&&Ch(Nh(t[i],e),t[a])&&Ch(Nh(t[a],e),t[i])&&Dh(Oh(t[i],t[a],e),t))return[t[i],t[a],e];throw new Error}function Ch(t,e){var i=t.r-e.r,a=e.x-t.x,n=e.y-t.y;return i<0||i*i<a*a+n*n}function Sh(t,e){var i=t.r-e.r+1e-6,a=e.x-t.x,n=e.y-t.y;return i>0&&i*i>a*a+n*n}function Dh(t,e){for(var i=0;i<e.length;++i)if(!Sh(t,e[i]))return!1;return!0}function jh(t){switch(t.length){case 1:return{x:(e=t[0]).x,y:e.y,r:e.r};case 2:return Nh(t[0],t[1]);case 3:return Oh(t[0],t[1],t[2])}var e}function Nh(t,e){var i=t.x,a=t.y,n=t.r,r=e.x,o=e.y,s=e.r,l=r-i,c=o-a,d=s-n,u=Math.sqrt(l*l+c*c);return{x:(i+r+l/u*d)/2,y:(a+o+c/u*d)/2,r:(u+n+s)/2}}function Oh(t,e,i){var a=t.x,n=t.y,r=t.r,o=e.x,s=e.y,l=e.r,c=i.x,d=i.y,u=i.r,f=a-o,h=a-c,m=n-s,p=n-d,g=l-r,v=u-r,b=a*a+n*n-r*r,_=b-o*o-s*s+l*l,w=b-c*c-d*d+u*u,y=h*m-f*p,x=(m*w-p*_)/(2*y)-a,k=(p*g-m*v)/y,$=(h*_-f*w)/(2*y)-n,C=(f*v-h*g)/y,S=k*k+C*C-1,D=2*(r+x*k+$*C),j=x*x+$*$-r*r,N=-(S?(D+Math.sqrt(D*D-4*S*j))/(2*S):j/D);return{x:a+x+k*N,y:n+$+C*N,r:N}}function Th(t,e,i){var a,n,r,o,s=t.x-e.x,l=t.y-e.y,c=s*s+l*l;c?(n=e.r+i.r,n*=n,o=t.r+i.r,n>(o*=o)?(a=(c+o-n)/(2*c),r=Math.sqrt(Math.max(0,o/c-a*a)),i.x=t.x-a*s-r*l,i.y=t.y-a*l+r*s):(a=(c+n-o)/(2*c),r=Math.sqrt(Math.max(0,n/c-a*a)),i.x=e.x+a*s-r*l,i.y=e.y+a*l+r*s)):(i.x=e.x+i.r,i.y=e.y)}function Ih(t,e){var i=t.r+e.r-1e-6,a=e.x-t.x,n=e.y-t.y;return i>0&&i*i>a*a+n*n}function Lh(t){var e=t._,i=t.next._,a=e.r+i.r,n=(e.x*i.r+i.x*e.r)/a,r=(e.y*i.r+i.y*e.r)/a;return n*n+r*r}function Eh(t){this._=t,this.next=null,this.previous=null}function Rh(t){if(!(n=t.length))return 0;var e,i,a,n,r,o,s,l,c,d,u;if((e=t[0]).x=0,e.y=0,!(n>1))return e.r;if(i=t[1],e.x=-i.r,i.x=e.r,i.y=0,!(n>2))return e.r+i.r;Th(i,e,a=t[2]),e=new Eh(e),i=new Eh(i),a=new Eh(a),e.next=a.previous=i,i.next=e.previous=a,a.next=i.previous=e;t:for(s=3;s<n;++s){Th(e._,i._,a=t[s]),a=new Eh(a),l=i.next,c=e.previous,d=i._.r,u=e._.r;do{if(d<=u){if(Ih(l._,a._)){i=l,e.next=i,i.previous=e,--s;continue t}d+=l._.r,l=l.next}else{if(Ih(c._,a._)){(e=c).next=i,i.previous=e,--s;continue t}u+=c._.r,c=c.previous}}while(l!==c.next);for(a.previous=e,a.next=i,e.next=i.previous=i=a,r=Lh(e);(a=a.next)!==i;)(o=Lh(a))<r&&(e=a,r=o);i=e.next}for(e=[i._],a=i;(a=a.next)!==i;)e.push(a._);for(a=kh(e),s=0;s<n;++s)e=t[s],e.x-=a.x,e.y-=a.y;return a.r}var Ah=function(t){return Rh(t),t};function Mh(t){if("function"!=typeof t)throw new Error;return t}function Bh(){return 0}var Ph=function(t){return function(){return t}};function qh(t){return Math.sqrt(t.value)}var Uh=function(){var t=null,e=1,i=1,a=Bh;function n(n){return n.x=e/2,n.y=i/2,t?n.eachBefore(Vh(t)).eachAfter(Gh(a,.5)).eachBefore(Fh(1)):n.eachBefore(Vh(qh)).eachAfter(Gh(Bh,1)).eachAfter(Gh(a,n.r/Math.min(e,i))).eachBefore(Fh(Math.min(e,i)/(2*n.r))),n}return n.radius=function(e){return arguments.length?(t=null==(i=e)?null:Mh(i),n):t;var i},n.size=function(t){return arguments.length?(e=+t[0],i=+t[1],n):[e,i]},n.padding=function(t){return arguments.length?(a="function"==typeof t?t:Ph(+t),n):a},n};function Vh(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Gh(t,e){return function(i){if(a=i.children){var a,n,r,o=a.length,s=t(i)*e||0;if(s)for(n=0;n<o;++n)a[n].r+=s;if(r=Rh(a),s)for(n=0;n<o;++n)a[n].r-=s;i.r=r+s}}}function Fh(t){return function(e){var i=e.parent;e.r*=t,i&&(e.x=i.x+t*e.x,e.y=i.y+t*e.y)}}var Hh=function(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)},zh=function(t,e,i,a,n){for(var r,o=t.children,s=-1,l=o.length,c=t.value&&(a-e)/t.value;++s<l;)(r=o[s]).y0=i,r.y1=n,r.x0=e,r.x1=e+=r.value*c},Wh=function(){var t=1,e=1,i=0,a=!1;function n(n){var r,o,s=n.height+1;return n.x0=n.y0=i,n.x1=t,n.y1=e/s,n.eachBefore((r=e,o=s,function(t){t.children&&zh(t,t.x0,r*(t.depth+1)/o,t.x1,r*(t.depth+2)/o);var e=t.x0,a=t.y0,n=t.x1-i,s=t.y1-i;n<e&&(e=n=(e+n)/2),s<a&&(a=s=(a+s)/2),t.x0=e,t.y0=a,t.x1=n,t.y1=s})),a&&n.eachBefore(Hh),n}return n.round=function(t){return arguments.length?(a=!!t,n):a},n.size=function(i){return arguments.length?(t=+i[0],e=+i[1],n):[t,e]},n.padding=function(t){return arguments.length?(i=+t,n):i},n},Jh="$",Yh={depth:-1},Xh={};function Zh(t){return t.id}function Kh(t){return t.parentId}var Qh=function(){var t=Zh,e=Kh;function i(i){var a,n,r,o,s,l,c,d=i.length,u=new Array(d),f={};for(n=0;n<d;++n)a=i[n],s=u[n]=new yh(a),null!=(l=t(a,n,i))&&(l+="")&&(f[c=Jh+(s.id=l)]=c in f?Xh:s);for(n=0;n<d;++n)if(s=u[n],null!=(l=e(i[n],n,i))&&(l+="")){if(!(o=f[Jh+l]))throw new Error("missing: "+l);if(o===Xh)throw new Error("ambiguous: "+l);o.children?o.children.push(s):o.children=[s],s.parent=o}else{if(r)throw new Error("multiple roots");r=s}if(!r)throw new Error("no root");if(r.parent=Yh,r.eachBefore(function(t){t.depth=t.parent.depth+1,--d}).eachBefore(wh),r.parent=null,d>0)throw new Error("cycle");return r}return i.id=function(e){return arguments.length?(t=Mh(e),i):t},i.parentId=function(t){return arguments.length?(e=Mh(t),i):e},i};function tm(t,e){return t.parent===e.parent?1:2}function em(t){var e=t.children;return e?e[0]:t.t}function im(t){var e=t.children;return e?e[e.length-1]:t.t}function am(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}am.prototype=Object.create(yh.prototype);var nm=function(){var t=tm,e=1,i=1,a=null;function n(n){var l=function(t){for(var e,i,a,n,r,o=new am(t,0),s=[o];e=s.pop();)if(a=e._.children)for(e.children=new Array(r=a.length),n=r-1;n>=0;--n)s.push(i=e.children[n]=new am(a[n],n)),i.parent=e;return(o.parent=new am(null,0)).children=[o],o}(n);if(l.eachAfter(r),l.parent.m=-l.z,l.eachBefore(o),a)n.eachBefore(s);else{var c=n,d=n,u=n;n.eachBefore(function(t){t.x<c.x&&(c=t),t.x>d.x&&(d=t),t.depth>u.depth&&(u=t)});var f=c===d?1:t(c,d)/2,h=f-c.x,m=e/(d.x+f+h),p=i/(u.depth||1);n.eachBefore(function(t){t.x=(t.x+h)*m,t.y=t.depth*p})}return n}function r(e){var i=e.children,a=e.parent.children,n=e.i?a[e.i-1]:null;if(i){!function(t){for(var e,i=0,a=0,n=t.children,r=n.length;--r>=0;)(e=n[r]).z+=i,e.m+=i,i+=e.s+(a+=e.c)}(e);var r=(i[0].z+i[i.length-1].z)/2;n?(e.z=n.z+t(e._,n._),e.m=e.z-r):e.z=r}else n&&(e.z=n.z+t(e._,n._));e.parent.A=function(e,i,a){if(i){for(var n,r=e,o=e,s=i,l=r.parent.children[0],c=r.m,d=o.m,u=s.m,f=l.m;s=im(s),r=em(r),s&&r;)l=em(l),(o=im(o)).a=e,(n=s.z+u-r.z-c+t(s._,r._))>0&&(b=e,_=a,h=(v=s).a.parent===b.parent?v.a:_,void 0,g=(p=n)/((m=e).i-h.i),m.c-=g,m.s+=p,h.c+=g,m.z+=p,m.m+=p,c+=n,d+=n),u+=s.m,c+=r.m,f+=l.m,d+=o.m;s&&!im(o)&&(o.t=s,o.m+=u-d),r&&!em(l)&&(l.t=r,l.m+=c-f,a=e)}var h,m,p,g;var v,b,_;return a}(e,n,e.parent.A||a[0])}function o(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function s(t){t.x*=e,t.y=t.depth*i}return n.separation=function(e){return arguments.length?(t=e,n):t},n.size=function(t){return arguments.length?(a=!1,e=+t[0],i=+t[1],n):a?null:[e,i]},n.nodeSize=function(t){return arguments.length?(a=!0,e=+t[0],i=+t[1],n):a?[e,i]:null},n},rm=function(t,e,i,a,n){for(var r,o=t.children,s=-1,l=o.length,c=t.value&&(n-i)/t.value;++s<l;)(r=o[s]).x0=e,r.x1=a,r.y0=i,r.y1=i+=r.value*c},om=(1+Math.sqrt(5))/2;function sm(t,e,i,a,n,r){for(var o,s,l,c,d,u,f,h,m,p,g,v=[],b=e.children,_=0,w=0,y=b.length,x=e.value;_<y;){l=n-i,c=r-a;do{d=b[w++].value}while(!d&&w<y);for(u=f=d,g=d*d*(p=Math.max(c/l,l/c)/(x*t)),m=Math.max(f/g,g/u);w<y;++w){if(d+=s=b[w].value,s<u&&(u=s),s>f&&(f=s),g=d*d*p,(h=Math.max(f/g,g/u))>m){d-=s;break}m=h}v.push(o={value:d,dice:l<c,children:b.slice(_,w)}),o.dice?zh(o,i,a,n,x?a+=c*d/x:r):rm(o,i,a,x?i+=l*d/x:n,r),x-=d,_=w}return v}var lm=function t(e){function i(t,i,a,n,r){sm(e,t,i,a,n,r)}return i.ratio=function(e){return t((e=+e)>1?e:1)},i}(om),cm=function(){var t=lm,e=!1,i=1,a=1,n=[0],r=Bh,o=Bh,s=Bh,l=Bh,c=Bh;function d(t){return t.x0=t.y0=0,t.x1=i,t.y1=a,t.eachBefore(u),n=[0],e&&t.eachBefore(Hh),t}function u(e){var i=n[e.depth],a=e.x0+i,d=e.y0+i,u=e.x1-i,f=e.y1-i;u<a&&(a=u=(a+u)/2),f<d&&(d=f=(d+f)/2),e.x0=a,e.y0=d,e.x1=u,e.y1=f,e.children&&(i=n[e.depth+1]=r(e)/2,a+=c(e)-i,d+=o(e)-i,u-=s(e)-i,f-=l(e)-i,u<a&&(a=u=(a+u)/2),f<d&&(d=f=(d+f)/2),t(e,a,d,u,f))}return d.round=function(t){return arguments.length?(e=!!t,d):e},d.size=function(t){return arguments.length?(i=+t[0],a=+t[1],d):[i,a]},d.tile=function(e){return arguments.length?(t=Mh(e),d):t},d.padding=function(t){return arguments.length?d.paddingInner(t).paddingOuter(t):d.paddingInner()},d.paddingInner=function(t){return arguments.length?(r="function"==typeof t?t:Ph(+t),d):r},d.paddingOuter=function(t){return arguments.length?d.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):d.paddingTop()},d.paddingTop=function(t){return arguments.length?(o="function"==typeof t?t:Ph(+t),d):o},d.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:Ph(+t),d):s},d.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:Ph(+t),d):l},d.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:Ph(+t),d):c},d},dm=function(t,e,i,a,n){var r,o,s=t.children,l=s.length,c=new Array(l+1);for(c[0]=o=r=0;r<l;++r)c[r+1]=o+=s[r].value;!function t(e,i,a,n,r,o,l){if(e>=i-1){var d=s[e];return d.x0=n,d.y0=r,d.x1=o,void(d.y1=l)}var u=c[e],f=a/2+u,h=e+1,m=i-1;for(;h<m;){var p=h+m>>>1;c[p]<f?h=p+1:m=p}f-c[h-1]<c[h]-f&&e+1<h&&--h;var g=c[h]-u,v=a-g;if(o-n>l-r){var b=(n*v+o*g)/a;t(e,h,g,n,r,b,l),t(h,i,v,b,r,o,l)}else{var _=(r*v+l*g)/a;t(e,h,g,n,r,o,_),t(h,i,v,n,_,o,l)}}(0,l,t.value,e,i,a,n)},um=function(t,e,i,a,n){(1&t.depth?rm:zh)(t,e,i,a,n)},fm=function t(e){function i(t,i,a,n,r){if((o=t._squarify)&&o.ratio===e)for(var o,s,l,c,d,u=-1,f=o.length,h=t.value;++u<f;){for(l=(s=o[u]).children,c=s.value=0,d=l.length;c<d;++c)s.value+=l[c].value;s.dice?zh(s,i,a,n,a+=(r-a)*s.value/h):rm(s,i,a,i+=(n-i)*s.value/h,r),h-=s.value}else t._squarify=o=sm(e,t,i,a,n,r),o.ratio=e}return i.ratio=function(e){return t((e=+e)>1?e:1)},i}(om),hm=function(t){for(var e,i=-1,a=t.length,n=t[a-1],r=0;++i<a;)e=n,n=t[i],r+=e[1]*n[0]-e[0]*n[1];return r/2},mm=function(t){for(var e,i,a=-1,n=t.length,r=0,o=0,s=t[n-1],l=0;++a<n;)e=s,s=t[a],l+=i=e[0]*s[1]-s[0]*e[1],r+=(e[0]+s[0])*i,o+=(e[1]+s[1])*i;return[r/(l*=3),o/l]},pm=function(t,e,i){return(e[0]-t[0])*(i[1]-t[1])-(e[1]-t[1])*(i[0]-t[0])};function gm(t,e){return t[0]-e[0]||t[1]-e[1]}function vm(t){for(var e=t.length,i=[0,1],a=2,n=2;n<e;++n){for(;a>1&&pm(t[i[a-2]],t[i[a-1]],t[n])<=0;)--a;i[a++]=n}return i.slice(0,a)}var bm=function(t){if((i=t.length)<3)return null;var e,i,a=new Array(i),n=new Array(i);for(e=0;e<i;++e)a[e]=[+t[e][0],+t[e][1],e];for(a.sort(gm),e=0;e<i;++e)n[e]=[a[e][0],-a[e][1]];var r=vm(a),o=vm(n),s=o[0]===r[0],l=o[o.length-1]===r[r.length-1],c=[];for(e=r.length-1;e>=0;--e)c.push(t[a[r[e]][2]]);for(e=+s;e<o.length-l;++e)c.push(t[a[o[e]][2]]);return c},_m=function(t,e){for(var i,a,n=t.length,r=t[n-1],o=e[0],s=e[1],l=r[0],c=r[1],d=!1,u=0;u<n;++u)i=(r=t[u])[0],(a=r[1])>s!=c>s&&o<(l-i)*(s-a)/(c-a)+i&&(d=!d),l=i,c=a;return d},wm=function(t){for(var e,i,a=-1,n=t.length,r=t[n-1],o=r[0],s=r[1],l=0;++a<n;)e=o,i=s,e-=o=(r=t[a])[0],i-=s=r[1],l+=Math.sqrt(e*e+i*i);return l},ym=function(){return Math.random()},xm=function t(e){function i(t,i){return t=null==t?0:+t,i=null==i?1:+i,1===arguments.length?(i=t,t=0):i-=t,function(){return e()*i+t}}return i.source=t,i}(ym),km=function t(e){function i(t,i){var a,n;return t=null==t?0:+t,i=null==i?1:+i,function(){var r;if(null!=a)r=a,a=null;else do{a=2*e()-1,r=2*e()-1,n=a*a+r*r}while(!n||n>1);return t+i*r*Math.sqrt(-2*Math.log(n)/n)}}return i.source=t,i}(ym),$m=function t(e){function i(){var t=km.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(ym),Cm=function t(e){function i(t){return function(){for(var i=0,a=0;a<t;++a)i+=e();return i}}return i.source=t,i}(ym),Sm=function t(e){function i(t){var i=Cm.source(e)(t);return function(){return i()/t}}return i.source=t,i}(ym),Dm=function t(e){function i(t){return function(){return-Math.log(1-e())/t}}return i.source=t,i}(ym);function jm(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Nm(t,e){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(e).domain(t)}return this}var Om=Array.prototype,Tm=Om.map,Im=Om.slice,Lm={name:"implicit"};function Em(){var t=ao(),e=[],i=[],a=Lm;function n(n){var r=n+"",o=t.get(r);if(!o){if(a!==Lm)return a;t.set(r,o=e.push(n))}return i[(o-1)%i.length]}return n.domain=function(i){if(!arguments.length)return e.slice();e=[],t=ao();for(var a,r,o=-1,s=i.length;++o<s;)t.has(r=(a=i[o])+"")||t.set(r,e.push(a));return n},n.range=function(t){return arguments.length?(i=Im.call(t),n):i.slice()},n.unknown=function(t){return arguments.length?(a=t,n):a},n.copy=function(){return Em(e,i).unknown(a)},jm.apply(n,arguments),n}function Rm(){var t,e,i=Em().unknown(void 0),a=i.domain,n=i.range,r=[0,1],o=!1,s=0,l=0,c=.5;function d(){var i=a().length,d=r[1]<r[0],u=r[d-0],f=r[1-d];t=(f-u)/Math.max(1,i-s+2*l),o&&(t=Math.floor(t)),u+=(f-u-t*(i-s))*c,e=t*(1-s),o&&(u=Math.round(u),e=Math.round(e));var h=x(i).map(function(e){return u+t*e});return n(d?h.reverse():h)}return delete i.unknown,i.domain=function(t){return arguments.length?(a(t),d()):a()},i.range=function(t){return arguments.length?(r=[+t[0],+t[1]],d()):r.slice()},i.rangeRound=function(t){return r=[+t[0],+t[1]],o=!0,d()},i.bandwidth=function(){return e},i.step=function(){return t},i.round=function(t){return arguments.length?(o=!!t,d()):o},i.padding=function(t){return arguments.length?(s=Math.min(1,l=+t),d()):s},i.paddingInner=function(t){return arguments.length?(s=Math.min(1,t),d()):s},i.paddingOuter=function(t){return arguments.length?(l=+t,d()):l},i.align=function(t){return arguments.length?(c=Math.max(0,Math.min(1,t)),d()):c},i.copy=function(){return Rm(a(),r).round(o).paddingInner(s).paddingOuter(l).align(c)},jm.apply(d(),arguments)}function Am(){return function t(e){var i=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return t(i())},e}(Rm.apply(null,arguments).paddingInner(1))}var Mm=function(t){return function(){return t}},Bm=function(t){return+t},Pm=[0,1];function qm(t){return t}function Um(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:Mm(isNaN(e)?NaN:.5)}function Vm(t){var e,i=t[0],a=t[t.length-1];return i>a&&(e=i,i=a,a=e),function(t){return Math.max(i,Math.min(a,t))}}function Gm(t,e,i){var a=t[0],n=t[1],r=e[0],o=e[1];return n<a?(a=Um(n,a),r=i(o,r)):(a=Um(a,n),r=i(r,o)),function(t){return r(a(t))}}function Fm(t,e,i){var a=Math.min(t.length,e.length)-1,n=new Array(a),r=new Array(a),o=-1;for(t[a]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<a;)n[o]=Um(t[o],t[o+1]),r[o]=i(e[o],e[o+1]);return function(e){var i=l(t,e,1,a)-1;return r[i](n[i](e))}}function Hm(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function zm(){var t,e,i,a,n,r,o=Pm,s=Pm,l=Qi,c=qm;function d(){return a=Math.min(o.length,s.length)>2?Fm:Gm,n=r=null,u}function u(e){return isNaN(e=+e)?i:(n||(n=a(o.map(t),s,l)))(t(c(e)))}return u.invert=function(i){return c(e((r||(r=a(s,o.map(t),Fi)))(i)))},u.domain=function(t){return arguments.length?(o=Tm.call(t,Bm),c===qm||(c=Vm(o)),d()):o.slice()},u.range=function(t){return arguments.length?(s=Im.call(t),d()):s.slice()},u.rangeRound=function(t){return s=Im.call(t),l=ia,d()},u.clamp=function(t){return arguments.length?(c=t?Vm(o):qm,u):c!==qm},u.interpolate=function(t){return arguments.length?(l=t,d()):l},u.unknown=function(t){return arguments.length?(i=t,u):i},function(i,a){return t=i,e=a,d()}}function Wm(t,e){return zm()(t,e)}var Jm=function(t,e,i,a){var n,r=j(t,e,i);switch((a=Ws(null==a?",f":a)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=a.precision||isNaN(n=ll(r,o))||(a.precision=n),Ks(a,o);case"":case"e":case"g":case"p":case"r":null!=a.precision||isNaN(n=cl(r,Math.max(Math.abs(t),Math.abs(e))))||(a.precision=n-("e"===a.type));break;case"f":case"%":null!=a.precision||isNaN(n=sl(r))||(a.precision=n-2*("%"===a.type))}return Zs(a)};function Ym(t){var e=t.domain;return t.ticks=function(t){var i=e();return S(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var a=e();return Jm(a[0],a[a.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var a,n=e(),r=0,o=n.length-1,s=n[r],l=n[o];return l<s&&(a=s,s=l,l=a,a=r,r=o,o=a),(a=D(s,l,i))>0?a=D(s=Math.floor(s/a)*a,l=Math.ceil(l/a)*a,i):a<0&&(a=D(s=Math.ceil(s*a)/a,l=Math.floor(l*a)/a,i)),a>0?(n[r]=Math.floor(s/a)*a,n[o]=Math.ceil(l/a)*a,e(n)):a<0&&(n[r]=Math.ceil(s*a)/a,n[o]=Math.floor(l*a)/a,e(n)),t},t}function Xm(){var t=Wm(qm,qm);return t.copy=function(){return Hm(t,Xm())},jm.apply(t,arguments),Ym(t)}function Zm(t){var e;function i(t){return isNaN(t=+t)?e:t}return i.invert=i,i.domain=i.range=function(e){return arguments.length?(t=Tm.call(e,Bm),i):t.slice()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Zm(t).unknown(e)},t=arguments.length?Tm.call(t,Bm):[0,1],Ym(i)}var Km=function(t,e){var i,a=0,n=(t=t.slice()).length-1,r=t[a],o=t[n];return o<r&&(i=a,a=n,n=i,i=r,r=o,o=i),t[a]=e.floor(r),t[n]=e.ceil(o),t};function Qm(t){return Math.log(t)}function tp(t){return Math.exp(t)}function ep(t){return-Math.log(-t)}function ip(t){return-Math.exp(-t)}function ap(t){return isFinite(t)?+("1e"+t):t<0?0:t}function np(t){return function(e){return-t(-e)}}function rp(t){var e,i,a=t(Qm,tp),n=a.domain,r=10;function o(){var o,s;return e=(s=r)===Math.E?Math.log:10===s&&Math.log10||2===s&&Math.log2||(s=Math.log(s),function(t){return Math.log(t)/s}),i=10===(o=r)?ap:o===Math.E?Math.exp:function(t){return Math.pow(o,t)},n()[0]<0?(e=np(e),i=np(i),t(ep,ip)):t(Qm,tp),a}return a.base=function(t){return arguments.length?(r=+t,o()):r},a.domain=function(t){return arguments.length?(n(t),o()):n()},a.ticks=function(t){var a,o=n(),s=o[0],l=o[o.length-1];(a=l<s)&&(f=s,s=l,l=f);var c,d,u,f=e(s),h=e(l),m=null==t?10:+t,p=[];if(!(r%1)&&h-f<m){if(f=Math.round(f)-1,h=Math.round(h)+1,s>0){for(;f<h;++f)for(d=1,c=i(f);d<r;++d)if(!((u=c*d)<s)){if(u>l)break;p.push(u)}}else for(;f<h;++f)for(d=r-1,c=i(f);d>=1;--d)if(!((u=c*d)<s)){if(u>l)break;p.push(u)}}else p=S(f,h,Math.min(h-f,m)).map(i);return a?p.reverse():p},a.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=Zs(n)),t===1/0)return n;null==t&&(t=10);var o=Math.max(1,r*t/a.ticks().length);return function(t){var a=t/i(Math.round(e(t)));return a*r<r-.5&&(a*=r),a<=o?n(t):""}},a.nice=function(){return n(Km(n(),{floor:function(t){return i(Math.floor(e(t)))},ceil:function(t){return i(Math.ceil(e(t)))}}))},a}function op(){var t=rp(zm()).domain([1,10]);return t.copy=function(){return Hm(t,op()).base(t.base())},jm.apply(t,arguments),t}function sp(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function lp(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function cp(t){var e=1,i=t(sp(e),lp(e));return i.constant=function(i){return arguments.length?t(sp(e=+i),lp(e)):e},Ym(i)}function dp(){var t=cp(zm());return t.copy=function(){return Hm(t,dp()).constant(t.constant())},jm.apply(t,arguments)}function up(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function fp(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function hp(t){return t<0?-t*t:t*t}function mp(t){var e=t(qm,qm),i=1;return e.exponent=function(e){return arguments.length?1===(i=+e)?t(qm,qm):.5===i?t(fp,hp):t(up(i),up(1/i)):i},Ym(e)}function pp(){var t=mp(zm());return t.copy=function(){return Hm(t,pp()).exponent(t.exponent())},jm.apply(t,arguments),t}function gp(){return pp.apply(null,arguments).exponent(.5)}function vp(){var t,e=[],i=[],n=[];function r(){var t=0,a=Math.max(1,i.length);for(n=new Array(a-1);++t<a;)n[t-1]=T(e,t/a);return o}function o(e){return isNaN(e=+e)?t:i[l(n,e)]}return o.invertExtent=function(t){var a=i.indexOf(t);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var i,n=0,o=t.length;n<o;++n)i=t[n],null==i||isNaN(i=+i)||e.push(i);return e.sort(a),r()},o.range=function(t){return arguments.length?(i=Im.call(t),r()):i.slice()},o.unknown=function(e){return arguments.length?(t=e,o):t},o.quantiles=function(){return n.slice()},o.copy=function(){return vp().domain(e).range(i).unknown(t)},jm.apply(o,arguments)}function bp(){var t,e=0,i=1,a=1,n=[.5],r=[0,1];function o(e){return e<=e?r[l(n,e,0,a)]:t}function s(){var t=-1;for(n=new Array(a);++t<a;)n[t]=((t+1)*i-(t-a)*e)/(a+1);return o}return o.domain=function(t){return arguments.length?(e=+t[0],i=+t[1],s()):[e,i]},o.range=function(t){return arguments.length?(a=(r=Im.call(t)).length-1,s()):r.slice()},o.invertExtent=function(t){var o=r.indexOf(t);return o<0?[NaN,NaN]:o<1?[e,n[0]]:o>=a?[n[a-1],i]:[n[o-1],n[o]]},o.unknown=function(e){return arguments.length?(t=e,o):o},o.thresholds=function(){return n.slice()},o.copy=function(){return bp().domain([e,i]).range(r).unknown(t)},jm.apply(Ym(o),arguments)}function _p(){var t,e=[.5],i=[0,1],a=1;function n(n){return n<=n?i[l(e,n,0,a)]:t}return n.domain=function(t){return arguments.length?(e=Im.call(t),a=Math.min(e.length,i.length-1),n):e.slice()},n.range=function(t){return arguments.length?(i=Im.call(t),a=Math.min(e.length,i.length-1),n):i.slice()},n.invertExtent=function(t){var a=i.indexOf(t);return[e[a-1],e[a]]},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return _p().domain(e).range(i).unknown(t)},jm.apply(n,arguments)}var wp=new Date,yp=new Date;function xp(t,e,i,a){function n(e){return t(e=new Date(+e)),e}return n.floor=n,n.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i},n.round=function(t){var e=n(t),i=n.ceil(t);return t-e<i-t?e:i},n.offset=function(t,i){return e(t=new Date(+t),null==i?1:Math.floor(i)),t},n.range=function(i,a,r){var o,s=[];if(i=n.ceil(i),r=null==r?1:Math.floor(r),!(i<a&&r>0))return s;do{s.push(o=new Date(+i)),e(i,r),t(i)}while(o<i&&i<a);return s},n.filter=function(i){return xp(function(e){if(e>=e)for(;t(e),!i(e);)e.setTime(e-1)},function(t,a){if(t>=t)if(a<0)for(;++a<=0;)for(;e(t,-1),!i(t););else for(;--a>=0;)for(;e(t,1),!i(t););})},i&&(n.count=function(e,a){return wp.setTime(+e),yp.setTime(+a),t(wp),t(yp),Math.floor(i(wp,yp))},n.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?n.filter(a?function(e){return a(e)%t==0}:function(e){return n.count(0,e)%t==0}):n:null}),n}var kp=xp(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});kp.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?xp(function(e){e.setTime(Math.floor(e/t)*t)},function(e,i){e.setTime(+e+i*t)},function(e,i){return(i-e)/t}):kp:null};var $p=kp,Cp=kp.range,Sp=6e4,Dp=6048e5,jp=xp(function(t){t.setTime(t-t.getMilliseconds())},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),Np=jp,Op=jp.range,Tp=xp(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,e){t.setTime(+t+e*Sp)},function(t,e){return(e-t)/Sp},function(t){return t.getMinutes()}),Ip=Tp,Lp=Tp.range,Ep=xp(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Sp)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Rp=Ep,Ap=Ep.range,Mp=xp(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sp)/864e5},function(t){return t.getDate()-1}),Bp=Mp,Pp=Mp.range;function qp(t){return xp(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Sp)/Dp})}var Up=qp(0),Vp=qp(1),Gp=qp(2),Fp=qp(3),Hp=qp(4),zp=qp(5),Wp=qp(6),Jp=Up.range,Yp=Vp.range,Xp=Gp.range,Zp=Fp.range,Kp=Hp.range,Qp=zp.range,tg=Wp.range,eg=xp(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),ig=eg,ag=eg.range,ng=xp(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});ng.every=function(t){return isFinite(t=Math.floor(t))&&t>0?xp(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,i){e.setFullYear(e.getFullYear()+i*t)}):null};var rg=ng,og=ng.range,sg=xp(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Sp)},function(t,e){return(e-t)/Sp},function(t){return t.getUTCMinutes()}),lg=sg,cg=sg.range,dg=xp(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),ug=dg,fg=dg.range,hg=xp(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),mg=hg,pg=hg.range;function gg(t){return xp(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/Dp})}var vg=gg(0),bg=gg(1),_g=gg(2),wg=gg(3),yg=gg(4),xg=gg(5),kg=gg(6),$g=vg.range,Cg=bg.range,Sg=_g.range,Dg=wg.range,jg=yg.range,Ng=xg.range,Og=kg.range,Tg=xp(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Ig=Tg,Lg=Tg.range,Eg=xp(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Eg.every=function(t){return isFinite(t=Math.floor(t))&&t>0?xp(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)}):null};var Rg=Eg,Ag=Eg.range;function Mg(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Bg(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Pg(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function qg(t){var e=t.dateTime,i=t.date,a=t.time,n=t.periods,r=t.days,o=t.shortDays,s=t.months,l=t.shortMonths,c=Kg(n),d=Qg(n),u=Kg(r),f=Qg(r),h=Kg(o),m=Qg(o),p=Kg(s),g=Qg(s),v=Kg(l),b=Qg(l),_={a:function(t){return o[t.getDay()]},A:function(t){return r[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:_v,e:_v,f:$v,H:wv,I:yv,j:xv,L:kv,m:Cv,M:Sv,p:function(t){return n[+(t.getHours()>=12)]},Q:tb,s:eb,S:Dv,u:jv,U:Nv,V:Ov,w:Tv,W:Iv,x:null,X:null,y:Lv,Y:Ev,Z:Rv,"%":Qv},w={a:function(t){return o[t.getUTCDay()]},A:function(t){return r[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Av,e:Av,f:Uv,H:Mv,I:Bv,j:Pv,L:qv,m:Vv,M:Gv,p:function(t){return n[+(t.getUTCHours()>=12)]},Q:tb,s:eb,S:Fv,u:Hv,U:zv,V:Wv,w:Jv,W:Yv,x:null,X:null,y:Xv,Y:Zv,Z:Kv,"%":Qv},y={a:function(t,e,i){var a=h.exec(e.slice(i));return a?(t.w=m[a[0].toLowerCase()],i+a[0].length):-1},A:function(t,e,i){var a=u.exec(e.slice(i));return a?(t.w=f[a[0].toLowerCase()],i+a[0].length):-1},b:function(t,e,i){var a=v.exec(e.slice(i));return a?(t.m=b[a[0].toLowerCase()],i+a[0].length):-1},B:function(t,e,i){var a=p.exec(e.slice(i));return a?(t.m=g[a[0].toLowerCase()],i+a[0].length):-1},c:function(t,i,a){return $(t,e,i,a)},d:cv,e:cv,f:pv,H:uv,I:uv,j:dv,L:mv,m:lv,M:fv,p:function(t,e,i){var a=c.exec(e.slice(i));return a?(t.p=d[a[0].toLowerCase()],i+a[0].length):-1},Q:vv,s:bv,S:hv,u:ev,U:iv,V:av,w:tv,W:nv,x:function(t,e,a){return $(t,i,e,a)},X:function(t,e,i){return $(t,a,e,i)},y:ov,Y:rv,Z:sv,"%":gv};function x(t,e){return function(i){var a,n,r,o=[],s=-1,l=0,c=t.length;for(i instanceof Date||(i=new Date(+i));++s<c;)37===t.charCodeAt(s)&&(o.push(t.slice(l,s)),null!=(n=zg[a=t.charAt(++s)])?a=t.charAt(++s):n="e"===a?" ":"0",(r=e[a])&&(a=r(i,n)),o.push(a),l=s+1);return o.push(t.slice(l,s)),o.join("")}}function k(t,e){return function(i){var a,n,r=Pg(1900);if($(r,t,i+="",0)!=i.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||r.V>53)return null;"w"in r||(r.w=1),"Z"in r?(a=(n=(a=Bg(Pg(r.y))).getUTCDay())>4||0===n?bg.ceil(a):bg(a),a=mg.offset(a,7*(r.V-1)),r.y=a.getUTCFullYear(),r.m=a.getUTCMonth(),r.d=a.getUTCDate()+(r.w+6)%7):(a=(n=(a=e(Pg(r.y))).getDay())>4||0===n?Vp.ceil(a):Vp(a),a=Bp.offset(a,7*(r.V-1)),r.y=a.getFullYear(),r.m=a.getMonth(),r.d=a.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?Bg(Pg(r.y)).getUTCDay():e(Pg(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,Bg(r)):e(r)}}function $(t,e,i,a){for(var n,r,o=0,s=e.length,l=i.length;o<s;){if(a>=l)return-1;if(37===(n=e.charCodeAt(o++))){if(n=e.charAt(o++),!(r=y[n in zg?e.charAt(o++):n])||(a=r(t,i,a))<0)return-1}else if(n!=i.charCodeAt(a++))return-1}return a}return _.x=x(i,_),_.X=x(a,_),_.c=x(e,_),w.x=x(i,w),w.X=x(a,w),w.c=x(e,w),{format:function(t){var e=x(t+="",_);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",Mg);return e.toString=function(){return t},e},utcFormat:function(t){var e=x(t+="",w);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t,Bg);return e.toString=function(){return t},e}}}var Ug,Vg,Gg,Fg,Hg,zg={"-":"",_:" ",0:"0"},Wg=/^\s*\d+/,Jg=/^%/,Yg=/[\\^$*+?|[\]().{}]/g;function Xg(t,e,i){var a=t<0?"-":"",n=(a?-t:t)+"",r=n.length;return a+(r<i?new Array(i-r+1).join(e)+n:n)}function Zg(t){return t.replace(Yg,"\\$&")}function Kg(t){return new RegExp("^(?:"+t.map(Zg).join("|")+")","i")}function Qg(t){for(var e={},i=-1,a=t.length;++i<a;)e[t[i].toLowerCase()]=i;return e}function tv(t,e,i){var a=Wg.exec(e.slice(i,i+1));return a?(t.w=+a[0],i+a[0].length):-1}function ev(t,e,i){var a=Wg.exec(e.slice(i,i+1));return a?(t.u=+a[0],i+a[0].length):-1}function iv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.U=+a[0],i+a[0].length):-1}function av(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.V=+a[0],i+a[0].length):-1}function nv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.W=+a[0],i+a[0].length):-1}function rv(t,e,i){var a=Wg.exec(e.slice(i,i+4));return a?(t.y=+a[0],i+a[0].length):-1}function ov(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.y=+a[0]+(+a[0]>68?1900:2e3),i+a[0].length):-1}function sv(t,e,i){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(i,i+6));return a?(t.Z=a[1]?0:-(a[2]+(a[3]||"00")),i+a[0].length):-1}function lv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.m=a[0]-1,i+a[0].length):-1}function cv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.d=+a[0],i+a[0].length):-1}function dv(t,e,i){var a=Wg.exec(e.slice(i,i+3));return a?(t.m=0,t.d=+a[0],i+a[0].length):-1}function uv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.H=+a[0],i+a[0].length):-1}function fv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.M=+a[0],i+a[0].length):-1}function hv(t,e,i){var a=Wg.exec(e.slice(i,i+2));return a?(t.S=+a[0],i+a[0].length):-1}function mv(t,e,i){var a=Wg.exec(e.slice(i,i+3));return a?(t.L=+a[0],i+a[0].length):-1}function pv(t,e,i){var a=Wg.exec(e.slice(i,i+6));return a?(t.L=Math.floor(a[0]/1e3),i+a[0].length):-1}function gv(t,e,i){var a=Jg.exec(e.slice(i,i+1));return a?i+a[0].length:-1}function vv(t,e,i){var a=Wg.exec(e.slice(i));return a?(t.Q=+a[0],i+a[0].length):-1}function bv(t,e,i){var a=Wg.exec(e.slice(i));return a?(t.Q=1e3*+a[0],i+a[0].length):-1}function _v(t,e){return Xg(t.getDate(),e,2)}function wv(t,e){return Xg(t.getHours(),e,2)}function yv(t,e){return Xg(t.getHours()%12||12,e,2)}function xv(t,e){return Xg(1+Bp.count(rg(t),t),e,3)}function kv(t,e){return Xg(t.getMilliseconds(),e,3)}function $v(t,e){return kv(t,e)+"000"}function Cv(t,e){return Xg(t.getMonth()+1,e,2)}function Sv(t,e){return Xg(t.getMinutes(),e,2)}function Dv(t,e){return Xg(t.getSeconds(),e,2)}function jv(t){var e=t.getDay();return 0===e?7:e}function Nv(t,e){return Xg(Up.count(rg(t),t),e,2)}function Ov(t,e){var i=t.getDay();return t=i>=4||0===i?Hp(t):Hp.ceil(t),Xg(Hp.count(rg(t),t)+(4===rg(t).getDay()),e,2)}function Tv(t){return t.getDay()}function Iv(t,e){return Xg(Vp.count(rg(t),t),e,2)}function Lv(t,e){return Xg(t.getFullYear()%100,e,2)}function Ev(t,e){return Xg(t.getFullYear()%1e4,e,4)}function Rv(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Xg(e/60|0,"0",2)+Xg(e%60,"0",2)}function Av(t,e){return Xg(t.getUTCDate(),e,2)}function Mv(t,e){return Xg(t.getUTCHours(),e,2)}function Bv(t,e){return Xg(t.getUTCHours()%12||12,e,2)}function Pv(t,e){return Xg(1+mg.count(Rg(t),t),e,3)}function qv(t,e){return Xg(t.getUTCMilliseconds(),e,3)}function Uv(t,e){return qv(t,e)+"000"}function Vv(t,e){return Xg(t.getUTCMonth()+1,e,2)}function Gv(t,e){return Xg(t.getUTCMinutes(),e,2)}function Fv(t,e){return Xg(t.getUTCSeconds(),e,2)}function Hv(t){var e=t.getUTCDay();return 0===e?7:e}function zv(t,e){return Xg(vg.count(Rg(t),t),e,2)}function Wv(t,e){var i=t.getUTCDay();return t=i>=4||0===i?yg(t):yg.ceil(t),Xg(yg.count(Rg(t),t)+(4===Rg(t).getUTCDay()),e,2)}function Jv(t){return t.getUTCDay()}function Yv(t,e){return Xg(bg.count(Rg(t),t),e,2)}function Xv(t,e){return Xg(t.getUTCFullYear()%100,e,2)}function Zv(t,e){return Xg(t.getUTCFullYear()%1e4,e,4)}function Kv(){return"+0000"}function Qv(){return"%"}function tb(t){return+t}function eb(t){return Math.floor(+t/1e3)}function ib(t){return Ug=qg(t),Vg=Ug.format,Gg=Ug.parse,Fg=Ug.utcFormat,Hg=Ug.utcParse,Ug}ib({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var ab="%Y-%m-%dT%H:%M:%S.%LZ";var nb=Date.prototype.toISOString?function(t){return t.toISOString()}:Fg(ab);var rb=+new Date("2000-01-01T00:00:00.000Z")?function(t){var e=new Date(t);return isNaN(e)?null:e}:Hg(ab),ob=1e3,sb=60*ob,lb=60*sb,cb=24*lb,db=7*cb,ub=30*cb,fb=365*cb;function hb(t){return new Date(t)}function mb(t){return t instanceof Date?+t:+new Date(+t)}function pb(t,e,i,a,r,o,s,l,c){var d=Wm(qm,qm),u=d.invert,f=d.domain,h=c(".%L"),m=c(":%S"),p=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),b=c("%b %d"),_=c("%B"),w=c("%Y"),y=[[s,1,ob],[s,5,5*ob],[s,15,15*ob],[s,30,30*ob],[o,1,sb],[o,5,5*sb],[o,15,15*sb],[o,30,30*sb],[r,1,lb],[r,3,3*lb],[r,6,6*lb],[r,12,12*lb],[a,1,cb],[a,2,2*cb],[i,1,db],[e,1,ub],[e,3,3*ub],[t,1,fb]];function x(n){return(s(n)<n?h:o(n)<n?m:r(n)<n?p:a(n)<n?g:e(n)<n?i(n)<n?v:b:t(n)<n?_:w)(n)}function k(e,i,a,r){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(a-i)/e,s=n(function(t){return t[2]}).right(y,o);s===y.length?(r=j(i/fb,a/fb,e),e=t):s?(r=(s=y[o/y[s-1][2]<y[s][2]/o?s-1:s])[1],e=s[0]):(r=Math.max(j(i,a,e),1),e=l)}return null==r?e:e.every(r)}return d.invert=function(t){return new Date(u(t))},d.domain=function(t){return arguments.length?f(Tm.call(t,mb)):f().map(hb)},d.ticks=function(t,e){var i,a=f(),n=a[0],r=a[a.length-1],o=r<n;return o&&(i=n,n=r,r=i),i=(i=k(t,n,r,e))?i.range(n,r+1):[],o?i.reverse():i},d.tickFormat=function(t,e){return null==e?x:c(e)},d.nice=function(t,e){var i=f();return(t=k(t,i[0],i[i.length-1],e))?f(Km(i,t)):d},d.copy=function(){return Hm(d,pb(t,e,i,a,r,o,s,l,c))},d}var gb=function(){return jm.apply(pb(rg,ig,Up,Bp,Rp,Ip,Np,$p,Vg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},vb=function(){return jm.apply(pb(Rg,Ig,vg,mg,ug,lg,Np,$p,Fg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)};function bb(){var t,e,i,a,n,r=0,o=1,s=qm,l=!1;function c(e){return isNaN(e=+e)?n:s(0===i?.5:(e=(a(e)-t)*i,l?Math.max(0,Math.min(1,e)):e))}return c.domain=function(n){return arguments.length?(t=a(r=+n[0]),e=a(o=+n[1]),i=t===e?0:1/(e-t),c):[r,o]},c.clamp=function(t){return arguments.length?(l=!!t,c):l},c.interpolator=function(t){return arguments.length?(s=t,c):s},c.unknown=function(t){return arguments.length?(n=t,c):n},function(n){return a=n,t=n(r),e=n(o),i=t===e?0:1/(e-t),c}}function _b(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function wb(){var t=Ym(bb()(qm));return t.copy=function(){return _b(t,wb())},Nm.apply(t,arguments)}function yb(){var t=rp(bb()).domain([1,10]);return t.copy=function(){return _b(t,yb()).base(t.base())},Nm.apply(t,arguments)}function xb(){var t=cp(bb());return t.copy=function(){return _b(t,xb()).constant(t.constant())},Nm.apply(t,arguments)}function kb(){var t=mp(bb());return t.copy=function(){return _b(t,kb()).exponent(t.exponent())},Nm.apply(t,arguments)}function $b(){return kb.apply(null,arguments).exponent(.5)}function Cb(){var t=[],e=qm;function i(i){if(!isNaN(i=+i))return e((l(t,i)-1)/(t.length-1))}return i.domain=function(e){if(!arguments.length)return t.slice();t=[];for(var n,r=0,o=e.length;r<o;++r)n=e[r],null==n||isNaN(n=+n)||t.push(n);return t.sort(a),i},i.interpolator=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Cb(e).domain(t)},Nm.apply(i,arguments)}function Sb(){var t,e,i,a,n,r,o,s=0,l=.5,c=1,d=qm,u=!1;function f(t){return isNaN(t=+t)?o:(t=.5+((t=+r(t))-e)*(t<e?a:n),d(u?Math.max(0,Math.min(1,t)):t))}return f.domain=function(o){return arguments.length?(t=r(s=+o[0]),e=r(l=+o[1]),i=r(c=+o[2]),a=t===e?0:.5/(e-t),n=e===i?0:.5/(i-e),f):[s,l,c]},f.clamp=function(t){return arguments.length?(u=!!t,f):u},f.interpolator=function(t){return arguments.length?(d=t,f):d},f.unknown=function(t){return arguments.length?(o=t,f):o},function(o){return r=o,t=o(s),e=o(l),i=o(c),a=t===e?0:.5/(e-t),n=e===i?0:.5/(i-e),f}}function Db(){var t=Ym(Sb()(qm));return t.copy=function(){return _b(t,Db())},Nm.apply(t,arguments)}function jb(){var t=rp(Sb()).domain([.1,1,10]);return t.copy=function(){return _b(t,jb()).base(t.base())},Nm.apply(t,arguments)}function Nb(){var t=cp(Sb());return t.copy=function(){return _b(t,Nb()).constant(t.constant())},Nm.apply(t,arguments)}function Ob(){var t=mp(Sb());return t.copy=function(){return _b(t,Ob()).exponent(t.exponent())},Nm.apply(t,arguments)}function Tb(){return Ob.apply(null,arguments).exponent(.5)}var Ib=function(t){for(var e=t.length/6|0,i=new Array(e),a=0;a<e;)i[a]="#"+t.slice(6*a,6*++a);return i},Lb=Ib("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Eb=Ib("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Rb=Ib("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Ab=Ib("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Mb=Ib("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Bb=Ib("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),Pb=Ib("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),qb=Ib("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ub=Ib("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),Vb=Ib("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab"),Gb=function(t){return qi(t[t.length-1])},Fb=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Ib),Hb=Gb(Fb),zb=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Ib),Wb=Gb(zb),Jb=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Ib),Yb=Gb(Jb),Xb=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Ib),Zb=Gb(Xb),Kb=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Ib),Qb=Gb(Kb),t_=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Ib),e_=Gb(t_),i_=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Ib),a_=Gb(i_),n_=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Ib),r_=Gb(n_),o_=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Ib),s_=Gb(o_),l_=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Ib),c_=Gb(l_),d_=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Ib),u_=Gb(d_),f_=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Ib),h_=Gb(f_),m_=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Ib),p_=Gb(m_),g_=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Ib),v_=Gb(g_),b_=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Ib),__=Gb(b_),w_=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Ib),y_=Gb(w_),x_=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Ib),k_=Gb(x_),$_=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Ib),C_=Gb($_),S_=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Ib),D_=Gb(S_),j_=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Ib),N_=Gb(j_),O_=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Ib),T_=Gb(O_),I_=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Ib),L_=Gb(I_),E_=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Ib),R_=Gb(E_),A_=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Ib),M_=Gb(A_),B_=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Ib),P_=Gb(B_),q_=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Ib),U_=Gb(q_),V_=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Ib),G_=Gb(V_),F_=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(-4.54-t*(35.34-t*(2381.73-t*(6402.7-t*(7024.72-2710.57*t)))))))+", "+Math.max(0,Math.min(255,Math.round(32.49+t*(170.73+t*(52.82-t*(131.46-t*(176.58-67.37*t)))))))+", "+Math.max(0,Math.min(255,Math.round(81.24+t*(442.36-t*(2482.43-t*(6167.24-t*(6614.94-2475.67*t)))))))+")"},H_=ya(ji(300,.5,0),ji(-240,.5,1)),z_=ya(ji(-100,.75,.35),ji(80,1.5,.8)),W_=ya(ji(260,.75,.35),ji(80,1.5,.8)),J_=ji(),Y_=function(t){(t<0||t>1)&&(t-=Math.floor(t));var e=Math.abs(t-.5);return J_.h=360*t-100,J_.s=1.5-1.5*e,J_.l=.8-.9*e,J_+""},X_=Fe(),Z_=Math.PI/3,K_=2*Math.PI/3,Q_=function(t){var e;return t=(.5-t)*Math.PI,X_.r=255*(e=Math.sin(t))*e,X_.g=255*(e=Math.sin(t+Z_))*e,X_.b=255*(e=Math.sin(t+K_))*e,X_+""},tw=function(t){return t=Math.max(0,Math.min(1,t)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+t*(1172.33-t*(10793.56-t*(33300.12-t*(38394.49-14825.05*t)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+t*(557.33+t*(1225.33-t*(3574.96-t*(1073.77+707.56*t)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+t*(3211.1-t*(15327.97-t*(27814-t*(22569.18-6838.66*t)))))))+")"};function ew(t){var e=t.length;return function(i){return t[Math.max(0,Math.min(e-1,Math.floor(i*e)))]}}var iw=ew(Ib("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),aw=ew(Ib("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),nw=ew(Ib("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),rw=ew(Ib("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),ow=function(t){return function(){return t}},sw=Math.abs,lw=Math.atan2,cw=Math.cos,dw=Math.max,uw=Math.min,fw=Math.sin,hw=Math.sqrt,mw=1e-12,pw=Math.PI,gw=pw/2,vw=2*pw;function bw(t){return t>=1?gw:t<=-1?-gw:Math.asin(t)}function _w(t){return t.innerRadius}function ww(t){return t.outerRadius}function yw(t){return t.startAngle}function xw(t){return t.endAngle}function kw(t){return t&&t.padAngle}function $w(t,e,i,a,n,r,o){var s=t-i,l=e-a,c=(o?r:-r)/hw(s*s+l*l),d=c*l,u=-c*s,f=t+d,h=e+u,m=i+d,p=a+u,g=(f+m)/2,v=(h+p)/2,b=m-f,_=p-h,w=b*b+_*_,y=n-r,x=f*p-m*h,k=(_<0?-1:1)*hw(dw(0,y*y*w-x*x)),$=(x*_-b*k)/w,C=(-x*b-_*k)/w,S=(x*_+b*k)/w,D=(-x*b+_*k)/w,j=$-g,N=C-v,O=S-g,T=D-v;return j*j+N*N>O*O+T*T&&($=S,C=D),{cx:$,cy:C,x01:-d,y01:-u,x11:$*(n/y-1),y11:C*(n/y-1)}}var Cw=function(){var t=_w,e=ww,i=ow(0),a=null,n=yw,r=xw,o=kw,s=null;function l(){var l,c,d,u=+t.apply(this,arguments),f=+e.apply(this,arguments),h=n.apply(this,arguments)-gw,m=r.apply(this,arguments)-gw,p=sw(m-h),g=m>h;if(s||(s=l=Jr()),f<u&&(c=f,f=u,u=c),f>mw)if(p>vw-mw)s.moveTo(f*cw(h),f*fw(h)),s.arc(0,0,f,h,m,!g),u>mw&&(s.moveTo(u*cw(m),u*fw(m)),s.arc(0,0,u,m,h,g));else{var v,b,_=h,w=m,y=h,x=m,k=p,$=p,C=o.apply(this,arguments)/2,S=C>mw&&(a?+a.apply(this,arguments):hw(u*u+f*f)),D=uw(sw(f-u)/2,+i.apply(this,arguments)),j=D,N=D;if(S>mw){var O=bw(S/u*fw(C)),T=bw(S/f*fw(C));(k-=2*O)>mw?(y+=O*=g?1:-1,x-=O):(k=0,y=x=(h+m)/2),($-=2*T)>mw?(_+=T*=g?1:-1,w-=T):($=0,_=w=(h+m)/2)}var I=f*cw(_),L=f*fw(_),E=u*cw(x),R=u*fw(x);if(D>mw){var A,M=f*cw(w),B=f*fw(w),P=u*cw(y),q=u*fw(y);if(p<pw&&(A=function(t,e,i,a,n,r,o,s){var l=i-t,c=a-e,d=o-n,u=s-r,f=u*l-d*c;if(!(f*f<mw))return[t+(f=(d*(e-r)-u*(t-n))/f)*l,e+f*c]}(I,L,P,q,M,B,E,R))){var U=I-A[0],V=L-A[1],G=M-A[0],F=B-A[1],H=1/fw(((d=(U*G+V*F)/(hw(U*U+V*V)*hw(G*G+F*F)))>1?0:d<-1?pw:Math.acos(d))/2),z=hw(A[0]*A[0]+A[1]*A[1]);j=uw(D,(u-z)/(H-1)),N=uw(D,(f-z)/(H+1))}}$>mw?N>mw?(v=$w(P,q,I,L,f,N,g),b=$w(M,B,E,R,f,N,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),N<D?s.arc(v.cx,v.cy,N,lw(v.y01,v.x01),lw(b.y01,b.x01),!g):(s.arc(v.cx,v.cy,N,lw(v.y01,v.x01),lw(v.y11,v.x11),!g),s.arc(0,0,f,lw(v.cy+v.y11,v.cx+v.x11),lw(b.cy+b.y11,b.cx+b.x11),!g),s.arc(b.cx,b.cy,N,lw(b.y11,b.x11),lw(b.y01,b.x01),!g))):(s.moveTo(I,L),s.arc(0,0,f,_,w,!g)):s.moveTo(I,L),u>mw&&k>mw?j>mw?(v=$w(E,R,M,B,u,-j,g),b=$w(I,L,P,q,u,-j,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),j<D?s.arc(v.cx,v.cy,j,lw(v.y01,v.x01),lw(b.y01,b.x01),!g):(s.arc(v.cx,v.cy,j,lw(v.y01,v.x01),lw(v.y11,v.x11),!g),s.arc(0,0,u,lw(v.cy+v.y11,v.cx+v.x11),lw(b.cy+b.y11,b.cx+b.x11),g),s.arc(b.cx,b.cy,j,lw(b.y11,b.x11),lw(b.y01,b.x01),!g))):s.arc(0,0,u,x,y,g):s.lineTo(E,R)}else s.moveTo(0,0);if(s.closePath(),l)return s=null,l+""||null}return l.centroid=function(){var i=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,a=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2-pw/2;return[cw(a)*i,fw(a)*i]},l.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:ow(+e),l):t},l.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:ow(+t),l):e},l.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:ow(+t),l):i},l.padRadius=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:ow(+t),l):a},l.startAngle=function(t){return arguments.length?(n="function"==typeof t?t:ow(+t),l):n},l.endAngle=function(t){return arguments.length?(r="function"==typeof t?t:ow(+t),l):r},l.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:ow(+t),l):o},l.context=function(t){return arguments.length?(s=null==t?null:t,l):s},l};function Sw(t){this._context=t}Sw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var Dw=function(t){return new Sw(t)};function jw(t){return t[0]}function Nw(t){return t[1]}var Ow=function(){var t=jw,e=Nw,i=ow(!0),a=null,n=Dw,r=null;function o(o){var s,l,c,d=o.length,u=!1;for(null==a&&(r=n(c=Jr())),s=0;s<=d;++s)!(s<d&&i(l=o[s],s,o))===u&&((u=!u)?r.lineStart():r.lineEnd()),u&&r.point(+t(l,s,o),+e(l,s,o));if(c)return r=null,c+""||null}return o.x=function(e){return arguments.length?(t="function"==typeof e?e:ow(+e),o):t},o.y=function(t){return arguments.length?(e="function"==typeof t?t:ow(+t),o):e},o.defined=function(t){return arguments.length?(i="function"==typeof t?t:ow(!!t),o):i},o.curve=function(t){return arguments.length?(n=t,null!=a&&(r=n(a)),o):n},o.context=function(t){return arguments.length?(null==t?a=r=null:r=n(a=t),o):a},o},Tw=function(){var t=jw,e=null,i=ow(0),a=Nw,n=ow(!0),r=null,o=Dw,s=null;function l(l){var c,d,u,f,h,m=l.length,p=!1,g=new Array(m),v=new Array(m);for(null==r&&(s=o(h=Jr())),c=0;c<=m;++c){if(!(c<m&&n(f=l[c],c,l))===p)if(p=!p)d=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),u=c-1;u>=d;--u)s.point(g[u],v[u]);s.lineEnd(),s.areaEnd()}p&&(g[c]=+t(f,c,l),v[c]=+i(f,c,l),s.point(e?+e(f,c,l):g[c],a?+a(f,c,l):v[c]))}if(h)return s=null,h+""||null}function c(){return Ow().defined(n).curve(o).context(r)}return l.x=function(i){return arguments.length?(t="function"==typeof i?i:ow(+i),e=null,l):t},l.x0=function(e){return arguments.length?(t="function"==typeof e?e:ow(+e),l):t},l.x1=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:ow(+t),l):e},l.y=function(t){return arguments.length?(i="function"==typeof t?t:ow(+t),a=null,l):i},l.y0=function(t){return arguments.length?(i="function"==typeof t?t:ow(+t),l):i},l.y1=function(t){return arguments.length?(a=null==t?null:"function"==typeof t?t:ow(+t),l):a},l.lineX0=l.lineY0=function(){return c().x(t).y(i)},l.lineY1=function(){return c().x(t).y(a)},l.lineX1=function(){return c().x(e).y(i)},l.defined=function(t){return arguments.length?(n="function"==typeof t?t:ow(!!t),l):n},l.curve=function(t){return arguments.length?(o=t,null!=r&&(s=o(r)),l):o},l.context=function(t){return arguments.length?(null==t?r=s=null:s=o(r=t),l):r},l},Iw=function(t,e){return e<t?-1:e>t?1:e>=t?0:NaN},Lw=function(t){return t},Ew=function(){var t=Lw,e=Iw,i=null,a=ow(0),n=ow(vw),r=ow(0);function o(o){var s,l,c,d,u,f=o.length,h=0,m=new Array(f),p=new Array(f),g=+a.apply(this,arguments),v=Math.min(vw,Math.max(-vw,n.apply(this,arguments)-g)),b=Math.min(Math.abs(v)/f,r.apply(this,arguments)),_=b*(v<0?-1:1);for(s=0;s<f;++s)(u=p[m[s]=s]=+t(o[s],s,o))>0&&(h+=u);for(null!=e?m.sort(function(t,i){return e(p[t],p[i])}):null!=i&&m.sort(function(t,e){return i(o[t],o[e])}),s=0,c=h?(v-f*_)/h:0;s<f;++s,g=d)l=m[s],d=g+((u=p[l])>0?u*c:0)+_,p[l]={data:o[l],index:s,value:u,startAngle:g,endAngle:d,padAngle:b};return p}return o.value=function(e){return arguments.length?(t="function"==typeof e?e:ow(+e),o):t},o.sortValues=function(t){return arguments.length?(e=t,i=null,o):e},o.sort=function(t){return arguments.length?(i=t,e=null,o):i},o.startAngle=function(t){return arguments.length?(a="function"==typeof t?t:ow(+t),o):a},o.endAngle=function(t){return arguments.length?(n="function"==typeof t?t:ow(+t),o):n},o.padAngle=function(t){return arguments.length?(r="function"==typeof t?t:ow(+t),o):r},o},Rw=Mw(Dw);function Aw(t){this._curve=t}function Mw(t){function e(e){return new Aw(t(e))}return e._curve=t,e}function Bw(t){var e=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?e(Mw(t)):e()._curve},t}Aw.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,e){this._curve.point(e*Math.sin(t),e*-Math.cos(t))}};var Pw=function(){return Bw(Ow().curve(Rw))},qw=function(){var t=Tw().curve(Rw),e=t.curve,i=t.lineX0,a=t.lineX1,n=t.lineY0,r=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return Bw(i())},delete t.lineX0,t.lineEndAngle=function(){return Bw(a())},delete t.lineX1,t.lineInnerRadius=function(){return Bw(n())},delete t.lineY0,t.lineOuterRadius=function(){return Bw(r())},delete t.lineY1,t.curve=function(t){return arguments.length?e(Mw(t)):e()._curve},t},Uw=function(t,e){return[(e=+e)*Math.cos(t-=Math.PI/2),e*Math.sin(t)]},Vw=Array.prototype.slice;function Gw(t){return t.source}function Fw(t){return t.target}function Hw(t){var e=Gw,i=Fw,a=jw,n=Nw,r=null;function o(){var o,s=Vw.call(arguments),l=e.apply(this,s),c=i.apply(this,s);if(r||(r=o=Jr()),t(r,+a.apply(this,(s[0]=l,s)),+n.apply(this,s),+a.apply(this,(s[0]=c,s)),+n.apply(this,s)),o)return r=null,o+""||null}return o.source=function(t){return arguments.length?(e=t,o):e},o.target=function(t){return arguments.length?(i=t,o):i},o.x=function(t){return arguments.length?(a="function"==typeof t?t:ow(+t),o):a},o.y=function(t){return arguments.length?(n="function"==typeof t?t:ow(+t),o):n},o.context=function(t){return arguments.length?(r=null==t?null:t,o):r},o}function zw(t,e,i,a,n){t.moveTo(e,i),t.bezierCurveTo(e=(e+a)/2,i,e,n,a,n)}function Ww(t,e,i,a,n){t.moveTo(e,i),t.bezierCurveTo(e,i=(i+n)/2,a,i,a,n)}function Jw(t,e,i,a,n){var r=Uw(e,i),o=Uw(e,i=(i+n)/2),s=Uw(a,i),l=Uw(a,n);t.moveTo(r[0],r[1]),t.bezierCurveTo(o[0],o[1],s[0],s[1],l[0],l[1])}function Yw(){return Hw(zw)}function Xw(){return Hw(Ww)}function Zw(){var t=Hw(Jw);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t}var Kw={draw:function(t,e){var i=Math.sqrt(e/pw);t.moveTo(i,0),t.arc(0,0,i,0,vw)}},Qw={draw:function(t,e){var i=Math.sqrt(e/5)/2;t.moveTo(-3*i,-i),t.lineTo(-i,-i),t.lineTo(-i,-3*i),t.lineTo(i,-3*i),t.lineTo(i,-i),t.lineTo(3*i,-i),t.lineTo(3*i,i),t.lineTo(i,i),t.lineTo(i,3*i),t.lineTo(-i,3*i),t.lineTo(-i,i),t.lineTo(-3*i,i),t.closePath()}},ty=Math.sqrt(1/3),ey=2*ty,iy={draw:function(t,e){var i=Math.sqrt(e/ey),a=i*ty;t.moveTo(0,-i),t.lineTo(a,0),t.lineTo(0,i),t.lineTo(-a,0),t.closePath()}},ay=Math.sin(pw/10)/Math.sin(7*pw/10),ny=Math.sin(vw/10)*ay,ry=-Math.cos(vw/10)*ay,oy={draw:function(t,e){var i=Math.sqrt(.8908130915292852*e),a=ny*i,n=ry*i;t.moveTo(0,-i),t.lineTo(a,n);for(var r=1;r<5;++r){var o=vw*r/5,s=Math.cos(o),l=Math.sin(o);t.lineTo(l*i,-s*i),t.lineTo(s*a-l*n,l*a+s*n)}t.closePath()}},sy={draw:function(t,e){var i=Math.sqrt(e),a=-i/2;t.rect(a,a,i,i)}},ly=Math.sqrt(3),cy={draw:function(t,e){var i=-Math.sqrt(e/(3*ly));t.moveTo(0,2*i),t.lineTo(-ly*i,-i),t.lineTo(ly*i,-i),t.closePath()}},dy=Math.sqrt(3)/2,uy=1/Math.sqrt(12),fy=3*(uy/2+1),hy={draw:function(t,e){var i=Math.sqrt(e/fy),a=i/2,n=i*uy,r=a,o=i*uy+i,s=-r,l=o;t.moveTo(a,n),t.lineTo(r,o),t.lineTo(s,l),t.lineTo(-.5*a-dy*n,dy*a+-.5*n),t.lineTo(-.5*r-dy*o,dy*r+-.5*o),t.lineTo(-.5*s-dy*l,dy*s+-.5*l),t.lineTo(-.5*a+dy*n,-.5*n-dy*a),t.lineTo(-.5*r+dy*o,-.5*o-dy*r),t.lineTo(-.5*s+dy*l,-.5*l-dy*s),t.closePath()}},my=[Kw,Qw,iy,sy,oy,cy,hy],py=function(){var t=ow(Kw),e=ow(64),i=null;function a(){var a;if(i||(i=a=Jr()),t.apply(this,arguments).draw(i,+e.apply(this,arguments)),a)return i=null,a+""||null}return a.type=function(e){return arguments.length?(t="function"==typeof e?e:ow(e),a):t},a.size=function(t){return arguments.length?(e="function"==typeof t?t:ow(+t),a):e},a.context=function(t){return arguments.length?(i=null==t?null:t,a):i},a},gy=function(){};function vy(t,e,i){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+i)/6)}function by(t){this._context=t}by.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:vy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:vy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var _y=function(t){return new by(t)};function wy(t){this._context=t}wy.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:vy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var yy=function(t){return new wy(t)};function xy(t){this._context=t}xy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var i=(this._x0+4*this._x1+t)/6,a=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(i,a):this._context.moveTo(i,a);break;case 3:this._point=4;default:vy(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};var ky=function(t){return new xy(t)};function $y(t,e){this._basis=new by(t),this._beta=e}$y.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,i=t.length-1;if(i>0)for(var a,n=t[0],r=e[0],o=t[i]-n,s=e[i]-r,l=-1;++l<=i;)a=l/i,this._basis.point(this._beta*t[l]+(1-this._beta)*(n+a*o),this._beta*e[l]+(1-this._beta)*(r+a*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Cy=function t(e){function i(t){return 1===e?new by(t):new $y(t,e)}return i.beta=function(e){return t(+e)},i}(.85);function Sy(t,e,i){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-i),t._x2,t._y2)}function Dy(t,e){this._context=t,this._k=(1-e)/6}Dy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Sy(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Sy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var jy=function t(e){function i(t){return new Dy(t,e)}return i.tension=function(e){return t(+e)},i}(0);function Ny(t,e){this._context=t,this._k=(1-e)/6}Ny.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Sy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Oy=function t(e){function i(t){return new Ny(t,e)}return i.tension=function(e){return t(+e)},i}(0);function Ty(t,e){this._context=t,this._k=(1-e)/6}Ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sy(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Iy=function t(e){function i(t){return new Ty(t,e)}return i.tension=function(e){return t(+e)},i}(0);function Ly(t,e,i){var a=t._x1,n=t._y1,r=t._x2,o=t._y2;if(t._l01_a>mw){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);a=(a*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,n=(n*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>mw){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,d=3*t._l23_a*(t._l23_a+t._l12_a);r=(r*c+t._x1*t._l23_2a-e*t._l12_2a)/d,o=(o*c+t._y1*t._l23_2a-i*t._l12_2a)/d}t._context.bezierCurveTo(a,n,r,o,t._x2,t._y2)}function Ey(t,e){this._context=t,this._alpha=e}Ey.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,a=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Ly(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Ry=function t(e){function i(t){return e?new Ey(t,e):new Dy(t,0)}return i.alpha=function(e){return t(+e)},i}(.5);function Ay(t,e){this._context=t,this._alpha=e}Ay.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,a=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+a*a,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Ly(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var My=function t(e){function i(t){return e?new Ay(t,e):new Ny(t,0)}return i.alpha=function(e){return t(+e)},i}(.5);function By(t,e){this._context=t,this._alpha=e}By.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var i=this._x2-t,a=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(i*i+a*a,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ly(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var Py=function t(e){function i(t){return e?new By(t,e):new Ty(t,0)}return i.alpha=function(e){return t(+e)},i}(.5);function qy(t){this._context=t}qy.prototype={areaStart:gy,areaEnd:gy,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};var Uy=function(t){return new qy(t)};function Vy(t){return t<0?-1:1}function Gy(t,e,i){var a=t._x1-t._x0,n=e-t._x1,r=(t._y1-t._y0)/(a||n<0&&-0),o=(i-t._y1)/(n||a<0&&-0),s=(r*n+o*a)/(a+n);return(Vy(r)+Vy(o))*Math.min(Math.abs(r),Math.abs(o),.5*Math.abs(s))||0}function Fy(t,e){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-e)/2:e}function Hy(t,e,i){var a=t._x0,n=t._y0,r=t._x1,o=t._y1,s=(r-a)/3;t._context.bezierCurveTo(a+s,n+s*e,r-s,o-s*i,r,o)}function zy(t){this._context=t}function Wy(t){this._context=new Jy(t)}function Jy(t){this._context=t}function Yy(t){return new zy(t)}function Xy(t){return new Wy(t)}function Zy(t){this._context=t}function Ky(t){var e,i,a=t.length-1,n=new Array(a),r=new Array(a),o=new Array(a);for(n[0]=0,r[0]=2,o[0]=t[0]+2*t[1],e=1;e<a-1;++e)n[e]=1,r[e]=4,o[e]=4*t[e]+2*t[e+1];for(n[a-1]=2,r[a-1]=7,o[a-1]=8*t[a-1]+t[a],e=1;e<a;++e)i=n[e]/r[e-1],r[e]-=i,o[e]-=i*o[e-1];for(n[a-1]=o[a-1]/r[a-1],e=a-2;e>=0;--e)n[e]=(o[e]-n[e+1])/r[e];for(r[a-1]=(t[a]+n[a-1])/2,e=0;e<a-1;++e)r[e]=2*t[e+1]-n[e+1];return[n,r]}zy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Hy(this,this._t0,Fy(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var i=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Hy(this,Fy(this,i=Gy(this,t,e)),i);break;default:Hy(this,this._t0,i=Gy(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=i}}},(Wy.prototype=Object.create(zy.prototype)).point=function(t,e){zy.prototype.point.call(this,e,t)},Jy.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,i,a,n,r){this._context.bezierCurveTo(e,t,a,i,r,n)}},Zy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,i=t.length;if(i)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===i)this._context.lineTo(t[1],e[1]);else for(var a=Ky(t),n=Ky(e),r=0,o=1;o<i;++r,++o)this._context.bezierCurveTo(a[0][r],n[0][r],a[1][r],n[1][r],t[o],e[o]);(this._line||0!==this._line&&1===i)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var Qy=function(t){return new Zy(t)};function tx(t,e){this._context=t,this._t=e}tx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var i=this._x*(1-this._t)+t*this._t;this._context.lineTo(i,this._y),this._context.lineTo(i,e)}}this._x=t,this._y=e}};var ex=function(t){return new tx(t,.5)};function ix(t){return new tx(t,0)}function ax(t){return new tx(t,1)}var nx=function(t,e){if((n=t.length)>1)for(var i,a,n,r=1,o=t[e[0]],s=o.length;r<n;++r)for(a=o,o=t[e[r]],i=0;i<s;++i)o[i][1]+=o[i][0]=isNaN(a[i][1])?a[i][0]:a[i][1]},rx=function(t){for(var e=t.length,i=new Array(e);--e>=0;)i[e]=e;return i};function ox(t,e){return t[e]}var sx=function(){var t=ow([]),e=rx,i=nx,a=ox;function n(n){var r,o,s=t.apply(this,arguments),l=n.length,c=s.length,d=new Array(c);for(r=0;r<c;++r){for(var u,f=s[r],h=d[r]=new Array(l),m=0;m<l;++m)h[m]=u=[0,+a(n[m],f,m,n)],u.data=n[m];h.key=f}for(r=0,o=e(d);r<c;++r)d[o[r]].index=r;return i(d,o),d}return n.keys=function(e){return arguments.length?(t="function"==typeof e?e:ow(Vw.call(e)),n):t},n.value=function(t){return arguments.length?(a="function"==typeof t?t:ow(+t),n):a},n.order=function(t){return arguments.length?(e=null==t?rx:"function"==typeof t?t:ow(Vw.call(t)),n):e},n.offset=function(t){return arguments.length?(i=null==t?nx:t,n):i},n},lx=function(t,e){if((a=t.length)>0){for(var i,a,n,r=0,o=t[0].length;r<o;++r){for(n=i=0;i<a;++i)n+=t[i][r][1]||0;if(n)for(i=0;i<a;++i)t[i][r][1]/=n}nx(t,e)}},cx=function(t,e){if((s=t.length)>0)for(var i,a,n,r,o,s,l=0,c=t[e[0]].length;l<c;++l)for(r=o=0,i=0;i<s;++i)(n=(a=t[e[i]][l])[1]-a[0])>=0?(a[0]=r,a[1]=r+=n):n<0?(a[1]=o,a[0]=o+=n):a[0]=r},dx=function(t,e){if((i=t.length)>0){for(var i,a=0,n=t[e[0]],r=n.length;a<r;++a){for(var o=0,s=0;o<i;++o)s+=t[o][a][1]||0;n[a][1]+=n[a][0]=-s/2}nx(t,e)}},ux=function(t,e){if((n=t.length)>0&&(a=(i=t[e[0]]).length)>0){for(var i,a,n,r=0,o=1;o<a;++o){for(var s=0,l=0,c=0;s<n;++s){for(var d=t[e[s]],u=d[o][1]||0,f=(u-(d[o-1][1]||0))/2,h=0;h<s;++h){var m=t[e[h]];f+=(m[o][1]||0)-(m[o-1][1]||0)}l+=u,c+=f*u}i[o-1][1]+=i[o-1][0]=r,l&&(r-=c/l)}i[o-1][1]+=i[o-1][0]=r,nx(t,e)}},fx=function(t){var e=t.map(hx);return rx(t).sort(function(t,i){return e[t]-e[i]})};function hx(t){for(var e,i=-1,a=0,n=t.length,r=-1/0;++i<n;)(e=+t[i][1])>r&&(r=e,a=i);return a}var mx=function(t){var e=t.map(px);return rx(t).sort(function(t,i){return e[t]-e[i]})};function px(t){for(var e,i=0,a=-1,n=t.length;++a<n;)(e=+t[a][1])&&(i+=e);return i}var gx=function(t){return mx(t).reverse()},vx=function(t){var e,i,a=t.length,n=t.map(px),r=fx(t),o=0,s=0,l=[],c=[];for(e=0;e<a;++e)i=r[e],o<s?(o+=n[i],l.push(i)):(s+=n[i],c.push(i));return c.reverse().concat(l)},bx=function(t){return rx(t).reverse()},_x=function(t){return function(){return t}};function wx(t){return t[0]}function yx(t){return t[1]}function xx(){this._=null}function kx(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function $x(t,e){var i=e,a=e.R,n=i.U;n?n.L===i?n.L=a:n.R=a:t._=a,a.U=n,i.U=a,i.R=a.L,i.R&&(i.R.U=i),a.L=i}function Cx(t,e){var i=e,a=e.L,n=i.U;n?n.L===i?n.L=a:n.R=a:t._=a,a.U=n,i.U=a,i.L=a.R,i.L&&(i.L.U=i),a.R=i}function Sx(t){for(;t.L;)t=t.L;return t}xx.prototype={constructor:xx,insert:function(t,e){var i,a,n;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=Sx(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(a=i.U).L?(n=a.R)&&n.C?(i.C=n.C=!1,a.C=!0,t=a):(t===i.R&&($x(this,i),i=(t=i).U),i.C=!1,a.C=!0,Cx(this,a)):(n=a.L)&&n.C?(i.C=n.C=!1,a.C=!0,t=a):(t===i.L&&(Cx(this,i),i=(t=i).U),i.C=!1,a.C=!0,$x(this,a)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,a,n=t.U,r=t.L,o=t.R;if(i=r?o?Sx(o):r:o,n?n.L===t?n.L=i:n.R=i:this._=i,r&&o?(a=i.C,i.C=t.C,i.L=r,r.U=i,i!==o?(n=i.U,i.U=t.U,t=i.R,n.L=t,i.R=o,o.U=i):(i.U=n,n=i,t=i.R)):(a=t.C,t=i),t&&(t.U=n),!a)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===n.L){if((e=n.R).C&&(e.C=!1,n.C=!0,$x(this,n),e=n.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Cx(this,e),e=n.R),e.C=n.C,n.C=e.R.C=!1,$x(this,n),t=this._;break}}else if((e=n.L).C&&(e.C=!1,n.C=!0,Cx(this,n),e=n.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,$x(this,e),e=n.L),e.C=n.C,n.C=e.L.C=!1,Cx(this,n),t=this._;break}e.C=!0,t=n,n=n.U}while(!t.C);t&&(t.C=!1)}}};var Dx=xx;function jx(t,e,i,a){var n=[null,null],r=Jx.push(n)-1;return n.left=t,n.right=e,i&&Ox(n,t,e,i),a&&Ox(n,e,t,a),zx[t.index].halfedges.push(r),zx[e.index].halfedges.push(r),n}function Nx(t,e,i){var a=[e,i];return a.left=t,a}function Ox(t,e,i,a){t[0]||t[1]?t.left===i?t[1]=a:t[0]=a:(t[0]=a,t.left=e,t.right=i)}function Tx(t,e,i,a,n){var r,o=t[0],s=t[1],l=o[0],c=o[1],d=0,u=1,f=s[0]-l,h=s[1]-c;if(r=e-l,f||!(r>0)){if(r/=f,f<0){if(r<d)return;r<u&&(u=r)}else if(f>0){if(r>u)return;r>d&&(d=r)}if(r=a-l,f||!(r<0)){if(r/=f,f<0){if(r>u)return;r>d&&(d=r)}else if(f>0){if(r<d)return;r<u&&(u=r)}if(r=i-c,h||!(r>0)){if(r/=h,h<0){if(r<d)return;r<u&&(u=r)}else if(h>0){if(r>u)return;r>d&&(d=r)}if(r=n-c,h||!(r<0)){if(r/=h,h<0){if(r>u)return;r>d&&(d=r)}else if(h>0){if(r<d)return;r<u&&(u=r)}return!(d>0||u<1)||(d>0&&(t[0]=[l+d*f,c+d*h]),u<1&&(t[1]=[l+u*f,c+u*h]),!0)}}}}}function Ix(t,e,i,a,n){var r=t[1];if(r)return!0;var o,s,l=t[0],c=t.left,d=t.right,u=c[0],f=c[1],h=d[0],m=d[1],p=(u+h)/2,g=(f+m)/2;if(m===f){if(p<e||p>=a)return;if(u>h){if(l){if(l[1]>=n)return}else l=[p,i];r=[p,n]}else{if(l){if(l[1]<i)return}else l=[p,n];r=[p,i]}}else if(s=g-(o=(u-h)/(m-f))*p,o<-1||o>1)if(u>h){if(l){if(l[1]>=n)return}else l=[(i-s)/o,i];r=[(n-s)/o,n]}else{if(l){if(l[1]<i)return}else l=[(n-s)/o,n];r=[(i-s)/o,i]}else if(f<m){if(l){if(l[0]>=a)return}else l=[e,o*e+s];r=[a,o*a+s]}else{if(l){if(l[0]<e)return}else l=[a,o*a+s];r=[e,o*e+s]}return t[0]=l,t[1]=r,!0}function Lx(t,e){return e[+(e.left!==t.site)]}var Ex,Rx=[];function Ax(t){var e=t.P,i=t.N;if(e&&i){var a=e.site,n=t.site,r=i.site;if(a!==r){var o=n[0],s=n[1],l=a[0]-o,c=a[1]-s,d=r[0]-o,u=r[1]-s,f=2*(l*u-c*d);if(!(f>=-Xx)){var h=l*l+c*c,m=d*d+u*u,p=(u*h-c*m)/f,g=(l*m-d*h)/f,v=Rx.pop()||new function(){kx(this),this.x=this.y=this.arc=this.site=this.cy=null};v.arc=t,v.site=n,v.x=p+o,v.y=(v.cy=g+s)+Math.sqrt(p*p+g*g),t.circle=v;for(var b=null,_=Wx._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x){if(!_.L){b=_.P;break}_=_.L}else{if(!_.R){b=_;break}_=_.R}Wx.insert(b,v),b||(Ex=v)}}}}function Mx(t){var e=t.circle;e&&(e.P||(Ex=e.N),Wx.remove(e),Rx.push(e),kx(e),t.circle=null)}var Bx=[];function Px(t){var e=Bx.pop()||new function(){kx(this),this.edge=this.site=this.circle=null};return e.site=t,e}function qx(t){Mx(t),Hx.remove(t),Bx.push(t),kx(t)}function Ux(t){var e=t.circle,i=e.x,a=e.cy,n=[i,a],r=t.P,o=t.N,s=[t];qx(t);for(var l=r;l.circle&&Math.abs(i-l.circle.x)<Yx&&Math.abs(a-l.circle.cy)<Yx;)r=l.P,s.unshift(l),qx(l),l=r;s.unshift(l),Mx(l);for(var c=o;c.circle&&Math.abs(i-c.circle.x)<Yx&&Math.abs(a-c.circle.cy)<Yx;)o=c.N,s.push(c),qx(c),c=o;s.push(c),Mx(c);var d,u=s.length;for(d=1;d<u;++d)c=s[d],l=s[d-1],Ox(c.edge,l.site,c.site,n);l=s[0],(c=s[u-1]).edge=jx(l.site,c.site,null,n),Ax(l),Ax(c)}function Vx(t){for(var e,i,a,n,r,o=t[0],s=t[1],l=Hx._;l;)if((a=Gx(l,s)-o)>Yx)l=l.L;else{if(!((n=o-Fx(l,s))>Yx)){a>-Yx?(e=l.P,i=l):n>-Yx?(e=l,i=l.N):e=i=l;break}if(!l.R){e=l;break}l=l.R}zx[(r=t).index]={site:r,halfedges:[]};var c=Px(t);if(Hx.insert(e,c),e||i){if(e===i)return Mx(e),i=Px(e.site),Hx.insert(c,i),c.edge=i.edge=jx(e.site,c.site),Ax(e),void Ax(i);if(i){Mx(e),Mx(i);var d=e.site,u=d[0],f=d[1],h=t[0]-u,m=t[1]-f,p=i.site,g=p[0]-u,v=p[1]-f,b=2*(h*v-m*g),_=h*h+m*m,w=g*g+v*v,y=[(v*_-m*w)/b+u,(h*w-g*_)/b+f];Ox(i.edge,d,p,y),c.edge=jx(d,t,null,y),i.edge=jx(t,p,null,y),Ax(e),Ax(i)}else c.edge=jx(e.site,c.site)}}function Gx(t,e){var i=t.site,a=i[0],n=i[1],r=n-e;if(!r)return a;var o=t.P;if(!o)return-1/0;var s=(i=o.site)[0],l=i[1],c=l-e;if(!c)return s;var d=s-a,u=1/r-1/c,f=d/c;return u?(-f+Math.sqrt(f*f-2*u*(d*d/(-2*c)-l+c/2+n-r/2)))/u+a:(a+s)/2}function Fx(t,e){var i=t.N;if(i)return Gx(i,e);var a=t.site;return a[1]===e?a[0]:1/0}var Hx,zx,Wx,Jx,Yx=1e-6,Xx=1e-12;function Zx(t,e){return e[1]-t[1]||e[0]-t[0]}function Kx(t,e){var i,a,n,r=t.sort(Zx).pop();for(Jx=[],zx=new Array(t.length),Hx=new Dx,Wx=new Dx;;)if(n=Ex,r&&(!n||r[1]<n.y||r[1]===n.y&&r[0]<n.x))r[0]===i&&r[1]===a||(Vx(r),i=r[0],a=r[1]),r=t.pop();else{if(!n)break;Ux(n.arc)}if(function(){for(var t,e,i,a,n=0,r=zx.length;n<r;++n)if((t=zx[n])&&(a=(e=t.halfedges).length)){var o=new Array(a),s=new Array(a);for(i=0;i<a;++i)o[i]=i,s[i]=(l=t,c=Jx[e[i]],u=void 0,f=void 0,d=l.site,u=c.left,f=c.right,d===f&&(f=u,u=d),f?Math.atan2(f[1]-u[1],f[0]-u[0]):(d===u?(u=c[1],f=c[0]):(u=c[0],f=c[1]),Math.atan2(u[0]-f[0],f[1]-u[1])));for(o.sort(function(t,e){return s[e]-s[t]}),i=0;i<a;++i)s[i]=e[o[i]];for(i=0;i<a;++i)e[i]=s[i]}var l,c,d,u,f}(),e){var o=+e[0][0],s=+e[0][1],l=+e[1][0],c=+e[1][1];!function(t,e,i,a){for(var n,r=Jx.length;r--;)Ix(n=Jx[r],t,e,i,a)&&Tx(n,t,e,i,a)&&(Math.abs(n[0][0]-n[1][0])>Yx||Math.abs(n[0][1]-n[1][1])>Yx)||delete Jx[r]}(o,s,l,c),function(t,e,i,a){var n,r,o,s,l,c,d,u,f,h,m,p,g,v,b=zx.length,_=!0;for(n=0;n<b;++n)if(r=zx[n]){for(o=r.site,s=(l=r.halfedges).length;s--;)Jx[l[s]]||l.splice(s,1);for(s=0,c=l.length;s<c;)g=r,m=(h=(v=Jx[l[s]])[+(v.left===g.site)])[0],p=h[1],u=(d=Lx(r,Jx[l[++s%c]]))[0],f=d[1],(Math.abs(m-u)>Yx||Math.abs(p-f)>Yx)&&(l.splice(s,0,Jx.push(Nx(o,h,Math.abs(m-t)<Yx&&a-p>Yx?[t,Math.abs(u-t)<Yx?f:a]:Math.abs(p-a)<Yx&&i-m>Yx?[Math.abs(f-a)<Yx?u:i,a]:Math.abs(m-i)<Yx&&p-e>Yx?[i,Math.abs(u-i)<Yx?f:e]:Math.abs(p-e)<Yx&&m-t>Yx?[Math.abs(f-e)<Yx?u:t,e]:null))-1),++c);c&&(_=!1)}if(_){var w,y,x,k=1/0;for(n=0,_=null;n<b;++n)(r=zx[n])&&(x=(w=(o=r.site)[0]-t)*w+(y=o[1]-e)*y)<k&&(k=x,_=r);if(_){var $=[t,e],C=[t,a],S=[i,a],D=[i,e];_.halfedges.push(Jx.push(Nx(o=_.site,$,C))-1,Jx.push(Nx(o,C,S))-1,Jx.push(Nx(o,S,D))-1,Jx.push(Nx(o,D,$))-1)}}for(n=0;n<b;++n)(r=zx[n])&&(r.halfedges.length||delete zx[n])}(o,s,l,c)}this.edges=Jx,this.cells=zx,Hx=Wx=Jx=zx=null}Kx.prototype={constructor:Kx,polygons:function(){var t=this.edges;return this.cells.map(function(e){var i=e.halfedges.map(function(i){return Lx(e,t[i])});return i.data=e.site.data,i})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(i,a){if(r=(n=i.halfedges).length)for(var n,r,o,s,l,c,d=i.site,u=-1,f=e[n[r-1]],h=f.left===d?f.right:f.left;++u<r;)o=h,h=(f=e[n[u]]).left===d?f.right:f.left,o&&h&&a<o.index&&a<h.index&&(l=o,c=h,((s=d)[0]-c[0])*(l[1]-s[1])-(s[0]-l[0])*(c[1]-s[1])<0)&&t.push([d.data,o.data,h.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,i){for(var a,n,r=this,o=r._found||0,s=r.cells.length;!(n=r.cells[o]);)if(++o>=s)return null;var l=t-n.site[0],c=e-n.site[1],d=l*l+c*c;do{n=r.cells[a=o],o=null,n.halfedges.forEach(function(i){var a=r.edges[i],s=a.left;if(s!==n.site&&s||(s=a.right)){var l=t-s[0],c=e-s[1],u=l*l+c*c;u<d&&(d=u,o=s.index)}})}while(null!==o);return r._found=a,null==i||d<=i*i?n.site:null}};var Qx=function(){var t=wx,e=yx,i=null;function a(a){return new Kx(a.map(function(i,n){var r=[Math.round(t(i,n,a)/Yx)*Yx,Math.round(e(i,n,a)/Yx)*Yx];return r.index=n,r.data=i,r}),i)}return a.polygons=function(t){return a(t).polygons()},a.links=function(t){return a(t).links()},a.triangles=function(t){return a(t).triangles()},a.x=function(e){return arguments.length?(t="function"==typeof e?e:_x(+e),a):t},a.y=function(t){return arguments.length?(e="function"==typeof t?t:_x(+t),a):e},a.extent=function(t){return arguments.length?(i=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],a):i&&[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},a.size=function(t){return arguments.length?(i=null==t?null:[[0,0],[+t[0],+t[1]]],a):i&&[i[1][0]-i[0][0],i[1][1]-i[0][1]]},a},tk=function(t){return function(){return t}};function ek(t,e,i){this.k=t,this.x=e,this.y=i}ek.prototype={constructor:ek,scale:function(t){return 1===t?this:new ek(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new ek(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ik=new ek(1,0,0);function ak(t){for(;!t.__zoom;)if(!(t=t.parentNode))return ik;return t.__zoom}function nk(){Ft.stopImmediatePropagation()}ak.prototype=ek.prototype;var rk=function(){Ft.preventDefault(),Ft.stopImmediatePropagation()};function ok(){return!Ft.ctrlKey&&!Ft.button}function sk(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t).hasAttribute("viewBox")?[[(t=t.viewBox.baseVal).x,t.y],[t.x+t.width,t.y+t.height]]:[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]:[[0,0],[t.clientWidth,t.clientHeight]]}function lk(){return this.__zoom||ik}function ck(){return-Ft.deltaY*(1===Ft.deltaMode?.05:Ft.deltaMode?1:.002)}function dk(){return navigator.maxTouchPoints||"ontouchstart"in this}function uk(t,e,i){var a=t.invertX(e[0][0])-i[0][0],n=t.invertX(e[1][0])-i[1][0],r=t.invertY(e[0][1])-i[0][1],o=t.invertY(e[1][1])-i[1][1];return t.translate(n>a?(a+n)/2:Math.min(0,a)||Math.max(0,n),o>r?(r+o)/2:Math.min(0,r)||Math.max(0,o))}var fk=function(){var t,e,i=ok,a=sk,n=uk,r=ck,o=dk,s=[0,1/0],l=[[-1/0,-1/0],[1/0,1/0]],c=250,d=ua,u=ft("start","zoom","end"),f=500,h=150,m=0;function p(t){t.property("__zoom",lk).on("wheel.zoom",x).on("mousedown.zoom",k).on("dblclick.zoom",$).filter(o).on("touchstart.zoom",C).on("touchmove.zoom",S).on("touchend.zoom touchcancel.zoom",D).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function g(t,e){return(e=Math.max(s[0],Math.min(s[1],e)))===t.k?t:new ek(e,t.x,t.y)}function v(t,e,i){var a=e[0]-i[0]*t.k,n=e[1]-i[1]*t.k;return a===t.x&&n===t.y?t:new ek(t.k,a,n)}function b(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function _(t,e,i){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=arguments,n=w(this,t),r=a.apply(this,t),o=null==i?b(r):"function"==typeof i?i.apply(this,t):i,s=Math.max(r[1][0]-r[0][0],r[1][1]-r[0][1]),l=this.__zoom,c="function"==typeof e?e.apply(this,t):e,u=d(l.invert(o).concat(s/l.k),c.invert(o).concat(s/c.k));return function(t){if(1===t)t=c;else{var e=u(t),i=s/e[2];t=new ek(i,o[0]-e[0]*i,o[1]-e[1]*i)}n.zoom(null,t)}})}function w(t,e,i){return!i&&t.__zooming||new y(t,e)}function y(t,e){this.that=t,this.args=e,this.active=0,this.extent=a.apply(t,e),this.taps=0}function x(){if(i.apply(this,arguments)){var t=w(this,arguments),e=this.__zoom,a=Math.max(s[0],Math.min(s[1],e.k*Math.pow(2,r.apply(this,arguments)))),o=le(this);if(t.wheel)t.mouse[0][0]===o[0]&&t.mouse[0][1]===o[1]||(t.mouse[1]=e.invert(t.mouse[0]=o)),clearTimeout(t.wheel);else{if(e.k===a)return;t.mouse=[o,e.invert(o)],rn(this),t.start()}rk(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},h),t.zoom("mouse",n(v(g(e,a),t.mouse[0],t.mouse[1]),t.extent,l))}}function k(){if(!e&&i.apply(this,arguments)){var t=w(this,arguments,!0),a=ee(Ft.view).on("mousemove.zoom",function(){if(rk(),!t.moved){var e=Ft.clientX-o,i=Ft.clientY-s;t.moved=e*e+i*i>m}t.zoom("mouse",n(v(t.that.__zoom,t.mouse[0]=le(t.that),t.mouse[1]),t.extent,l))},!0).on("mouseup.zoom",function(){a.on("mousemove.zoom mouseup.zoom",null),pe(Ft.view,t.moved),rk(),t.end()},!0),r=le(this),o=Ft.clientX,s=Ft.clientY;me(Ft.view),nk(),t.mouse=[r,this.__zoom.invert(r)],rn(this),t.start()}}function $(){if(i.apply(this,arguments)){var t=this.__zoom,e=le(this),r=t.invert(e),o=t.k*(Ft.shiftKey?.5:2),s=n(v(g(t,o),e,r),a.apply(this,arguments),l);rk(),c>0?ee(this).transition().duration(c).call(_,s,e):ee(this).call(p.transform,s)}}function C(){if(i.apply(this,arguments)){var e,a,n,r,o=Ft.touches,s=o.length,l=w(this,arguments,Ft.changedTouches.length===s);for(nk(),a=0;a<s;++a)n=o[a],r=[r=de(this,o,n.identifier),this.__zoom.invert(r),n.identifier],l.touch0?l.touch1||l.touch0[2]===r[2]||(l.touch1=r,l.taps=0):(l.touch0=r,e=!0,l.taps=1+!!t);t&&(t=clearTimeout(t)),e&&(l.taps<2&&(t=setTimeout(function(){t=null},f)),rn(this),l.start())}}function S(){if(this.__zooming){var e,i,a,r,o=w(this,arguments),s=Ft.changedTouches,c=s.length;for(rk(),t&&(t=clearTimeout(t)),o.taps=0,e=0;e<c;++e)i=s[e],a=de(this,s,i.identifier),o.touch0&&o.touch0[2]===i.identifier?o.touch0[0]=a:o.touch1&&o.touch1[2]===i.identifier&&(o.touch1[0]=a);if(i=o.that.__zoom,o.touch1){var d=o.touch0[0],u=o.touch0[1],f=o.touch1[0],h=o.touch1[1],m=(m=f[0]-d[0])*m+(m=f[1]-d[1])*m,p=(p=h[0]-u[0])*p+(p=h[1]-u[1])*p;i=g(i,Math.sqrt(m/p)),a=[(d[0]+f[0])/2,(d[1]+f[1])/2],r=[(u[0]+h[0])/2,(u[1]+h[1])/2]}else{if(!o.touch0)return;a=o.touch0[0],r=o.touch0[1]}o.zoom("touch",n(v(i,a,r),o.extent,l))}}function D(){if(this.__zooming){var t,i,a=w(this,arguments),n=Ft.changedTouches,r=n.length;for(nk(),e&&clearTimeout(e),e=setTimeout(function(){e=null},f),t=0;t<r;++t)i=n[t],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps){var o=ee(this).on("dblclick.zoom");o&&o.apply(this,arguments)}}}return p.transform=function(t,e,i){var a=t.selection?t.selection():t;a.property("__zoom",lk),t!==a?_(t,e,i):a.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof e?e.apply(this,arguments):e).end()})},p.scaleBy=function(t,e,i){p.scaleTo(t,function(){return this.__zoom.k*("function"==typeof e?e.apply(this,arguments):e)},i)},p.scaleTo=function(t,e,i){p.transform(t,function(){var t=a.apply(this,arguments),r=this.__zoom,o=null==i?b(t):"function"==typeof i?i.apply(this,arguments):i,s=r.invert(o),c="function"==typeof e?e.apply(this,arguments):e;return n(v(g(r,c),o,s),t,l)},i)},p.translateBy=function(t,e,i){p.transform(t,function(){return n(this.__zoom.translate("function"==typeof e?e.apply(this,arguments):e,"function"==typeof i?i.apply(this,arguments):i),a.apply(this,arguments),l)})},p.translateTo=function(t,e,i,r){p.transform(t,function(){var t=a.apply(this,arguments),o=this.__zoom,s=null==r?b(t):"function"==typeof r?r.apply(this,arguments):r;return n(ik.translate(s[0],s[1]).scale(o.k).translate("function"==typeof e?-e.apply(this,arguments):-e,"function"==typeof i?-i.apply(this,arguments):-i),t,l)},r)},y.prototype={start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(t,e){return this.mouse&&"mouse"!==t&&(this.mouse[1]=e.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=e.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=e.invert(this.touch1[0])),this.that.__zoom=e,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(t){Yt(new function(t,e,i){this.target=t,this.type=e,this.transform=i}(p,t,this.that.__zoom),u.apply,u,[t,this.that,this.args])}},p.wheelDelta=function(t){return arguments.length?(r="function"==typeof t?t:tk(+t),p):r},p.filter=function(t){return arguments.length?(i="function"==typeof t?t:tk(!!t),p):i},p.touchable=function(t){return arguments.length?(o="function"==typeof t?t:tk(!!t),p):o},p.extent=function(t){return arguments.length?(a="function"==typeof t?t:tk([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),p):a},p.scaleExtent=function(t){return arguments.length?(s[0]=+t[0],s[1]=+t[1],p):[s[0],s[1]]},p.translateExtent=function(t){return arguments.length?(l[0][0]=+t[0][0],l[1][0]=+t[1][0],l[0][1]=+t[0][1],l[1][1]=+t[1][1],p):[[l[0][0],l[0][1]],[l[1][0],l[1][1]]]},p.constrain=function(t){return arguments.length?(n=t,p):n},p.duration=function(t){return arguments.length?(c=+t,p):c},p.interpolate=function(t){return arguments.length?(d=t,p):d},p.on=function(){var t=u.on.apply(u,arguments);return t===u?p:t},p.clickDistance=function(t){return arguments.length?(m=(t=+t)*t,p):Math.sqrt(m)},p};i.d(e,!1,function(){return"5.14.2"}),i.d(e,!1,function(){return l}),i.d(e,!1,function(){return o}),i.d(e,!1,function(){return s}),i.d(e,!1,function(){return a}),i.d(e,!1,function(){return n}),i.d(e,!1,function(){return u}),i.d(e,!1,function(){return f}),i.d(e,!1,function(){return p}),i.d(e,!1,function(){return g}),i.d(e,!1,function(){return O}),i.d(e,!1,function(){return I}),i.d(e,!1,function(){return L}),i.d(e,!1,function(){return N}),i.d(e,!1,function(){return E}),i.d(e,!1,function(){return R}),i.d(e,!1,function(){return A}),i.d(e,!1,function(){return M}),i.d(e,!1,function(){return B}),i.d(e,!1,function(){return c}),i.d(e,!1,function(){return P}),i.d(e,!1,function(){return T}),i.d(e,!1,function(){return x}),i.d(e,!1,function(){return q}),i.d(e,!1,function(){return U}),i.d(e,!1,function(){return V}),i.d(e,!1,function(){return S}),i.d(e,!1,function(){return D}),i.d(e,!1,function(){return j}),i.d(e,!1,function(){return G}),i.d(e,!1,function(){return m}),i.d(e,!1,function(){return H}),i.d(e,!1,function(){return at}),i.d(e,!1,function(){return nt}),i.d(e,!1,function(){return rt}),i.d(e,!1,function(){return ot}),i.d(e,!1,function(){return Ir}),i.d(e,!1,function(){return Or}),i.d(e,!1,function(){return Tr}),i.d(e,!1,function(){return Nr}),i.d(e,!1,function(){return qr}),i.d(e,!1,function(){return to}),i.d(e,!1,function(){return no}),i.d(e,!1,function(){return ho}),i.d(e,!1,function(){return ao}),i.d(e,!1,function(){return mo}),i.d(e,!1,function(){return po}),i.d(e,!1,function(){return go}),i.d(e,!1,function(){return qe}),i.d(e,!1,function(){return Fe}),i.d(e,!1,function(){return Ze}),i.d(e,!1,function(){return ui}),i.d(e,!1,function(){return _i}),i.d(e,!1,function(){return bi}),i.d(e,!1,function(){return di}),i.d(e,!1,function(){return ji}),i.d(e,!1,function(){return Co}),i.d(e,!1,function(){return To}),i.d(e,!1,function(){return ft}),i.d(e,!1,function(){return xe}),i.d(e,!1,function(){return me}),i.d(e,!1,function(){return pe}),i.d(e,!1,function(){return Uo}),i.d(e,!1,function(){return Go}),i.d(e,!1,function(){return Fo}),i.d(e,!1,function(){return Ho}),i.d(e,!1,function(){return zo}),i.d(e,!1,function(){return Wo}),i.d(e,!1,function(){return Yo}),i.d(e,!1,function(){return Xo}),i.d(e,!1,function(){return Zo}),i.d(e,!1,function(){return Ko}),i.d(e,!1,function(){return Qo}),i.d(e,!1,function(){return ts}),i.d(e,!1,function(){return pn}),i.d(e,!1,function(){return bn}),i.d(e,!1,function(){return gn}),i.d(e,!1,function(){return vn}),i.d(e,!1,function(){return bn}),i.d(e,!1,function(){return yn}),i.d(e,!1,function(){return _n}),i.d(e,!1,function(){return wn}),i.d(e,!1,function(){return yn}),i.d(e,!1,function(){return $n}),i.d(e,!1,function(){return xn}),i.d(e,!1,function(){return kn}),i.d(e,!1,function(){return $n}),i.d(e,!1,function(){return Nn}),i.d(e,!1,function(){return Dn}),i.d(e,!1,function(){return jn}),i.d(e,!1,function(){return Nn}),i.d(e,!1,function(){return In}),i.d(e,!1,function(){return On}),i.d(e,!1,function(){return Tn}),i.d(e,!1,function(){return In}),i.d(e,!1,function(){return Rn}),i.d(e,!1,function(){return Ln}),i.d(e,!1,function(){return En}),i.d(e,!1,function(){return Rn}),i.d(e,!1,function(){return Wn}),i.d(e,!1,function(){return zn}),i.d(e,!1,function(){return Wn}),i.d(e,!1,function(){return Jn}),i.d(e,!1,function(){return Zn}),i.d(e,!1,function(){return Yn}),i.d(e,!1,function(){return Xn}),i.d(e,!1,function(){return Zn}),i.d(e,!1,function(){return tr}),i.d(e,!1,function(){return Qn}),i.d(e,!1,function(){return tr}),i.d(e,!1,function(){return er}),i.d(e,!1,function(){return is}),i.d(e,!1,function(){return ns}),i.d(e,!1,function(){return ls}),i.d(e,!1,function(){return cs}),i.d(e,!1,function(){return ds}),i.d(e,!1,function(){return us}),i.d(e,!1,function(){return hs}),i.d(e,!1,function(){return os}),i.d(e,!1,function(){return ps}),i.d(e,!1,function(){return gs}),i.d(e,!1,function(){return vs}),i.d(e,!1,function(){return bs}),i.d(e,!1,function(){return Ts}),i.d(e,!1,function(){return Es}),i.d(e,!1,function(){return qs}),i.d(e,!1,function(){return Us}),i.d(e,!1,function(){return Ps}),i.d(e,!1,function(){return Vs}),i.d(e,!1,function(){return Gs}),i.d(e,!1,function(){return ol}),i.d(e,!1,function(){return Zs}),i.d(e,!1,function(){return Ks}),i.d(e,!1,function(){return rl}),i.d(e,!1,function(){return Ws}),i.d(e,!1,function(){return Js}),i.d(e,!1,function(){return sl}),i.d(e,!1,function(){return ll}),i.d(e,!1,function(){return cl}),i.d(e,!1,function(){return ic}),i.d(e,!1,function(){return Jc}),i.d(e,!1,function(){return od}),i.d(e,!1,function(){return vd}),i.d(e,!1,function(){return Nd}),i.d(e,!1,function(){return Od}),i.d(e,!1,function(){return Bd}),i.d(e,!1,function(){return Ed}),i.d(e,!1,function(){return iu}),i.d(e,!1,function(){return Wd}),i.d(e,!1,function(){return ru}),i.d(e,!1,function(){return ou}),i.d(e,!1,function(){return uu}),i.d(e,!1,function(){return Fd}),i.d(e,!1,function(){return df}),i.d(e,!1,function(){return Nf}),i.d(e,!1,function(){return Of}),i.d(e,!1,function(){return Ef}),i.d(e,!1,function(){return Lf}),i.d(e,!1,function(){return Af}),i.d(e,!1,function(){return Rf}),i.d(e,!1,function(){return Vf}),i.d(e,!1,function(){return Uf}),i.d(e,!1,function(){return jf}),i.d(e,!1,function(){return Df}),i.d(e,!1,function(){return zf}),i.d(e,!1,function(){return Hf}),i.d(e,!1,function(){return Qf}),i.d(e,!1,function(){return Kf}),i.d(e,!1,function(){return Ff}),i.d(e,!1,function(){return Gf}),i.d(e,!1,function(){return eh}),i.d(e,!1,function(){return th}),i.d(e,!1,function(){return ah}),i.d(e,!1,function(){return $f}),i.d(e,!1,function(){return Cf}),i.d(e,!1,function(){return Bf}),i.d(e,!1,function(){return Mf}),i.d(e,!1,function(){return rh}),i.d(e,!1,function(){return nh}),i.d(e,!1,function(){return sh}),i.d(e,!1,function(){return oh}),i.d(e,!1,function(){return ch}),i.d(e,!1,function(){return lh}),i.d(e,!1,function(){return uh}),i.d(e,!1,function(){return dh}),i.d(e,!1,function(){return md}),i.d(e,!1,function(){return Jl}),i.d(e,!1,function(){return uf}),i.d(e,"a",function(){return ph}),i.d(e,"c",function(){return vh}),i.d(e,!1,function(){return Uh}),i.d(e,!1,function(){return Ah}),i.d(e,!1,function(){return kh}),i.d(e,!1,function(){return Wh}),i.d(e,!1,function(){return Qh}),i.d(e,"g",function(){return nm}),i.d(e,!1,function(){return cm}),i.d(e,!1,function(){return dm}),i.d(e,!1,function(){return zh}),i.d(e,!1,function(){return rm}),i.d(e,!1,function(){return um}),i.d(e,!1,function(){return lm}),i.d(e,!1,function(){return fm}),i.d(e,!1,function(){return Qi}),i.d(e,!1,function(){return Vi}),i.d(e,!1,function(){return Ti}),i.d(e,!1,function(){return Ii}),i.d(e,!1,function(){return Gi}),i.d(e,!1,function(){return ta}),i.d(e,!1,function(){return ea}),i.d(e,!1,function(){return Fi}),i.d(e,!1,function(){return Hi}),i.d(e,!1,function(){return ia}),i.d(e,!1,function(){return Ki}),i.d(e,!1,function(){return sa}),i.d(e,!1,function(){return la}),i.d(e,!1,function(){return ua}),i.d(e,!1,function(){return Bi}),i.d(e,!1,function(){return qi}),i.d(e,!1,function(){return Ui}),i.d(e,!1,function(){return ha}),i.d(e,!1,function(){return ma}),i.d(e,!1,function(){return pa}),i.d(e,!1,function(){return va}),i.d(e,!1,function(){return ba}),i.d(e,!1,function(){return wa}),i.d(e,!1,function(){return ya}),i.d(e,!1,function(){return xa}),i.d(e,!1,function(){return Ca}),i.d(e,!1,function(){return Jr}),i.d(e,!1,function(){return hm}),i.d(e,!1,function(){return mm}),i.d(e,!1,function(){return bm}),i.d(e,!1,function(){return _m}),i.d(e,!1,function(){return wm}),i.d(e,!1,function(){return Cs}),i.d(e,!1,function(){return xm}),i.d(e,!1,function(){return km}),i.d(e,!1,function(){return $m}),i.d(e,!1,function(){return Sm}),i.d(e,!1,function(){return Cm}),i.d(e,!1,function(){return Dm}),i.d(e,!1,function(){return Rm}),i.d(e,!1,function(){return Am}),i.d(e,!1,function(){return Zm}),i.d(e,!1,function(){return Xm}),i.d(e,!1,function(){return op}),i.d(e,!1,function(){return dp}),i.d(e,!1,function(){return Em}),i.d(e,!1,function(){return Lm}),i.d(e,!1,function(){return pp}),i.d(e,!1,function(){return gp}),i.d(e,!1,function(){return vp}),i.d(e,!1,function(){return bp}),i.d(e,!1,function(){return _p}),i.d(e,!1,function(){return gb}),i.d(e,!1,function(){return vb}),i.d(e,!1,function(){return wb}),i.d(e,!1,function(){return yb}),i.d(e,!1,function(){return kb}),i.d(e,!1,function(){return $b}),i.d(e,!1,function(){return xb}),i.d(e,!1,function(){return Cb}),i.d(e,!1,function(){return Db}),i.d(e,!1,function(){return jb}),i.d(e,!1,function(){return Ob}),i.d(e,!1,function(){return Tb}),i.d(e,!1,function(){return Nb}),i.d(e,!1,function(){return Jm}),i.d(e,!1,function(){return Lb}),i.d(e,!1,function(){return Eb}),i.d(e,!1,function(){return Rb}),i.d(e,!1,function(){return Ab}),i.d(e,!1,function(){return Mb}),i.d(e,!1,function(){return Bb}),i.d(e,!1,function(){return Pb}),i.d(e,!1,function(){return qb}),i.d(e,!1,function(){return Ub}),i.d(e,!1,function(){return Vb}),i.d(e,!1,function(){return Hb}),i.d(e,!1,function(){return Fb}),i.d(e,!1,function(){return Wb}),i.d(e,!1,function(){return zb}),i.d(e,!1,function(){return Yb}),i.d(e,!1,function(){return Jb}),i.d(e,!1,function(){return Zb}),i.d(e,!1,function(){return Xb}),i.d(e,!1,function(){return Qb}),i.d(e,!1,function(){return Kb}),i.d(e,!1,function(){return e_}),i.d(e,!1,function(){return t_}),i.d(e,!1,function(){return a_}),i.d(e,!1,function(){return i_}),i.d(e,!1,function(){return r_}),i.d(e,!1,function(){return n_}),i.d(e,!1,function(){return s_}),i.d(e,!1,function(){return o_}),i.d(e,!1,function(){return c_}),i.d(e,!1,function(){return l_}),i.d(e,!1,function(){return u_}),i.d(e,!1,function(){return d_}),i.d(e,!1,function(){return h_}),i.d(e,!1,function(){return f_}),i.d(e,!1,function(){return p_}),i.d(e,!1,function(){return m_}),i.d(e,!1,function(){return v_}),i.d(e,!1,function(){return g_}),i.d(e,!1,function(){return __}),i.d(e,!1,function(){return b_}),i.d(e,!1,function(){return y_}),i.d(e,!1,function(){return w_}),i.d(e,!1,function(){return k_}),i.d(e,!1,function(){return x_}),i.d(e,!1,function(){return C_}),i.d(e,!1,function(){return $_}),i.d(e,!1,function(){return D_}),i.d(e,!1,function(){return S_}),i.d(e,!1,function(){return N_}),i.d(e,!1,function(){return j_}),i.d(e,!1,function(){return T_}),i.d(e,!1,function(){return O_}),i.d(e,!1,function(){return L_}),i.d(e,!1,function(){return I_}),i.d(e,!1,function(){return R_}),i.d(e,!1,function(){return E_}),i.d(e,!1,function(){return M_}),i.d(e,!1,function(){return A_}),i.d(e,!1,function(){return P_}),i.d(e,!1,function(){return B_}),i.d(e,!1,function(){return U_}),i.d(e,!1,function(){return q_}),i.d(e,!1,function(){return G_}),i.d(e,!1,function(){return V_}),i.d(e,!1,function(){return F_}),i.d(e,!1,function(){return H_}),i.d(e,!1,function(){return Y_}),i.d(e,!1,function(){return z_}),i.d(e,!1,function(){return W_}),i.d(e,!1,function(){return Q_}),i.d(e,!1,function(){return tw}),i.d(e,!1,function(){return iw}),i.d(e,!1,function(){return aw}),i.d(e,!1,function(){return nw}),i.d(e,!1,function(){return rw}),i.d(e,!1,function(){return ie}),i.d(e,!1,function(){return gt}),i.d(e,!1,function(){return ne}),i.d(e,!1,function(){return yt}),i.d(e,!1,function(){return le}),i.d(e,!1,function(){return pt}),i.d(e,!1,function(){return mt}),i.d(e,!1,function(){return se}),i.d(e,"e",function(){return ee}),i.d(e,"f",function(){return ce}),i.d(e,!1,function(){return te}),i.d(e,!1,function(){return bt}),i.d(e,!1,function(){return wt}),i.d(e,!1,function(){return Nt}),i.d(e,!1,function(){return de}),i.d(e,!1,function(){return ue}),i.d(e,!1,function(){return jt}),i.d(e,"b",function(){return Ft}),i.d(e,!1,function(){return Yt}),i.d(e,!1,function(){return Cw}),i.d(e,!1,function(){return Tw}),i.d(e,!1,function(){return Ow}),i.d(e,!1,function(){return Ew}),i.d(e,!1,function(){return qw}),i.d(e,!1,function(){return qw}),i.d(e,!1,function(){return Pw}),i.d(e,!1,function(){return Pw}),i.d(e,!1,function(){return Uw}),i.d(e,"d",function(){return Yw}),i.d(e,!1,function(){return Xw}),i.d(e,!1,function(){return Zw}),i.d(e,!1,function(){return py}),i.d(e,!1,function(){return my}),i.d(e,!1,function(){return Kw}),i.d(e,!1,function(){return Qw}),i.d(e,!1,function(){return iy}),i.d(e,!1,function(){return sy}),i.d(e,!1,function(){return oy}),i.d(e,!1,function(){return cy}),i.d(e,!1,function(){return hy}),i.d(e,!1,function(){return yy}),i.d(e,!1,function(){return ky}),i.d(e,!1,function(){return _y}),i.d(e,!1,function(){return Cy}),i.d(e,!1,function(){return Oy}),i.d(e,!1,function(){return Iy}),i.d(e,!1,function(){return jy}),i.d(e,!1,function(){return My}),i.d(e,!1,function(){return Py}),i.d(e,!1,function(){return Ry}),i.d(e,!1,function(){return Uy}),i.d(e,!1,function(){return Dw}),i.d(e,!1,function(){return Yy}),i.d(e,!1,function(){return Xy}),i.d(e,!1,function(){return Qy}),i.d(e,!1,function(){return ex}),i.d(e,!1,function(){return ax}),i.d(e,!1,function(){return ix}),i.d(e,!1,function(){return sx}),i.d(e,!1,function(){return lx}),i.d(e,!1,function(){return cx}),i.d(e,!1,function(){return nx}),i.d(e,!1,function(){return dx}),i.d(e,!1,function(){return ux}),i.d(e,!1,function(){return fx}),i.d(e,!1,function(){return mx}),i.d(e,!1,function(){return gx}),i.d(e,!1,function(){return vx}),i.d(e,!1,function(){return rx}),i.d(e,!1,function(){return bx}),i.d(e,!1,function(){return xp}),i.d(e,!1,function(){return $p}),i.d(e,!1,function(){return Cp}),i.d(e,!1,function(){return $p}),i.d(e,!1,function(){return Cp}),i.d(e,!1,function(){return Np}),i.d(e,!1,function(){return Op}),i.d(e,!1,function(){return Np}),i.d(e,!1,function(){return Op}),i.d(e,!1,function(){return Ip}),i.d(e,!1,function(){return Lp}),i.d(e,!1,function(){return Rp}),i.d(e,!1,function(){return Ap}),i.d(e,!1,function(){return Bp}),i.d(e,!1,function(){return Pp}),i.d(e,!1,function(){return Up}),i.d(e,!1,function(){return Jp}),i.d(e,!1,function(){return Up}),i.d(e,!1,function(){return Jp}),i.d(e,!1,function(){return Vp}),i.d(e,!1,function(){return Yp}),i.d(e,!1,function(){return Gp}),i.d(e,!1,function(){return Xp}),i.d(e,!1,function(){return Fp}),i.d(e,!1,function(){return Zp}),i.d(e,!1,function(){return Hp}),i.d(e,!1,function(){return Kp}),i.d(e,!1,function(){return zp}),i.d(e,!1,function(){return Qp}),i.d(e,!1,function(){return Wp}),i.d(e,!1,function(){return tg}),i.d(e,!1,function(){return ig}),i.d(e,!1,function(){return ag}),i.d(e,!1,function(){return rg}),i.d(e,!1,function(){return og}),i.d(e,!1,function(){return lg}),i.d(e,!1,function(){return cg}),i.d(e,!1,function(){return ug}),i.d(e,!1,function(){return fg}),i.d(e,!1,function(){return mg}),i.d(e,!1,function(){return pg}),i.d(e,!1,function(){return vg}),i.d(e,!1,function(){return $g}),i.d(e,!1,function(){return vg}),i.d(e,!1,function(){return $g}),i.d(e,!1,function(){return bg}),i.d(e,!1,function(){return Cg}),i.d(e,!1,function(){return _g}),i.d(e,!1,function(){return Sg}),i.d(e,!1,function(){return wg}),i.d(e,!1,function(){return Dg}),i.d(e,!1,function(){return yg}),i.d(e,!1,function(){return jg}),i.d(e,!1,function(){return xg}),i.d(e,!1,function(){return Ng}),i.d(e,!1,function(){return kg}),i.d(e,!1,function(){return Og}),i.d(e,!1,function(){return Ig}),i.d(e,!1,function(){return Lg}),i.d(e,!1,function(){return Rg}),i.d(e,!1,function(){return Ag}),i.d(e,!1,function(){return ib}),i.d(e,!1,function(){return Vg}),i.d(e,!1,function(){return Gg}),i.d(e,!1,function(){return Fg}),i.d(e,!1,function(){return Hg}),i.d(e,!1,function(){return qg}),i.d(e,!1,function(){return nb}),i.d(e,!1,function(){return rb}),i.d(e,!1,function(){return Ra}),i.d(e,!1,function(){return Ba}),i.d(e,!1,function(){return Pa}),i.d(e,!1,function(){return Ga}),i.d(e,!1,function(){return Fa}),i.d(e,!1,function(){return fn}),i.d(e,!1,function(){return rr}),i.d(e,!1,function(){return rn}),i.d(e,!1,function(){return Qx}),i.d(e,!1,function(){return fk}),i.d(e,!1,function(){return ak}),i.d(e,!1,function(){return ik})},w5yU:function(t,e){},yFFM:function(t,e){},ydhF:function(t,e,i){"use strict";var a=i("//Fk"),n=i.n(a),r=i("mtWM"),o=i.n(r),s=i("qqiS"),l=i("yJCr"),c={props:{isAuto:{type:Boolean},isEditConfig:{type:Boolean},isShow:{type:Boolean},shadowObj:{type:Object},domainObj:{type:Object}},data:function(){return{url:"",dmLimReqSwitch:!1,dmLimReqform:{limReqRate:"",limReqReject:!1,limReqBurst:"",limReqDelay:"",limReqNodelay:!1},rateUnit:"r/s",rateUnitOpt:[{label:"r/秒",value:"r/s"},{label:"r/分",value:"r/m"}],dmLimReqformRules:{limReqRate:[{required:!0,message:this.$t("lg.required"),trigger:"blur"},{pattern:/^[0-9]+$/,message:this.$t("lg.requirepositive"),trigger:"change"}]},limReqmodalLoading:!1}},methods:{getDmLimReqData:function(){var t=this;return new n.a(function(e,i){var a=t,n=a.shadowObj.snodeId,r=a.domainObj.domainName,s=a.domainObj.port;a.isAuto?a.url=l.b+"pe/shadow/domain/limit/req?snodeId="+n+"&domainName="+r+"&domainPort="+s+"&autoconfig=true":a.isEditConfig?a.url=l.b+"pe/shadow/domain/limit/req?snodeId="+n+"&domainName="+r+"&domainPort="+s+"&savedConfig=true":a.url=l.b+"pe/shadow/domain/limit/req?snodeId="+n+"&domainName="+r+"&domainPort="+s,o.a.get(a.url).then(function(t){if(0==t.data.responseCode){var i=t.data.data;"Y"==i.reject?(a.dmLimReqSwitch=!1,a.dmLimReqform.limReqRate="",a.rateUnit="r/s",a.dmLimReqform.limReqReject=!0):"N"==i.reject?(a.dmLimReqSwitch=!0,a.dmLimReqform.limReqRate=/^(\d+)(.*)/.exec(i.rate)[1],a.rateUnit=/^(\d+)(.*)/.exec(i.rate)[2],a.dmLimReqform.limReqReject=!1):(a.dmLimReqSwitch=!1,a.dmLimReqform.limReqRate="",a.rateUnit="r/s",a.dmLimReqform.limReqReject=!1),e(i)}else a.$message.error(a.$t("lg.failed")+": "+t.data.data.message)}).catch(function(t){console.log(t)})})},limReqmodalClose:function(){this.$emit("setbydmlimReqmodal",!1)},submitLimReq:function(){var t=this;this.$refs.dmLimReqform.validate(function(e){if(e){var i=t;i.limReqmodalLoading=!0;var a=!1,n={};i.dmLimReqform.limReqReject?n={rate:"10r/s",reject:"Y"}:i.dmLimReqSwitch?n={rate:i.dmLimReqform.limReqRate+i.rateUnit,reject:"N"}:a=!0;var r="post";a&&(r="delete"),o.a[r](i.url,n).then(function(t){0==t.data.responseCode?(i.$message({type:"success",message:i.$t("lg.success")}),i.limReqmodalClose()):i.$message.error(i.$t("lg.failed")+": "+t.data.data.message),i.limReqmodalLoading=!1}).catch(function(t){console.log(t)})}})},rejectSwitchEvent:function(){this.dmLimReqSwitch=!1},limReqSwitchEvent:function(){this.dmLimReqform.limReqReject=!1}},components:{loading:s.a}},d={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-dialog",{attrs:{width:"40%",title:t.domainObj.domainName+":"+t.domainObj.port,visible:t.isShow,"close-on-click-modal":!1,"before-close":t.limReqmodalClose},on:{"update:visible":function(e){t.isShow=e}}},[i("p",{staticClass:"tips"},[t._v("注：拒绝、限流二者不能同时开启")]),t._v(" "),i("el-form",{ref:"dmLimReqform",attrs:{model:t.dmLimReqform,rules:t.dmLimReqformRules,"label-width":"60px"}},[i("div",{staticClass:"orderBoxJamb",staticStyle:{"margin-bottom":"20px"}},[i("el-form-item",{attrs:{label:"拒绝",prop:"limReqReject"}},[i("el-switch",{on:{change:function(e){t.rejectSwitchEvent()}},model:{value:t.dmLimReqform.limReqReject,callback:function(e){t.$set(t.dmLimReqform,"limReqReject",e)},expression:"dmLimReqform.limReqReject"}})],1)],1),t._v(" "),i("div",{staticClass:"orderBoxJamb"},[i("el-form-item",{attrs:{label:"限流:"}},[i("el-switch",{attrs:{title:t.dmLimReqSwitch?t.$t("lg.clickoff"):""},on:{change:function(e){t.limReqSwitchEvent()}},model:{value:t.dmLimReqSwitch,callback:function(e){t.dmLimReqSwitch=e},expression:"dmLimReqSwitch"}})],1),t._v(" "),t.dmLimReqSwitch?i("el-form-item",{attrs:{label:"速率",prop:"limReqRate"}},[i("el-input",{staticStyle:{width:"60%"},attrs:{placeholder:"速率"},model:{value:t.dmLimReqform.limReqRate,callback:function(e){t.$set(t.dmLimReqform,"limReqRate","string"==typeof e?e.trim():e)},expression:"dmLimReqform.limReqRate"}}),t._v(" "),i("el-select",{staticStyle:{width:"38%"},model:{value:t.rateUnit,callback:function(e){t.rateUnit=e},expression:"rateUnit"}},t._l(t.rateUnitOpt,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1):t._e()],1),t._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:t.submitLimReq}},[t._v(t._s(t.$t("lg.save")))]),t._v(" "),i("el-button",{on:{click:t.limReqmodalClose}},[t._v(t._s(t.$t("lg.cancel")))])],1)],1),t._v(" "),i("loading",{directives:[{name:"show",rawName:"v-show",value:t.limReqmodalLoading,expression:"limReqmodalLoading"}],attrs:{title:t.$t("lg.handling")}})],1)],1)},staticRenderFns:[]};var u=i("VU/8")(c,d,!1,function(t){i("S/wy")},"data-v-4c7bf72f",null);e.a=u.exports},ysl6:function(t,e){}});
//# sourceMappingURL=1.992f77dc9bf968046c16.js.map