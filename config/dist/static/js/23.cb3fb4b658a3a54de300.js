webpackJsonp([23],{Gq9n:function(e,t,s){"use strict";var a=s("mtWM"),o=s.n(a),n=s("qqiS"),d=s("yJCr"),r=(s("xrTZ").Base64,{props:{editShow:{type:Boolean},ntpData:{type:Object},shadownode:{type:String}},watch:{editShow:function(){this.addform.server=this.ntpData.server,this.addform.authCode=this.ntpData.authCode}},data:function(){return{userloading:!1,addform:{server:"",authCode:""},addformRules:{server:[{required:!0,message:this.$t("lg.required"),trigger:"blur"}]}}},methods:{saveNtp:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.userloading=!0;var s={authCode:t.addform.authCode,server:t.addform.server},a=d.b+"pe/shadow/tacacsConf/post/"+t.shadownode;o.a.post(a,s).then(function(e){0==e.data.responseCode?(t.$emit("haseditshadow"),t.$message({type:"success",message:t.$t("lg.success")}),t.resetForm()):t.$message.error(t.$t("lg.failed")),t.userloading=!1}).catch(function(e){t.$message.error(e.data),t.userloading=!1})}})},resetForm:function(){this.$emit("eidtclose")}},components:{loading:n.a}}),i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{width:"40%",title:"修改",visible:e.editShow,"close-on-click-modal":!1,"before-close":e.resetForm},on:{"update:visible":function(t){e.editShow=t}}},[s("el-form",{ref:"addform",attrs:{model:e.addform,rules:e.addformRules,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"tacacs服务器IP",prop:"server"}},[s("el-input",{model:{value:e.addform.server,callback:function(t){e.$set(e.addform,"server","string"==typeof t?t.trim():t)},expression:"addform.server"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"授权码",prop:"authCode"}},[s("el-input",{model:{value:e.addform.authCode,callback:function(t){e.$set(e.addform,"authCode","string"==typeof t?t.trim():t)},expression:"addform.authCode"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveNtp("addform")}}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:function(t){e.resetForm()}}},[e._v(e._s(e.$t("lg.cancel")))])],1)],1),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.userloading,expression:"userloading"}],attrs:{title:e.$t("lg.loading")}})],1)],1)},staticRenderFns:[]},l=s("VU/8")(r,i,!1,null,null,null);t.a=l.exports},b9NO:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("mtWM"),o=s.n(a),n=s("qqiS"),d=s("yJCr"),r=(s("xrTZ").Base64,{props:{editShow:{type:Boolean},ntpData:{type:Object},shadownode:{type:String}},watch:{editShow:function(){this.addform.server=this.ntpData.server}},data:function(){return{userloading:!1,addform:{server:""},addformRules:{server:[]}}},methods:{saveNtp:function(e){var t=this;this.$refs[e].validate(function(e){if(e){t.userloading=!0;var s={server:t.addform.server},a=d.b+"pe/shadow/syslogConf/post/"+t.shadownode;o.a.post(a,s).then(function(e){0==e.data.responseCode?(t.$emit("hasadduser"),t.$message({type:"success",message:t.$t("lg.success")}),t.resetForm()):t.$message.error(t.$t("lg.failed")),t.userloading=!1}).catch(function(e){t.$message.error(e.data),t.userloading=!1})}})},resetForm:function(){this.$refs.addform.resetFields(),this.$emit("eidtclose")}},components:{loading:n.a}}),i={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("el-dialog",{attrs:{width:"40%",title:"修改",visible:e.editShow,"close-on-click-modal":!1,"before-close":e.resetForm},on:{"update:visible":function(t){e.editShow=t}}},[s("el-form",{ref:"addform",attrs:{model:e.addform,rules:e.addformRules,"label-width":"140px"}},[s("el-form-item",{attrs:{label:"服务器IP",prop:"server"}},[s("el-input",{model:{value:e.addform.server,callback:function(t){e.$set(e.addform,"server","string"==typeof t?t.trim():t)},expression:"addform.server"}})],1),e._v(" "),s("el-form-item",[s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveNtp("addform")}}},[e._v("保存")]),e._v(" "),s("el-button",{on:{click:function(t){e.resetForm()}}},[e._v(e._s(e.$t("lg.cancel")))])],1)],1),e._v(" "),s("loading",{directives:[{name:"show",rawName:"v-show",value:e.userloading,expression:"userloading"}],attrs:{title:e.$t("lg.loading")}})],1)],1)},staticRenderFns:[]},l=s("VU/8")(r,i,!1,null,null,null).exports,c=s("Gq9n"),h={components:{syslogedit:l,loading:n.a,shadowtacacsedit:c.a},created:function(){this.$store.state.contentLoading=!0,this.getShadownode()},data:function(){return{tabActiveName:"CM",shadownodeVal:"",shadownodeOpts:[],shadownodeData:{},users:{},addShow:!1,shadowaddShow:!1,editShow:!1,ntpData:{},editIndex:0,shadoweditShow:!1,shadowntpData:{},shadoweditIndex:0,userSetingloading:!1}},methods:{getShadownodeData:function(e){var t=this,s=e||this.shadownodeVal,a=d.b+"pe/shadow/syslogConf/get/"+s;o.a.get(a).then(function(e){if(200==e.status){var s=e.data.data;t.users=s,t.$store.state.contentLoading=!1}}).catch(function(e){console.log(e)})},getShadownode:function(){var e=this,t=d.b+"pe/shadow/nodeId/all";o.a.get(t).then(function(t){if(200==t.status){var s=t.data.data;e.shadownodeOpts=s,e.shadownodeOpts.length>0&&(e.shadownodeVal=e.shadownodeOpts[0],e.getShadownodeData())}}).catch(function(e){console.log(e)})},getSyslog:function(){var e=this,t=this.shadownodeVal,s=d.b+"pe/shadow/syslogConf/get/"+t;o.a.get(s).then(function(t){if(200==t.status){var s=t.data.data;e.users=s,e.$store.state.contentLoading=!1}}).catch(function(e){console.log(e)})},addCM:function(){this.addShow=!0},editNtp:function(e){console.log(e),this.ntpData=e,this.editShow=!0},shadoweditNtp:function(e){this.shadowntpData=e,this.shadoweditShow=!0},usDialogClose:function(){this.isShowUsDialog=!1},delNtp:function(e){var t=this;this.$confirm("确认删除？",this.$t("lg.tip"),{confirmButtonText:this.$t("lg.yes"),cancelButtonText:this.$t("lg.cancel"),type:"warning"}).then(function(){t.$store.state.contentLoading=!0;var e=d.b+"pe/shadow/syslogConf/delete/"+t.shadownodeVal;o.a.delete(e).then(function(e){0==e.data.responseCode?(t.getSyslog(),t.$message({type:"success",message:t.$t("lg.success")})):t.$message.error(t.$t("lg.failed")+": "+e.data.data.message),t.$store.state.contentLoading=!1}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:t.$t("lg.canceled")})})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"users-wrapper"},[s("div",{staticClass:"usersContent"},[s("div",{staticStyle:{"margin-bottom":"12px"}},[s("el-select",{attrs:{placeholder:"请选择shadow节点"},on:{change:e.getShadownodeData},model:{value:e.shadownodeVal,callback:function(t){e.shadownodeVal=t},expression:"shadownodeVal"}},e._l(e.shadownodeOpts,function(e){return s("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),s("table",[e._m(0),e._v(" "),s("tbody",[s("tr",[s("td",[e._v(e._s(e.users.server||"----"))]),e._v(" "),s("td",[e._v(" "+e._s(e.users.syslogSwitch))]),e._v(" "),s("td",{staticClass:"text-center"},[s("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(t){e.editNtp(e.users)}}},[s("i",{staticClass:"el-icon-edit"}),e._v(e._s(e.$t("lg.edit")))]),e._v(" "),s("a",{staticClass:"edit-del-a",attrs:{href:"javascript:;"},on:{click:function(t){e.delNtp(e.users)}}},[s("i",{staticClass:"el-icon-close"}),e._v(e._s(e.$t("lg.delete")))])])])])])]),e._v(" "),s("syslogedit",{attrs:{editShow:e.editShow,ntpData:e.users,shadownode:e.shadownodeVal},on:{eidtclose:function(t){e.editShow=!1},hasadduser:e.getSyslog}})],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",[this._v("服务器IP")]),this._v(" "),t("th",[this._v("配置开关")]),this._v(" "),t("th",{attrs:{width:"280"}})])])}]};var f=s("VU/8")(h,u,!1,function(e){s("db4h")},"data-v-26f88df4",null);t.default=f.exports},db4h:function(e,t){}});
//# sourceMappingURL=23.cb3fb4b658a3a54de300.js.map